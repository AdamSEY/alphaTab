(function(){function y(a,b){function d(){}d.prototype=a;var e=new d;for(var f in b)e[f]=b[f];return e}function R(a){if(a instanceof Array)return function(){return v.iter(a)};return typeof a.iterator=="function"?M(a,a.iterator):a.iterator}function M(a,b){if(b.__id__==null)b.__id__=S++;var d;if(a.hx__closures__==null)a.hx__closures__={};else d=a.hx__closures__[b.__id__];if(d==null){d=function(){return d.method.apply(d.scope,arguments)};d.scope=a;d.method=b;a.hx__closures__[b.__id__]=d}return d}var B=
function(){return x.Boot.__string_rec(this,"")},K=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};K.__name__=true;K.prototype={replace:function(a,b){return a.replace(this.r,b)},matched:function(a){if(this.r.m!=null&&a>=0&&a<this.r.m.length)a=this.r.m[a];else throw"EReg::matched";return a},match:function(a){if(this.r.global)this.r.lastIndex=0;this.r.m=this.r.exec(a);this.r.s=a;return this.r.m!=null},__class__:K};var v=function(){};v.__name__=true;v.cca=function(a,b){var d=a.charCodeAt(b);
if(d==d)return d};v.substr=function(a,b,d){if(b!=null&&b!=0&&d!=null&&d<0)return"";if(d==null)d=a.length;if(b<0){b=a.length+b;if(b<0)b=0}else if(d<0)d=a.length+d-b;return a.substr(b,d)};v.remove=function(a,b){for(var d=0,e=a.length;d<e;){if(a[d]==b){a.splice(d,1);return true}d++}return false};v.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var G=function(){};G.__name__=true;G.has=function(a,b){for(var d=R(a)();d.hasNext();)if(d.next()==
b)return true;return false};var L=function(){this.length=0};L.__name__=true;L.prototype={iterator:function(){return{h:this.h,hasNext:function(){return this.h!=null},next:function(){if(this.h==null)return null;var a=this.h[0];this.h=this.h[1];return a}}},add:function(a){a=[a];if(this.h==null)this.h=a;else this.q[1]=a;this.q=a;this.length++},__class__:L};var O=function(){};O.__name__=true;var l=function(){};l.__name__=true;l.string=function(a){return x.Boot.__string_rec(a,"")};l.parseInt=function(a){var b=
parseInt(a,10);if(b==0&&(v.cca(a,1)==120||v.cca(a,1)==88))b=parseInt(a);if(isNaN(b))return null;return b};l.parseFloat=function(a){return parseFloat(a)};var F=function(){this.b=""};F.__name__=true;F.prototype={addSub:function(a,b,d){this.b+=d==null?v.substr(a,b,null):v.substr(a,b,d)},__class__:F};var q=function(){};q.__name__=true;q.isSpace=function(a,b){var d=v.cca(a,b);return d>8&&d<14||d==32};q.ltrim=function(a){for(var b=a.length,d=0;d<b&&q.isSpace(a,d);)d++;return d>0?v.substr(a,d,b-d):a};q.rtrim=
function(a){for(var b=a.length,d=0;d<b&&q.isSpace(a,b-d-1);)d++;return d>0?v.substr(a,0,b-d):a};q.trim=function(a){return q.ltrim(q.rtrim(a))};q.replace=function(a,b,d){return a.split(b).join(d)};q.hex=function(a,b){var d="";do{d="0123456789ABCDEF".charAt(a&15)+d;a>>>=4}while(a>0);if(b!=null)for(;d.length<b;)d="0"+d;return d};var N=function(){};N.__name__=true;N.getEnumConstructs=function(a){return a.__constructs__.slice()};var o=function(){};o.__name__=true;o.parse=function(a){return p.xml.Parser.parse(a)};
o.createElement=function(a){var b=new o;b.nodeType=o.Element;b._children=[];b._attributes=new p.ds.StringMap;b.set_nodeName(a);return b};o.createPCData=function(a){var b=new o;b.nodeType=o.PCData;b.set_nodeValue(a);return b};o.createCData=function(a){var b=new o;b.nodeType=o.CData;b.set_nodeValue(a);return b};o.createComment=function(a){var b=new o;b.nodeType=o.Comment;b.set_nodeValue(a);return b};o.createDocType=function(a){var b=new o;b.nodeType=o.DocType;b.set_nodeValue(a);return b};o.createProcessingInstruction=
function(a){var b=new o;b.nodeType=o.ProcessingInstruction;b.set_nodeValue(a);return b};o.createDocument=function(){var a=new o;a.nodeType=o.Document;a._children=[];return a};o.prototype={addChild:function(a){if(this._children==null)throw"bad nodetype";a._parent!=null&&v.remove(a._parent._children,a);a._parent=this;this._children.push(a)},firstElement:function(){if(this._children==null)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var d=this._children[a];if(d.nodeType==o.Element)return d;
a++}return null},elementsNamed:function(a){if(this._children==null)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,d=this.x.length;b<d;){var e=this.x[b];if(e.nodeType==o.Element&&e._nodeName==a)break;b++}this.cur=b;return b<d},next:function(){for(var b=this.cur,d=this.x.length;b<d;){var e=this.x[b];b++;if(e.nodeType==o.Element&&e._nodeName==a){this.cur=b;return e}}return null}}},elements:function(){if(this._children==null)throw"bad nodetype";return{cur:0,x:this._children,
hasNext:function(){for(var a=this.cur,b=this.x.length;a<b;){if(this.x[a].nodeType==o.Element)break;a+=1}this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var d=this.x[a];a+=1;if(d.nodeType==o.Element){this.cur=a;return d}}return null}}},iterator:function(){if(this._children==null)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},exists:function(a){if(this.nodeType!=o.Element)throw"bad nodeType";
return this._attributes.exists(a)},set:function(a,b){if(this.nodeType!=o.Element)throw"bad nodeType";this._attributes.set(a,b)},get:function(a){if(this.nodeType!=o.Element)throw"bad nodeType";return this._attributes.get(a)},set_nodeValue:function(a){if(this.nodeType==o.Element||this.nodeType==o.Document)throw"bad nodeType";return this._nodeValue=a},get_nodeValue:function(){if(this.nodeType==o.Element||this.nodeType==o.Document)throw"bad nodeType";return this._nodeValue},set_nodeName:function(a){if(this.nodeType!=
o.Element)throw"bad nodeType";return this._nodeName=a},get_nodeName:function(){if(this.nodeType!=o.Element)throw"bad nodeType";return this._nodeName},__class__:o};var c={};c.Main=function(){};c.Main.__name__=true;c.Main.main=function(){};c.file={};c.file.FileFormatException=function(a){this.message=a};c.file.FileFormatException.__name__=true;c.file.FileFormatException.prototype={__class__:c.file.FileFormatException};c.file.SongLoader=function(){};c.file.SongLoader.__name__=true;c.file.SongLoader.loadSong=
function(a,b,d){var e=c.platform.PlatformFactory.getLoader();if(e==null)throw"No file loader for you platform found";e.loadBinary("GET",a,function(f){for(var g=c.file.SongReader.availableReaders(),h=0;h<g.length;){var i=g[h];++h;try{f.seek(0);i.init(f,b);var j=i.readSong();c.file.SongReader.finalize(j);d(j);return}catch(k){if(!x.Boot.__instanceof(k,c.file.FileFormatException))throw k;}}f.close();throw new c.file.FileFormatException("No reader for requested file found");},function(f){throw f;})};c.file.SongReader=
function(){};c.file.SongReader.__name__=true;c.file.SongReader.availableReaders=function(){var a=[];a.push(new c.file.gpx.GpxReader);a.push(new c.file.guitarpro.Gp5Reader);a.push(new c.file.guitarpro.Gp4Reader);a.push(new c.file.guitarpro.Gp3Reader);a.push(new c.file.musicxml.MusicXmlReader);return a};c.file.SongReader.finalize=function(a){for(var b=new c.midi.MidiRepeatController(a),d=c.model.Duration.QUARTER_TIME;!b.finished();){var e=a.measureHeaders[b.index];b.process();if(e.realStart<0)e.realStart=
d;if(b.shouldPlay)d+=e.length()}};c.file.SongReader.prototype={getTiedNoteValue:function(a,b){var d=b.measureCount();if(d>0)for(var e=0;e<d;){var f=e++;f=b.measures[d-1-f];for(var g=0,h=f.beats.length;g<h;){var i=g++;i=f.beats[f.beats.length-1-i];for(var j=0,k=i.voices.length;j<k;){var m=j++;m=i.voices[m];if(!m.isEmpty)for(var n=0,u=m.notes.length;n<u;){var r=n++;r=m.notes[r];if(r.string==a)return r.value}}}}return-1},readSong:function(){return this.factory.newSong()},init:function(a,b){this.data=
a;this.factory=b},newString:function(a,b){var d=this.factory.newString();d.number=a;d.value=b;return d},createDefaultStrings:function(a){a.push(this.newString(1,64));a.push(this.newString(2,59));a.push(this.newString(3,55));a.push(this.newString(4,50));a.push(this.newString(5,45));a.push(this.newString(6,40))},__class__:c.file.SongReader};c.file.alphatex={};c.file.alphatex.AlphaTexParser=function(){c.file.SongReader.call(this)};c.file.alphatex.AlphaTexParser.__name__=true;c.file.alphatex.AlphaTexParser.isLetter=
function(a){var b=v.cca(a,0);return!c.file.alphatex.AlphaTexParser.isTerminal(a)&&(b>=33&&b<=47||b>=58&&b<=126||b>128)};c.file.alphatex.AlphaTexParser.isTerminal=function(a){return a=="."||a=="{"||a=="}"||a=="["||a=="]"||a=="("||a==")"||a=="|"||a=="'"||a=='"'||a=="\\"};c.file.alphatex.AlphaTexParser.__super__=c.file.SongReader;c.file.alphatex.AlphaTexParser.prototype=y(c.file.SongReader.prototype,{readNumber:function(){var a="";do{a+=this._ch;this.nextChar()}while(this.isDigit(this._ch));return l.parseInt(a)},
readName:function(){var a="";do{a+=this._ch;this.nextChar()}while(c.file.alphatex.AlphaTexParser.isLetter(this._ch)||this.isDigit(this._ch));return a},isDigit:function(a){var b=v.cca(a,0);return b>=48&&b<=57||a=="-"&&this._allowNegatives},newSy:function(){this._sy=c.file.alphatex.AlphaTexSymbols.No;do if(this._ch==c.file.alphatex.AlphaTexParser.EOL)this._sy=c.file.alphatex.AlphaTexSymbols.Eof;else if(this._ch==" "||this._ch=="\n"||this._ch=="\r"||this._ch=="\t")this.nextChar();else if(this._ch=='"'||
this._ch=="'"){this.nextChar();this._syData="";for(this._sy=c.file.alphatex.AlphaTexSymbols.String;this._ch!='"'&&this._ch!="'"&&this._ch!=c.file.alphatex.AlphaTexParser.EOL;){this._syData+=this._ch;this.nextChar()}this.nextChar()}else if(this._ch=="-")if(this._allowNegatives&&this.isDigit(this._ch)){var a=this.readNumber();this._sy=c.file.alphatex.AlphaTexSymbols.Number;this._syData=a}else{this._sy=c.file.alphatex.AlphaTexSymbols.String;this._syData=this.readName()}else if(this._ch=="."){this._sy=
c.file.alphatex.AlphaTexSymbols.Dot;this.nextChar()}else if(this._ch==":"){this._sy=c.file.alphatex.AlphaTexSymbols.DoubleDot;this.nextChar()}else if(this._ch=="("){this._sy=c.file.alphatex.AlphaTexSymbols.LParensis;this.nextChar()}else if(this._ch=="\\"){this.nextChar();a=this.readName();this._sy=c.file.alphatex.AlphaTexSymbols.MetaCommand;this._syData=a}else if(this._ch==")"){this._sy=c.file.alphatex.AlphaTexSymbols.RParensis;this.nextChar()}else if(this._ch=="{"){this._sy=c.file.alphatex.AlphaTexSymbols.LBrace;
this.nextChar()}else if(this._ch=="}"){this._sy=c.file.alphatex.AlphaTexSymbols.RBrace;this.nextChar()}else if(this._ch=="|"){this._sy=c.file.alphatex.AlphaTexSymbols.Pipe;this.nextChar()}else if(this.isDigit(this._ch)){a=this.readNumber();this._sy=c.file.alphatex.AlphaTexSymbols.Number;this._syData=a}else if(c.file.alphatex.AlphaTexParser.isLetter(this._ch)){a=this.readName();if(c.model.Tuning.isTuning(a)){this._sy=c.file.alphatex.AlphaTexSymbols.Tuning;this._syData=a.toLowerCase()}else{this._sy=
c.file.alphatex.AlphaTexSymbols.String;this._syData=a}}else this.error("symbol",c.file.alphatex.AlphaTexSymbols.String,false);while(this._sy==c.file.alphatex.AlphaTexSymbols.No)},nextChar:function(){this._ch=this._curChPos<this.data.length()?this.data.readChar():c.file.alphatex.AlphaTexParser.EOL;this._curChPos++},parseTuning:function(a){a=c.model.Tuning.getTuningForText(a);a<0&&this.error("tuning-value",c.file.alphatex.AlphaTexSymbols.String,false);return a},parseKeySignature:function(a){switch(a.toLowerCase()){case "cb":return-7;
case "gb":return-6;case "db":return-5;case "ab":return-4;case "eb":return-3;case "bb":return-2;case "f":return-1;case "c":return 0;case "g":return 1;case "d":return 2;case "a":return 3;case "e":return 4;case "b":return 5;case "f#":return 6;case "c#":return 7;default:return 0}},parseClef:function(a){switch(a.toLowerCase()){case "treble":return 0;case "bass":return 1;case "tenor":return 2;case "alto":return 3;default:return 0}},noteEffects:function(a,b){if(this._sy==c.file.alphatex.AlphaTexSymbols.LBrace){for(this.newSy();this._sy==
c.file.alphatex.AlphaTexSymbols.String;){this._syData=l.string(this._syData).toLowerCase();if(this._syData=="b"){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.LParensis&&this.error("bend-effect",c.file.alphatex.AlphaTexSymbols.LParensis);this.newSy();for(var d=[];this._sy!=c.file.alphatex.AlphaTexSymbols.RParensis&&this._sy!=c.file.alphatex.AlphaTexSymbols.Eof;){this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&this.error("bend-effect-value",c.file.alphatex.AlphaTexSymbols.Number);d.push(new c.model.effects.BendPoint(0,
Math.abs(this._syData),false));this.newSy()}if(d.length>12)d=d.slice(0,12);for(var e=d.length,f=Math.floor(12/e),g=0,h=this.factory.newBendEffect();g<e;){d[g].position=Math.floor(Math.min(12,g*f));h.points.push(d[g]);g++}b.bend=h;this._sy!=c.file.alphatex.AlphaTexSymbols.RParensis&&this.error("bend-effect",c.file.alphatex.AlphaTexSymbols.RParensis);this.newSy()}else if(this._syData=="nh"){d=this.factory.newHarmonicEffect();d.type=0;b.harmonic=d;this.newSy()}else if(this._syData=="ah"){d=this.factory.newHarmonicEffect();
d.type=1;b.harmonic=d;this.newSy()}else if(this._syData=="th"){d=this.factory.newHarmonicEffect();d.type=2;b.harmonic=d;this.newSy()}else if(this._syData=="ph"){d=this.factory.newHarmonicEffect();d.type=3;b.harmonic=d;this.newSy()}else if(this._syData=="sh"){d=this.factory.newHarmonicEffect();d.type=4;b.harmonic=d;this.newSy()}else if(this._syData=="gr"){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&!(this._sy==c.file.alphatex.AlphaTexSymbols.String&&l.string(this._syData).toLowerCase()==
"x")&&this.error("grace-effect-fret",c.file.alphatex.AlphaTexSymbols.Number);e=(f=l.string(this._syData).toLowerCase()=="x")?0:this._syData;this.newSy();d=16;if(this._sy==c.file.alphatex.AlphaTexSymbols.Number){if(this._syData!=16&&this._syData!=32&&this._syData!=64)this._syData=16;d=this._syData;this.newSy()}g=0;if(this._sy==c.file.alphatex.AlphaTexSymbols.String)if(this._syData=="s"){g=1;this.newSy()}else if(this._syData=="b"){g=2;this.newSy()}else if(this._syData=="h"){g=3;this.newSy()}h=this.factory.newGraceEffect();
h.duration=d;h.fret=e;h.isDead=f;h.transition=g;h.velocity=95;b.grace=h}else if(this._syData=="tr"){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&this.error("trill-effect",c.file.alphatex.AlphaTexSymbols.Number);e=this._syData;this.newSy();d=16;if(this._sy==c.file.alphatex.AlphaTexSymbols.Number){if(this._syData!=16&&this._syData!=32&&this._syData!=64)this._syData=16;d=this._syData;this.newSy()}f=this.factory.newTrillEffect();f.duration.value=d;f.fret=e;b.trill=f}else if(this._syData==
"tp"){this.newSy();d=8;if(this._sy==c.file.alphatex.AlphaTexSymbols.Number){if(this._syData!=8&&this._syData!=16&&this._syData!=32)this._syData=8;d=this._syData;this.newSy()}e=this.factory.newTremoloPickingEffect();e.duration.value=d;b.tremoloPicking=e}else if(this._syData=="v"){this.newSy();b.vibrato=true}else if(this._syData=="sl"){this.newSy();b.slide=true;b.slideType=0}else if(this._syData=="ss"){this.newSy();b.slide=true;b.slideType=1}else if(this._syData=="h"){this.newSy();b.hammer=true}else if(this._syData==
"g"){this.newSy();b.ghostNote=true}else if(this._syData=="ac"){this.newSy();b.accentuatedNote=true}else if(this._syData=="hac"){this.newSy();b.heavyAccentuatedNote=true}else if(this._syData=="pm"){this.newSy();b.palmMute=true}else if(this._syData=="st"){this.newSy();b.staccato=true}else if(this._syData=="lr"){this.newSy();b.letRing=true}else this.applyBeatEffect(a)||this.error(this._syData,c.file.alphatex.AlphaTexSymbols.String,false)}this._sy!=c.file.alphatex.AlphaTexSymbols.RBrace&&this.error("note-effect",
c.file.alphatex.AlphaTexSymbols.RBrace,false);this.newSy()}},note:function(a){if(this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&!(this._sy==c.file.alphatex.AlphaTexSymbols.String&&(l.string(this._syData).toLowerCase()=="x"||l.string(this._syData).toLowerCase()=="-")))this.error("note-fret",c.file.alphatex.AlphaTexSymbols.Number);var b=l.string(this._syData).toLowerCase()=="x",d=l.string(this._syData).toLowerCase()=="-",e=b||d?0:this._syData;this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.Dot&&
this.error("note",c.file.alphatex.AlphaTexSymbols.Dot);this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&this.error("note-string",c.file.alphatex.AlphaTexSymbols.Number);var f=this._syData;if(f<1||f>this._track.stringCount())this.error("note-string",c.file.alphatex.AlphaTexSymbols.Number,false);this.newSy();var g=this.factory.newNoteEffect();this.noteEffects(a,g);a=this.factory.newNote();a.string=f;a.effect=g;a.effect.deadNote=b;a.isTiedNote=d;a.value=d?this.getTiedNoteValue(f,this._track):
e;return a},applyBeatEffect:function(a){if(this._syData=="f"){a.effect.fadeIn=true;this.newSy();return true}else if(this._syData=="v"){a.effect.vibrato=true;this.newSy();return true}else if(this._syData=="t"){a.effect.tapping=true;this.newSy();return true}else if(this._syData=="s"){a.effect.slapping=true;this.newSy();return true}else if(this._syData=="p"){a.effect.popping=true;this.newSy();return true}else if(this._syData=="dd"){a.voices[0].duration.isDoubleDotted=true;this.newSy();return true}else if(this._syData==
"d"){a.voices[0].duration.isDotted=true;this.newSy();return true}else if(this._syData=="su"){a.effect.stroke.direction=1;this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.Number){a.effect.stroke.value=this._syData==4||this._syData==8||this._syData==16||this._syData==32||this._syData==64?this._syData:8;this.newSy()}else a.effect.stroke.value=8;return true}else if(this._syData=="sd"){a.effect.stroke.direction=2;this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.Number){a.effect.stroke.value=
this._syData==4||this._syData==8||this._syData==16||this._syData==32||this._syData==64?this._syData:8;this.newSy()}else a.effect.stroke.value=8;return true}else if(this._syData=="tu"){this.newSy();if(this._sy!=c.file.alphatex.AlphaTexSymbols.Number){this.error("tuplet",c.file.alphatex.AlphaTexSymbols.Number);return false}a=a.voices[0].duration;switch(this._syData){case 3:a.tuplet.enters=3;a.tuplet.times=2;break;case 5:a.tuplet.enters=5;a.tuplet.times=4;break;case 6:a.tuplet.enters=6;a.tuplet.times=
4;break;case 7:a.tuplet.enters=7;a.tuplet.times=4;break;case 9:a.tuplet.enters=9;a.tuplet.times=8;break;case 10:a.tuplet.enters=10;a.tuplet.times=8;break;case 11:a.tuplet.enters=11;a.tuplet.times=8;break;case 12:a.tuplet.enters=12;a.tuplet.times=8;break}this.newSy();return true}else if(this._syData=="tb"){this.newSy();if(this._sy!=c.file.alphatex.AlphaTexSymbols.LParensis){this.error("tremolobar-effect",c.file.alphatex.AlphaTexSymbols.LParensis);return false}this._allowNegatives=true;this.newSy();
for(var b=[];this._sy!=c.file.alphatex.AlphaTexSymbols.RParensis&&this._sy!=c.file.alphatex.AlphaTexSymbols.Eof;){if(this._sy!=c.file.alphatex.AlphaTexSymbols.Number){this.error("tremolobar-effect",c.file.alphatex.AlphaTexSymbols.Number);return false}b.push(new c.model.effects.BendPoint(0,this._syData,false));this.newSy()}if(b.length>12)b=b.slice(0,12);for(var d=b.length,e=Math.floor(12/d),f=0,g=this.factory.newBendEffect();f<d;){b[f].position=Math.floor(Math.min(12,f*e));g.points.push(b[f]);f++}a.effect.tremoloBar=
g;this._allowNegatives=false;if(this._sy!=c.file.alphatex.AlphaTexSymbols.RParensis){this.error("tremolobar-effect",c.file.alphatex.AlphaTexSymbols.RParensis);return false}this.newSy();return true}return false},beatEffects:function(a){if(this._sy==c.file.alphatex.AlphaTexSymbols.LBrace){for(this.newSy();this._sy==c.file.alphatex.AlphaTexSymbols.String;){this._syData=l.string(this._syData).toLowerCase();this.applyBeatEffect(a)||this.error("beat-effects",c.file.alphatex.AlphaTexSymbols.String,false)}this._sy!=
c.file.alphatex.AlphaTexSymbols.RBrace&&this.error("beat-effects",c.file.alphatex.AlphaTexSymbols.RBrace);this.newSy()}},beat:function(a){if(this._sy==c.file.alphatex.AlphaTexSymbols.DoubleDot){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&this.error("duration",c.file.alphatex.AlphaTexSymbols.Number);if(this._syData==1||this._syData==2||this._syData==4||this._syData==8||this._syData==16||this._syData==32||this._syData==64)this._currentDuration=this._syData;else this.error("duration",
c.file.alphatex.AlphaTexSymbols.Number,false);this.newSy()}else{var b=this.factory.newBeat();b.start=0;if(a.beats.length==0)b.start=a.header.start;else{var d=a.beats.length-1;b.start=a.beats[d].start+a.beats[d].voices[0].duration.time()}d=b.voices[0];d.isEmpty=false;if(this._sy==c.file.alphatex.AlphaTexSymbols.LParensis){this.newSy();for(d.addNote(this.note(b));this._sy!=c.file.alphatex.AlphaTexSymbols.RParensis&&this._sy!=c.file.alphatex.AlphaTexSymbols.Eof;)d.addNote(this.note(b));this._sy!=c.file.alphatex.AlphaTexSymbols.RParensis&&
this.error("note-list",c.file.alphatex.AlphaTexSymbols.RParensis);this.newSy()}else this._sy==c.file.alphatex.AlphaTexSymbols.String&&l.string(this._syData).toLowerCase()=="r"?this.newSy():d.addNote(this.note(b));if(this._sy==c.file.alphatex.AlphaTexSymbols.Dot){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&this.error("duration",c.file.alphatex.AlphaTexSymbols.Number);if(this._syData==1||this._syData==2||this._syData==4||this._syData==8||this._syData==16||this._syData==32||this._syData==
64)d.duration.value=this._syData;else this.error("duration",c.file.alphatex.AlphaTexSymbols.Number,false);this.newSy()}else d.duration.value=this._currentDuration;this.beatEffects(b);a.addBeat(b)}},measureMeta:function(a){for(var b=a.header;this._sy==c.file.alphatex.AlphaTexSymbols.MetaCommand;){if(this._syData=="ts"){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&this.error("timesignature-numerator",c.file.alphatex.AlphaTexSymbols.Number);b.timeSignature.numerator=this._syData;this.newSy();
this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&this.error("timesignature-denominator",c.file.alphatex.AlphaTexSymbols.Number);b.timeSignature.denominator.value=this._syData}else if(this._syData=="ro")b.isRepeatOpen=true;else if(this._syData=="rc"){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&this.error("repeatclose",c.file.alphatex.AlphaTexSymbols.Number);b.repeatClose=l.parseInt(this._syData)-1}else if(this._syData=="ks"){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.String&&
this.error("keysignature",c.file.alphatex.AlphaTexSymbols.String);b.keySignature=c.file.guitarpro.Gp3Reader.toKeySignature(this.parseKeySignature(this._syData))}else if(this._syData=="clef"){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.String&&this.error("clef",c.file.alphatex.AlphaTexSymbols.String);a.clef=this.parseClef(this._syData)}else if(this._syData=="tempo"){this.newSy();this._sy!=c.file.alphatex.AlphaTexSymbols.Number&&this.error("tempo",c.file.alphatex.AlphaTexSymbols.Number);
b.tempo.value=this._syData}else this.error("measure-effects",c.file.alphatex.AlphaTexSymbols.String,false);this.newSy()}},measure:function(a){var b=this.factory.newMeasureHeader();b.number=this._song.measureHeaders.length+1;b.start=this._song.measureHeaders.length==0?c.model.Duration.QUARTER_TIME:this._song.measureHeaders[this._song.measureHeaders.length-1].start+this._song.measureHeaders[this._song.measureHeaders.length-1].length();var d=this.factory.newMeasure(b);b.tempo.copy(a);if(this._song.measureHeaders.length>
0){var e=this._song.measureHeaders[this._song.measureHeaders.length-1];d.clef=this._track.measures[this._song.measureHeaders.length-1].clef;b.keySignature=e.keySignature;b.keySignatureType=e.keySignatureType;e.timeSignature.copy(b.timeSignature)}this.measureMeta(d);a.copy(b.tempo);this._song.addMeasureHeader(b);for(this._track.addMeasure(d);this._sy!=c.file.alphatex.AlphaTexSymbols.Pipe&&this._sy!=c.file.alphatex.AlphaTexSymbols.Eof;)this.beat(d)},measures:function(){var a=this.factory.newTempo();
a.value=this._song.tempo;for(this.measure(a);this._sy!=c.file.alphatex.AlphaTexSymbols.Eof;){this._sy!=c.file.alphatex.AlphaTexSymbols.Pipe&&this.error("measures",c.file.alphatex.AlphaTexSymbols.Pipe);this.newSy();this.measure(a)}},metaData:function(){for(var a=false;this._sy==c.file.alphatex.AlphaTexSymbols.MetaCommand;)if(this._syData=="title"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.String)this._song.title=this._syData;else this.error("title",c.file.alphatex.AlphaTexSymbols.String);
this.newSy();a=true}else if(this._syData=="subtitle"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.String)this._song.subtitle=this._syData;else this.error("subtitle",c.file.alphatex.AlphaTexSymbols.String);this.newSy();a=true}else if(this._syData=="artist"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.String)this._song.artist=this._syData;else this.error("artist",c.file.alphatex.AlphaTexSymbols.String);this.newSy();a=true}else if(this._syData=="album"){this.newSy();if(this._sy==
c.file.alphatex.AlphaTexSymbols.String)this._song.album=this._syData;else this.error("album",c.file.alphatex.AlphaTexSymbols.String);this.newSy();a=true}else if(this._syData=="words"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.String)this._song.words=this._syData;else this.error("words",c.file.alphatex.AlphaTexSymbols.String);this.newSy();a=true}else if(this._syData=="music"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.String)this._song.music=this._syData;else this.error("music",
c.file.alphatex.AlphaTexSymbols.String);this.newSy();a=true}else if(this._syData=="copyright"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.String)this._song.copyright=this._syData;else this.error("copyright",c.file.alphatex.AlphaTexSymbols.String);this.newSy();a=true}else if(this._syData=="tempo"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.Number)this._song.tempo=this._syData;else this.error("tempo",c.file.alphatex.AlphaTexSymbols.Number);this.newSy();a=true}else if(this._syData==
"capo"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.Number)this._track.offset=this._syData;else this.error("capo",c.file.alphatex.AlphaTexSymbols.Number);this.newSy();a=true}else if(this._syData=="tuning"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.Tuning){this._track.strings=[];do{this._track.strings.push(this.newString(this._track.strings.length+1,this.parseTuning(this._syData)));this.newSy()}while(this._sy==c.file.alphatex.AlphaTexSymbols.Tuning)}else this.error("tuning",
c.file.alphatex.AlphaTexSymbols.Tuning);a=true}else if(this._syData=="instrument"){this.newSy();if(this._sy==c.file.alphatex.AlphaTexSymbols.Number){a=this._syData;a>=0&&a<=128?this._track.channel.instrument(this._syData):this.error("instrument",c.file.alphatex.AlphaTexSymbols.Number,false)}else this._sy==c.file.alphatex.AlphaTexSymbols.String?this._track.channel.instrument(c.midi.GeneralMidi.getValue(this._syData)):this.error("instrument",c.file.alphatex.AlphaTexSymbols.Number);this.newSy();a=true}else this.error("metaDataTags",
c.file.alphatex.AlphaTexSymbols.String,false);if(a){this._sy!=c.file.alphatex.AlphaTexSymbols.Dot&&this.error("song",c.file.alphatex.AlphaTexSymbols.Dot);this.newSy()}},song:function(){this.metaData();this.measures()},error:function(a,b,d){if(d==null)d=true;if(d)throw new c.file.FileFormatException(l.string(this._curChPos)+": Error on block "+a+", expected a "+l.string(b)+" found a "+l.string(this._sy));else throw new c.file.FileFormatException(l.string(this._curChPos)+": Error on block "+a+", invalid value:"+
l.string(this._syData));},readSong:function(){this.createDefaultSong();this._curChPos=0;this._currentDuration=4;this.nextChar();this.newSy();this.song();return this._song},createDefaultSong:function(){this._song=this.factory.newSong();this._song.tempo=120;this._song.tempoName="";this._song.hideTempo=false;this._song.pageSetup=this.factory.newPageSetup();this._track=this.factory.newTrack();this._track.number=1;this._track.channel.instrument(25);this._track.channel.channel=c.file.alphatex.AlphaTexParser.TRACK_CHANNELS[0];
this._track.channel.effectChannel=c.file.alphatex.AlphaTexParser.TRACK_CHANNELS[1];this.createDefaultStrings(this._track.strings);this._song.addTrack(this._track)},__class__:c.file.alphatex.AlphaTexParser});c.file.alphatex.AlphaTexSymbols={__ename__:true,__constructs__:["No","Eof","Number","DoubleDot","Dot","String","Tuning","LParensis","RParensis","LBrace","RBrace","Pipe","MetaCommand"]};c.file.alphatex.AlphaTexSymbols.No=["No",0];c.file.alphatex.AlphaTexSymbols.No.toString=B;c.file.alphatex.AlphaTexSymbols.No.__enum__=
c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.Eof=["Eof",1];c.file.alphatex.AlphaTexSymbols.Eof.toString=B;c.file.alphatex.AlphaTexSymbols.Eof.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.Number=["Number",2];c.file.alphatex.AlphaTexSymbols.Number.toString=B;c.file.alphatex.AlphaTexSymbols.Number.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.DoubleDot=["DoubleDot",3];c.file.alphatex.AlphaTexSymbols.DoubleDot.toString=B;c.file.alphatex.AlphaTexSymbols.DoubleDot.__enum__=
c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.Dot=["Dot",4];c.file.alphatex.AlphaTexSymbols.Dot.toString=B;c.file.alphatex.AlphaTexSymbols.Dot.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.String=["String",5];c.file.alphatex.AlphaTexSymbols.String.toString=B;c.file.alphatex.AlphaTexSymbols.String.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.Tuning=["Tuning",6];c.file.alphatex.AlphaTexSymbols.Tuning.toString=B;c.file.alphatex.AlphaTexSymbols.Tuning.__enum__=
c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.LParensis=["LParensis",7];c.file.alphatex.AlphaTexSymbols.LParensis.toString=B;c.file.alphatex.AlphaTexSymbols.LParensis.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.RParensis=["RParensis",8];c.file.alphatex.AlphaTexSymbols.RParensis.toString=B;c.file.alphatex.AlphaTexSymbols.RParensis.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.LBrace=["LBrace",9];c.file.alphatex.AlphaTexSymbols.LBrace.toString=
B;c.file.alphatex.AlphaTexSymbols.LBrace.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.RBrace=["RBrace",10];c.file.alphatex.AlphaTexSymbols.RBrace.toString=B;c.file.alphatex.AlphaTexSymbols.RBrace.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.Pipe=["Pipe",11];c.file.alphatex.AlphaTexSymbols.Pipe.toString=B;c.file.alphatex.AlphaTexSymbols.Pipe.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexSymbols.MetaCommand=["MetaCommand",12];
c.file.alphatex.AlphaTexSymbols.MetaCommand.toString=B;c.file.alphatex.AlphaTexSymbols.MetaCommand.__enum__=c.file.alphatex.AlphaTexSymbols;c.file.alphatex.AlphaTexWriter=function(a,b){this._voice=b;this._track=a;this._currentDuration=this._keySignature=-1;this._clef=0};c.file.alphatex.AlphaTexWriter.__name__=true;c.file.alphatex.AlphaTexWriter.prototype={writeMeta:function(){if(this._track.song.title!=""){this._result.b+=" \\title '";this._result.b+=l.string(this._track.song.title);this._result.b+=
"'"}if(this._track.song.subtitle!=""){this._result.b+=" \\subtitle '";this._result.b+=l.string(this._track.song.subtitle);this._result.b+="'"}if(this._track.song.artist!=""){this._result.b+=" \\artist '";this._result.b+=l.string(this._track.song.artist);this._result.b+="'"}if(this._track.song.album!=""){this._result.b+=" \\album '";this._result.b+=l.string(this._track.song.album);this._result.b+="'"}if(this._track.song.words!=""){this._result.b+=" \\words '";this._result.b+=l.string(this._track.song.words);
this._result.b+="'"}if(this._track.song.music!=""){this._result.b+=" \\music '";this._result.b+=l.string(this._track.song.music);this._result.b+="'"}if(this._track.song.copyright!=""){this._result.b+=" \\copyright '";this._result.b+=l.string(this._track.song.copyright);this._result.b+="'"}this._result.b+=" \\tempo ";this._result.b+=l.string(this._track.song.tempo);this._currentTempo=this._track.song.tempo;if(this._track.offset!=0){this._result.b+=" \\capo ";this._result.b+=l.string(this._track.offset)}this._result.b+=
" \\tuning ";for(var a=0,b=this._track.strings;a<b.length;){var d=b[a];++a;this._result.b+=l.string(c.model.Tuning.getTextForTuning(d.value,true));this._result.b+=" "}this._result.b+=" \\instrument ";this._result.b+=l.string(this._track.channel.instrument())},writeNoteEffects:function(a){this._result.b+="{";if(a.effect.isBend()){this._result.b+=" b(";for(var b=0,d=a.effect.bend.points;b<d.length;){var e=d[b];++b;this._result.b+=l.string(e.value);this._result.b+=" "}this._result.b+=") "}if(a.effect.isHarmonic())switch(a.effect.harmonic.type){case 0:this._result.b+=
" nh ";break;case 1:this._result.b+=" ah ";break;case 2:this._result.b+=" th ";break;case 3:this._result.b+=" ph ";break;case 4:this._result.b+=" sh ";break}if(a.effect.isGrace()){this._result.b+=" gr ";if(a.effect.grace.isDead)this._result.b+="x ";else{this._result.b+=l.string(a.effect.grace.fret);this._result.b+=" "}this._result.b+=l.string(a.effect.grace.duration);switch(a.effect.grace.transition){case 2:this._result.b+=" b ";break;case 1:this._result.b+=" s ";break;case 3:this._result.b+=" h ";
break}}if(a.effect.isTrill()){this._result.b+=" tr ";this._result.b+=l.string(a.effect.trill.fret);this._result.b+=" ";this._result.b+=l.string(a.effect.trill.duration.value);this._result.b+=" "}if(a.effect.isTremoloPicking()){this._result.b+=" tp ";this._result.b+=l.string(a.effect.tremoloPicking.duration.value);this._result.b+=" "}if(a.effect.vibrato)this._result.b+=" v ";if(a.effect.slide)switch(a.effect.slideType){case 0:this._result.b+=" sl ";break;case 1:this._result.b+=" sf ";break}if(a.effect.hammer)this._result.b+=
" h ";if(a.effect.ghostNote)this._result.b+=" g ";if(a.effect.accentuatedNote)this._result.b+=" ac ";if(a.effect.heavyAccentuatedNote)this._result.b+=" hac ";if(a.effect.palmMute)this._result.b+=" pm ";if(a.effect.staccato)this._result.b+=" st ";if(a.effect.letRing)this._result.b+=" lr ";this._result.b+="}"},writeNote:function(a){if(a.isTiedNote)this._result.b+=" -";else if(a.effect.deadNote)this._result.b+=" x";else{this._result.b+=" ";this._result.b+=l.string(a.value)}this._result.b+=".";this._result.b+=
l.string(a.string);this._result.b+=" ";this.writeNoteEffects(a)},writeBeatEffects:function(a){if(a.effect.fadeIn)this._result.b+=" f ";if(a.effect.vibrato)this._result.b+=" v ";if(a.effect.tapping)this._result.b+=" t ";if(a.effect.slapping)this._result.b+=" s ";if(a.effect.popping)this._result.b+=" p ";if(a.voices[this._voice].duration.isDoubleDotted)this._result.b+=" dd ";if(a.voices[this._voice].duration.isDotted)this._result.b+=" d ";if(a.effect.stroke.direction!=0){this._result.b+=a.effect.stroke.direction==
1?" su ":" sd ";this._result.b+=l.string(a.effect.stroke.value);this._result.b+=" "}if(!a.voices[this._voice].duration.tuplet.equals(c.model.Tuplet.NORMAL)){this._result.b+=" tu ";this._result.b+=l.string(a.voices[this._voice].duration.tuplet.enters);this._result.b+=" "}if(a.effect.isTremoloBar()){this._result.b+=" tb( ";var b=0;for(a=a.effect.tremoloBar.points;b<a.length;){var d=a[b];++b;this._result.b+=l.string(d.value);this._result.b+=" "}this._result.b+=") "}},parseKeySignature:function(a){switch(a){case -7:return"cb";
case -6:return"gb";case -5:return"db";case -4:return"ab";case -3:return"eb";case -2:return"bb";case -1:return"f";case 0:return"c";case 1:return"g";case 2:return"d";case 3:return"a";case 4:return"e";case 5:return"b";case 6:return"f#";case 7:return"c#";default:return"c"}},writeBeat:function(a){var b=a.voices[this._voice];if(b.duration.value!=this._currentDuration){this._result.b+=":";this._result.b+=l.string(b.duration.value);this._result.b+=" ";this._currentDuration=b.duration.value}if(!b.isEmpty){if(b.isRestVoice())this._result.b+=
"r ";else{if(b.notes.length>1)this._result.b+="(";for(var d=0,e=b.notes;d<e.length;){var f=e[d];++d;this.writeNote(f)}if(b.notes.length>1)this._result.b+=")";this._result.b+="{";this.writeBeatEffects(a);this._result.b+="}"}this._result.b+=" "}},writeMeasure:function(a){if(this._timeSignature==null||a.header.timeSignature.numerator!=this._timeSignature.numerator||a.header.timeSignature.denominator.value!=this._timeSignature.denominator.value){this._result.b+=" \\ts ";this._result.b+=l.string(a.header.timeSignature.numerator);
this._result.b+=" ";this._result.b+=l.string(a.header.timeSignature.denominator.value);this._timeSignature=a.header.timeSignature}if(a.header.isRepeatOpen)this._result.b+=" \\ro ";if(a.header.repeatClose>1)this._result.b+=l.string(a.header.repeatClose-1);if(a.header.keySignature!=this._keySignature){this._result.b+=" \\ks ";this._result.b+=l.string(this.parseKeySignature(a.header.keySignature));this._result.b+=" ";this._keySignature=a.header.keySignature}if(a.clef!=this._clef){this._result.b+=" \\clef ";
switch(a.clef){case 0:this._result.b+="treble ";break;case 3:this._result.b+="alto ";break;case 1:this._result.b+="bass ";break;case 2:this._result.b+="tenor ";break}this._clef=a.clef}if(this._currentTempo!=a.header.tempo.value){this._result.b+=" \\tempo ";this._result.b+=l.string(a.header.tempo.value);this._result.b+=" ";this._currentTempo=a.header.tempo.value}var b=0;for(a=a.beats;b<a.length;){var d=a[b];++b;this.writeBeat(d)}},cleanup:function(a){var b=new K("[ ]+","g");a=q.replace(a,"{}"," ");
a=q.replace(a,"{ }"," ");a=b.replace(a," ");a=q.replace(a,"{ ","{");a=q.replace(a," }","}");a=q.replace(a,"( ","(");a=q.replace(a," )",")");return a=b.replace(a," ")},write:function(){this._result=new F;this.writeMeta();this._result.b+=" . ";for(var a=0,b=this._track.measures;a<b.length;){var d=b[a];++a;this.writeMeasure(d);if(d.header.number<this._track.measureCount()-1)this._result.b+="|"}return this.cleanup(this._result.b)},__class__:c.file.alphatex.AlphaTexWriter};c.file.gpx={};c.file.gpx.DocumentParser=
function(a,b){this._factory=a;this._document=b};c.file.gpx.DocumentParser.__name__=true;c.file.gpx.DocumentParser.prototype={newString:function(a,b){var d=this._factory.newString();d.number=a;d.value=b;return d},getStringFor:function(a,b){for(var d=a.measure.track.strings,e=0;e<d.length;){var f=d[e];if(b>=f.value){for(var g=true,h=0,i=a.voices;h<i.length;){var j=i[h];++h;var k=0;for(j=j.notes;k<j.length;){var m=j[k];++k;if(m.string==f.number){g=false;break}}}if(g)return f}e++}return null},getBeat:function(a,
b){for(var d=a.beats.length,e=0;e<d;){var f=a.beats[e];if(f.start==b)return f;e++}d=this._factory.newBeat();d.start=b;a.addBeat(d);return d},parseDynamic:function(a){var b=95;if(a.dyn!=null)if(a.dyn=="PPP")b=15;else if(a.dyn=="PP")b=31;else if(a.dyn=="P")b=47;else if(a.dyn=="MP")b=63;else if(a.dyn=="MF")b=79;else if(a.dyn=="F")b=95;else if(a.dyn=="FF")b=111;else if(a.dyn=="FFF")b=127;return b},parseRhythm:function(a,b){b.isDotted=a.augmentationDotCount==1;b.isDoubleDotted=a.augmentationDotCount==
2;b.tuplet.times=a.primaryTupletDen;b.tuplet.enters=a.primaryTupletNum;if(a.noteValue=="Whole")b.value=c.model.Duration.WHOLE;else if(a.noteValue=="Half")b.value=c.model.Duration.HALF;else if(a.noteValue=="Quarter")b.value=c.model.Duration.QUARTER;else if(a.noteValue=="Eighth")b.value=c.model.Duration.EIGHTH;else if(a.noteValue=="16th")b.value=c.model.Duration.SIXTEENTH;else if(a.noteValue=="32nd")b.value=c.model.Duration.THIRTY_SECOND;else if(a.noteValue=="64th")b.value=c.model.Duration.SIXTY_FOURTH},
parseNote:function(a,b,d){var e=-1,f=-1;if(a.string>=0&&a.fret>=0){e=a.fret;f=b.beat.measure.track.stringCount()-a.string}else{var g=-1;if(a.midiNumber>=0)g=a.midiNumber;else if(a.tone>=0&&a.octave>=0)g=a.tone+(12*a.octave-12);else if(a.element>=0)for(var h=0;h<c.file.gpx.score.GpxDrumkit.get_DRUMKITS().length;){if(c.file.gpx.score.GpxDrumkit.get_DRUMKITS()[h].element==a.element&&c.file.gpx.score.GpxDrumkit.get_DRUMKITS()[h].variation==a.variation)g=c.file.gpx.score.GpxDrumkit.get_DRUMKITS()[h].midiValue;
h++}if(g>=0){h=this.getStringFor(b.beat,g);if(h!=null){e=g-h.value;f=h.number}}}if(e>=0&&f>0){g=this._factory.newNote();g.value=e;g.string=f;g.isTiedNote=a.tieDestination;g.velocity=d;g.effect.vibrato=a.vibrato;g.effect.slide=a.slide;g.effect.deadNote=a.mutedEnabled;g.effect.palmMute=a.palmMutedEnabled;b.addNote(g)}},parseBar:function(a,b){for(var d=a.voiceIds,e=0;e<2;){if(d.length>e)if(d[e]>=0){var f=this._document.getVoice(d[e]);if(f!=null)for(var g=b.header.start,h=0;h<f.beatIds.length;){var i=
this._document.getBeat(f.beatIds[h]),j=this._document.getRhythm(i.rhythmId),k=this.getBeat(b,g);k=k.voices[e%k.voices.length];k.isEmpty=false;this.parseRhythm(j,k.duration);if(i.noteIds!=null){j=this.parseDynamic(i);for(var m=0;m<i.noteIds.length;){var n=this._document.getNote(i.noteIds[m]);n!=null&&this.parseNote(n,k,j);m++}}g+=k.duration.time();h++}}e++}},parseMasterBars:function(a){for(var b=c.model.Duration.QUARTER_TIME,d=0,e=0,f=this._document.masterBars;e<f.length;){var g=f[e];++e;var h=this._document.getAutomation("Tempo",
d),i=this._factory.newMeasureHeader();i.start=b;i.number=d+1;i.isRepeatOpen=g.repeatStart;i.repeatClose=g.repeatCount;if(g.time!=null&&g.time.length==2){i.timeSignature.numerator=g.time[0];i.timeSignature.denominator.value=g.time[1]}if(h!=null&&h.value.length==2){var j=h.value[0];if(h.value[1]==1)j=j/2|0;else if(h.value[1]==3)j=j+j/2|0;else if(h.value[1]==4)j=j*2|0;else if(h.value[1]==5)j=j+j*2|0;i.tempo.value=j}a.addMeasureHeader(i);for(h=0;h<a.tracks.length;){var k=a.tracks[h];j=this._factory.newMeasure(i);
k.addMeasure(j);k=d;for(var m=h<g.barIds.length?this._document.getBar(g.barIds[h]):null;m!=null&&m.simileMark!=null;){m=m.simileMark;if(m=="Simple")k-=1;else if(m=="FirstOfDouble"||m=="SecondOfDouble")k-=2;if(k>=0){m=this._document.masterBars[k];m=h<m.barIds.length?this._document.getBar(m.barIds[h]):null}else m=null}m!=null&&this.parseBar(m,j);h++}b+=i.length();d++}},parseTracks:function(a){for(var b=0,d=0,e=this._document.tracks;d<e.length;){var f=e[d];++d;var g=this._factory.newTrack();g.number=
b+1;g.name=f.name;g.channel.instrument(f.gmProgram);g.channel.channel=f.gmChannel1;g.channel.effectChannel=f.gmChannel2;if(f.tunningPitches!=null)for(var h=1;h<=f.tunningPitches.length;){g.strings.push(this.newString(h,f.tunningPitches[f.tunningPitches.length-h]));h++}else{g.strings.push(this.newString(1,64));g.strings.push(this.newString(2,59));g.strings.push(this.newString(3,55));g.strings.push(this.newString(4,50));g.strings.push(this.newString(5,45));g.strings.push(this.newString(6,40))}if(f.color!=
null&&f.color.length==3){g.color.r=f.color[0];g.color.g=f.color[1];g.color.b=f.color[2]}a.addTrack(g);b++}},parseScore:function(a){a.title=this._document.score.title;a.artist=this._document.score.artist;a.album=this._document.score.album;a.words=this._document.score.wordsAndMusic;a.music=this._document.score.wordsAndMusic;a.copyright=this._document.score.copyright;a.tab=this._document.score.tabber;a.notice=this._document.score.notices;a.pageSetup.pageSize.x=this._document.score.pageSetup.width;a.pageSetup.pageSize.y=
this._document.score.pageSetup.height;a.pageSetup.pageMargin=this._document.score.pageSetup.margin;a.pageSetup.scoreSizeProportion=this._document.score.pageSetup.scale},parse:function(){var a=this._factory.newSong();a.tempo=120;a.tempoName="";a.hideTempo=false;a.pageSetup=this._factory.newPageSetup();this.parseScore(a);this.parseTracks(a);this.parseMasterBars(a);return a},__class__:c.file.gpx.DocumentParser};c.file.gpx.DocumentReader=function(a){for(var b="",d=0;d<a.length;){var e=a[d];++d;b+=String.fromCharCode(e)}this._xmlDocument=
o.parse(b);this._dom=new p.xml.Fast(this._xmlDocument.firstElement());this._gpxDocument=new c.file.gpx.score.GpxDocument};c.file.gpx.DocumentReader.__name__=true;c.file.gpx.DocumentReader.prototype={readRhythms:function(){if(this._dom.hasNode.resolve("Rhythms"))for(var a=this._dom.node.resolve("Rhythms").nodes.resolve("Rhythm").iterator();a.hasNext();){var b=a.next(),d=new c.file.gpx.score.GpxRhythm;d.id=l.parseInt(b.att.resolve("id"));d.noteValue=b.node.resolve("NoteValue").get_innerData();if(b.hasNode.resolve("PrimaryTuplet")){d.primaryTupletDen=
l.parseInt(b.node.resolve("PrimaryTuplet").att.resolve("den"));d.primaryTupletNum=l.parseInt(b.node.resolve("PrimaryTuplet").att.resolve("num"))}else{d.primaryTupletDen=1;d.primaryTupletNum=1}d.augmentationDotCount=b.hasNode.resolve("AugmentationDot")?l.parseInt(b.node.resolve("AugmentationDot").att.resolve("count")):0;this._gpxDocument.rhythms.push(d)}},readNotes:function(){if(this._dom.hasNode.resolve("Notes"))for(var a=this._dom.node.resolve("Notes").nodes.resolve("Note").iterator();a.hasNext();){var b=
a.next(),d=new c.file.gpx.score.GpxNote;d.id=l.parseInt(b.att.resolve("id"));d.tieDestination=b.hasNode.resolve("Tie")?this.toBool(b.node.resolve("Tie").att.resolve("destination")):false;d.vibrato=b.hasNode.resolve("Vibrato");for(b=b.node.resolve("Properties").nodes.resolve("Property").iterator();b.hasNext();){var e=b.next(),f=e.att.resolve("name");if(f=="String")d.string=l.parseInt(e.node.resolve("String").get_innerData());else if(f=="Fret")d.fret=l.parseInt(e.node.resolve("Fret").get_innerData());
else if(f=="Midi")d.midiNumber=l.parseInt(e.node.resolve("Number").get_innerData());else if(f=="Tone")d.tone=l.parseInt(e.node.resolve("Step").get_innerData());else if(f=="Octave")d.octave=l.parseInt(e.node.resolve("Number").get_innerData());else if(f=="Element")d.element=l.parseInt(e.node.resolve("Element").get_innerData());else if(f=="Variation")d.variation=l.parseInt(e.node.resolve("Variation").get_innerData());else if(f=="Muted")d.mutedEnabled=e.hasNode.resolve("Enable");else if(f=="PalmMuted")d.palmMutedEnabled=
e.hasNode.resolve("Enable");else if(f=="Slide")d.slide=true}this._gpxDocument.notes.push(d)}},readBeats:function(){if(this._dom.hasNode.resolve("Beats"))for(var a=this._dom.node.resolve("Beats").nodes.resolve("Beat").iterator();a.hasNext();){var b=a.next(),d=new c.file.gpx.score.GpxBeat;d.id=l.parseInt(b.att.resolve("id"));d.dyn=b.node.resolve("Dynamic").get_innerData();d.rhythmId=l.parseInt(b.node.resolve("Rhythm").att.resolve("ref"));d.noteIds=b.hasNode.resolve("Notes")?this.toIntArray(b.node.resolve("Notes").get_innerData()):
[];this._gpxDocument.beats.push(d)}},readVoices:function(){if(this._dom.hasNode.resolve("Voices"))for(var a=this._dom.node.resolve("Voices").nodes.resolve("Voice").iterator();a.hasNext();){var b=a.next(),d=new c.file.gpx.score.GpxVoice;d.id=l.parseInt(b.att.resolve("id"));d.beatIds=this.toIntArray(b.node.resolve("Beats").get_innerData());this._gpxDocument.voices.push(d)}},readBars:function(){if(this._dom.hasNode.resolve("Bars"))for(var a=this._dom.node.resolve("Bars").nodes.resolve("Bar").iterator();a.hasNext();){var b=
a.next(),d=new c.file.gpx.score.GpxBar;d.id=l.parseInt(b.att.resolve("id"));d.voiceIds=this.toIntArray(b.node.resolve("Voices").get_innerData());d.clef=b.node.resolve("Clef").get_innerData();d.simileMark=b.hasNode.resolve("SimileMark")?b.node.resolve("SimileMark").get_innerData():null;this._gpxDocument.bars.push(d)}},readMasterBars:function(){if(this._dom.hasNode.resolve("MasterBars"))for(var a=this._dom.node.resolve("MasterBars").nodes.resolve("MasterBar").iterator();a.hasNext();){var b=a.next(),
d=new c.file.gpx.score.GpxMasterBar;d.barIds=this.toIntArray(b.node.resolve("Bars").get_innerData());d.time=this.toIntArray2(b.node.resolve("Time").get_innerData(),"/");if(b.hasNode.resolve("Repeat")){b=b.node.resolve("Repeat");d.repeatStart=this.toBool(b.att.resolve("start"));if(this.toBool(b.att.resolve("end")))d.repeatCount=l.parseInt(b.att.resolve("count"))}this._gpxDocument.masterBars.push(d)}},readTracks:function(){if(this._dom.hasNode.resolve("Tracks"))for(var a=this._dom.node.resolve("Tracks").nodes.resolve("Track").iterator();a.hasNext();){var b=
a.next(),d=new c.file.gpx.score.GpxTrack;d.id=l.parseInt(b.att.resolve("id"));d.name=b.node.resolve("Name").get_innerData();d.color=this.toIntArray(b.node.resolve("Color").get_innerData());if(b.hasNode.resolve("GeneralMidi")){var e=b.node.resolve("GeneralMidi");d.gmProgram=l.parseInt(e.node.resolve("Program").get_innerData());d.gmChannel1=l.parseInt(e.node.resolve("PrimaryChannel").get_innerData());d.gmChannel2=l.parseInt(e.node.resolve("SecondaryChannel").get_innerData())}if(b.hasNode.resolve("Properties"))for(b=
b.node.resolve("Properties").nodes.resolve("Property").iterator();b.hasNext();){e=b.next();if(e.att.resolve("name")=="Tuning")d.tunningPitches=this.toIntArray(e.node.resolve("Pitches").get_innerData())}this._gpxDocument.tracks.push(d)}},toIntArray2:function(a,b){for(var d=[],e=0,f=a.split(b);e<f.length;){var g=f[e];++e;d.push(l.parseInt(g))}return d},toIntArray:function(a){return this.toIntArray2(a," ")},toBool:function(a){return a.toLowerCase()=="true"},readAutomations:function(){if(this._dom.hasNode.resolve("MasterTrack")&&
this._dom.node.resolve("MasterTrack").hasNode.resolve("Automations"))for(var a=this._dom.node.resolve("MasterTrack").node.resolve("Automations").nodes.resolve("Automation").iterator();a.hasNext();){var b=a.next(),d=new c.file.gpx.score.GpxAutomation;d.type=b.node.resolve("Type").get_innerData();d.barId=l.parseInt(b.node.resolve("Bar").get_innerData());d.value=this.toIntArray(b.node.resolve("Value").get_innerData());d.linear=this.toBool(b.node.resolve("Linear").get_innerData());d.position=l.parseInt(b.node.resolve("Position").get_innerData());
d.visible=this.toBool(b.node.resolve("Visible").get_innerData());this._gpxDocument.automations.push(d)}},readScore:function(){if(this._dom.hasNode.resolve("Score")){var a=this._dom.node.resolve("Score");this._gpxDocument.score.title=a.node.resolve("Title").get_innerData();this._gpxDocument.score.subTitle=a.node.resolve("SubTitle").get_innerData();this._gpxDocument.score.artist=a.node.resolve("Artist").get_innerData();this._gpxDocument.score.album=a.node.resolve("Album").get_innerData();this._gpxDocument.score.words=
a.node.resolve("Words").get_innerData();this._gpxDocument.score.music=a.node.resolve("Music").get_innerData();this._gpxDocument.score.wordsAndMusic=a.node.resolve("WordsAndMusic").get_innerData();this._gpxDocument.score.copyright=a.node.resolve("Copyright").get_innerData();this._gpxDocument.score.tabber=a.node.resolve("Tabber").get_innerData();this._gpxDocument.score.instructions=a.node.resolve("Instructions").get_innerData();this._gpxDocument.score.notices=a.node.resolve("Notices").get_innerData();
this._gpxDocument.score.pageSetup.width=l.parseInt(a.node.resolve("PageSetup").node.resolve("Width").get_innerData());this._gpxDocument.score.pageSetup.height=l.parseInt(a.node.resolve("PageSetup").node.resolve("Height").get_innerData());this._gpxDocument.score.pageSetup.orientation=a.node.resolve("PageSetup").node.resolve("Orientation").get_innerData();this._gpxDocument.score.pageSetup.margin=new c.model.Padding(l.parseInt(a.node.resolve("PageSetup").node.resolve("RightMargin").get_innerData()),
l.parseInt(a.node.resolve("PageSetup").node.resolve("TopMargin").get_innerData()),l.parseInt(a.node.resolve("PageSetup").node.resolve("LeftMargin").get_innerData()),l.parseInt(a.node.resolve("PageSetup").node.resolve("BottomMargin").get_innerData()));this._gpxDocument.score.pageSetup.scale=l.parseFloat(a.node.resolve("PageSetup").node.resolve("Scale").get_innerData())}},read:function(){if(this._xmlDocument!=null){this.readScore();this.readAutomations();this.readTracks();this.readMasterBars();this.readBars();
this.readVoices();this.readBeats();this.readNotes();this.readRhythms()}return this._gpxDocument},__class__:c.file.gpx.DocumentReader};c.file.gpx.File=function(a,b){this.fileName=a;this.fileContents=b};c.file.gpx.File.__name__=true;c.file.gpx.File.prototype={__class__:c.file.gpx.File};c.file.gpx.FileSystem=function(){this._fileSystem=[]};c.file.gpx.FileSystem.__name__=true;c.file.gpx.FileSystem.prototype={getBytes:function(a,b,d){for(var e=[],f=0;f<d;){a.length>=b+f&&e.push(a[b+f]);f++}return e},getString:function(a,
b,d){for(var e=0,f="";e<d;){var g=a[b+e]&255;if(g==0)break;f+=String.fromCharCode(g);e++}return f},getInteger:function(a,b){return(a[b+3]&255)<<24|(a[b+2]&255)<<16|(a[b+1]&255)<<8|a[b]&255},load2:function(a,b){if(a==1397113666)for(var d=b.readBytes(b.length()),e=0;(e+=4096)+3<d.length;){if(this.getInteger(d,e)==2){for(var f=e+4,g=e+140,h=e+148,i=0,j=0,k=[];(i=this.getInteger(d,h+4*j++))!=0;){var m=this.getBytes(d,e=i*4096,4096);for(i=0;i<m.length;){var n=m[i];++i;k.push(n)}}i=this.getInteger(d,g);
k.length>=i&&this._fileSystem.push(new c.file.gpx.File(this.getString(d,f,127),this.getBytes(k,0,i)))}}else if(a==1514554178){d=[];for(e=this.getInteger(b.readBytes(4),0);!b.eof()&&b.position()<e;)if(b.readBits(1)==1){k=b.readBits(4);f=b.readBitsReversed(k);k=b.readBitsReversed(k);i=d.length-f;for(n=0;n<(k>f?f:k);){d.push(d[i+n]);n++}}else{k=b.readBitsReversed(2);for(n=0;n<k;){d.push(b.readBits(8));n++}}e="";for(i=0;i<d.length;){n=d[i];++i;e+=String.fromCharCode(n)}this.load(new c.io.DataInputStream(new c.io.StringInputStream(e)))}else throw new c.file.FileFormatException("This is not a GPX file");
},load:function(a){a=new c.io.BitInputStream(a);this.load2(this.getInteger(a.readBytes(4),0),a)},getFileContents:function(a){for(var b=0,d=this._fileSystem;b<d.length;){var e=d[b];++b;if(e.fileName==a)return e.fileContents}return null},getFileNames:function(){for(var a=[],b=0,d=this._fileSystem;b<d.length;){var e=d[b];++b;a.push(e.fileName)}return a},__class__:c.file.gpx.FileSystem};c.file.gpx.GpxReader=function(){c.file.SongReader.call(this)};c.file.gpx.GpxReader.__name__=true;c.file.gpx.GpxReader.__super__=
c.file.SongReader;c.file.gpx.GpxReader.prototype=y(c.file.SongReader.prototype,{readSong:function(){try{this._fileSystem.load(this.data);var a=new c.file.gpx.DocumentReader(this._fileSystem.getFileContents("score.gpif"));return(new c.file.gpx.DocumentParser(this.factory,a.read())).parse()}catch(b){if(x.Boot.__instanceof(b,c.file.FileFormatException)){a=b;throw a;}else{a=b;throw new c.file.FileFormatException(l.string(a));}}},init:function(a,b){c.file.SongReader.prototype.init.call(this,a,b);this._fileSystem=
new c.file.gpx.FileSystem},__class__:c.file.gpx.GpxReader});c.file.gpx.score={};c.file.gpx.score.GpxAutomation=function(){};c.file.gpx.score.GpxAutomation.__name__=true;c.file.gpx.score.GpxAutomation.prototype={__class__:c.file.gpx.score.GpxAutomation};c.file.gpx.score.GpxBar=function(){};c.file.gpx.score.GpxBar.__name__=true;c.file.gpx.score.GpxBar.prototype={__class__:c.file.gpx.score.GpxBar};c.file.gpx.score.GpxBeat=function(){};c.file.gpx.score.GpxBeat.__name__=true;c.file.gpx.score.GpxBeat.prototype=
{__class__:c.file.gpx.score.GpxBeat};c.file.gpx.score.GpxDocument=function(){this.score=new c.file.gpx.score.GpxScore;this.tracks=[];this.masterBars=[];this.bars=[];this.voices=[];this.beats=[];this.notes=[];this.rhythms=[];this.automations=[]};c.file.gpx.score.GpxDocument.__name__=true;c.file.gpx.score.GpxDocument.prototype={getAutomation:function(a,b){for(var d=null,e=0,f=this.automations;e<f.length;){var g=f[e];++e;if(g.type==a&&g.barId<=b&&(d==null||g.barId>d.barId))d=g}return d},getRhythm:function(a){for(var b=
0,d=this.rhythms;b<d.length;){var e=d[b];++b;if(e.id==a)return e}return null},getNote:function(a){for(var b=0,d=this.notes;b<d.length;){var e=d[b];++b;if(e.id==a)return e}return null},getBeat:function(a){for(var b=0,d=this.beats;b<d.length;){var e=d[b];++b;if(e.id==a)return e}return null},getVoice:function(a){for(var b=0,d=this.voices;b<d.length;){var e=d[b];++b;if(e.id==a)return e}return null},getBar:function(a){for(var b=0,d=this.bars;b<d.length;){var e=d[b];++b;if(e.id==a)return e}return null},
__class__:c.file.gpx.score.GpxDocument};c.file.gpx.score.GpxDrumkit=function(a,b,d){this.midiValue=a;this.element=b;this.variation=d};c.file.gpx.score.GpxDrumkit.__name__=true;c.file.gpx.score.GpxDrumkit.get_DRUMKITS=function(){if(c.file.gpx.score.GpxDrumkit._kits==null){c.file.gpx.score.GpxDrumkit._kits=[];c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(36,0,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(36,0,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(37,
1,2));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(38,1,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(41,5,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(42,10,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(43,6,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(44,11,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(45,7,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(46,
10,2));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(47,8,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(48,9,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(49,12,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(50,9,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(51,15,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(52,16,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(53,
15,2));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(55,14,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(56,3,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(57,13,0));c.file.gpx.score.GpxDrumkit._kits.push(new c.file.gpx.score.GpxDrumkit(59,15,1))}return c.file.gpx.score.GpxDrumkit._kits};c.file.gpx.score.GpxDrumkit.prototype={__class__:c.file.gpx.score.GpxDrumkit};c.file.gpx.score.GpxMasterBar=function(){};c.file.gpx.score.GpxMasterBar.__name__=
true;c.file.gpx.score.GpxMasterBar.prototype={__class__:c.file.gpx.score.GpxMasterBar};c.file.gpx.score.GpxNote=function(){this.midiNumber=this.variation=this.element=this.octave=this.tone=this.string=this.fret=this.id=-1};c.file.gpx.score.GpxNote.__name__=true;c.file.gpx.score.GpxNote.prototype={__class__:c.file.gpx.score.GpxNote};c.file.gpx.score.GpxPageSetup=function(){};c.file.gpx.score.GpxPageSetup.__name__=true;c.file.gpx.score.GpxPageSetup.prototype={__class__:c.file.gpx.score.GpxPageSetup};
c.file.gpx.score.GpxRhythm=function(){};c.file.gpx.score.GpxRhythm.__name__=true;c.file.gpx.score.GpxRhythm.prototype={__class__:c.file.gpx.score.GpxRhythm};c.file.gpx.score.GpxScore=function(){this.pageSetup=new c.file.gpx.score.GpxPageSetup};c.file.gpx.score.GpxScore.__name__=true;c.file.gpx.score.GpxScore.prototype={__class__:c.file.gpx.score.GpxScore};c.file.gpx.score.GpxTrack=function(){};c.file.gpx.score.GpxTrack.__name__=true;c.file.gpx.score.GpxTrack.prototype={__class__:c.file.gpx.score.GpxTrack};
c.file.gpx.score.GpxVoice=function(){};c.file.gpx.score.GpxVoice.__name__=true;c.file.gpx.score.GpxVoice.prototype={__class__:c.file.gpx.score.GpxVoice};c.file.guitarpro={};c.file.guitarpro.GpReaderBase=function(){c.file.SongReader.call(this)};c.file.guitarpro.GpReaderBase.__name__=true;c.file.guitarpro.GpReaderBase.toChannelShort=function(a){return(Math.max(Math.max(-32768,Math.min(32767,a*8-1))|0,-1)|0)+1};c.file.guitarpro.GpReaderBase.__super__=c.file.SongReader;c.file.guitarpro.GpReaderBase.prototype=
y(c.file.SongReader.prototype,{readVersion:function(){try{if(this.version==null)this.version=this.readByteSizeString(30,"UTF-8");for(var a=0,b=this._supportedVersions.length;a<b;){var d=a++;if(this.version==this._supportedVersions[d]){this._versionIndex=d;return true}}}catch(e){this.version="Not Supported"}return false},readIntSizeString:function(a){if(a==null)a="UTF-8";return this.readString(this.data.readInt(),-2,a)},readByteSizeCheckByteString:function(a){if(a==null)a="UTF-8";return this.readByteSizeString(this.data.readByte()-
1,a)},readIntSizeCheckByteString:function(a){if(a==null)a="UTF-8";return this.readByteSizeString(this.data.readInt()-1,a)},readString:function(a,b){if(b==null)b=-2;if(b==-2)b=a;var d=this.data.readString(a>0?a:b);return v.substr(d,0,b>=0?b:a)},readByteSizeString:function(a,b){if(b==null)b="UTF-8";return this.readString(a,this.data.readByte(),b)},skip:function(a){this.data.skip(a)},initVersions:function(a){this._supportedVersions=a},init:function(a,b){c.file.SongReader.prototype.init.call(this,a,b);
a.bigEndian=false},__class__:c.file.guitarpro.GpReaderBase});c.file.guitarpro.Gp3Reader=function(){c.file.guitarpro.GpReaderBase.call(this);this.initVersions(["FICHIER GUITAR PRO v3.00"])};c.file.guitarpro.Gp3Reader.__name__=true;c.file.guitarpro.Gp3Reader.toKeySignature=function(a){return a<0?7+(Math.abs(a)|0):a};c.file.guitarpro.Gp3Reader.toStrokeValue=function(a){switch(a){case 1:return c.model.Duration.SIXTY_FOURTH;case 2:return c.model.Duration.SIXTY_FOURTH;case 3:return c.model.Duration.THIRTY_SECOND;
case 4:return c.model.Duration.SIXTEENTH;case 5:return c.model.Duration.EIGHTH;case 6:return c.model.Duration.QUARTER;default:return c.model.Duration.SIXTY_FOURTH}};c.file.guitarpro.Gp3Reader.__super__=c.file.guitarpro.GpReaderBase;c.file.guitarpro.Gp3Reader.prototype=y(c.file.guitarpro.GpReaderBase.prototype,{readInfo:function(a){a.title=this.readIntSizeCheckByteString();a.subtitle=this.readIntSizeCheckByteString();a.artist=this.readIntSizeCheckByteString();a.album=this.readIntSizeCheckByteString();
a.words=this.readIntSizeCheckByteString();a.music=a.words;a.copyright=this.readIntSizeCheckByteString();a.tab=this.readIntSizeCheckByteString();a.instructions=this.readIntSizeCheckByteString();var b=this.data.readInt();a.notice="";for(var d=0;d<b;){d++;a.notice+=this.readIntSizeCheckByteString()+"\n"}},readLyrics:function(a){a.lyrics=this.factory.newLyrics()},readPageSetup:function(a){var b=this.factory.newPageSetup();a.pageSetup=b},readMidiChannels:function(){for(var a=[],b=0;b<64;){var d=b++,e=
this.factory.newMidiChannel();e.channel=d;e.effectChannel=d;e.instrument(this.data.readInt());e.volume=c.file.guitarpro.GpReaderBase.toChannelShort(this.data.readSignedByte());e.balance=c.file.guitarpro.GpReaderBase.toChannelShort(this.data.readSignedByte());e.chorus=c.file.guitarpro.GpReaderBase.toChannelShort(this.data.readSignedByte());e.reverb=c.file.guitarpro.GpReaderBase.toChannelShort(this.data.readSignedByte());e.phaser=c.file.guitarpro.GpReaderBase.toChannelShort(this.data.readSignedByte());
e.tremolo=c.file.guitarpro.GpReaderBase.toChannelShort(this.data.readSignedByte());a.push(e);this.skip(2)}return a},readColor:function(){var a=this.data.readByte(),b=this.data.readByte(),d=this.data.readByte();this.skip(1);return c.model.Color.fromRgb(a,b,d)},readMarker:function(a){var b=this.factory.newMarker();b.measureHeader=a;b.title=this.readIntSizeCheckByteString();b.color=this.readColor();return b},parseRepeatAlternative:function(a,b,d){for(var e=0,f=0,g=0,h=a.measureHeaders.length;g<h;){var i=
g++;i=a.measureHeaders[i];if(i.number==b)break;if(i.isRepeatOpen)f=0;f|=i.repeatAlternative}for(h=0;h<8;){i=h++;if(d>i&&(f&1<<i)==0)e|=1<<i}return e},readMeasureHeader:function(a,b,d){var e=this.data.readByte(),f=this.factory.newMeasureHeader();f.number=a+1;f.start=0;f.tempo.value=d.tempo;f.tripletFeel=this._tripletFeel;if((e&1)!=0)b.numerator=this.data.readSignedByte();if((e&2)!=0)b.denominator.value=this.data.readSignedByte();f.isRepeatOpen=(e&4)!=0;b.copy(f.timeSignature);if((e&8)!=0)f.repeatClose=
this.data.readSignedByte()-1;if((e&16)!=0)f.repeatAlternative=this.parseRepeatAlternative(d,f.number,this.data.readByte());if((e&32)!=0)f.marker=this.readMarker(f);if((e&64)!=0){f.keySignature=c.file.guitarpro.Gp3Reader.toKeySignature(this.data.readSignedByte());f.keySignatureType=this.data.readSignedByte()}else if(f.number>1){f.keySignature=d.measureHeaders[a-1].keySignature;f.keySignatureType=d.measureHeaders[a-1].keySignatureType}f.hasDoubleBar=(e&128)!=0;return f},readMeasureHeaders:function(a,
b){for(var d=this.factory.newTimeSignature(),e=0;e<b;){var f=e++;a.addMeasureHeader(this.readMeasureHeader(f,d,a))}},readChannel:function(a,b){var d=this.data.readInt()-1,e=this.data.readInt()-1;if(d>=0&&d<b.length){b[d].copy(a);a.instrument()<0&&a.instrument(0);if(!a.isPercussionChannel())a.effectChannel=e}},readTrack:function(a,b){var d=this.data.readByte(),e=this.factory.newTrack();e.isPercussionTrack=(d&1)!=0;e.is12StringedGuitarTrack=(d&2)!=0;e.isBanjoTrack=(d&4)!=0;e.number=a;e.name=this.readByteSizeString(40);
d=this.data.readInt();for(var f=0;f<7;){var g=f++,h=this.data.readInt();if(d>g){var i=this.factory.newString();i.number=g+1;i.value=h;e.strings.push(i)}}e.port=this.data.readInt();this.readChannel(e.channel,b);if(e.channel.channel==9)e.isPercussionTrack=true;e.fretCount=this.data.readInt();e.offset=this.data.readInt();e.color=this.readColor();return e},readTracks:function(a,b,d){var e=1;for(b=b+1;e<b;){var f=e++;a.addTrack(this.readTrack(f,d))}},getBeat:function(a,b){for(var d=0,e=a.beats.length;d<
e;){var f=d++;f=a.beats[f];if(f.start==b)return f}d=this.factory.newBeat();d.start=b;a.addBeat(d);return d},readDuration:function(a){var b=this.factory.newDuration();b.value=Math.round(Math.pow(2,this.data.readSignedByte()+4)/4);b.isDotted=(a&1)!=0;if((a&32)!=0)switch(this.data.readInt()){case 3:b.tuplet.enters=3;b.tuplet.times=2;break;case 5:b.tuplet.enters=5;b.tuplet.times=4;break;case 6:b.tuplet.enters=6;b.tuplet.times=4;break;case 7:b.tuplet.enters=7;b.tuplet.times=4;break;case 9:b.tuplet.enters=
9;b.tuplet.times=8;break;case 10:b.tuplet.enters=10;b.tuplet.times=8;break;case 11:b.tuplet.enters=11;b.tuplet.times=8;break;case 12:b.tuplet.enters=12;b.tuplet.times=8;break}return b},readChord:function(a,b){var d=this.factory.newChord(a);if((this.data.readByte()&1)==0){d.name=this.readIntSizeCheckByteString();d.firstFret=this.data.readInt();if(d.firstFret!=0)for(var e=0;e<6;){var f=e++,g=this.data.readInt();if(f<d.strings.length)d.strings[f]=g}}else{this.skip(25);d.name=this.readByteSizeString(34);
d.firstFret=this.data.readInt();for(e=0;e<6;){f=e++;g=this.data.readInt();if(f<d.strings.length)d.strings[f]=g}this.skip(36)}d.noteCount()>0&&b.setChord(d)},readText:function(a){var b=this.factory.newText();b.value=this.readIntSizeCheckByteString();a.setText(b)},readTremoloBar:function(a){var b=this.factory.newBendEffect();b.type=this.data.readSignedByte();b.value=this.data.readInt();b.points.push(new c.model.effects.BendPoint(0,0,false));b.points.push(new c.model.effects.BendPoint(Math.round(6),
Math.round(b.value/50),false));b.points.push(new c.model.effects.BendPoint(12,0,false));a.tremoloBar=b},readBeatEffects:function(a,b){var d=this.data.readByte();a.effect.fadeIn=(d&16)!=0;a.effect.vibrato=(d&2)!=0||a.effect.vibrato;if((d&32)!=0){var e=this.data.readByte();if(e==0)this.readTremoloBar(a.effect);else{a.effect.tapping=e==1;a.effect.slapping=e==2;a.effect.popping=e==3;this.data.readInt()}}if((d&64)!=0){e=this.data.readSignedByte();var f=this.data.readSignedByte();if(e>0){a.effect.stroke.direction=
1;a.effect.stroke.value=c.file.guitarpro.Gp3Reader.toStrokeValue(e)}else if(f>0){a.effect.stroke.direction=2;a.effect.stroke.value=c.file.guitarpro.Gp3Reader.toStrokeValue(f)}}if((d&4)!=0){e=this.factory.newHarmonicEffect();e.type=0;b.harmonic=e}if((d&8)!=0){e=this.factory.newHarmonicEffect();e.type=1;e.data=0;b.harmonic=e}},readMixTableChange:function(a){var b=this.factory.newMixTableChange();b.instrument.value=this.data.readSignedByte();b.volume.value=this.data.readSignedByte();b.balance.value=
this.data.readSignedByte();b.chorus.value=this.data.readSignedByte();b.reverb.value=this.data.readSignedByte();b.phaser.value=this.data.readSignedByte();b.tremolo.value=this.data.readSignedByte();b.tempoName="";b.tempo.value=this.data.readInt();if(b.instrument.value<0)b.instrument=null;if(b.volume.value>=0)b.volume.duration=this.data.readSignedByte();else b.volume=null;if(b.balance.value>=0)b.balance.duration=this.data.readSignedByte();else b.balance=null;if(b.chorus.value>=0)b.chorus.duration=this.data.readSignedByte();
else b.chorus=null;if(b.reverb.value>=0)b.reverb.duration=this.data.readSignedByte();else b.reverb=null;if(b.phaser.value>=0)b.phaser.duration=this.data.readSignedByte();else b.phaser=null;if(b.tremolo.value>=0)b.tremolo.duration=this.data.readSignedByte();else b.tremolo=null;if(b.tempo.value>=0){b.tempo.duration=this.data.readSignedByte();a.header.tempo.value=b.tempo.value;b.hideTempo=false}else b.tempo=null;return b},readBend:function(a){var b=this.factory.newBendEffect();b.type=this.data.readSignedByte();
b.value=this.data.readInt();for(var d=this.data.readInt(),e=0;e<d;){e++;var f=Math.round(this.data.readInt()*12/60),g=Math.round(this.data.readInt()/25),h=this.data.readBool();b.points.push(new c.model.effects.BendPoint(f,g,h))}if(d>0)a.bend=b},readGrace:function(a){var b=this.data.readByte(),d=this.data.readByte(),e=this.data.readSignedByte(),f=this.data.readByte(),g=this.factory.newGraceEffect();g.fret=b;g.velocity=15+16*d-16;g.duration=f;g.isDead=b==255;g.isOnBeat=false;switch(e){case 0:g.transition=
0;break;case 1:g.transition=1;break;case 2:g.transition=2;break;case 3:g.transition=3;break}a.grace=g},readNoteEffects:function(a){var b=this.data.readByte();a.slide=(b&4)!=0;a.hammer=(b&2)!=0;a.letRing=(b&8)!=0;(b&1)!=0&&this.readBend(a);(b&16)!=0&&this.readGrace(a)},readNote:function(a,b,d){var e=this.data.readByte(),f=this.factory.newNote();f.string=a.number;f.effect=d;f.effect.accentuatedNote=(e&64)!=0;f.effect.heavyAccentuatedNote=(e&2)!=0;f.effect.ghostNote=(e&4)!=0;if((e&32)!=0){d=this.data.readByte();
f.isTiedNote=d==2;f.effect.deadNote=d==3}if((e&1)!=0){f.duration=this.data.readSignedByte();f.tuplet=this.data.readSignedByte()}if((e&16)!=0)f.velocity=15+16*this.data.readSignedByte()-16;if((e&32)!=0){d=this.data.readSignedByte();a=f.isTiedNote?this.getTiedNoteValue(a.number,b):d;f.value=a>=0&&a<100?a:0}if((e&128)!=0){f.effect.leftHandFinger=this.data.readSignedByte();f.effect.rightHandFinger=this.data.readSignedByte();f.effect.isFingering=true}(e&8)!=0&&this.readNoteEffects(f.effect);return f},
readBeat:function(a,b,d,e){var f=this.data.readByte(),g=this.getBeat(b,a);e=g.voices[e];if((f&64)!=0){a=this.data.readByte();e.isEmpty=(a&2)==0}a=this.readDuration(f);var h=this.factory.newNoteEffect();(f&2)!=0&&this.readChord(d.stringCount(),g);(f&4)!=0&&this.readText(g);(f&8)!=0&&this.readBeatEffects(g,h);if((f&16)!=0){b=this.readMixTableChange(b);g.effect.mixTableChange=b}b=this.data.readByte();for(f=0;f<7;){g=6-f++;if((b&1<<g)!=0&&6-g<d.stringCount()){g=this.readNote(d.strings[6-g].clone(this.factory),
d,h.clone(this.factory));e.addNote(g)}a.copy(e.duration)}return!e.isEmpty?a.time():0},readMeasure:function(a,b){for(var d=a.header.start,e=this.data.readInt(),f=0;f<e;){f++;d+=this.readBeat(d,a,b,0)}},readMeasures:function(a){var b=this.factory.newTempo();b.value=a.tempo;for(var d=c.model.Duration.QUARTER_TIME,e=0,f=a.measureHeaders.length;e<f;){var g=e++;g=a.measureHeaders[g];g.start=d;for(var h=0,i=a.tracks.length;h<i;){var j=h++;j=a.tracks[j];var k=this.factory.newMeasure(g);g.tempo.copy(b);j.addMeasure(k);
this.readMeasure(k,j)}b.copy(g.tempo);d+=g.length()}},readSong:function(){if(!this.readVersion())throw new c.file.FileFormatException("Unsupported Version");var a=this.factory.newSong();this.readInfo(a);this._tripletFeel=this.data.readBool()?1:0;this.readLyrics(a);this.readPageSetup(a);a.tempoName="";a.tempo=this.data.readInt();a.hideTempo=false;a.key=this.data.readInt();a.octave=0;var b=this.readMidiChannels(),d=this.data.readInt(),e=this.data.readInt();this.readMeasureHeaders(a,d);this.readTracks(a,
e,b);this.readMeasures(a);return a},__class__:c.file.guitarpro.Gp3Reader});c.file.guitarpro.Gp4Reader=function(){c.file.guitarpro.Gp3Reader.call(this);this.initVersions(["FICHIER GUITAR PRO v4.00","FICHIER GUITAR PRO v4.06","FICHIER GUITAR PRO L4.06"])};c.file.guitarpro.Gp4Reader.__name__=true;c.file.guitarpro.Gp4Reader.__super__=c.file.guitarpro.Gp3Reader;c.file.guitarpro.Gp4Reader.prototype=y(c.file.guitarpro.Gp3Reader.prototype,{readChord:function(a,b){var d=this.factory.newChord(a);if((this.data.readSignedByte()&
1)==0){d.name=this.readIntSizeCheckByteString();d.firstFret=this.data.readInt();if(d.firstFret!=0)for(var e=0;e<6;){var f=e++,g=this.data.readInt();if(f<d.strings.length)d.strings[f]=g}}else{this.skip(16);d.name=this.readByteSizeString(21);this.skip(4);d.firstFret=this.data.readInt();for(e=0;e<7;){f=e++;g=this.data.readInt();if(f<d.strings.length)d.strings[f]=g}this.skip(32)}d.noteCount()>0&&b.setChord(d)},readTremoloBar:function(a){var b=this.factory.newBendEffect();b.type=this.data.readSignedByte();
b.value=this.data.readInt();for(var d=this.data.readInt(),e=0;e<d;){e++;var f=Math.round(this.data.readInt()*12/60),g=Math.round(this.data.readInt()/50),h=this.data.readBool();b.points.push(new c.model.effects.BendPoint(f,g,h))}if(d>0)a.tremoloBar=b},readBeatEffects:function(a){var b=this.data.readSignedByte(),d=this.data.readSignedByte();a.effect.fadeIn=(b&16)!=0;a.effect.vibrato=(b&2)!=0||a.effect.vibrato;if((b&32)!=0){var e=this.data.readSignedByte();a.effect.tapping=e==1;a.effect.slapping=e==
2;a.effect.popping=e==3}(d&4)!=0&&this.readTremoloBar(a.effect);if((b&64)!=0){b=this.data.readSignedByte();e=this.data.readSignedByte();if(b>0){a.effect.stroke.direction=1;a.effect.stroke.value=c.file.guitarpro.Gp3Reader.toStrokeValue(b)}else if(e>0){a.effect.stroke.direction=2;a.effect.stroke.value=c.file.guitarpro.Gp3Reader.toStrokeValue(e)}}a.effect.hasRasgueado=(d&1)!=0;if((d&2)!=0){a.effect.pickStroke=this.data.readSignedByte();a.effect.hasPickStroke=true}},readMixTableChange:function(a){var b=
this.factory.newMixTableChange();b.instrument.value=this.data.readSignedByte();b.volume.value=this.data.readSignedByte();b.balance.value=this.data.readSignedByte();b.chorus.value=this.data.readSignedByte();b.reverb.value=this.data.readSignedByte();b.phaser.value=this.data.readSignedByte();b.tremolo.value=this.data.readSignedByte();b.tempoName="";b.tempo.value=this.data.readInt();if(b.instrument.value<0)b.instrument=null;if(b.volume.value>=0)b.volume.duration=this.data.readSignedByte();else b.volume=
null;if(b.balance.value>=0)b.balance.duration=this.data.readSignedByte();else b.balance=null;if(b.chorus.value>=0)b.chorus.duration=this.data.readSignedByte();else b.chorus=null;if(b.reverb.value>=0)b.reverb.duration=this.data.readSignedByte();else b.reverb=null;if(b.phaser.value>=0)b.phaser.duration=this.data.readSignedByte();else b.phaser=null;if(b.tremolo.value>=0)b.tremolo.duration=this.data.readSignedByte();else b.tremolo=null;if(b.tempo.value>=0){b.tempo.duration=this.data.readSignedByte();
a.header.tempo.value=b.tempo.value;b.hideTempo=false}else b.tempo=null;a=this.data.readSignedByte();if(b.volume!=null)b.volume.allTracks=(a&1)!=0;if(b.balance!=null)b.balance.allTracks=(a&2)!=0;if(b.chorus!=null)b.chorus.allTracks=(a&4)!=0;if(b.reverb!=null)b.reverb.allTracks=(a&8)!=0;if(b.phaser!=null)b.phaser.allTracks=(a&16)!=0;if(b.tremolo!=null)b.tremolo.allTracks=(a&32)!=0;if(b.tempo!=null)b.tempo.allTracks=true;return b},readTremoloPicking:function(a){var b=this.data.readSignedByte(),d=this.factory.newTremoloPickingEffect();
switch(b){case 1:d.duration.value=c.model.Duration.EIGHTH;a.tremoloPicking=d;break;case 2:d.duration.value=c.model.Duration.SIXTEENTH;a.tremoloPicking=d;break;case 3:d.duration.value=c.model.Duration.THIRTY_SECOND;a.tremoloPicking=d;break}},readArtificialHarmonic:function(a){var b=this.data.readSignedByte(),d=this.factory.newHarmonicEffect();d.data=0;switch(b){case 1:d.type=0;a.harmonic=d;break;case 3:this.skip(1);d.type=2;a.harmonic=d;break;case 4:d.type=3;a.harmonic=d;break;case 5:d.type=4;a.harmonic=
d;break;case 15:d.data=2;d.type=1;a.harmonic=d;break;case 17:d.data=3;d.type=1;a.harmonic=d;break;case 22:d.data=0;d.type=1;a.harmonic=d;break}},readTrill:function(a){var b=this.data.readSignedByte(),d=this.data.readSignedByte(),e=this.factory.newTrillEffect();e.fret=b;switch(d){case 1:e.duration.value=c.model.Duration.SIXTEENTH;a.trill=e;break;case 2:e.duration.value=c.model.Duration.THIRTY_SECOND;a.trill=e;break;case 3:e.duration.value=c.model.Duration.SIXTY_FOURTH;a.trill=e;break}},readNoteEffects:function(a){var b=
this.data.readSignedByte(),d=this.data.readSignedByte();(b&1)!=0&&this.readBend(a);(b&16)!=0&&this.readGrace(a);(d&4)!=0&&this.readTremoloPicking(a);if((d&8)!=0){a.slide=true;switch(this.data.readSignedByte()){case 1:a.slideType=0;break;case 2:a.slideType=1;break;case 4:a.slideType=2;break;case 8:a.slideType=3;break;case 16:a.slideType=4;break;case 32:a.slideType=5;break}}(d&16)!=0&&this.readArtificialHarmonic(a);(d&32)!=0&&this.readTrill(a);a.letRing=(b&8)!=0;a.hammer=(b&2)!=0;a.vibrato=(d&64)!=
0||a.vibrato;a.palmMute=(d&2)!=0;a.staccato=(d&1)!=0},readBeat:function(a,b,d,e){var f=this.data.readSignedByte(),g=this.getBeat(b,a);e=g.voices[e];if((f&64)!=0){a=this.data.readSignedByte();e.isEmpty=(a&2)==0}a=this.readDuration(f);(f&2)!=0&&this.readChord(d.stringCount(),g);(f&4)!=0&&this.readText(g);(f&8)!=0&&this.readBeatEffects(g,null);if((f&16)!=0){b=this.readMixTableChange(b);g.effect.mixTableChange=b}b=this.data.readSignedByte();for(f=0;f<7;){g=6-f++;if((b&1<<g)!=0&&6-g<d.stringCount()){g=
this.readNote(d.strings[6-g].clone(this.factory),d,this.factory.newNoteEffect());e.addNote(g)}a.copy(e.duration)}return!e.isEmpty?a.time():0},readLyrics:function(a){a.lyrics=this.factory.newLyrics();a.lyrics.trackChoice=this.data.readInt();for(var b=0;b<5;){b++;var d=this.factory.newLyricLine();d.startingMeasure=this.data.readInt();d.lyrics=this.readIntSizeString();a.lyrics.lines.push(d)}},readSong:function(){if(!this.readVersion())throw new c.file.FileFormatException("Unsupported Version");var a=
this.factory.newSong();this.readInfo(a);this._tripletFeel=this.data.readBool()?1:0;this.readLyrics(a);this.readPageSetup(a);a.tempoName="";a.tempo=this.data.readInt();a.hideTempo=false;a.key=this.data.readInt();a.octave=this.data.readSignedByte();var b=this.readMidiChannels(),d=this.data.readInt(),e=this.data.readInt();this.readMeasureHeaders(a,d);this.readTracks(a,e,b);this.readMeasures(a);return a},__class__:c.file.guitarpro.Gp4Reader});c.file.guitarpro.Gp5Reader=function(){c.file.guitarpro.Gp4Reader.call(this);
this.initVersions(["FICHIER GUITAR PRO v5.00","FICHIER GUITAR PRO v5.10"])};c.file.guitarpro.Gp5Reader.__name__=true;c.file.guitarpro.Gp5Reader.__super__=c.file.guitarpro.Gp4Reader;c.file.guitarpro.Gp5Reader.prototype=y(c.file.guitarpro.Gp4Reader.prototype,{readInfo:function(a){a.title=this.readIntSizeCheckByteString();a.subtitle=this.readIntSizeCheckByteString();a.artist=this.readIntSizeCheckByteString();a.album=this.readIntSizeCheckByteString();a.words=this.readIntSizeCheckByteString();a.music=
this.readIntSizeCheckByteString();a.copyright=this.readIntSizeCheckByteString();a.tab=this.readIntSizeCheckByteString();a.instructions=this.readIntSizeCheckByteString();var b=this.data.readInt();a.notice="";for(var d=0;d<b;){d++;a.notice+=this.readIntSizeCheckByteString()+"\n"}},readPageSetup:function(a){var b=this.factory.newPageSetup();this._versionIndex>0&&this.skip(19);b.pageSize=new c.model.Point(this.data.readInt(),this.data.readInt());var d=this.data.readInt(),e=this.data.readInt(),f=this.data.readInt(),
g=this.data.readInt();b.pageMargin=new c.model.Padding(d,f,e,g);b.scoreSizeProportion=this.data.readInt()/100;b.headerAndFooter=this.data.readByte();if((this.data.readByte()&1)!=0)b.headerAndFooter|=256;b.title=this.readIntSizeCheckByteString();b.subtitle=this.readIntSizeCheckByteString();b.artist=this.readIntSizeCheckByteString();b.album=this.readIntSizeCheckByteString();b.words=this.readIntSizeCheckByteString();b.music=this.readIntSizeCheckByteString();b.wordsAndMusic=this.readIntSizeCheckByteString();
b.copyright=this.readIntSizeCheckByteString()+"\n"+this.readIntSizeCheckByteString();b.pageNumber=this.readIntSizeCheckByteString();a.pageSetup=b},readMeasureHeader:function(a,b,d){a>0&&this.skip(1);var e=this.data.readByte(),f=this.factory.newMeasureHeader();f.number=a+1;f.start=0;f.tempo.value=d.tempo;if((e&1)!=0)b.numerator=this.data.readByte();if((e&2)!=0)b.denominator.value=this.data.readByte();f.isRepeatOpen=(e&4)!=0;b.copy(f.timeSignature);if((e&8)!=0)f.repeatClose=this.data.readByte()-1;if((e&
32)!=0)f.marker=this.readMarker(f);if((e&16)!=0)f.repeatAlternative=this.data.readByte();if((e&64)!=0){f.keySignature=c.file.guitarpro.Gp3Reader.toKeySignature(this.data.readSignedByte());f.keySignatureType=this.data.readByte()}else if(f.number>1){f.keySignature=d.measureHeaders[a-1].keySignature;f.keySignatureType=d.measureHeaders[a-1].keySignatureType}f.hasDoubleBar=(e&128)!=0;(e&1)!=0&&this.skip(4);(e&16)==0&&this.skip(1);switch(this.data.readByte()){case 1:f.tripletFeel=1;break;case 2:f.tripletFeel=
2;break;default:f.tripletFeel=0}return f},readTrack:function(a,b){var d=this.data.readByte();if(a==1||this._versionIndex==0)this.skip(1);var e=this.factory.newTrack();e.isPercussionTrack=(d&1)!=0;e.is12StringedGuitarTrack=(d&2)!=0;e.isBanjoTrack=(d&4)!=0;e.number=a;e.name=this.readByteSizeString(40);d=this.data.readInt();for(var f=0;f<7;){var g=f++,h=this.data.readInt();if(d>g){var i=this.factory.newString();i.number=g+1;i.value=h;e.strings.push(i)}}e.port=this.data.readInt();this.readChannel(e.channel,
b);if(e.channel.channel==9)e.isPercussionTrack=true;e.fretCount=this.data.readInt();e.offset=this.data.readInt();e.color=this.readColor();this.skip(this._versionIndex>0?49:44);if(this._versionIndex>0){this.readIntSizeCheckByteString();this.readIntSizeCheckByteString()}return e},readTracks:function(a,b,d){var e=1;for(b=b+1;e<b;){var f=e++;a.addTrack(this.readTrack(f,d))}this.skip(this._versionIndex==0?2:1)},readChord:function(a,b){var d=this.factory.newChord(a);this.skip(17);d.name=this.readByteSizeString(21);
this.skip(4);d.firstFret=this.data.readInt();for(var e=0;e<7;){var f=e++,g=this.data.readInt();if(f<d.strings.length)d.strings[f]=g}this.skip(32);d.noteCount()>0&&b.setChord(d)},readMixTableChange:function(a){var b=this.factory.newMixTableChange();b.instrument.value=this.data.readSignedByte();this.skip(16);b.volume.value=this.data.readSignedByte();b.balance.value=this.data.readSignedByte();b.chorus.value=this.data.readSignedByte();b.reverb.value=this.data.readSignedByte();b.phaser.value=this.data.readSignedByte();
b.tremolo.value=this.data.readSignedByte();b.tempoName=this.readIntSizeCheckByteString();b.tempo.value=this.data.readInt();if(b.instrument.value<0)b.instrument=null;if(b.volume.value>=0)b.volume.duration=this.data.readSignedByte();else b.volume=null;if(b.balance.value>=0)b.balance.duration=this.data.readSignedByte();else b.balance=null;if(b.chorus.value>=0)b.chorus.duration=this.data.readSignedByte();else b.chorus=null;if(b.reverb.value>=0)b.reverb.duration=this.data.readSignedByte();else b.reverb=
null;if(b.phaser.value>=0)b.phaser.duration=this.data.readSignedByte();else b.phaser=null;if(b.tremolo.value>=0)b.tremolo.duration=this.data.readSignedByte();else b.tremolo=null;if(b.tempo.value>=0){b.tempo.duration=this.data.readSignedByte();a.header.tempo.value=b.tempo.value;b.hideTempo=this._versionIndex>0&&this.data.readBool()}else b.tempo=null;a=this.data.readByte();if(b.volume!=null)b.volume.allTracks=(a&1)!=0;if(b.balance!=null)b.balance.allTracks=(a&2)!=0;if(b.chorus!=null)b.chorus.allTracks=
(a&4)!=0;if(b.reverb!=null)b.reverb.allTracks=(a&8)!=0;if(b.phaser!=null)b.phaser.allTracks=(a&16)!=0;if(b.tremolo!=null)b.tremolo.allTracks=(a&32)!=0;if(b.tempo!=null)b.tempo.allTracks=true;this.skip(1);if(this._versionIndex>0){this.readIntSizeCheckByteString();this.readIntSizeCheckByteString()}return b},readGrace:function(a){var b=this.data.readByte(),d=this.data.readByte(),e=this.data.readByte(),f=this.data.readByte(),g=this.data.readByte(),h=this.factory.newGraceEffect();h.fret=b;h.velocity=15+
16*d-16;h.duration=f;h.isDead=(g&1)!=0;h.isOnBeat=(g&2)!=0;switch(e){case 0:h.transition=0;break;case 1:h.transition=1;break;case 2:h.transition=2;break;case 3:h.transition=3;break}a.grace=h},readArtificialHarmonic:function(a){var b=this.data.readByte(),d=this.factory.newHarmonicEffect();d.data=0;switch(b){case 1:d.type=0;a.harmonic=d;break;case 2:this.skip(3);d.type=1;a.harmonic=d;break;case 3:this.skip(1);d.type=2;a.harmonic=d;break;case 4:d.type=3;a.harmonic=d;break;case 5:d.type=4;a.harmonic=
d;break}},readNoteEffects:function(a){var b=this.data.readByte(),d=this.data.readByte();(b&1)!=0&&this.readBend(a);(b&16)!=0&&this.readGrace(a);(d&4)!=0&&this.readTremoloPicking(a);if((d&8)!=0){a.slide=true;switch(this.data.readByte()){case 1:a.slideType=0;break;case 2:a.slideType=1;break;case 4:a.slideType=2;break;case 8:a.slideType=3;break;case 16:a.slideType=4;break;case 32:a.slideType=5;break}}(d&16)!=0&&this.readArtificialHarmonic(a);(d&32)!=0&&this.readTrill(a);a.letRing=(b&8)!=0;a.hammer=(b&
2)!=0;a.vibrato=(d&64)!=0||a.vibrato;a.palmMute=(d&2)!=0;a.staccato=(d&1)!=0},readNote:function(a,b){var d=this.data.readByte(),e=this.factory.newNote();e.string=a.number;e.effect.accentuatedNote=(d&64)!=0;e.effect.heavyAccentuatedNote=(d&2)!=0;e.effect.ghostNote=(d&4)!=0;if((d&32)!=0){var f=this.data.readByte();e.isTiedNote=f==2;e.effect.deadNote=f==3}if((d&16)!=0)e.velocity=15+16*this.data.readSignedByte()-16;if((d&32)!=0){f=this.data.readSignedByte();f=e.isTiedNote?this.getTiedNoteValue(a.number,
b):f;e.value=f>=0&&f<100?f:0}if((d&128)!=0){e.effect.leftHandFinger=this.data.readSignedByte();e.effect.rightHandFinger=this.data.readSignedByte();e.effect.isFingering=true}if((d&1)!=0)e.durationPercent=this.data.readDouble();f=this.data.readByte();e.swapAccidentals=(f&2)!=0;(d&8)!=0&&this.readNoteEffects(e.effect);return e},readBeat:function(a,b,d,e){var f=this.data.readByte(),g=this.getBeat(b,a);e=g.voices[e];if((f&64)!=0){a=this.data.readByte();e.isEmpty=(a&2)==0}a=this.readDuration(f);(f&2)!=
0&&this.readChord(d.stringCount(),g);(f&4)!=0&&this.readText(g);(f&8)!=0&&this.readBeatEffects(g,null);if((f&16)!=0){b=this.readMixTableChange(b);g.effect.mixTableChange=b}b=this.data.readByte();for(f=0;f<7;){g=6-f++;if((b&1<<g)!=0&&6-g<d.stringCount()){g=this.readNote(d.strings[6-g].clone(this.factory),d,this.factory.newNoteEffect());e.addNote(g)}a.copy(e.duration)}this.skip(1);d=this.data.readByte();if(d==8||d==10)this.skip(1);return!e.isEmpty?a.time():0},readMeasure:function(a,b){for(var d=0;d<
2;)for(var e=d++,f=a.header.start,g=this.data.readInt(),h=0;h<g;){h++;f+=this.readBeat(f,a,b,e)}this.skip(1)},readSong:function(){if(!this.readVersion())throw new c.file.FileFormatException("Unsupported Version");var a=this.factory.newSong();this.readInfo(a);this.readLyrics(a);this.readPageSetup(a);a.tempoName=this.readIntSizeCheckByteString();a.tempo=this.data.readInt();if(this._versionIndex>0)a.hideTempo=this.data.readBool();a.key=this.data.readByte();a.octave=this.data.readInt();var b=this.readMidiChannels();
this.skip(42);var d=this.data.readInt(),e=this.data.readInt();this.readMeasureHeaders(a,d);this.readTracks(a,e,b);this.readMeasures(a);return a},__class__:c.file.guitarpro.Gp5Reader});c.file.musicxml={};c.file.musicxml.MusicXmlReader=function(){c.file.SongReader.call(this)};c.file.musicxml.MusicXmlReader.__name__=true;c.file.musicxml.MusicXmlReader.__super__=c.file.SongReader;c.file.musicxml.MusicXmlReader.prototype=y(c.file.SongReader.prototype,{parseTimewise:function(){throw new c.file.FileFormatException("score-timewise not yet supported");
},scoreHeader:function(a){if(this._dom.hasNode.resolve("movement-title"))a.title=this._dom.node.resolve("movement-title").get_innerData();if(this._dom.hasNode.resolve("identification"))for(var b=this._dom.node.resolve("identification").nodes.resolve("creator").iterator();b.hasNext();){var d=b.next();if(d.has.resolve("type"))switch(d.att.resolve("type")){case "artist":a.artist=d.get_innerData();break;case "poet":a.words=d.get_innerData();break}}b=0;for(d=this._dom.node.resolve("part-list").nodes.resolve("score-part").iterator();d.hasNext();){var e=
d.next(),f=this.factory.newTrack();this._idToTrack.set(e.att.resolve("id"),f);f.number=b++;f.channel.instrument(25);this.createDefaultStrings(f.strings);f.name=e.node.resolve("part-name").get_innerData();if(e.hasNode.resolve("midi-instrument")){e=e.node.resolve("midi-instrument");if(e.hasNode.resolve("midi-channel")){f.channel.channel=l.parseInt(e.node.resolve("midi-channel").get_innerData());f.channel.effectChannel=f.channel.channel}e.hasNode.resolve("midi-program")&&f.channel.instrument(l.parseInt(e.node.resolve("midi-program").get_innerData()));
if(e.hasNode.resolve("volume"))f.channel.volume=l.parseInt(e.node.resolve("volume").get_innerData());if(e.hasNode.resolve("pan"))f.channel.balance=l.parseInt(e.node.resolve("pan").get_innerData())}a.addTrack(f)}},getOrCreateMeasureHeader:function(a,b){if(b>=a.measureHeaders.length)for(var d=b-a.measureHeaders.length+1,e=0;e<d;){e++;var f=this.factory.newMeasureHeader();f.number=a.measureHeaders.length+1;f.start=0;a.addMeasureHeader(f)}return a.measureHeaders[b]},toDuration:function(a){switch(a){case "whole":return c.model.Duration.WHOLE;
case "half":return c.model.Duration.HALF;case "quarter":return c.model.Duration.QUARTER;case "eighth":return c.model.Duration.EIGHTH;case "16th":return c.model.Duration.SIXTEENTH;case "32nd":return c.model.Duration.THIRTY_SECOND;case "64th":return c.model.Duration.SIXTY_FOURTH;default:return c.model.Duration.QUARTER}},findStringForValue:function(a,b,d){var e=[],f=0;for(b=b.notes;f<b.length;){var g=b[f];++f;e.push(g.string)}f=0;for(b=a.strings;f<b.length;){a=b[f];++f;if(!G.has(e,a.number)){g=a.value+
14;if(d>=a.value&&d<=g)return a.number}}return 1},parseNote:function(a,b,d){var e=null,f=0;if(a.hasNode.resolve("voice")){f=l.parseInt(a.node.resolve("voice").get_innerData());if(!this._voiceOffsetDetected){this._voiceOffset=f;this._voiceOffsetDetected=true}f-=this._voiceOffset}if(a.hasNode.resolve("rest")){e=this.factory.newBeat();if(this._nextBeatChord!=null){e.setChord(this.factory.newChord(d.stringCount()));e.effect.chord.name=this._nextBeatChord;this._nextBeatChord=null}b.addBeat(e);e.ensureVoices(f+
1,this.factory);e.voices[f].isEmpty=false;e.voices[f].duration.value=a.hasNode.resolve("type")?this.toDuration(a.node.resolve("type").get_innerData()):c.model.Duration.QUARTER;if(a.hasNode.resolve("dot"))e.voices[f].duration.isDotted=true}else{var g=this.factory.newNote();if(a.hasNode.resolve("chord")){e=b.beats[b.beats.length-1];e.ensureVoices(f+1,this.factory);e.voices[f].isEmpty=false}else{e=this.factory.newBeat();if(this._nextBeatChord!=null){e.setChord(this.factory.newChord(d.stringCount()));
e.effect.chord.name=this._nextBeatChord;this._nextBeatChord=null}b.addBeat(e);e.ensureVoices(f+1,this.factory);e.voices[f].isEmpty=false;e.voices[f].duration.value=a.hasNode.resolve("type")?this.toDuration(a.node.resolve("type").get_innerData()):c.model.Duration.QUARTER;if(a.hasNode.resolve("dot"))e.voices[f].duration.isDotted=true}g.effect=this.factory.newNoteEffect();a=a.node.resolve("pitch").node.resolve("step").get_innerData()+a.node.resolve("pitch").node.resolve("octave").get_innerData();a=c.model.Tuning.getTuningForText(a);
g.string=this.findStringForValue(d,e.voices[f],a);g.value=a-d.strings[g.string-1].value;e.voices[f].addNote(g)}},parseHarmony:function(a){if(a.hasNode.resolve("root")){var b=a.node.resolve("root").node.resolve("root-step").get_innerData();if(a.hasNode.resolve("kind")){a=a.node.resolve("kind").get_innerData();switch(a){case "minor":b+="m";break;case "major":b+="";break;case "dominant":b+=String.fromCharCode(8311);break;default:b+=a}}this._nextBeatChord=b}else this._nextBeatChord=null},parseMeasure:function(a,
b,d){b=this.factory.newMeasure(b);a.addMeasure(b);if(d.hasNode.resolve("attributes")){var e=d.node.resolve("attributes");if(e.hasNode.resolve("clef")){e=e.node.resolve("clef").node.resolve("sign").get_innerData()+e.node.resolve("clef").node.resolve("line").get_innerData();if(e=="G2")b.clef=0;else if(e=="F4")b.clef=1;else if(e=="C3")b.clef=2;else if(e=="C4")b.clef=3}}for(d=d.get_elements();d.hasNext();){e=d.next();if(e.get_name()=="note")this.parseNote(e,b,a);else e.get_name()=="harmony"&&this.parseHarmony(e)}},
parseHeader:function(a,b){if(b.hasNode.resolve("attributes")){var d=b.node.resolve("attributes");if(d.hasNode.resolve("key"))a.keySignature=l.parseInt(d.node.resolve("key").node.resolve("fifths").get_innerData());if(d.hasNode.resolve("time")){a.timeSignature.numerator=l.parseInt(d.node.resolve("time").node.resolve("beats").get_innerData());a.timeSignature.denominator.value=l.parseInt(d.node.resolve("time").node.resolve("beat-type").get_innerData())}}if(b.hasNode.resolve("direction")){d=b.node.resolve("direction");
if(d.hasNode.resolve("sound"))if(d.node.resolve("sound").has.resolve("tempo"))a.tempo.value=l.parseInt(d.node.resolve("sound").att.resolve("tempo"))}},parsePart:function(a,b){for(var d=this._idToTrack.get(b.att.resolve("id")),e=0,f=b.nodes.resolve("measure").iterator();f.hasNext();){var g=f.next(),h=this.getOrCreateMeasureHeader(a,e++);this.parseHeader(h,g);this.parseMeasure(d,h,g)}},parsePartwise:function(){var a=this.factory.newSong();a.tempo=120;a.tempoName="";a.hideTempo=false;a.pageSetup=this.factory.newPageSetup();
this.scoreHeader(a);for(var b=this._dom.nodes.resolve("part").iterator();b.hasNext();){var d=b.next();this.parsePart(a,d)}return a},readSong:function(){try{this._voiceOffsetDetected=false;var a=o.parse(this.data.readString(this.data.length()));this._dom=new p.xml.Fast(a.firstElement())}catch(b){throw new c.file.FileFormatException("not a valid xml file");}this._idToTrack=new p.ds.StringMap;if(this._dom.get_name()=="score-partwise")return this.parsePartwise();else if(this._dom.get_name()=="score-timewise")return this.parseTimewise();
else throw new c.file.FileFormatException("this xml file is no musicxml file");},__class__:c.file.musicxml.MusicXmlReader});c.io={};c.io.InputStream=function(){};c.io.InputStream.__name__=true;c.io.InputStream.prototype={close:function(){},skip:function(a){for(var b=0;b<a;){b++;this.eof()||this.readByte()}},seek:function(){},canSeek:function(){return false},position:function(){return 0},length:function(){return 0},eof:function(){return this.position()>=this.length()},readBytes:function(a){for(var b=
[],d=0;d<a;){d++;b.push(this.readByte())}return b},readSignedByte:function(){var a=this.readByte()&255;return a>127?-256+a:a},readChar:function(){return String.fromCharCode(this.readByte())},readByte:function(){return 0},__class__:c.io.InputStream};c.io.DelegatedInputStream=function(a){this._stream=a};c.io.DelegatedInputStream.__name__=true;c.io.DelegatedInputStream.__super__=c.io.InputStream;c.io.DelegatedInputStream.prototype=y(c.io.InputStream.prototype,{skip:function(a){this._stream.skip(a)},
seek:function(a){this._stream.seek(a)},readChar:function(){return this._stream.readChar()},readSignedByte:function(){return this._stream.readSignedByte()},readBytes:function(a){return this._stream.readBytes(a)},readByte:function(){return this._stream.readByte()},position:function(){return this._stream.position()},length:function(){return this._stream.length()},eof:function(){return this._stream.eof()},close:function(){this._stream.close()},canSeek:function(){return this._stream.canSeek()},__class__:c.io.DelegatedInputStream});
c.io.BitInputStream=function(a){c.io.DelegatedInputStream.call(this,a);this._position=8};c.io.BitInputStream.__name__=true;c.io.BitInputStream.__super__=c.io.DelegatedInputStream;c.io.BitInputStream.prototype=y(c.io.DelegatedInputStream.prototype,{readBit:function(){if(this._position>=8){this._currentByte=this._stream.readByte();this._position=0}var a=this._currentByte>>8-this._position-1&1;this._position++;return a},readBitsReversed:function(a){for(var b=0,d=0;d<a;){b|=this.readBit()<<d;d++}return b},
readBits:function(a){var b=0;for(a=a-1;a>=0;){b|=this.readBit()<<a;a--}return b},seek:function(a){this._position=8;this._stream.seek(a)},readByte:function(){return this.readBits(8)},__class__:c.io.BitInputStream});c.io.DataInputStream=function(a,b){if(b==null)b=true;c.io.DelegatedInputStream.call(this,a);this.bigEndian=b};c.io.DataInputStream.__name__=true;c.io.DataInputStream.__super__=c.io.DelegatedInputStream;c.io.DataInputStream.prototype=y(c.io.DelegatedInputStream.prototype,{getDoubleSig:function(a){return parseInt((((a[1]&
15)<<16|a[2]<<8|a[3])*Math.pow(2,32)).toString(2),2)+parseInt(((a[4]>>7)*Math.pow(2,31)).toString(2),2)+parseInt(((a[4]&127)<<24|a[5]<<16|a[6]<<8|a[7]).toString(2),2)},readDouble:function(){var a=this.readEndianAwareBytes(8),b=1-(a[0]>>7<<1),d=(a[0]<<4&2047|a[1]>>4)-1023;a=this.getDoubleSig(a);if(a==0&&d==-1023)return 0;return b*(1+Math.pow(2,-52)*a)*Math.pow(2,d)},readFloat:function(){var a=this.readEndianAwareBytes(4),b=(a[0]<<1&255|a[1]>>7)-127,d=(a[1]&127)<<16|a[2]<<8|a[3];if(d==0&&b==-127)return 0;
return(1-(a[0]>>7<<1))*(1+Math.pow(2,-23)*d)*Math.pow(2,b)},readInt:function(){var a=this.readEndianAwareBytes(4);return a[0]<<24|a[1]<<16|a[2]<<8|a[3]},readShort:function(){var a=this.readEndianAwareBytes(2);a=a[0]<<8|a[1];return a>32767?-65536+a:a},readBool:function(){return this.readByte()!=0},readString:function(a){if(x.Boot.__instanceof(this._stream,c.io.StringInputStream))return x.Boot.__cast(this._stream,c.io.StringInputStream).readString(a);else{for(var b="",d=0;d<a;){d++;b+=String.fromCharCode(this.readByte())}return b}},
readEndianAwareBytes:function(a){a=this.readBytes(a);this.bigEndian||a.reverse();return a},__class__:c.io.DataInputStream});c.io.OutputStream=function(){};c.io.OutputStream.__name__=true;c.io.OutputStream.prototype={close:function(){},flush:function(){},writeString:function(a){for(var b=0,d=a.length;b<d;){var e=b++;this.writeByte(v.cca(a,e)&255)}},writeAsString:function(a){this.writeString(x.Boot.__instanceof(a,String)?a:l.string(a))},writeBytes:function(a){for(var b=0;b<a.length;){var d=a[b];++b;
this.writeByte(d)}},writeByte:function(){},__class__:c.io.OutputStream};c.io.DataOutputStream=function(a,b){if(b==null)b=true;c.io.OutputStream.call(this);this._stream=a;this.bigEndian=b};c.io.DataOutputStream.__name__=true;c.io.DataOutputStream.__super__=c.io.OutputStream;c.io.DataOutputStream.prototype=y(c.io.OutputStream.prototype,{flush:function(){this._stream.flush()},writeBytes:function(a){this._stream.writeBytes(a)},writeByte:function(a){this._stream.writeByte(a)},writeDouble:function(a){a==
0&&this.writeBytes([0,0,0,0,0,0,0,0]);var b=Math.floor(Math.log(Math.abs(a))/c.io.DataOutputStream.LN2),d=Math.floor(Math.abs(a)/Math.pow(2,b)*Math.pow(2,52)),e=d&-16711681;d=Math.floor(d/Math.pow(2,32));this.writeEndianAware([b+1023>>4|(b>0?a<0?128:64:a<0?128:0),b+1023<<4&255|d>>16&15,d>>8&255,d&255,e>>24&255,e>>16&255,e>>8&255,e&255])},writeFloat:function(a){a==0&&this.writeBytes([0,0,0,0]);var b=Math.floor(Math.log(Math.abs(a))/c.io.DataOutputStream.LN2),d=Math.floor(Math.abs(a)/Math.pow(2,b)*
Math.pow(2,23))&8388607;this.writeEndianAware([b+127>>1|(b>0?a<0?128:64:a<0?128:0),b+127<<7&255|d>>16&127,d>>8&255,d&255])},writeInt:function(a){this.writeEndianAware([a>>24&255,a>>16&255,a>>8&255,a&255])},writeShort:function(a){this.writeEndianAware([a>>8&255,a&255])},writeBool:function(a){a?this.writeByte(1):this.writeByte(0)},writeEndianAware:function(a){this.bigEndian||a.reverse();this.writeBytes(a)},__class__:c.io.DataOutputStream});c.io.MemoryOutputStream=function(){c.io.OutputStream.call(this);
this._buffer=[]};c.io.MemoryOutputStream.__name__=true;c.io.MemoryOutputStream.__super__=c.io.OutputStream;c.io.MemoryOutputStream.prototype=y(c.io.OutputStream.prototype,{writeByte:function(a){this._buffer.push(a&255)},getBuffer:function(){return this._buffer},__class__:c.io.MemoryOutputStream});c.io.StringInputStream=function(a){this._buffer=a;this._pos=0};c.io.StringInputStream.__name__=true;c.io.StringInputStream.__super__=c.io.InputStream;c.io.StringInputStream.prototype=y(c.io.InputStream.prototype,
{canSeek:function(){return true},seek:function(a){this._pos=a},position:function(){return this._pos},length:function(){return this._buffer.length},readChar:function(){return this._buffer.charAt(this._pos++)},readByte:function(){return v.cca(this._buffer,this._pos++)&255},readString:function(a){var b=v.substr(this._buffer,this._pos,a);this._pos+=a;return b},__class__:c.io.StringInputStream});c.io.StringOutputStream=function(){c.io.OutputStream.call(this);this._buffer=new F};c.io.StringOutputStream.__name__=
true;c.io.StringOutputStream.__super__=c.io.OutputStream;c.io.StringOutputStream.prototype=y(c.io.OutputStream.prototype,{toString:function(){return this._buffer.b},writeString:function(a){this._buffer.b+=l.string(a)},writeByte:function(a){this._buffer.b+=l.string(String.fromCharCode(a))},__class__:c.io.StringOutputStream});c.midi={};c.midi.BeatData=function(a,b){this.start=a;this.duration=b};c.midi.BeatData.__name__=true;c.midi.BeatData.prototype={__class__:c.midi.BeatData};c.midi.GeneralMidi=function(){};
c.midi.GeneralMidi.__name__=true;c.midi.GeneralMidi.getValue=function(a){if(c.midi.GeneralMidi._values==null){c.midi.GeneralMidi._values=new p.ds.StringMap;c.midi.GeneralMidi._values.set("acousticgrandpiano",0);c.midi.GeneralMidi._values.set("brightacousticpiano",1);c.midi.GeneralMidi._values.set("electricgrandpiano",2);c.midi.GeneralMidi._values.set("honkytonkpiano",3);c.midi.GeneralMidi._values.set("electricpiano1",4);c.midi.GeneralMidi._values.set("electricpiano2",5);c.midi.GeneralMidi._values.set("harpsichord",
6);c.midi.GeneralMidi._values.set("clavinet",7);c.midi.GeneralMidi._values.set("celesta",8);c.midi.GeneralMidi._values.set("glockenspiel",9);c.midi.GeneralMidi._values.set("musicbox",10);c.midi.GeneralMidi._values.set("vibraphone",11);c.midi.GeneralMidi._values.set("marimba",12);c.midi.GeneralMidi._values.set("xylophone",13);c.midi.GeneralMidi._values.set("tubularbells",14);c.midi.GeneralMidi._values.set("dulcimer",15);c.midi.GeneralMidi._values.set("drawbarorgan",16);c.midi.GeneralMidi._values.set("percussiveorgan",
17);c.midi.GeneralMidi._values.set("rockorgan",18);c.midi.GeneralMidi._values.set("churchorgan",19);c.midi.GeneralMidi._values.set("reedorgan",20);c.midi.GeneralMidi._values.set("accordion",21);c.midi.GeneralMidi._values.set("harmonica",22);c.midi.GeneralMidi._values.set("tangoaccordion",23);c.midi.GeneralMidi._values.set("acousticguitarnylon",24);c.midi.GeneralMidi._values.set("acousticguitarsteel",25);c.midi.GeneralMidi._values.set("electricguitarjazz",26);c.midi.GeneralMidi._values.set("electricguitarclean",
27);c.midi.GeneralMidi._values.set("electricguitarmuted",28);c.midi.GeneralMidi._values.set("overdrivenguitar",29);c.midi.GeneralMidi._values.set("distortionguitar",30);c.midi.GeneralMidi._values.set("guitarharmonics",31);c.midi.GeneralMidi._values.set("acousticbass",32);c.midi.GeneralMidi._values.set("electricbassfinger",33);c.midi.GeneralMidi._values.set("electricbasspick",34);c.midi.GeneralMidi._values.set("fretlessbass",35);c.midi.GeneralMidi._values.set("slapbass1",36);c.midi.GeneralMidi._values.set("slapbass2",
37);c.midi.GeneralMidi._values.set("synthbass1",38);c.midi.GeneralMidi._values.set("synthbass2",39);c.midi.GeneralMidi._values.set("violin",40);c.midi.GeneralMidi._values.set("viola",41);c.midi.GeneralMidi._values.set("cello",42);c.midi.GeneralMidi._values.set("contrabass",43);c.midi.GeneralMidi._values.set("tremolostrings",44);c.midi.GeneralMidi._values.set("pizzicatostrings",45);c.midi.GeneralMidi._values.set("orchestralharp",46);c.midi.GeneralMidi._values.set("timpani",47);c.midi.GeneralMidi._values.set("stringensemble1",
48);c.midi.GeneralMidi._values.set("stringensemble2",49);c.midi.GeneralMidi._values.set("synthstrings1",50);c.midi.GeneralMidi._values.set("synthstrings2",51);c.midi.GeneralMidi._values.set("choiraahs",52);c.midi.GeneralMidi._values.set("voiceoohs",53);c.midi.GeneralMidi._values.set("synthvoice",54);c.midi.GeneralMidi._values.set("orchestrahit",55);c.midi.GeneralMidi._values.set("trumpet",56);c.midi.GeneralMidi._values.set("trombone",57);c.midi.GeneralMidi._values.set("tuba",58);c.midi.GeneralMidi._values.set("mutedtrumpet",
59);c.midi.GeneralMidi._values.set("frenchhorn",60);c.midi.GeneralMidi._values.set("brasssection",61);c.midi.GeneralMidi._values.set("synthbrass1",62);c.midi.GeneralMidi._values.set("synthbrass2",63);c.midi.GeneralMidi._values.set("sopranosax",64);c.midi.GeneralMidi._values.set("altosax",65);c.midi.GeneralMidi._values.set("tenorsax",66);c.midi.GeneralMidi._values.set("baritonesax",67);c.midi.GeneralMidi._values.set("oboe",68);c.midi.GeneralMidi._values.set("englishhorn",69);c.midi.GeneralMidi._values.set("bassoon",
70);c.midi.GeneralMidi._values.set("clarinet",71);c.midi.GeneralMidi._values.set("piccolo",72);c.midi.GeneralMidi._values.set("flute",73);c.midi.GeneralMidi._values.set("recorder",74);c.midi.GeneralMidi._values.set("panflute",75);c.midi.GeneralMidi._values.set("blownbottle",76);c.midi.GeneralMidi._values.set("shakuhachi",77);c.midi.GeneralMidi._values.set("whistle",78);c.midi.GeneralMidi._values.set("ocarina",79);c.midi.GeneralMidi._values.set("lead1square",80);c.midi.GeneralMidi._values.set("lead2sawtooth",
81);c.midi.GeneralMidi._values.set("lead3calliope",82);c.midi.GeneralMidi._values.set("lead4chiff",83);c.midi.GeneralMidi._values.set("lead5charang",84);c.midi.GeneralMidi._values.set("lead6voice",85);c.midi.GeneralMidi._values.set("lead7fifths",86);c.midi.GeneralMidi._values.set("lead8bassandlead",87);c.midi.GeneralMidi._values.set("pad1newage",88);c.midi.GeneralMidi._values.set("pad2warm",89);c.midi.GeneralMidi._values.set("pad3polysynth",90);c.midi.GeneralMidi._values.set("pad4choir",91);c.midi.GeneralMidi._values.set("pad5bowed",
92);c.midi.GeneralMidi._values.set("pad6metallic",93);c.midi.GeneralMidi._values.set("pad7halo",94);c.midi.GeneralMidi._values.set("pad8sweep",95);c.midi.GeneralMidi._values.set("fx1rain",96);c.midi.GeneralMidi._values.set("fx2soundtrack",97);c.midi.GeneralMidi._values.set("fx3crystal",98);c.midi.GeneralMidi._values.set("fx4atmosphere",99);c.midi.GeneralMidi._values.set("fx5brightness",100);c.midi.GeneralMidi._values.set("fx6goblins",101);c.midi.GeneralMidi._values.set("fx7echoes",102);c.midi.GeneralMidi._values.set("fx8scifi",
103);c.midi.GeneralMidi._values.set("sitar",104);c.midi.GeneralMidi._values.set("banjo",105);c.midi.GeneralMidi._values.set("shamisen",106);c.midi.GeneralMidi._values.set("koto",107);c.midi.GeneralMidi._values.set("kalimba",108);c.midi.GeneralMidi._values.set("bagpipe",109);c.midi.GeneralMidi._values.set("fiddle",110);c.midi.GeneralMidi._values.set("shanai",111);c.midi.GeneralMidi._values.set("tinklebell",112);c.midi.GeneralMidi._values.set("agogo",113);c.midi.GeneralMidi._values.set("steeldrums",
114);c.midi.GeneralMidi._values.set("woodblock",115);c.midi.GeneralMidi._values.set("taikodrum",116);c.midi.GeneralMidi._values.set("melodictom",117);c.midi.GeneralMidi._values.set("synthdrum",118);c.midi.GeneralMidi._values.set("reversecymbal",119);c.midi.GeneralMidi._values.set("guitarfretnoise",120);c.midi.GeneralMidi._values.set("breathnoise",121);c.midi.GeneralMidi._values.set("seashore",122);c.midi.GeneralMidi._values.set("birdtweet",123);c.midi.GeneralMidi._values.set("telephonering",124);
c.midi.GeneralMidi._values.set("helicopter",125);c.midi.GeneralMidi._values.set("applause",126);c.midi.GeneralMidi._values.set("gunshot",127)}a=q.replace(a.toLowerCase()," ","");return c.midi.GeneralMidi._values.exists(a)?c.midi.GeneralMidi._values.get(a):0};c.midi.MidiController=function(){};c.midi.MidiController.__name__=true;c.midi.MidiDataProvider=function(){};c.midi.MidiDataProvider.__name__=true;c.midi.MidiDataProvider.getSongMidiData=function(a,b){var d=new c.midi.MidiSequenceParser(b,a,15,
100,0),e=new c.midi.MidiSequenceDataHandler(a.tracks.length+2);d.parse(e);return e.commands};c.midi.MidiDataProvider.getSongMidiFile=function(a,b){var d=new c.midi.MidiSequenceParser(b,a,15,100,0),e=new c.midi.MidiSequenceFileHandler(a.tracks.length+2);d.parse(e);return e.midiFile};c.midi.MidiMessageDataUtils=function(){};c.midi.MidiMessageDataUtils.__name__=true;c.midi.MidiMessageDataUtils.fixValue=function(a){a=a;a=Math.min(a,127);return a=Math.max(a,0)};c.midi.MidiMessageDataUtils.fixChannel=function(a){a=
a;a=Math.min(a,15);return a=Math.max(a,0)};c.midi.MidiMessageDataUtils.noteOn=function(a,b,d){return"0"+q.hex(c.midi.MidiMessageDataUtils.fixChannel(a),1)+q.hex(c.midi.MidiMessageDataUtils.fixValue(b),2)+q.hex(c.midi.MidiMessageDataUtils.fixValue(d),2)};c.midi.MidiMessageDataUtils.noteOff=function(a,b,d){return"1"+q.hex(c.midi.MidiMessageDataUtils.fixChannel(a),1)+q.hex(c.midi.MidiMessageDataUtils.fixValue(b),2)+q.hex(c.midi.MidiMessageDataUtils.fixValue(d),2)};c.midi.MidiMessageDataUtils.controlChange=
function(a,b,d){return"2"+q.hex(c.midi.MidiMessageDataUtils.fixChannel(a),1)+q.hex(c.midi.MidiMessageDataUtils.fixValue(b),2)+q.hex(c.midi.MidiMessageDataUtils.fixValue(d),2)};c.midi.MidiMessageDataUtils.programChange=function(a,b){return"3"+q.hex(c.midi.MidiMessageDataUtils.fixChannel(a),1)+q.hex(c.midi.MidiMessageDataUtils.fixValue(b),2)};c.midi.MidiMessageDataUtils.pitchBend=function(a,b){return"4"+q.hex(c.midi.MidiMessageDataUtils.fixChannel(a),1)+q.hex(c.midi.MidiMessageDataUtils.fixValue(b),
2)};c.midi.MidiMessageDataUtils.tempoInUSQ=function(a){return"5"+q.hex(a)};c.midi.MidiMessageDataUtils.timeSignature=function(a){return"6"+q.hex(a.numerator)+","+q.hex(a.denominator.index())+","+q.hex(a.denominator.value)};c.midi.MidiMessageDataUtils.rest=function(){return"7"};c.midi.MidiMessageDataUtils.intToString=function(a){return q.hex(a)};c.midi.MidiMessageDataUtils.channelToString=function(a){return q.hex(a,1)};c.midi.MidiMessageDataUtils.valueToString=function(a){return q.hex(a,2)};c.midi.MidiMessageFileUtils=
function(){};c.midi.MidiMessageFileUtils.__name__=true;c.midi.MidiMessageFileUtils.fixValue=function(a){if(a<0)return 0;if(a>127)return 127;return a};c.midi.MidiMessageFileUtils.fixChannel=function(a){if(a<0)return 0;if(a>15)return 15;return a};c.midi.MidiMessageFileUtils.noteOff=function(a,b,d){return new c.midi.model.MidiMessage([c.midi.MidiMessageFileUtils.makeCommand(128,a),c.midi.MidiMessageFileUtils.fixValue(b),c.midi.MidiMessageFileUtils.fixValue(d)])};c.midi.MidiMessageFileUtils.noteOn=function(a,
b,d){return new c.midi.model.MidiMessage([c.midi.MidiMessageFileUtils.makeCommand(144,a),c.midi.MidiMessageFileUtils.fixValue(b),c.midi.MidiMessageFileUtils.fixValue(d)])};c.midi.MidiMessageFileUtils.rest=function(){return new c.midi.model.MidiMessage([240,0,0,247])};c.midi.MidiMessageFileUtils.controlChange=function(a,b,d){return new c.midi.model.MidiMessage([c.midi.MidiMessageFileUtils.makeCommand(176,a),c.midi.MidiMessageFileUtils.fixValue(b),c.midi.MidiMessageFileUtils.fixValue(d)])};c.midi.MidiMessageFileUtils.programChange=
function(a,b){return new c.midi.model.MidiMessage([c.midi.MidiMessageFileUtils.makeCommand(192,a),c.midi.MidiMessageFileUtils.fixValue(b)])};c.midi.MidiMessageFileUtils.pitchBend=function(a,b){return new c.midi.model.MidiMessage([c.midi.MidiMessageFileUtils.makeCommand(224,a),0,c.midi.MidiMessageFileUtils.fixValue(b)])};c.midi.MidiMessageFileUtils.makeCommand=function(a,b){return a&240|b&15};c.midi.MidiMessageFileUtils.buildSysexMessage=function(a){var b=[];b.push(240);if(a==null)a=[];a.push(247);
c.midi.model.MidiFile.writeVariableLengthValue(b,a.length);b=b.concat(a);return new c.midi.model.MidiMessage(b)};c.midi.MidiMessageFileUtils.buildMetaMessage=function(a,b){var d=[];d.push(255);d.push(a&255);if(b==null)c.midi.model.MidiFile.writeVariableLengthValue(d,0);else{c.midi.model.MidiFile.writeVariableLengthValue(d,b.length);d=d.concat(b)}return new c.midi.model.MidiMessage(d)};c.midi.MidiMessageFileUtils.tempoInUSQ=function(a){return c.midi.MidiMessageFileUtils.buildMetaMessage(81,[a>>16&
255,a>>8&255,a&255])};c.midi.MidiMessageFileUtils.timeSignature=function(a){return c.midi.MidiMessageFileUtils.buildMetaMessage(88,[a.numerator&255,a.denominator.index()&255,48,8])};c.midi.MidiRepeatController=function(a){this._song=a;this._count=a.measureHeaders.length;this.index=0;this._lastIndex=-1;this._repeatOpen=this.shouldPlay=true;this._repeatAlternative=0;this._repeatStart=c.model.Duration.QUARTER_TIME;this._repeatNumber=this._repeatStartIndex=this.repeatMove=this._repeatEnd=0};c.midi.MidiRepeatController.__name__=
true;c.midi.MidiRepeatController.prototype={process:function(){var a=this._song.measureHeaders[this.index];this.shouldPlay=true;if(!a.repeatGroup.isClosed&&a.repeatGroup.openings[a.repeatGroup.openings.length-1]==a){this._repeatEnd=this._repeatNumber=this._repeatStart=0;this._repeatOpen=false}if(a.isRepeatOpen){this._repeatStartIndex=this.index;this._repeatStart=a.start;this._repeatOpen=true;if(this.index>this._lastIndex)this._repeatAlternative=this._repeatNumber=0}else{if(this._repeatAlternative==
0)this._repeatAlternative=a.repeatAlternative;if(this._repeatOpen&&this._repeatAlternative>0&&(this._repeatAlternative&1<<this._repeatNumber)==0){this.repeatMove-=a.length();if(a.repeatClose>0)this._repeatAlternative=0;this.shouldPlay=false;this.index++;return}}this._lastIndex=Math.round(Math.max(this._lastIndex,this.index));if(this._repeatOpen&&a.repeatClose>0){if(this._repeatNumber<a.repeatClose||this._repeatAlternative>0){this._repeatEnd=a.start+a.length();this.repeatMove+=this._repeatEnd-this._repeatStart;
this.index=this._repeatStartIndex-1;this._repeatNumber++}else{this._repeatEnd=this._repeatNumber=this._repeatStart=0;this._repeatOpen=false}this._repeatAlternative=0}this.index++},finished:function(){return this.index>=this._count},__class__:c.midi.MidiRepeatController};c.midi.MidiSequenceHandler=function(){};c.midi.MidiSequenceHandler.__name__=true;c.midi.MidiSequenceHandler.prototype={__class__:c.midi.MidiSequenceHandler};c.midi.MidiSequenceDataHandler=function(a){this._ticksSoFar=this._infoTrack=
0;this._metronomeTrack=a-1;this._commands=[]};c.midi.MidiSequenceDataHandler.__name__=true;c.midi.MidiSequenceDataHandler.__interfaces__=[c.midi.MidiSequenceHandler];c.midi.MidiSequenceDataHandler.prototype={notifyFinish:function(){this.commands=q.hex(this._metronomeTrack)+";"+this._commands.join(";")},addTimeSignature:function(a,b,d){this.addEvent(b,a,c.midi.MidiMessageDataUtils.timeSignature(d))},addTempoInUSQ:function(a,b,d){this.addEvent(b,a,c.midi.MidiMessageDataUtils.tempoInUSQ(d))},addProgramChange:function(a,
b,d,e){this.addEvent(b,a,c.midi.MidiMessageDataUtils.programChange(d,e))},addPitchBend:function(a,b,d,e){this.addEvent(b,a,c.midi.MidiMessageDataUtils.pitchBend(d,e))},addRest:function(a,b){this.addEvent(b,a,c.midi.MidiMessageDataUtils.rest())},addNoteOn:function(a,b,d,e,f){this.addEvent(b,a,c.midi.MidiMessageDataUtils.noteOn(d,e,f))},addNoteOff:function(a,b,d,e,f){this.addEvent(b,a,c.midi.MidiMessageDataUtils.noteOff(d,e,f))},addControlChange:function(a,b,d,e,f){this.addEvent(b,a,c.midi.MidiMessageDataUtils.controlChange(d,
e,f))},addEvent:function(a,b,d){this._commands.push(q.hex(a)+"|"+q.hex(b)+"|"+d);if(b>this._ticksSoFar)this._ticksSoFar=b},getTicks:function(){return this._ticksSoFar},resetTicks:function(){this._ticksSoFar=0},getMetronomeTrack:function(){return this._metronomeTrack},getInfoTrack:function(){return this._infoTrack},__class__:c.midi.MidiSequenceDataHandler};c.midi.MidiSequenceFileHandler=function(a){this.midiFile=new c.midi.model.MidiFile(a);this._infoTrack=0;this._metronomeTrack=a-1};c.midi.MidiSequenceFileHandler.__name__=
true;c.midi.MidiSequenceFileHandler.__interfaces__=[c.midi.MidiSequenceHandler];c.midi.MidiSequenceFileHandler.prototype={notifyFinish:function(){this.midiFile.infoTrack=this._infoTrack;this.midiFile.metronomeTrack=this._metronomeTrack},addTimeSignature:function(a,b,d){this.addEvent(b,a,c.midi.MidiMessageFileUtils.timeSignature(d))},addTempoInUSQ:function(a,b,d){this.addEvent(b,a,c.midi.MidiMessageFileUtils.tempoInUSQ(d))},addProgramChange:function(a,b,d,e){this.addEvent(b,a,c.midi.MidiMessageFileUtils.programChange(d,
e))},addPitchBend:function(a,b,d,e){this.addEvent(b,a,c.midi.MidiMessageFileUtils.pitchBend(d,e))},addRest:function(a,b){this.addEvent(b,a,c.midi.MidiMessageFileUtils.rest())},addNoteOn:function(a,b,d,e,f){this.addEvent(b,a,c.midi.MidiMessageFileUtils.noteOn(d,e,f))},addNoteOff:function(a,b,d,e,f){this.addEvent(b,a,c.midi.MidiMessageFileUtils.noteOff(d,e,f))},addControlChange:function(a,b,d,e,f){this.addEvent(b,a,c.midi.MidiMessageFileUtils.controlChange(d,e,f))},addEvent:function(a,b,d){this.midiFile.tracks[a].addEvent(new c.midi.model.MidiEvent(b,
d))},getMetronomeTrack:function(){return this._metronomeTrack},getInfoTrack:function(){return this._infoTrack},__class__:c.midi.MidiSequenceFileHandler};c.midi.MidiSequenceParser=function(a,b,d,e,f){this._song=b;this._factory=a;this._flags=d;this._transpose=f;this._tempoPercent=e;this._firstTickMove=(d&8)==0?0:c.model.Duration.QUARTER_TIME};c.midi.MidiSequenceParser.__name__=true;c.midi.MidiSequenceParser.applyDurationEffects=function(a,b,d){if(a.effect.deadNote)return c.midi.MidiSequenceParser.applyStaticDuration(b,
30,d);if(a.effect.palmMute)return c.midi.MidiSequenceParser.applyStaticDuration(b,80,d);if(a.effect.staccato)return Math.floor(d*50/100);return d};c.midi.MidiSequenceParser.applyStaticDuration=function(a,b,d){a=Math.floor(a.value*b/60);return a<d?a:d};c.midi.MidiSequenceParser.applyStrokeDuration=function(a,b,d){return b-d[a.string-1]};c.midi.MidiSequenceParser.applyStrokeStart=function(a,b,d){return b+d[a.string-1]};c.midi.MidiSequenceParser.getNextBeat=function(a,b){for(var d=null,e=b+1,f=a.beat.measure.beats.length;e<
f;){var g=e++;g=a.beat.measure.beats[g];if(g.start>a.beat.start&&!g.voices[a.index].isEmpty&&(d==null||g.start<d.beat.start))d=g.voices[a.index]}return d};c.midi.MidiSequenceParser.getNextNote=function(a,b,d,e){var f=e+1;e=b.measureCount();for(d=d;d<e;){var g=d++;g=b.measures[g];var h=g.beats.length;for(f=f;f<h;){var i=f++;i=g.beats[i].voices[a.voice.index];for(var j=i.notes.length,k=0;k<j;){var m=k++;m=i.notes[m];if(m.string==a.string)return m}}f=0}return null};c.midi.MidiSequenceParser.getPreviousBeat=
function(a,b){for(var d=null,e=b-1;e>=0;){var f=a.beat.measure.beats[e];if(f.start<a.beat.start&&!f.voices[a.index].isEmpty&&(d==null||f.start>d.beat.start))d=f.voices[a.index];e--}return d};c.midi.MidiSequenceParser.getPreviousNote=function(a,b,d,e){var f=e;for(d=d;d>=0;){e=b.measures[d];f=f<0?e.beats.length:f;for(f=f-1;f>=0;){for(var g=e.beats[f].voices[a.voice.index],h=g.notes.length,i=0;i<h;){var j=i++;j=g.notes[j];if(j.string==a.string)return j}f--}f=-1;d--}return null};c.midi.MidiSequenceParser.getRealVelocity=
function(a,b,d,e){var f=a.velocity;if(!b.isPercussionTrack){b=c.midi.MidiSequenceParser.getPreviousNote(a,b,d,e);if(b!=null&&b.effect.hammer)f=Math.floor(Math.max(15,f-25))}if(a.effect.ghostNote)f=Math.floor(Math.max(15,f-16));else if(a.effect.accentuatedNote)f=Math.floor(Math.max(15,f+16));else if(a.effect.heavyAccentuatedNote)f=Math.floor(Math.max(15,f+32));return f>127?127:f};c.midi.MidiSequenceParser.getStroke=function(a,b,d){var e=a.effect.stroke.direction;if(b==null||e!=0||b.effect.stroke.direction!=
0)if(e==0){b=0;for(var f=d.length;b<f;){var g=b++;d[g]=0}}else{var h=0,i=0;b=0;for(f=a.voices.length;b<f;){g=b++;g=a.voices[g];for(var j=0,k=g.notes.length;j<k;){var m=j++;m=g.notes[m];if(!m.isTiedNote){h|=1<<m.string-1;i++}}}if(i>0){i=0;a=a.effect.stroke.getIncrementTime(a);b=0;for(f=d.length;b<f;){g=b++;g=e!=2?g:d.length-1-g;if((h&1<<g)!=0){d[g]=i;i+=a}}}}return d};c.midi.MidiSequenceParser.prototype={parse:function(a){this._infoTrack=a.getInfoTrack();this._metronomeTrack=a.getMetronomeTrack();
this.addDefaultMessages(a);for(var b=0,d=this._song.tracks.length;b<d;){var e=b++;this.createTrack(a,this._song.tracks[e],e==0)}a.notifyFinish()},newDuration:function(a){var b=this._factory.newDuration();b.value=a;return b},makeVibrato:function(a,b,d,e,f){d=d;for(e=d+e;d<e;){d=d+160>e?e:d+160;this.addBend(a,b,d,64,f);d=d+160>e?e:d+160;this.addBend(a,b,d,Math.round(65.375),f)}this.addBend(a,b,d,64,f)},makeTremoloBar:function(a,b,d,e,f,g){f=f.points;for(var h=0,i=f.length;h<i;){var j=h++,k=f[j],m=d+
k.getTime(e);k=Math.round(64+k.value*5.5);k=k<=127?k:127;k=k>=0?k:0;this.addBend(a,b,m,k,g);if(f.length>j+1){var n=f[j+1];j=Math.round(64+n.value*5.5);n=d+n.getTime(e);if(j!=k){n=(n-m)/Math.abs(j-k);if(k<j)for(;k<j;){k++;m+=Math.round(n);this.addBend(a,b,m,k<=127?k:127,g)}else if(k>j)for(;k>j;){k+=-1;m+=Math.round(n);this.addBend(a,b,m,k>=0?k:0,g)}}}}this.addBend(a,b,d+e,64,g)},makeSlide2:function(a,b,d,e,f,g,h){e=g-e;f=f-d;g=Math.floor(f/(c.model.Duration.QUARTER_TIME/8));for(var i=1,j=g+1;i<j;){var k=
i++,m=Math.round(64+f/g*k*e/f*5.5);this.addBend(a,b,Math.round(d+f/g*k),m,h)}},makeSlide:function(a,b,d,e,f,g){if(e!=null){this.makeSlide2(a,b,d.voice.beat.start+f,d.value,e.voice.beat.start+f,e.value,g);this.addBend(a,b,e.voice.beat.start+f,64,g)}},makeNotes:function(a,b,d,e,f,g,h,i){for(var j=b.number,k=0,m=d.voices.length;k<m;){var n=k++;n=d.voices[n];var u=this.checkTripletFeel(n,g);if(n.isRestVoice()&&!n.isEmpty)this.makeRest(a,b,u.start+h,n,g,b.channel.channel);else for(var r=0,s=n.notes.length;r<
s;){var C=r++,t=n.notes[C];if(!t.isTiedNote){C=this._transpose+b.offset+t.value+b.strings[t.string-1].value;var A=c.midi.MidiSequenceParser.applyStrokeStart(t,u.start+h,i),E=c.midi.MidiSequenceParser.applyStrokeDuration(t,this.getRealNoteDuration(b,t,e,u.duration,f,g),i),I=c.midi.MidiSequenceParser.getRealVelocity(t,b,f,g),w=b.channel.channel,z=b.channel.effectChannel,D=b.isPercussionTrack;if(d.effect.fadeIn){w=z;this.makeFadeIn(a,j,A,E,w)}if(t.effect.isGrace()&&z>=0&&!D){w=z;var J=b.offset+t.effect.grace.fret+
b.strings[t.string-1].value,H=t.effect.grace.durationTime(),T=t.effect.grace.velocity,U=!t.effect.grace.isDead?H:c.midi.MidiSequenceParser.applyStaticDuration(e,30,H);if(t.effect.grace.isOnBeat||A-H<c.model.Duration.QUARTER_TIME){A+=H;E-=H}this.makeNote(a,j,J,A-H,U,T,w)}if(t.effect.isTrill()&&z>=0&&!D){D=b.offset+t.effect.trill.fret+b.strings[t.string-1].value;z=t.effect.trill.duration.time();J=true;for(t=A;t+10<A+E;){if(t+z>=A+E)z=A+E-t-1;this.makeNote(a,j,J?C:D,t,z,I,w);J=!J;t+=z}}else if(t.effect.isTremoloPicking()&&
z>=0){D=t.effect.tremoloPicking.duration.time();for(t=A;t+10<A+E;){if(t+D>=A+E)D=A+E-t-1;this.makeNote(a,j,C,A,D,I,w);t+=D}}else{if(t.effect.isBend()&&z>=0&&!D){w=z;this.makeBend(a,j,A,E,t.effect.bend,w)}else if(t.voice.beat.effect.isTremoloBar()&&z>=0&&!D){w=z;this.makeTremoloBar(a,j,A,E,t.voice.beat.effect.tremoloBar,w)}else if(t.effect.slide&&z>=0&&!D){w=z;z=c.midi.MidiSequenceParser.getNextNote(t,b,f,g);this.makeSlide(a,j,t,z,h,w)}else if(t.effect.vibrato&&z>=0&&!D){w=z;this.makeVibrato(a,j,A,
E,w)}if(t.effect.isHarmonic()&&!D){D=C;if(t.effect.harmonic.type==0){z=0;for(J=c.model.effects.HarmonicEffect.NATURAL_FREQUENCIES.length;z<J;){H=z++;if(t.value%12==c.model.effects.HarmonicEffect.NATURAL_FREQUENCIES[H][0]%12){C=D+c.model.effects.HarmonicEffect.NATURAL_FREQUENCIES[H][1]-t.value;break}}}else{t.effect.harmonic.type==4&&this.makeNote(a,j,Math.min(127,D)|0,A,E,Math.max(15,I-48)|0,w);C=D+c.model.effects.HarmonicEffect.NATURAL_FREQUENCIES[t.effect.harmonic.data][1]}C-12>0&&this.makeNote(a,
j,C-12,A,E,Math.max(15,I-64)|0,w)}this.makeNote(a,j,Math.min(127,C)|0,A,E,I,w)}}}}},makeNote:function(a,b,d,e,f,g,h){a.addNoteOn(this.getTick(e),b,h,d,g);a.addNoteOff(this.getTick(e+f),b,h,d,g)},makeRest:function(a,b,d,e,f,g){a.addRest(this.getTick(d),b.number,g)},makeFadeIn:function(a,b,d,e,f){for(var g=31,h=d,i=Math.round(e/((127-g)/1));h<d+e&&g<127;){a.addControlChange(this.getTick(h),b,f,11,g);h+=i;g+=1}a.addControlChange(this.getTick(d+e),b,f,11,127)},getMixChangeValue:function(a,b){if(b)a+=
8;return Math.round(a*127/16)},makeMixChange:function(a,b,d,e){var f=e.effect.mixTableChange;e=this.getTick(e.start);if(f.volume!=null){var g=this.getMixChangeValue(f.volume.value,false);a.addControlChange(e,d,b.channel,7,g);a.addControlChange(e,d,b.effectChannel,7,g)}if(f.balance!=null){g=this.getMixChangeValue(f.balance.value,true);a.addControlChange(e,d,b.channel,10,g);a.addControlChange(e,d,b.effectChannel,10,g)}if(f.chorus!=null){g=this.getMixChangeValue(f.chorus.value,true);a.addControlChange(e,
d,b.channel,93,g);a.addControlChange(e,d,b.effectChannel,93,g)}if(f.reverb!=null){g=this.getMixChangeValue(f.reverb.value,true);a.addControlChange(e,d,b.channel,91,g);a.addControlChange(e,d,b.effectChannel,91,g)}if(f.phaser!=null){g=this.getMixChangeValue(f.phaser.value,true);a.addControlChange(e,d,b.channel,95,g);a.addControlChange(e,d,b.effectChannel,95,g)}if(f.tremolo!=null){g=this.getMixChangeValue(f.tremolo.value,true);a.addControlChange(e,d,b.channel,92,g);a.addControlChange(e,d,b.effectChannel,
92,g)}if(f.instrument!=null){a.addProgramChange(e,d,b.channel,f.instrument.value);a.addProgramChange(e,d,b.effectChannel,f.instrument.value)}f.tempo!=null&&a.addTempoInUSQ(e,this._infoTrack,c.model.Tempo.tempoToUsq(f.tempo.value))},makeChannel2:function(a,b,d,e){e=!e?b.effectChannel:b.channel;a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),d,e,7,b.volume);a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),d,e,10,b.balance);a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),
d,e,93,b.chorus);a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),d,e,91,b.reverb);a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),d,e,95,b.phaser);a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),d,e,92,b.tremolo);a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),d,e,11,127);a.addProgramChange(this.getTick(c.model.Duration.QUARTER_TIME),d,e,b.instrument())},makeChannel:function(a,b,d){if((this._flags&2)!=0){this.makeChannel2(a,b,d,true);b.channel!=
b.effectChannel&&this.makeChannel2(a,b,d,false)}},makeBend:function(a,b,d,e,f,g){f=f.points;for(var h=0,i=f.length;h<i;){var j=h++,k=f[j],m=d+k.getTime(e);k=Math.round(64+k.value*2.75/1);this.addBend(a,b,m,k,g);if(!(f.length<=j+1)){var n=f[j+1];j=Math.round(64+n.value*2.75/1);n=d+n.getTime(e)|0;if(j!=k){n=(n-m)/Math.abs(j-k);if(k<j)for(;k<j;){k++;m+=Math.round(n);this.addBend(a,b,m,k<=127?k:127,g)}else if(k>j)for(;k>j;){k--;m+=Math.round(n);this.addBend(a,b,m,k>=0?k:0,g)}}}}this.addBend(a,b,d+e,64,
g)},makeBeats:function(a,b,d,e,f){for(var g=[],h=0,i=b.stringCount();h<i;){h++;g.push(0)}var j=null;h=0;for(i=d.beats.length;h<i;){var k=h++,m=d.beats[k];m.effect.mixTableChange!=null&&this.makeMixChange(a,b.channel,b.number,m);this.makeNotes(a,b,m,d.header.tempo,e,k,f,c.midi.MidiSequenceParser.getStroke(m,j,g));j=m}},getTick:function(a){return a+this._firstTickMove},getRealNoteDuration:function(a,b,d,e,f,g){var h=b.voice.beat.start+b.voice.duration.time();e=e;for(var i=g+1,j=a.measureCount(),k=f;k<
j;){var m=k++,n=a.measures[m],u=n.beats.length,r=false;for(i=i;i<u;){var s=i++,C=n.beats[s],t=C.voices[b.voice.index];if(t.isRestVoice())return c.midi.MidiSequenceParser.applyDurationEffects(b,d,e);var A=t.notes.length;s=m==f&&s!=g&&b.effect.letRing;for(var E=false,I=0;I<A;){var w=I++;w=t.notes[w];if(!(w==b||w.string!=b.string)){if(w.string==b.string&&!w.isTiedNote){s=false;r=true}if(!w.isTiedNote&&!s)return c.midi.MidiSequenceParser.applyDurationEffects(b,d,e);E=true;e+=C.start-h+w.voice.duration.time();
h=C.start+t.duration.time()}}if(s&&!E&&!r){e+=C.start-h+t.duration.time();h=C.start+t.duration.time()}}i=0}return c.midi.MidiSequenceParser.applyDurationEffects(b,d,e)},createTrack:function(a,b){var d=null,e=new c.midi.MidiRepeatController(b.song);this.addBend(a,b.number,c.model.Duration.QUARTER_TIME,64,b.channel.channel);for(this.makeChannel(a,b.channel,b.number);!e.finished();){var f=b.measures[e.index],g=e.index,h=e.repeatMove;e.process();if(e.shouldPlay){if(b.number==1){this.addTimeSignature(a,
f,d,h);this.addTempo(a,f,d,h);this.addMetronome(a,f.header,h)}this.makeBeats(a,b,f,g,h)}d=f}},checkTripletFeel:function(a,b){var d=a.beat.start,e=a.duration.time();if(a.beat.measure.header.tripletFeel==1){if(a.duration==this.newDuration(c.model.Duration.EIGHTH))if(d%c.model.Duration.QUARTER_TIME==0){var f=c.midi.MidiSequenceParser.getNextBeat(a,b);if(f==null||f.beat.start>d+f.duration.time()||f.duration==this.newDuration(c.model.Duration.EIGHTH)){e=this.newDuration(c.model.Duration.EIGHTH);e.tuplet.enters=
3;e.tuplet.times=2;e=e.time()*2}}else if(d%(c.model.Duration.QUARTER_TIME/2)==0){f=c.midi.MidiSequenceParser.getPreviousBeat(a,b);if(f==null||f.beat.start<d-a.duration.time()||f.duration==this.newDuration(c.model.Duration.EIGHTH)){e=this.newDuration(c.model.Duration.EIGHTH);e.tuplet.enters=3;e.tuplet.times=2;d=d-a.duration.time()+e.time()*2;e=e.time()}}}else if(a.beat.measure.header.tripletFeel==2)if(a.duration==this.newDuration(c.model.Duration.SIXTEENTH))if(d%(c.model.Duration.QUARTER_TIME/2)==
0){f=c.midi.MidiSequenceParser.getNextBeat(a,b);if(f==null||f.beat.start>d+a.duration.time()||f.duration==this.newDuration(c.model.Duration.SIXTEENTH)){e=this.newDuration(c.model.Duration.SIXTEENTH);e.tuplet.enters=3;e.tuplet.times=2;e=e.time()*2}}else if(d%(c.model.Duration.QUARTER_TIME/4)==0){f=c.midi.MidiSequenceParser.getPreviousBeat(a,b);if(f==null||f.beat.start<d-f.duration.time()||f.duration==this.newDuration(c.model.Duration.SIXTEENTH)){e=this.newDuration(c.model.Duration.SIXTEENTH);e.tuplet.enters=
3;e.tuplet.times=2;d=d-a.duration.time()+e.time()*2;e=e.time()}}return new c.midi.BeatData(d,e)},addTimeSignature:function(a,b,d,e){var f=false;if(d==null)f=true;else{var g=b.header.timeSignature.denominator.value,h=d.header.timeSignature.denominator.value;if(b.header.timeSignature.numerator!=d.header.timeSignature.numerator||g!=h)f=true}f&&a.addTimeSignature(this.getTick(b.header.start+e),this._infoTrack,b.header.timeSignature)},addTempo:function(a,b,d,e){var f=false;if(d==null)f=true;else if(b.header.tempo.inUsq()!=
d.header.tempo.inUsq())f=true;if(f){d=Math.floor(b.header.tempo.inUsq()*100/this._tempoPercent);a.addTempoInUSQ(this.getTick(b.header.start+e),this._infoTrack,d)}},addMetronome:function(a,b,d){if((this._flags&4)!=0){d=d+b.start;var e=b.timeSignature.denominator.time(),f=1;for(b=b.timeSignature.numerator+1;f<b;){f++;this.makeNote(a,this._metronomeTrack,37,d,e,95,9);d+=e}}},addDefaultMessages:function(a){if((this._flags&1)!=0)for(var b=0;b<16;){var d=b++;a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),
this._infoTrack,d,101,0);a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),this._infoTrack,d,100,0);a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),this._infoTrack,d,6,12);a.addControlChange(this.getTick(c.model.Duration.QUARTER_TIME),this._infoTrack,d,38,0)}},addBend:function(a,b,d,e,f){a.addPitchBend(this.getTick(d),b,f,e)},__class__:c.midi.MidiSequenceParser};c.midi.MidiSequenceParserFlags=function(){};c.midi.MidiSequenceParserFlags.__name__=true;c.midi.model={};c.midi.model.MidiEvent=
function(a,b){this.tick=a;this.message=b;this.message.event=this};c.midi.model.MidiEvent.__name__=true;c.midi.model.MidiEvent.prototype={writeTo:function(a){var b=this.getDeltaTicks(),d=[];c.midi.model.MidiFile.writeVariableLengthValue(d,b);a.writeBytes(d);this.message.writeTo(a)},getDeltaTicks:function(){if(this.previousEvent==null)return 0;return this.tick-this.previousEvent.tick},__class__:c.midi.model.MidiEvent};c.midi.model.MidiFile=function(a){this.tracks=[];for(var b=0;b<a;){b++;this.addTrack(new c.midi.model.MidiTrack)}};
c.midi.model.MidiFile.__name__=true;c.midi.model.MidiFile.writeVariableLengthValue=function(a,b){var d=b,e=[0,0,0,0],f=0;e[0]=d&127&255;for(d>>=7;d>0;){f++;e[f]=(d&127|128)&255;d>>=7}for(;f>=0;){a.push(e[f]);f--}};c.midi.model.MidiFile.prototype={writeTo:function(a){var b=null;if(x.Boot.__instanceof(a,c.io.DataOutputStream)){b=a;b.bigEndian||(b=new c.io.DataOutputStream(a,true))}else b=new c.io.DataOutputStream(a,true);b.writeBytes([77,84,104,100]);b.writeBytes([0,0,0,6]);b.writeBytes([0,1]);b.writeShort(this.tracks.length);
b.writeShort(960);a=0;for(var d=this.tracks;a<d.length;){var e=d[a];++a;e.writeTo(b)}},addTrack:function(a){a.index=this.tracks.length;a.file=this;this.tracks.push(a)},__class__:c.midi.model.MidiFile};c.midi.model.MidiMessage=function(a){this.data=a};c.midi.model.MidiMessage.__name__=true;c.midi.model.MidiMessage.prototype={writeTo:function(a){a.writeBytes(this.data)},__class__:c.midi.model.MidiMessage};c.midi.model.MidiTrack=function(){};c.midi.model.MidiTrack.__name__=true;c.midi.model.MidiTrack.prototype=
{writeTo:function(a){var b=null;if(x.Boot.__instanceof(a,c.io.DataOutputStream)){b=a;b.bigEndian||(b=new c.io.DataOutputStream(a,true))}else b=new c.io.DataOutputStream(a,true);a=new c.io.MemoryOutputStream;for(var d=this.firstEvent;d!=null;){d.writeTo(a);d=d.nextEvent}b.writeBytes([77,84,114,107]);b.writeInt(a.getBuffer().length);b.writeBytes(a.getBuffer())},addEvent:function(a){a.track=this;if(this.firstEvent==null)this.lastEvent=this.firstEvent=a;else if(this.lastEvent.tick<=a.tick){this.lastEvent.nextEvent=
a;a.previousEvent=this.lastEvent;this.lastEvent=a}else if(this.firstEvent.tick>a.tick){a.nextEvent=this.firstEvent;this.firstEvent=this.firstEvent.previousEvent=a}else if(a.tick-this.firstEvent.tick<this.lastEvent.tick-a.tick){for(var b=this.firstEvent;b!=null&&b.nextEvent!=null&&b.nextEvent.tick<a.tick;)b=b.nextEvent;if(b!=null){var d=b.nextEvent;b.nextEvent=a;a.previousEvent=b;a.nextEvent=d;if(d!=null)d.previousEvent=a}}else{for(d=this.lastEvent;d!=null&&d.previousEvent!=null&&d.previousEvent.tick>
a.tick;)d=d.previousEvent;if(d!=null){b=d.previousEvent;d.previousEvent=a;a.nextEvent=d;a.previousEvent=b;if(b!=null)b.nextEvent=a;else this.firstEvent=a}}},__class__:c.midi.model.MidiTrack};c.model={};c.model.Beat=function(a){this.start=c.model.Duration.QUARTER_TIME;this.effect=a.newBeatEffect();this.voices=[];for(var b=0;b<2;){var d=b++;d=a.newVoice(d);d.beat=this;this.voices.push(d)}};c.model.Beat.__name__=true;c.model.Beat.prototype={getNotes:function(){for(var a=[],b=0,d=this.voices;b<d.length;){var e=
d[b];++b;var f=0;for(e=e.notes;f<e.length;){var g=e[f];++f;a.push(g)}}return a},ensureVoices:function(a,b){for(;this.voices.length<a;){var d=b.newVoice(this.voices.length);d.beat=this;this.voices.push(d)}},setChord:function(a){a.beat=this;this.effect.chord=a},setText:function(a){a.beat=this;this.text=a},getRealStart:function(){return this.measure.header.realStart+(this.start-this.measure.header.start)},isRestBeat:function(){for(var a=0,b=this.voices.length;a<b;){var d=this.voices[a++];if(!d.isEmpty&&
!d.isRestVoice())return false}return true},__class__:c.model.Beat};c.model.BeatEffect=function(a){this.fadeIn=this.popping=this.slapping=this.tapping=false;this.stroke=a.newStroke()};c.model.BeatEffect.__name__=true;c.model.BeatEffect.prototype={isTremoloBar:function(){return this.tremoloBar!=null},isChord:function(){return this.chord!=null},__class__:c.model.BeatEffect};c.model.BeatStroke=function(){this.direction=0};c.model.BeatStroke.__name__=true;c.model.BeatStroke.prototype={getIncrementTime:function(a){var b=
0;if(this.value>0){for(var d=0,e=a.voices.length;d<e;){var f=d++;f=a.voices[f];if(!f.isEmpty){f=f.duration.time();if(b==0||f<b)b=f<=c.model.Duration.QUARTER_TIME?f:c.model.Duration.QUARTER_TIME}}if(b>0)return Math.round(b/8*(4/this.value))}return 0},__class__:c.model.BeatStroke};c.model.BeatStrokeDirection=function(){};c.model.BeatStrokeDirection.__name__=true;c.model.BeatText=function(){};c.model.BeatText.__name__=true;c.model.BeatText.prototype={__class__:c.model.BeatText};c.model.Chord=function(a){this.strings=
[];for(var b=0;b<a;){b++;this.strings.push(-1)}};c.model.Chord.__name__=true;c.model.Chord.prototype={noteCount:function(){for(var a=0,b=0,d=this.strings.length;b<d;)this.strings[b++]>=0&&a++;return a},stringCount:function(){return this.strings.length},__class__:c.model.Chord};c.model.Color=function(a,b,d,e){this.r=a;this.g=b;this.b=d;this.a=e};c.model.Color.__name__=true;c.model.Color.fromRgb=function(a,b,d){return new c.model.Color(a,b,d,1)};c.model.Color.fromARgb=function(a,b,d,e){return new c.model.Color(a,
b,d,e)};c.model.Color.prototype={asRgbString:function(){if(this.a==1){var a="rgb(";a+=l.string(this.r)+",";a+=l.string(this.g)+",";a+=l.string(this.b)+")"}else{a="rgba(";a+=l.string(this.r)+",";a+=l.string(this.g)+",";a+=l.string(this.b)+",";a+=l.string(this.a)+")"}return a},__class__:c.model.Color};c.model.Duration=function(a){this.value=c.model.Duration.QUARTER;this.isDoubleDotted=this.isDotted=false;this.tuplet=a.newTuplet()};c.model.Duration.__name__=true;c.model.Duration.fromTime=function(a,
b,d,e){d=d.clone(a);var f=a.newDuration();f.value=c.model.Duration.WHOLE;f.isDotted=true;for(var g=false;!g;){var h=f.time();if(h-e<=b)if(Math.abs(h-b)<Math.abs(d.time()-b))d=f.clone(a);if(f.isDotted)f.isDotted=false;else if(f.tuplet.equals(c.model.Tuplet.NORMAL)){f.tuplet.enters=3;f.tuplet.times=2}else{f.value*=2;f.isDotted=true;f.tuplet.enters=1;f.tuplet.times=1}if(f.value>c.model.Duration.SIXTY_FOURTH)g=true}return d};c.model.Duration.prototype={equals:function(a){if(a==null)return false;if(this==
a)return true;return a.value==this.value&&a.isDotted==this.isDotted&&a.isDoubleDotted==this.isDoubleDotted&&a.tuplet.equals(this.tuplet)},clone:function(a){var b=a.newDuration();b.value=this.value;b.isDotted=this.isDotted;b.isDoubleDotted=this.isDoubleDotted;b.tuplet=this.tuplet.clone(a);return b},copy:function(a){a.value=this.value;a.isDotted=this.isDotted;a.isDoubleDotted=this.isDoubleDotted;this.tuplet.copy(a.tuplet)},index:function(){for(var a=0,b=this.value;(b>>=1)>0;)a++;return a},time:function(){var a=
Math.floor(c.model.Duration.QUARTER_TIME*(4/this.value));if(this.isDotted)a+=Math.floor(a/2);else if(this.isDoubleDotted)a+=Math.floor(a/4*3);return this.tuplet.convertTime(a)},__class__:c.model.Duration};c.model.GuitarString=function(){this.value=this.number=0};c.model.GuitarString.__name__=true;c.model.GuitarString.prototype={clone:function(a){a=a.newString();a.number=this.number;a.value=this.value;return a},__class__:c.model.GuitarString};c.model.HeaderFooterElements=function(){};c.model.HeaderFooterElements.__name__=
true;c.model.LyricLine=function(a,b){this.startingMeasure=a;this.lyrics=b};c.model.LyricLine.__name__=true;c.model.LyricLine.prototype={__class__:c.model.LyricLine};c.model.Lyrics=function(a){this.trackChoice=a;this.lines=[]};c.model.Lyrics.__name__=true;c.model.Lyrics.prototype={lyricsBeats:function(){for(var a="",b=0,d=this.lines;b<d.length;){var e=d[b];++b;if(e!=null)a+=e.lyrics+"\n"}a=q.trim(a);a=q.replace(a,"\n"," ");a=q.replace(a,"\r"," ");return a.split(" ")},__class__:c.model.Lyrics};c.model.Marker=
function(){};c.model.Marker.__name__=true;c.model.Marker.prototype={__class__:c.model.Marker};c.model.Measure=function(a){this.header=a;this.clef=0;this.beats=[]};c.model.Measure.__name__=true;c.model.Measure.prototype={addBeat:function(a){a.measure=this;a.index=this.beats.length;this.beats.push(a)},marker:function(){return this.header.marker},hasMarker:function(){return this.header.hasMarker()},tripletFeel:function(){return this.header.tripletFeel},isRepeatOpen:function(){return this.header.isRepeatOpen},
timeSignature:function(){return this.header.timeSignature},tempo:function(){return this.header.tempo},length:function(){return this.header.length()},start:function(){return this.header.start},repeatClose:function(){return this.header.repeatClose},keySignature:function(){return this.header.keySignature},number:function(){return this.header.number},end:function(){return this.header.start+this.header.length()},beatCount:function(){return this.beats.length},__class__:c.model.Measure};c.model.MeasureClef=
function(){};c.model.MeasureClef.__name__=true;c.model.MeasureHeader=function(a){this.number=0;this.start=c.model.Duration.QUARTER_TIME;this.timeSignature=a.newTimeSignature();this.keySignature=0;this.tempo=a.newTempo();this.marker=null;this.tripletFeel=0;this.isRepeatOpen=false;this.repeatAlternative=this.repeatClose=0;this.realStart=-1};c.model.MeasureHeader.__name__=true;c.model.MeasureHeader.prototype={length:function(){return this.timeSignature.numerator*this.timeSignature.denominator.time()},
hasMarker:function(){return this.marker!=null},__class__:c.model.MeasureHeader};c.model.MidiChannel=function(){this.effectChannel=this.channel=0;this.instrument(25);this.volume=127;this.balance=64;this.tremolo=this.phaser=this.reverb=this.chorus=0};c.model.MidiChannel.__name__=true;c.model.MidiChannel.prototype={copy:function(a){a.channel=this.channel;a.effectChannel=this.effectChannel;a.instrument(this.instrument());a.volume=this.volume;a.balance=this.balance;a.chorus=this.chorus;a.reverb=this.reverb;
a.phaser=this.phaser;a.tremolo=this.tremolo},isPercussionChannel:function(){return this.channel==9},instrument:function(a){if(a==null)a=-1;if(a!=-1)this._instrument=a;return this.isPercussionChannel()?0:this._instrument},__class__:c.model.MidiChannel};c.model.MixTableChange=function(){this.volume=new c.model.MixTableItem;this.balance=new c.model.MixTableItem;this.chorus=new c.model.MixTableItem;this.reverb=new c.model.MixTableItem;this.phaser=new c.model.MixTableItem;this.tremolo=new c.model.MixTableItem;
this.instrument=new c.model.MixTableItem;this.tempo=new c.model.MixTableItem;this.hideTempo=true};c.model.MixTableChange.__name__=true;c.model.MixTableChange.prototype={__class__:c.model.MixTableChange};c.model.MixTableItem=function(){this.duration=this.value=0;this.allTracks=false};c.model.MixTableItem.__name__=true;c.model.MixTableItem.prototype={__class__:c.model.MixTableItem};c.model.Note=function(a){this._realValue=-1;this.value=0;this.velocity=95;this.string=1;this.swapAccidentals=this.isTiedNote=
false;this.effect=a.newNoteEffect()};c.model.Note.__name__=true;c.model.Note.prototype={realValue:function(){if(this._realValue==-1)this._realValue=this.value+this.voice.beat.measure.track.strings[this.string-1].value;return this._realValue},__class__:c.model.Note};c.model.NoteEffect=function(){this.tremoloPicking=this.trill=this.grace=this.harmonic=this.bend=null;this.isFingering=this.letRing=this.staccato=this.palmMute=this.heavyAccentuatedNote=this.accentuatedNote=this.ghostNote=this.hammer=this.slide=
this.deadNote=this.vibrato=false};c.model.NoteEffect.__name__=true;c.model.NoteEffect.prototype={clone:function(a){var b=a.newNoteEffect();b.vibrato=this.vibrato;b.deadNote=this.deadNote;b.slide=this.slide;b.slideType=this.slideType;b.hammer=this.hammer;b.ghostNote=this.ghostNote;b.accentuatedNote=this.accentuatedNote;b.heavyAccentuatedNote=this.heavyAccentuatedNote;b.palmMute=this.palmMute;b.staccato=this.staccato;b.letRing=this.letRing;b.isFingering=this.isFingering;b.leftHandFinger=this.leftHandFinger;
b.rightHandFinger=this.rightHandFinger;b.bend=this.isBend()?this.bend.clone(a):null;b.harmonic=this.isHarmonic()?this.harmonic.clone(a):null;b.grace=this.isGrace()?this.grace.clone(a):null;b.trill=this.isTrill()?this.trill.clone(a):null;b.tremoloPicking=this.isTremoloPicking()?this.tremoloPicking.clone(a):null;return b},isTremoloPicking:function(){return this.tremoloPicking!=null},isTrill:function(){return this.trill!=null},isGrace:function(){return this.grace!=null},isHarmonic:function(){return this.harmonic!=
null},isBend:function(){return this.bend!=null&&this.bend.points.length!=0},__class__:c.model.NoteEffect};c.model.Padding=function(a,b,d,e){this.right=a;this.top=b;this.left=d;this.bottom=e};c.model.Padding.__name__=true;c.model.Padding.prototype={getVertical:function(){return this.top+this.bottom},getHorizontal:function(){return this.left+this.right},__class__:c.model.Padding};c.model.PageSetup=function(){this.pageSize=new c.model.Point(210,297);this.pageMargin=new c.model.Padding(10,15,10,10);this.scoreSizeProportion=
1;this.headerAndFooter=511;this.title="%TITLE%";this.subtitle="%SUBTITLE%";this.artist="%ARTIST%";this.album="%ALBUM%";this.words="Words by %WORDS%";this.music="Music by %MUSIC%";this.wordsAndMusic="Words & Music by %WORDSMUSIC%";this.copyright="Copyright %COPYRIGHT%\nAll Rights Reserved - International Copyright Secured";this.pageNumber="Page %N%/%P%"};c.model.PageSetup.__name__=true;c.model.PageSetup.prototype={__class__:c.model.PageSetup};c.model.Point=function(a,b){this.x=a;this.y=b};c.model.Point.__name__=
true;c.model.Point.prototype={__class__:c.model.Point};c.model.Rectangle=function(a,b,d,e){this.x=a;this.y=b;this.width=d;this.height=e};c.model.Rectangle.__name__=true;c.model.Rectangle.prototype={__class__:c.model.Rectangle};c.model.RepeatGroup=function(){this.measureHeaders=[];this.closings=[];this.openings=[];this.isClosed=false};c.model.RepeatGroup.__name__=true;c.model.RepeatGroup.prototype={addMeasureHeader:function(a){this.openings.length==0&&this.openings.push(a);this.measureHeaders.push(a);
a.repeatGroup=this;if(a.repeatClose>0){this.closings.push(a);this.isClosed=true}else if(this.isClosed){this.isClosed=false;this.openings.push(a)}},__class__:c.model.RepeatGroup};c.model.SlideType=function(){};c.model.SlideType.__name__=true;c.model.Song=function(){this.measureHeaders=[];this.tracks=[];this.notice=this.instructions=this.tab=this.copyright=this.music=this.words=this.album=this.artist=this.subtitle=this.title="";this._currentRepeatGroup=new c.model.RepeatGroup};c.model.Song.__name__=
true;c.model.Song.prototype={addTrack:function(a){a.song=this;this.tracks.push(a)},addMeasureHeader:function(a){a.song=this;this.measureHeaders.push(a);if(a.isRepeatOpen||this._currentRepeatGroup.isClosed&&a.repeatAlternative<=0)this._currentRepeatGroup=new c.model.RepeatGroup;this._currentRepeatGroup.addMeasureHeader(a)},__class__:c.model.Song};c.model.SongFactory=function(){};c.model.SongFactory.__name__=true;c.model.SongFactory.prototype={newNote:function(){return new c.model.Note(this)},newMixTableChange:function(){return new c.model.MixTableChange},
newText:function(){return new c.model.BeatText},newChord:function(a){return new c.model.Chord(a)},newTremoloPickingEffect:function(){return new c.model.effects.TremoloPickingEffect(this)},newTrillEffect:function(){return new c.model.effects.TrillEffect(this)},newGraceEffect:function(){return new c.model.effects.GraceEffect},newHarmonicEffect:function(){return new c.model.effects.HarmonicEffect},newBendEffect:function(){return new c.model.effects.BendEffect},newBeat:function(){return new c.model.Beat(this)},
newTuplet:function(){return new c.model.Tuplet},newMeasure:function(a){return new c.model.Measure(a)},newString:function(){return new c.model.GuitarString},newTrack:function(){return new c.model.Track(this)},newBeatEffect:function(){return new c.model.BeatEffect(this)},newNoteEffect:function(){return new c.model.NoteEffect},newVoice:function(a){return new c.model.Voice(this,a)},newStroke:function(){return new c.model.BeatStroke},newMarker:function(){return new c.model.Marker},newTempo:function(){return new c.model.Tempo},
newMeasureHeader:function(){return new c.model.MeasureHeader(this)},newDuration:function(){return new c.model.Duration(this)},newTimeSignature:function(){return new c.model.TimeSignature(this)},newMidiChannel:function(){return new c.model.MidiChannel},newPageSetup:function(){return new c.model.PageSetup},newLyricLine:function(){return new c.model.LyricLine(0,"")},newLyrics:function(){return new c.model.Lyrics(0)},newSong:function(){return new c.model.Song},__class__:c.model.SongFactory};c.model.SongManager=
function(a){this.factory=a};c.model.SongManager.__name__=true;c.model.SongManager.getDivisionLength=function(a){var b=c.model.Duration.QUARTER_TIME;switch(a.timeSignature.denominator.value){case c.model.Duration.EIGHTH:if(a.timeSignature.numerator%3==0)b+=Math.floor(c.model.Duration.QUARTER_TIME/2);break}return b};c.model.SongManager.getFirstBeat=function(a){return a.length>0?a[0]:null};c.model.SongManager.getNextBeat2=function(a,b){for(var d=null,e=0;e<a.length;){var f=a[e];++e;if(f.start>b.start)if(d==
null||f.start<d.start)d=f}return d};c.model.SongManager.getNextVoice=function(a,b,d){for(var e=null,f=0;f<a.length;){var g=a[f];++f;if(g.start>b.start&&!g.voices[d].isEmpty)if(e==null||g.start<e.beat.start)e=g.voices[d]}return e};c.model.SongManager.getFirstVoice=function(a,b){for(var d=null,e=0;e<a.length;){var f=a[e];++e;if((d==null||f.start<d.beat.start)&&!f.voices[b].isEmpty)d=f.voices[b]}return d};c.model.SongManager.getBeat=function(a,b){for(var d=0,e=a.beats;d<e.length;){var f=e[d];++d;if(f.start==
b)return f}return null};c.model.SongManager.quickSort=function(a,b,d){var e=b,f=d,g=a[Math.floor((b+d)/2)];do{for(;a[e].start<g.start&&e<d;)e++;for(;g.start<a[f].start&&f>b;)f--;if(e<=f){var h=a[e];a[e]=a[f];a[f]=h;e++;f--}}while(e<=f);b<f&&c.model.SongManager.quickSort(a,b,f);e<d&&c.model.SongManager.quickSort(a,e,d)};c.model.SongManager.getFirstMeasure=function(a){return a.measureCount()>0?a.measures[0]:null};c.model.SongManager.prototype={getNextNote:function(a,b,d,e){b=c.model.SongManager.getBeat(a,
b);if(b!=null)for(b=c.model.SongManager.getNextBeat2(a.beats,b);b!=null;){var f=b.voices[d];if(!f.isEmpty){var g=0;for(f=f.notes;g<f.length;){var h=f[g];++g;if(h.string==e||e==-1)return h}}b=c.model.SongManager.getNextBeat2(a.beats,b)}return null},getNextBeat:function(a){var b=c.model.SongManager.getNextBeat2(a.measure.beats,a);if(b==null&&a.measure.track.measureCount()>a.measure.header.number){a=a.measure.track.measures[a.measure.header.number];if(a.beats.length>0)return a.beats[0]}return b},getPreviousMeasureHeader:function(a){var b=
a.number-1;if(b>0)return a.song.measureHeaders[b-1];return null},getPreviousMeasure:function(a){return a.header.number>1?a.track.measures[a.header.number-2]:null},orderBeats:function(a){c.model.SongManager.quickSort(a.beats,0,a.beats.length-1)},createDurations:function(a){var b=[],d=this.factory.newDuration();d.value=c.model.Duration.SIXTY_FOURTH;d.isDotted=false;d.isDoubleDotted=false;d.tuplet.enters=3;d.tuplet.times=2;for(a=a;a>d.time();){var e=c.model.Duration.fromTime(this.factory,a,d,10);b.push(e.clone(this.factory));
a-=e.time()}return b},createSilences:function(a,b,d,e){b=b;d=this.createDurations(d);for(var f=0;f<d.length;){var g=d[f];++f;var h=false,i=this.getRealStart(a,b);i=c.model.SongManager.getBeat(a,i);if(i==null){i=this.factory.newBeat();i.start=this.getRealStart(a,b);h=true}var j=i.voices[e];j.isEmpty=false;g.copy(j.duration);h&&a.addBeat(i);b+=g.time()}},autoCompleteSilences:function(a){var b=c.model.SongManager.getFirstBeat(a.beats);if(b==null)this.createSilences(a,a.header.start,a.header.length(),
0);else{for(var d=0;d<2;){var e=d++,f=c.model.SongManager.getFirstVoice(a.beats,e);f!=null&&f.beat.start>a.header.start&&this.createSilences(a,a.header.start,f.beat.start-a.header.start,e)}var g=[],h=[],i=0;for(d=b.voices.length;i<d;){i++;g.push(0);h.push(0)}for(;b!=null;){i=0;for(d=b.voices.length;i<d;){e=i++;f=b.voices[e];if(!f.isEmpty){var j=b.start+f.duration.time(),k=a.header.start+a.header.length();f=c.model.SongManager.getNextVoice(a.beats,b,f.index);if(f!=null)k=f.beat.start;if(j<k){g[e]=
j;h[e]=k-j}}}i=0;for(d=h.length;i<d;){e=i++;h[e]>0&&this.createSilences(a,g[e],h[e],e);g[e]=0;h[e]=0}b=c.model.SongManager.getNextBeat2(a.beats,b)}}},getRealStart:function(a,b){var d=c.model.SongManager.getDivisionLength(a.header),e=b,f=e%d==0;if(!f){var g=this.factory.newDuration();g.value=c.model.Duration.SIXTY_FOURTH;g.tuplet.enters=3;g.tuplet.times=2;g=g.time();for(var h=0;h<g;){h++;e++;if(f=e%d==0)break}f||(e=b)}return e},__class__:c.model.SongManager};c.model.Tempo=function(){this.value=120};
c.model.Tempo.__name__=true;c.model.Tempo.tempoToUsq=function(a){return Math.floor(6E7/a)};c.model.Tempo.prototype={copy:function(a){this.value=a.value},inUsq:function(){return c.model.Tempo.tempoToUsq(this.value)},__class__:c.model.Tempo};c.model.TimeSignature=function(a){this.numerator=4;this.denominator=a.newDuration()};c.model.TimeSignature.__name__=true;c.model.TimeSignature.prototype={copy:function(a){a.numerator=this.numerator;this.denominator.copy(a.denominator)},__class__:c.model.TimeSignature};
c.model.Track=function(a){this.offset=this.number=0;this.isMute=this.isSolo=false;this.name="";this.measures=[];this.strings=[];this.channel=a.newMidiChannel();this.color=c.model.Color.fromRgb(255,0,0)};c.model.Track.__name__=true;c.model.Track.prototype={addMeasure:function(a){a.track=this;this.measures.push(a)},measureCount:function(){return this.measures.length},stringCount:function(){return this.strings.length},__class__:c.model.Track};c.model.TripletFeel=function(){};c.model.TripletFeel.__name__=
true;c.model.Tuning=function(a,b,d){this.name=a;this.tuning=b;this.isStandard=d};c.model.Tuning.__name__=true;c.model.Tuning.isTuning=function(a){return c.model.Tuning.TUNING_REGEX.match(a)};c.model.Tuning.getTextForTuning=function(a,b){var d=Math.floor(a/12),e=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"][a%12];if(b)e+=l.string(d);return e};c.model.Tuning.getTuningForText=function(a){var b=0;b=c.model.Tuning.TUNING_REGEX;if(b.match(a.toLowerCase())){a=b.matched(1);var d=l.parseInt(b.matched(2));
if(a=="c")b=0;else if(a=="db")b=1;else if(a=="d")b=2;else if(a=="eb")b=3;else if(a=="e")b=4;else if(a=="f")b=5;else if(a=="gb")b=6;else if(a=="g")b=7;else if(a=="ab")b=8;else if(a=="a")b=9;else if(a=="bb")b=10;else if(a=="b")b=11;else return 0;b+=d*12}else return-1;return b};c.model.Tuning.getPresetsFor=function(a){c.model.Tuning._sevenStrings==null&&c.model.Tuning.initialize();if(a==7)return c.model.Tuning._sevenStrings;if(a==6)return c.model.Tuning._sixStrings;if(a==5)return c.model.Tuning._fiveStrings;
if(a==4)return c.model.Tuning._fourStrings;return[]};c.model.Tuning.initialize=function(){c.model.Tuning._sevenStrings=[];c.model.Tuning._sixStrings=[];c.model.Tuning._fiveStrings=[];c.model.Tuning._fourStrings=[];c.model.Tuning._sevenStrings.push(new c.model.Tuning("Guitar 7 strings",[64,59,55,50,45,40,35],true));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Standard Tuning",[64,59,55,50,45,40],true));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Tune down \ufffd step",
[63,58,54,49,44,39],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Tune down 1 step",[62,57,53,48,43,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Tune down 2 step",[60,55,51,46,41,36],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Dropped D Tuning",[64,59,55,50,45,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Dropped D Tuning variant",[64,57,55,50,45,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Double Dropped D Tuning",
[62,59,55,50,45,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Dropped E Tuning",[66,61,57,52,47,40],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Dropped C Tuning",[62,57,53,48,43,36],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open C Tuning",[64,60,55,48,43,36],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open Cm Tuning",[63,60,55,48,43,36],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open C6 Tuning",
[64,57,55,48,43,36],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open Cmaj7 Tuning",[64,59,55,52,43,36],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open D Tuning",[62,57,54,50,45,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open Dm Tuning",[62,57,53,50,45,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open D5 Tuning",[62,57,50,50,45,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open D6 Tuning",
[62,59,54,50,45,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open Dsus4 Tuning",[62,57,55,50,45,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open E Tuning",[64,59,56,52,47,40],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open Em Tuning",[64,59,55,52,47,40],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open Esus11 Tuning",[64,59,55,52,45,40],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open F Tuning",
[65,60,53,48,45,41],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open G Tuning",[62,59,55,50,43,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open Gm Tuning",[62,58,55,50,43,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open G6 Tuning",[64,59,55,50,43,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open Gsus4 Tuning",[62,60,55,50,43,38],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open A Tuning",
[64,61,57,52,45,40],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Open Am Tuning",[64,60,57,52,45,40],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Guitar Nashville Tuning",[64,59,67,62,57,52],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Bass 6 Strings Tuning",[48,43,38,33,28,23],false));c.model.Tuning._sixStrings.push(new c.model.Tuning("Lute or Vihuela Tuning",[64,59,54,50,45,40],false));c.model.Tuning._fiveStrings.push(new c.model.Tuning("Bass 5 Strings Tuning",
[43,38,33,28,23],true));c.model.Tuning._fiveStrings.push(new c.model.Tuning("Banjo Dropped C Tuning",[62,59,55,48,67],false));c.model.Tuning._fiveStrings.push(new c.model.Tuning("Banjo Open D Tuning",[62,57,54,50,69],false));c.model.Tuning._fiveStrings.push(new c.model.Tuning("Banjo Open G Tuning",[62,59,55,50,67],false));c.model.Tuning._fiveStrings.push(new c.model.Tuning("Banjo G Minor Tuning",[62,58,55,50,67],false));c.model.Tuning._fiveStrings.push(new c.model.Tuning("Banjo G Modal Tuning",[62,
57,55,50,67],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Bass Standard Tuning",[43,38,33,28],true));c.model.Tuning._fourStrings.push(new c.model.Tuning("Bass Tune down \ufffd step",[42,37,32,27],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Bass Tune down 1 step",[41,36,31,26],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Bass Tune down 2 step",[39,34,29,24],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Bass Dropped D Tuning",[43,38,33,
26],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Ukulele C Tuning",[45,40,36,43],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Ukulele G Tuning",[52,47,43,38],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Mandolin Standard Tuning",[64,57,50,43],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Mandolin or Violin Tuning",[76,69,62,55],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Viola Tuning",[69,62,55,48],false));c.model.Tuning._fourStrings.push(new c.model.Tuning("Cello Tuning",
[57,50,43,36],false))};c.model.Tuning.findTuning=function(a){for(var b=c.model.Tuning.getPresetsFor(a.length),d=0;d<b.length;){var e=b[d];++d;for(var f=true,g=0,h=a.length;g<h;){var i=g++;if(a[i].value!=e.tuning[i]){f=false;break}}if(f)return e}return null};c.model.Tuning.prototype={__class__:c.model.Tuning};c.model.Tuplet=function(){this.times=this.enters=1};c.model.Tuplet.__name__=true;c.model.Tuplet.prototype={clone:function(a){a=a.newTuplet();this.copy(a);return a},equals:function(a){return this.enters==
a.enters&&this.times==a.times},convertTime:function(a){return Math.floor(a*this.times/this.enters)},copy:function(a){a.enters=this.enters;a.times=this.times},__class__:c.model.Tuplet};c.model.Velocities=function(){};c.model.Velocities.__name__=true;c.model.Voice=function(a,b){this.duration=a.newDuration();this.notes=[];this.index=b;this.direction=0;this.isEmpty=true};c.model.Voice.__name__=true;c.model.Voice.prototype={addNote:function(a){a.voice=this;this.notes.push(a);this.isEmpty=false},isRestVoice:function(){return this.notes.length==
0},__class__:c.model.Voice};c.model.VoiceDirection=function(){};c.model.VoiceDirection.__name__=true;c.model.effects={};c.model.effects.BendEffect=function(){this.value=this.type=0;this.points=[]};c.model.effects.BendEffect.__name__=true;c.model.effects.BendEffect.prototype={clone:function(a){a=a.newBendEffect();a.value=this.value;a.type=this.type;for(var b=0,d=this.points.length;b<d;){var e=this.points[b++];a.points.push(new c.model.effects.BendPoint(e.position,e.value,e.vibrato))}return a},__class__:c.model.effects.BendEffect};
c.model.effects.BendPoint=function(a,b,d){this.position=a;this.value=b;this.vibrato=d};c.model.effects.BendPoint.__name__=true;c.model.effects.BendPoint.prototype={getTime:function(a){return Math.floor(a*this.position/12)},__class__:c.model.effects.BendPoint};c.model.effects.BendTypes=function(){};c.model.effects.BendTypes.__name__=true;c.model.effects.FingeringType=function(){};c.model.effects.FingeringType.__name__=true;c.model.effects.GraceEffect=function(){this.fret=0;this.duration=1;this.velocity=
95;this.transition=0;this.isDead=this.isOnBeat=false};c.model.effects.GraceEffect.__name__=true;c.model.effects.GraceEffect.prototype={clone:function(a){a=a.newGraceEffect();a.fret=this.fret;a.duration=this.duration;a.velocity=this.velocity;a.transition=this.transition;a.isOnBeat=this.isOnBeat;a.isDead=this.isDead;return a},durationTime:function(){return Math.floor(c.model.Duration.QUARTER_TIME/16*this.duration)},__class__:c.model.effects.GraceEffect};c.model.effects.GraceEffectTransition=function(){};
c.model.effects.GraceEffectTransition.__name__=true;c.model.effects.HarmonicEffect=function(){};c.model.effects.HarmonicEffect.__name__=true;c.model.effects.HarmonicEffect.prototype={clone:function(a){a=a.newHarmonicEffect();a.type=this.type;a.data=this.data;return a},__class__:c.model.effects.HarmonicEffect};c.model.effects.HarmonicType=function(){};c.model.effects.HarmonicType.__name__=true;c.model.effects.TremoloPickingEffect=function(a){this.duration=a.newDuration()};c.model.effects.TremoloPickingEffect.__name__=
true;c.model.effects.TremoloPickingEffect.prototype={clone:function(a){a=a.newTremoloPickingEffect();a.duration.value=this.duration.value;a.duration.isDotted=this.duration.isDotted;a.duration.isDoubleDotted=this.duration.isDoubleDotted;a.duration.tuplet.enters=this.duration.tuplet.enters;a.duration.tuplet.times=this.duration.tuplet.times;return a},__class__:c.model.effects.TremoloPickingEffect};c.model.effects.TrillEffect=function(a){this.fret=0;this.duration=a.newDuration()};c.model.effects.TrillEffect.__name__=
true;c.model.effects.TrillEffect.prototype={clone:function(a){a=a.newTrillEffect();a.fret=this.fret;a.duration.value=this.duration.value;a.duration.isDotted=this.duration.isDotted;a.duration.isDoubleDotted=this.duration.isDoubleDotted;a.duration.tuplet.enters=this.duration.tuplet.enters;a.duration.tuplet.times=this.duration.tuplet.times;return a},__class__:c.model.effects.TrillEffect};c.platform={};c.platform.Canvas=function(){};c.platform.Canvas.__name__=true;c.platform.Canvas.prototype={__class__:c.platform.Canvas};
c.platform.FileLoader=function(){};c.platform.FileLoader.__name__=true;c.platform.FileLoader.prototype={__class__:c.platform.FileLoader};c.platform.PlatformFactory=function(){};c.platform.PlatformFactory.__name__=true;c.platform.PlatformFactory.getCanvas=function(a){return a==c.platform.PlatformFactory.SVG_CANVAS?new c.platform.svg.SvgCanvas:new c.platform.js.Html5Canvas(a)};c.platform.PlatformFactory.getLoader=function(){return new c.platform.js.JsFileLoader};c.platform.js={};c.platform.js.Html5Canvas=
function(a){this._canvas=a;this._context=a.getContext("2d")};c.platform.js.Html5Canvas.__name__=true;c.platform.js.Html5Canvas.__interfaces__=[c.platform.Canvas];c.platform.js.Html5Canvas.prototype={measureText:function(a){return this._context.measureText(a).width},strokeText:function(a,b,d,e){if(e==null)e=0;e==0?this._context.strokeText(a,b,d):this._context.strokeText(a,b,d,e)},fillText:function(a,b,d,e){if(e==null)e=0;e==0?this._context.fillText(a,b,d):this._context.fillText(a,b,d,e)},set_textAlign:function(a){this._context.textAlign=
a;return this._context.textAlign},get_textAlign:function(){return this._context.textAlign},set_textBaseline:function(a){this._context.textBaseline=a;return this._context.textBaseLine},get_textBaseline:function(){return this._context.textBaseline},set_font:function(a){this._context.font=a;return this._context.font},get_font:function(){return this._context.font},stroke:function(){this._context.stroke()},fill:function(){this._context.fill()},rect:function(a,b,d,e){this._context.rect(a,b,d,e)},circle:function(a,
b,d){this._context.arc(a,b,d,0,Math.PI*2,true)},bezierCurveTo:function(a,b,d,e,f,g){this._context.bezierCurveTo(a,b,d,e,f,g)},quadraticCurveTo:function(a,b,d,e){this._context.quadraticCurveTo(a,b,d,e)},lineTo:function(a,b){this._context.lineTo(a,b)},moveTo:function(a,b){this._context.moveTo(a,b)},closePath:function(){this._context.closePath()},beginPath:function(){this._context.beginPath()},strokeRect:function(a,b,d,e){this._context.strokeRect(a,b,d,e)},fillRect:function(a,b,d,e){this._context.fillRect(a,
b,d,e)},clear:function(){this._context.clearRect(0,0,this.get_width(),this.get_height())},set_lineWidth:function(a){this._context.lineWidth=a;return this._context.lineWidth},get_lineWidth:function(){return this._context.lineWidth},set_fillStyle:function(a){this._context.fillStyle=a;return this._context.fillStyle},get_fillStyle:function(){return this._context.fillStyle},set_strokeStyle:function(a){this._context.strokeStyle=a;return this._context.strokeStyle},get_strokeStyle:function(){return this._context.strokeStyle},
set_height:function(a){this._canvas.height=a;this._context=this._canvas.getContext("2d");return a},set_width:function(a){this._canvas.width=a;this._context=this._canvas.getContext("2d");return a},get_height:function(){return this._canvas.offsetHeight},get_width:function(){return this._canvas.offsetWidth},__class__:c.platform.js.Html5Canvas};c.platform.js.JsFileLoader=function(){};c.platform.js.JsFileLoader.__name__=true;c.platform.js.JsFileLoader.__interfaces__=[c.platform.FileLoader];c.platform.js.JsFileLoader.isIE=
function(){return navigator.userAgent.indexOf("MSIE")!=-1};c.platform.js.JsFileLoader.prototype={loadBinary:function(a,b,d,e){if(c.platform.js.JsFileLoader.isIE()){a=VbAjaxLoader(a,b).toArray();b="";for(var f=0;f<a.length-1;){b+=String.fromCharCode(a[f]);f++}a=new c.io.DataInputStream(new c.io.StringInputStream(b));d(a)}else{var g=new XMLHttpRequest;g.overrideMimeType("text/plain; charset=x-user-defined");g.onreadystatechange=function(){try{if(g.readyState==4)if(g.status==200){var h=new c.io.DataInputStream(new c.io.StringInputStream(g.responseText));
d(h)}else if(g.status==0)e("You are offline!!\n Please Check Your Network.");else if(g.status==404)e("Requested URL not found.");else if(g.status==500)e("Internel Server Error.");else if(g.statusText=="parsererror")e("Error.\nParsing JSON Request failed.");else g.statusText=="timeout"?e("Request Time out."):e("Unknow Error: "+g.responseText)}catch(i){if(x.Boot.__instanceof(i,c.file.FileFormatException)){h=i;e("Error loading file: "+h.message)}else{h=i;e("Error loading file: "+l.string(h))}}};g.open(a,
b,true);g.send(null)}},__class__:c.platform.js.JsFileLoader};c.platform.svg={};c.platform.svg.FontSizes=function(){};c.platform.svg.FontSizes.__name__=true;c.platform.svg.FontSizes.measureString=function(a,b,d){b=b==c.platform.svg.SupportedFonts.TimesNewRoman?c.platform.svg.FontSizes.TIMES_NEW_ROMAN_11PT:b==c.platform.svg.SupportedFonts.Arial?c.platform.svg.FontSizes.ARIAL_11PT:[8];for(var e=0,f=0,g=a.length;f<g;){var h=f++;h=(Math.min(b.length-1,v.cca(a,h))|0)-c.platform.svg.FontSizes.CONTROL_CHARS;
if(h>=0)e+=b[h]*d/11|0}return e};c.platform.svg.SupportedFonts={__ename__:true,__constructs__:["TimesNewRoman","Arial"]};c.platform.svg.SupportedFonts.TimesNewRoman=["TimesNewRoman",0];c.platform.svg.SupportedFonts.TimesNewRoman.toString=B;c.platform.svg.SupportedFonts.TimesNewRoman.__enum__=c.platform.svg.SupportedFonts;c.platform.svg.SupportedFonts.Arial=["Arial",1];c.platform.svg.SupportedFonts.Arial.toString=B;c.platform.svg.SupportedFonts.Arial.__enum__=c.platform.svg.SupportedFonts;c.platform.svg.SvgCanvas=
function(){this._buffer=new F;this._currentPath=new F;this._currentPathIsEmpty=true;this.set_strokeStyle("#FFFFFF");this.set_fillStyle("#FFFFFF");this.set_lineWidth(1);this._height=this._width=0;this.set_font("10px sans-serif");this.set_textBaseline("alphabetic");this.set_textAlign("left")};c.platform.svg.SvgCanvas.__name__=true;c.platform.svg.SvgCanvas.__interfaces__=[c.platform.Canvas];c.platform.svg.SvgCanvas.prototype={measureText:function(a){var b=c.platform.svg.SupportedFonts.Arial;if(this.get_font().indexOf("Times")>=
0)b=c.platform.svg.SupportedFonts.TimesNewRoman;var d="",e=this.get_font();if(e.indexOf("bold ")==0)e=v.substr(e,5,null);if(e.indexOf("italic ")==0)e=v.substr(e,7,null);for(var f=0,g=e.length;f<g;){var h=f++,i=v.cca(e,h);if((i<48||i>57)&&i!=46&&i!=32)break;d+=e.charAt(h)}return c.platform.svg.FontSizes.measureString(a,b,l.parseFloat(d))},getSvgBaseLine:function(){switch(this.get_textBaseline()){case "top":return"top";case "hanging":return"hanging";case "middle":return"central";case "alphabetic":return"alphabetic";
case "ideographic":return"ideographic";case "bottom":return"bottom";default:return"alphabetic"}},getSvgTextAlignment:function(){switch(this.get_textAlign()){case "left":return"start";case "right":return"end";case "center":return"middle";case "start":return"start";case "end":return"end";default:return"start"}},strokeText:function(a,b,d,e){if(e==null)e=0;this._buffer.b+='<text x="';this._buffer.b+=l.string(b);this._buffer.b+='" y="';this._buffer.b+=l.string(d);this._buffer.b+='" style="font:';this._buffer.b+=
l.string(this.get_font());this._buffer.b+='" stroke:';this._buffer.b+=l.string(this.get_strokeStyle());this._buffer.b+="; stroke-width:";this._buffer.b+=l.string(this.get_lineWidth());this._buffer.b+=';" ';if(e!=0){this._buffer.b+='width="';this._buffer.b+=l.string(e);this._buffer.b+='"'}this._buffer.b+=' dominant-baseline="';this._buffer.b+=l.string(this.getSvgBaseLine());this._buffer.b+='" text-anchor="';this._buffer.b+=l.string(this.getSvgTextAlignment());this._buffer.b+='">\n';this._buffer.b+=
l.string(a);this._buffer.b+="</text>\n"},fillText:function(a,b,d,e){if(e==null)e=0;this._buffer.b+='<text x="';this._buffer.b+=l.string(b);this._buffer.b+='" y="';this._buffer.b+=l.string(d);this._buffer.b+='" style="font:';this._buffer.b+=l.string(this.get_font());this._buffer.b+="; fill:";this._buffer.b+=l.string(this.get_fillStyle());this._buffer.b+=';" ';if(e!=0){this._buffer.b+='width="';this._buffer.b+=l.string(e);this._buffer.b+='"'}this._buffer.b+=' dominant-baseline="';this._buffer.b+=l.string(this.getSvgBaseLine());
this._buffer.b+='" text-anchor="';this._buffer.b+=l.string(this.getSvgTextAlignment());this._buffer.b+='">\n';this._buffer.b+=l.string(a);this._buffer.b+="</text>\n"},set_textAlign:function(a){return this._textAlign=a},get_textAlign:function(){return this._textAlign},set_textBaseline:function(a){return this._textBaseline=a},get_textBaseline:function(){return this._textBaseline},set_font:function(a){return this._font=a},get_font:function(){return this._font},stroke:function(){if(!this._currentPathIsEmpty){this._buffer.b+=
'<path d="';this._buffer.b+=l.string(this._currentPath.b);this._buffer.b+='" style="stroke:';this._buffer.b+=l.string(this.get_strokeStyle());this._buffer.b+="; stroke-width:";this._buffer.b+=l.string(this.get_lineWidth());this._buffer.b+=';" fill="none" />\n'}this._currentPath=new F;this._currentPathIsEmpty=true},fill:function(){if(!this._currentPathIsEmpty){this._buffer.b+='<path d="';this._buffer.b+=l.string(this._currentPath.b);this._buffer.b+='" style="fill:';this._buffer.b+=l.string(this.get_fillStyle());
this._buffer.b+='" stroke="none"/>\n'}this._currentPath=new F;this._currentPathIsEmpty=true},rect:function(a,b,d,e){this._currentPathIsEmpty=false;this._currentPath.b+=" M";this._currentPath.b+=l.string(a);this._currentPath.b+=",";this._currentPath.b+=l.string(b);this._currentPath.b+=" L";this._currentPath.b+=l.string(a+d);this._currentPath.b+=",";this._currentPath.b+=l.string(b);this._currentPath.b+=" ";this._currentPath.b+=l.string(a+d);this._currentPath.b+=",";this._currentPath.b+=l.string(b+e);
this._currentPath.b+=" ";this._currentPath.b+=l.string(a);this._currentPath.b+=",";this._currentPath.b+=l.string(b+e);this._currentPath.b+=" z"},circle:function(a,b,d){this._currentPathIsEmpty=false;this._currentPath.b+=" M";this._currentPath.b+=l.string(a-d);this._currentPath.b+=",";this._currentPath.b+=l.string(b);this._currentPath.b+=" A1,1 0 0,0 ";this._currentPath.b+=l.string(a+d);this._currentPath.b+=",";this._currentPath.b+=l.string(b);this._currentPath.b+=" A1,1 0 0,0 ";this._currentPath.b+=
l.string(a-d);this._currentPath.b+=",";this._currentPath.b+=l.string(b);this._currentPath.b+=" z"},bezierCurveTo:function(a,b,d,e,f,g){this._currentPathIsEmpty=false;this._currentPath.b+=" C";this._currentPath.b+=l.string(a);this._currentPath.b+=",";this._currentPath.b+=l.string(b);this._currentPath.b+=",";this._currentPath.b+=l.string(d);this._currentPath.b+=",";this._currentPath.b+=l.string(e);this._currentPath.b+=",";this._currentPath.b+=l.string(f);this._currentPath.b+=",";this._currentPath.b+=
l.string(g)},quadraticCurveTo:function(a,b,d,e){this._currentPathIsEmpty=false;this._currentPath.b+=" Q";this._currentPath.b+=l.string(a);this._currentPath.b+=",";this._currentPath.b+=l.string(b);this._currentPath.b+=",";this._currentPath.b+=l.string(d);this._currentPath.b+=",";this._currentPath.b+=l.string(e)},lineTo:function(a,b){this._currentPathIsEmpty=false;this._currentPath.b+=" L";this._currentPath.b+=l.string(a);this._currentPath.b+=",";this._currentPath.b+=l.string(b)},moveTo:function(a,
b){this._currentPath.b+=" M";this._currentPath.b+=l.string(a);this._currentPath.b+=",";this._currentPath.b+=l.string(b)},closePath:function(){this._currentPath.b+=" z"},beginPath:function(){},strokeRect:function(a,b,d,e){this._buffer.b+='<rect x="';this._buffer.b+=l.string(a);this._buffer.b+='" y="';this._buffer.b+=l.string(b);this._buffer.b+='" width="';this._buffer.b+=l.string(d);this._buffer.b+='" height="';this._buffer.b+=l.string(e);this._buffer.b+='" style="stroke:';this._buffer.b+=l.string(this.get_strokeStyle());
this._buffer.b+="; stroke-width:";this._buffer.b+=l.string(this.get_lineWidth());this._buffer.b+=';" />\n'},fillRect:function(a,b,d,e){this._buffer.b+='<rect x="';this._buffer.b+=l.string(a);this._buffer.b+='" y="';this._buffer.b+=l.string(b);this._buffer.b+='" width="';this._buffer.b+=l.string(d);this._buffer.b+='" height="';this._buffer.b+=l.string(e);this._buffer.b+='" style="fill:';this._buffer.b+=l.string(this.get_fillStyle());this._buffer.b+=';" />\n'},clear:function(){this._buffer=new F;this._currentPath=
new F;this._currentPathIsEmpty=true},set_lineWidth:function(a){return this._lineWidth=a},get_lineWidth:function(){return this._lineWidth},set_fillStyle:function(a){return this._fillStyle=a},get_fillStyle:function(){return this._fillStyle},set_strokeStyle:function(a){return this._strokeStyle=a},get_strokeStyle:function(){return this._strokeStyle},set_height:function(a){return this._height=a},set_width:function(a){return this._width=a},get_height:function(){return this._height},get_width:function(){return this._width},
toSvg:function(a,b){var d=new c.io.StringOutputStream;this.writeTo(d,a,b);d.flush();return d.toString()},writeTo:function(a,b,d){if(b){a.writeString('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="');a.writeAsString(this._width);a.writeString('px" height="');a.writeAsString(this._height);a.writeString('px"');if(d!=null){a.writeString(' class="');a.writeString(d);a.writeString('"')}a.writeString(">\n")}a.writeString(this._buffer.b);b&&a.writeString("</svg>")},__class__:c.platform.svg.SvgCanvas};
c.tablature={};c.tablature.ViewLayout=function(){this.init(1);this.contentPadding=new c.model.Padding(0,0,0,0)};c.tablature.ViewLayout.__name__=true;c.tablature.ViewLayout.prototype={createStaveLine:function(a){var b=new c.tablature.staves.StaveLine;b.track=a;b.tablature=this.tablature;a=this.tablature.settings.get("staves");for(var d=0;d<a.length;){var e=a[d];++d;e=c.tablature.staves.StaveFactory.getStave(e,b,this);e!=null&&b.addStave(e)}return b},getNoteSize:function(a){var b="";b=a.isTiedNote?
"L":a.effect.deadNote?"X":l.string(a.value);b=a.effect.ghostNote?"("+b+")":b;this.tablature.canvas.set_font(c.tablature.drawing.DrawingResources.noteFont);a=this.tablature.canvas.measureText(b);return new c.model.Point(a,c.tablature.drawing.DrawingResources.noteFontHeight)},getOrientation:function(a,b,d){this.tablature.canvas.set_font(c.tablature.drawing.DrawingResources.noteFont);d=this.tablature.canvas.measureText(d);return new c.model.Rectangle(a,b,d,c.tablature.drawing.DrawingResources.noteFontHeight)},
getNoteOrientation:function(a,b,d){var e="";e=d.isTiedNote?"L":d.effect.deadNote?"X":l.string(d.value);e=d.effect.ghostNote?"("+e+")":e;return this.getOrientation(a,b,e)},getVoiceWidth:function(a){a=a.duration;if(a!=null)switch(a.value){case c.model.Duration.WHOLE:return 91*this.scale;case c.model.Duration.HALF:return 65*this.scale;case c.model.Duration.QUARTER:return 45*this.scale;case c.model.Duration.EIGHTH:return 33*this.scale;case c.model.Duration.SIXTEENTH:return 23*this.scale;case c.model.Duration.THIRTY_SECOND:return 23*
this.scale;case c.model.Duration.SIXTY_FOURTH:return 23*this.scale}return 20*this.scale},prepareLayout:function(){},paintSong:function(){},updateCache:function(a,b,d,e){this._cache=new c.tablature.drawing.DrawingContext(this.scale);this._cache.graphics=a;this.paintSong(this._cache,b,d,e);this.paintCache(a,b,d,e)},paintCache:function(a,b,d,e){this._cache==null?this.updateCache(a,b,d,e):this._cache.draw()},init:function(a){this.stringSpacing=10*a;this.scoreLineSpacing=8*a;this.scale=a;this.firstMeasureSpacing=
Math.round(10*a);this.effectSpacing=Math.round(15*a)},setTablature:function(a){this.tablature=a},getLines:function(){return null},getBeatAtLine:function(a,b){var d=0,e=a.measures.length,f=null;do{var g=(d+e)/2|0,h=this.tablature.track.measures[a.measures[g]],i=h.x,j=i+h.width+h.spacing;if(b>=i&&b<=j)f=h;else if(b>j)d=g+1;else if(b<i)e=g-1}while(!(f!=null||d>e));if(f==null)return null;d=null;e=0;for(f=f.beats;e<f.length;){g=f[e];++e;g=g;g.fullX();g.fullWidth();if(b>g.fullX()||d==null)d=g;else break}return d},
getBeatAt:function(){return null},__class__:c.tablature.ViewLayout};c.tablature.PageViewLayout=function(){c.tablature.ViewLayout.call(this);this._lines=[];this._maximumWidth=0;this.contentPadding=c.tablature.PageViewLayout.PAGE_PADDING};c.tablature.PageViewLayout.__name__=true;c.tablature.PageViewLayout.__super__=c.tablature.ViewLayout;c.tablature.PageViewLayout.prototype=y(c.tablature.ViewLayout.prototype,{parsePageSetupString:function(a){var b=this.tablature.track.song;a=q.replace(a,"%TITLE%",b.title);
a=q.replace(a,"%SUBTITLE%",b.subtitle);a=q.replace(a,"%ARTIST%",b.artist);a=q.replace(a,"%ALBUM%",b.album);a=q.replace(a,"%WORDS%",b.words);a=q.replace(a,"%MUSIC%",b.music);a=q.replace(a,"%WORDSMUSIC%",b.words);return a=q.replace(a,"%COPYRIGHT%",b.copyright)},paintSongInfo:function(a,b,d,e){if(this.tablature.getLayoutSetting("hideSongInfo",false))return e;var f=this.tablature.track.song;d+=this.contentPadding.left;e+=19;var g,h="";if(f.title!=""&&(f.pageSetup.headerAndFooter&1)!=0){h=this.parsePageSetupString(f.pageSetup.title);
a.graphics.set_font(c.tablature.drawing.DrawingResources.titleFont);g=a.graphics.measureText(h);g=(b.width-g)/2;a.get(1).addString(h,c.tablature.drawing.DrawingResources.titleFont,g,e);e+=Math.floor(35*this.scale)}if(f.subtitle!=""&&(f.pageSetup.headerAndFooter&2)!=0){h=this.parsePageSetupString(f.pageSetup.subtitle);a.graphics.set_font(c.tablature.drawing.DrawingResources.subtitleFont);g=a.graphics.measureText(h);g=(b.width-g)/2;a.get(1).addString(h,c.tablature.drawing.DrawingResources.subtitleFont,
g,e);e+=Math.floor(20*this.scale)}if(f.artist!=""&&(f.pageSetup.headerAndFooter&4)!=0){h=this.parsePageSetupString(f.pageSetup.artist);a.graphics.set_font(c.tablature.drawing.DrawingResources.subtitleFont);g=a.graphics.measureText(h);g=(b.width-g)/2;a.get(1).addString(h,c.tablature.drawing.DrawingResources.subtitleFont,g,e);e+=Math.floor(20*this.scale)}if(f.album!=""&&(f.pageSetup.headerAndFooter&8)!=0){h=this.parsePageSetupString(f.pageSetup.album);a.graphics.set_font(c.tablature.drawing.DrawingResources.subtitleFont);
g=a.graphics.measureText(h);g=(b.width-g)/2;a.get(1).addString(h,c.tablature.drawing.DrawingResources.subtitleFont,g,e);e+=Math.floor(20*this.scale)}if(f.music!=""&&f.music==f.words&&(f.pageSetup.headerAndFooter&64)!=0){h=this.parsePageSetupString(f.pageSetup.wordsAndMusic);a.graphics.set_font(c.tablature.drawing.DrawingResources.wordsFont);a.graphics.measureText(h);a.get(1).addString(h,c.tablature.drawing.DrawingResources.wordsFont,d,e)}else{if(f.music!=""&&(f.pageSetup.headerAndFooter&32)!=0){h=
this.parsePageSetupString(f.pageSetup.music);a.graphics.set_font(c.tablature.drawing.DrawingResources.wordsFont);g=a.graphics.measureText(h);g=b.width-g-this.contentPadding.right;a.get(1).addString(h,c.tablature.drawing.DrawingResources.wordsFont,g,e)}if(f.words!=""&&(f.pageSetup.headerAndFooter&16)!=0){h=this.parsePageSetupString(f.pageSetup.words);a.graphics.set_font(c.tablature.drawing.DrawingResources.wordsFont);a.get(1).addString(h,c.tablature.drawing.DrawingResources.wordsFont,d,e)}}e+=Math.floor(20*
this.scale);e+=Math.floor(20*this.scale);if(!this.tablature.track.isPercussionTrack){h=c.model.Tuning.findTuning(this.tablature.track.strings);if(h!=null){a.get(1).addString(h.name,c.tablature.drawing.DrawingResources.effectFont,d,e);e+=Math.floor(15*this.scale);if(!h.isStandard){b=Math.ceil(this.tablature.track.strings.length/2);d=d;f=e;g=0;for(var i=this.tablature.track.strings.length;g<i;){var j=g++;h="("+l.string(j+1)+") = "+c.model.Tuning.getTextForTuning(this.tablature.track.strings[j].value,
false);a.get(1).addString(h,c.tablature.drawing.DrawingResources.effectFont,d,f);f+=Math.floor(15*this.scale);if(j==b-1){f=e;d+=Math.floor(43*this.scale)}}e+=b*Math.floor(15*this.scale)}}}e+=Math.floor(25*this.scale);e-=19;return e},paintSong:function(a,b,d,e){var f=this.tablature.track;e=e+this.contentPadding.top|0;this.paintSongInfo(a,b,d,e);b=0;for(d=this._lines.length;b<d;)this._lines[b++].paint(this,f,a)},layoutSongInfo:function(a,b){if(this.tablature.getLayoutSetting("hideSongInfo",false))return b;
var d=this.tablature.track.song;if(d.title!=""&&(d.pageSetup.headerAndFooter&1)!=0)b+=Math.floor(35*this.scale);if(d.subtitle!=""&&(d.pageSetup.headerAndFooter&2)!=0)b+=Math.floor(20*this.scale);if(d.artist!=""&&(d.pageSetup.headerAndFooter&4)!=0)b+=Math.floor(20*this.scale);if(d.album!=""&&(d.pageSetup.headerAndFooter&8)!=0)b+=Math.floor(20*this.scale);if(d.music!=""&&d.music==d.words&&(d.pageSetup.headerAndFooter&64)!=0)b+=Math.floor(20*this.scale);else{if(d.music!=""&&(d.pageSetup.headerAndFooter&
32)!=0)b+=Math.floor(20*this.scale);if(d.words!=""&&(d.pageSetup.headerAndFooter&16)!=0)b+=Math.floor(20*this.scale)}b+=Math.floor(20*this.scale);if(!this.tablature.track.isPercussionTrack){d=c.model.Tuning.findTuning(this.tablature.track.strings);if(d!=null){b+=Math.floor(15*this.scale);d.isStandard||(b+=Math.ceil(this.tablature.track.strings.length/2)*Math.floor(15*this.scale));b+=Math.floor(15*this.scale)}}b+=Math.floor(40*this.scale);return b},fitLine:function(a,b){var d=0;if(b.fullLine){var e=
this.getMaxWidth()-b.width;if(e!=0&&b.measures.length>0)d=Math.round(e/b.measures.length)}for(var f=e=0,g=b.measures.length;f<g;){var h=f++;h=a.measures[b.measures[h]];h.setSpacing(d);h.x=e;e+=h.width+d}b.width=e;this.width=Math.round(Math.max(this.width,e))},getStaveLine:function(a,b,d,e,f){var g=this.createStaveLine(a);g.y=e;g.x=f;g.spacing.set(0,Math.floor(10*this.scale));g.spacing.set(1,Math.floor(10*this.scale));e=this.tablature.getLayoutSetting("measuresPerLine",-1);d=d+1;f=0;for(b=b;b<d;){var h=
b++,i=a.measures[h];i.staveLine=g;i.performLayout(this);var j=false;if(e==-1&&f+i.width>=this.getMaxWidth()&&g.measures.length!=0)j=true;else if(g.measures.length==e)j=true;if(j){g.fullLine=true;g.width=f;return g}i.x=f;f+=i.width;j=0;for(var k=g.staves;j<k.length;){var m=k[j];++j;m.prepare(i)}g.addMeasure(h)}g.width=f;return g},prepareLayout:function(a,b,d){this._lines=[];this._maximumWidth=Math.floor(a.width);this.height=this.width=0;a=d;var e=this.tablature.getLayoutSetting("startMeasure",-1);
e--;e=Math.min(this.tablature.track.measureCount()-1,Math.max(0,e))|0;d=this.tablature.getLayoutSetting("measureCount",this.tablature.track.measures.length);d=e+d-1;d=Math.min(this.tablature.track.measureCount()-1,Math.max(0,d))|0;var f=this.tablature.track;e=e;b+=this.contentPadding.left;for(a=Math.floor(this.layoutSongInfo(b,a)+this.firstMeasureSpacing);d>=e;){e=this.getStaveLine(f,e,d,a,b);e.index=this._lines.length;this._lines.push(e);this.fitLine(f,e);a+=e.getHeight();e=e.lastIndex()+1}this.height=
a+this.contentPadding.bottom;this.width=this.getSheetWidth()},init:function(a){c.tablature.ViewLayout.prototype.init.call(this,a);this.layoutSize=new c.model.Point(this.getSheetWidth()-c.tablature.PageViewLayout.PAGE_PADDING.getHorizontal(),this.height)},getSheetWidth:function(){return Math.round(795*this.scale)},getMaxWidth:function(){if(this._maximumWidth<=0)this._maximumWidth=this.tablature.canvas.get_width();return this._maximumWidth-this.contentPadding.getHorizontal()},getBeatAt:function(a,b){var d=
0,e=this._lines.length,f=null;do{var g=(d+e)/2|0,h=this._lines[g],i=h.y,j=i+h.getHeight();if(b>=i&&b<=j)f=h;else if(b>j)d=g+1;else if(b<i)e=g-1}while(!(f!=null||d>e));if(f==null)return null;return this.getBeatAtLine(f,a,b)},getLines:function(){return this._lines},__class__:c.tablature.PageViewLayout});c.tablature.HorizontalViewLayout=function(){c.tablature.ViewLayout.call(this);this.contentPadding=c.tablature.HorizontalViewLayout.PAGE_PADDING};c.tablature.HorizontalViewLayout.__name__=true;c.tablature.HorizontalViewLayout.__super__=
c.tablature.ViewLayout;c.tablature.HorizontalViewLayout.prototype=y(c.tablature.ViewLayout.prototype,{paintSong:function(a){this._line.paint(this,this.tablature.track,a)},getStaveLine:function(a,b,d,e){var f=this.createStaveLine(a);f.y=d;f.x=e;f.spacing.set(0,Math.floor(10*this.scale));f.spacing.set(1,Math.floor(10*this.scale));d=a.measureCount();e=0;for(b=b;b<d;){var g=b++,h=a.measures[g];h.staveLine=f;h.performLayout(this);h.x=e;e+=h.width;for(var i=0,j=f.staves;i<j.length;){var k=j[i];++i;k.prepare(h)}f.addMeasure(g)}f.width=
e;return f},prepareLayout:function(a,b,d){this.height=this.width=0;a=d;d=this.tablature.track;var e=this.tablature.track.measures.length,f=0;b+=this.contentPadding.left;for(a=Math.floor(a+this.firstMeasureSpacing);e>f;){this._line=this.getStaveLine(d,f,a,b);a+=this._line.getHeight();f=this._line.lastIndex()+1}this.height=a+this.contentPadding.bottom;this.width=this._line.width+c.tablature.HorizontalViewLayout.PAGE_PADDING.getHorizontal();this.layoutSize=new c.model.Point(this.width,this.height)},
getBeatAt:function(a,b){a-=c.tablature.HorizontalViewLayout.PAGE_PADDING.left;return this.getBeatAtLine(this._line,a,b)},getLines:function(){return[this._line]},init:function(a){c.tablature.ViewLayout.prototype.init.call(this,a);this.layoutSize=new c.model.Point(this.width,this.height)},__class__:c.tablature.HorizontalViewLayout});c.tablature.Tablature=function(a,b,d){if(d==null)d="";this.canvas=c.platform.PlatformFactory.getCanvas(a);this.track=null;this.settings=new p.ds.StringMap;this.errorMessage=
q.trim(d);this.autoSizeWidth=true;if(this.errorMessage==""||this.errorMessage==null)this.errorMessage="Please set a song's track to display the tablature";if(b==null){b=[];b.push("score");b.push("tablature")}this.settings.set("staves",b);this.setViewLayoutByKey(c.tablature.Tablature.DEFAULT_LAYOUT)};c.tablature.Tablature.__name__=true;c.tablature.Tablature.prototype={findBeat:function(a,b,d){if(d!=null){for(var e=0,f=d.beats;e<f.length;){var g=f[e];++e;var h=a+(g.start-d.header.start),i=g.voices[0];
if(!i.isEmpty&&h<=b&&h+i.duration.time()>b)return g}return c.model.SongManager.getFirstBeat(d.beats)}return null},getMeasureAt:function(a){var b=c.model.Duration.QUARTER_TIME,d={measure:null,realPosition:b},e=this.track.song,f=new c.midi.MidiRepeatController(e);if(this._selectedBeat!=null&&a>this.lastPosition){f.index=this._selectedBeat.measure.header.number-1;b=this._lastRealPosition}for(;!f.finished();){var g=e.measureHeaders[f.index];f.process();if(f.shouldPlay){var h=g.length();if(a>=b&&a<b+h){d.measure=
this.track.measures[g.number-1];d.realPosition=b;return d}b+=h}}d.realPosition=b;return d},findMeasure:function(a){a=this.getMeasureAt(a);if(a.measure==null)a.measure=c.model.SongManager.getFirstMeasure(this.track);return a},notifyTickPosition:function(a,b,d){a-=c.model.Duration.QUARTER_TIME;if(b||a!=this.lastPosition){this.lastPosition=a;var e=this.findMeasure(a);this._lastRealPosition=b=e.realPosition;e=e.measure;a=this.findBeat(b,a,e);if(e!=null&&a!=null){this._selectedBeat=a;this.onCaretChanged!=
null&&this.onCaretChanged(a,d)}}},invalidate:function(){this.canvas.clear();this.onPaint()},paintBackground:function(){this.canvas.set_fillStyle("#4e4e4e");this.canvas.set_font(c.tablature.drawing.DrawingResources.copyrightFont);this.canvas.set_textBaseline("top");this.canvas.fillText("Rendered using alphaTab (http://www.alphaTab.net)",(this.canvas.get_width()-this.canvas.measureText("Rendered using alphaTab (http://www.alphaTab.net)"))/2,this.canvas.get_height()-15)},updateTablature:function(){if(this.track!=
null){this.doLayout();this._updateSong=false}},onPaint:function(){this.paintBackground();if(this.track==null||this.isError){var a=this.errorMessage;this.canvas.set_fillStyle("#4e4e4e");this.canvas.set_font(c.tablature.drawing.DrawingResources.timeSignatureFont);this.canvas.set_textBaseline("middle");this.canvas.fillText(a,20,30)}else{if(this._updateDisplay){a=new c.model.Rectangle(0,0,this.canvas.get_width(),this.canvas.get_height());this.viewLayout.updateCache(this.canvas,a,0,0)}else{a=new c.model.Rectangle(0,
0,this.canvas.get_width(),this.canvas.get_height());this.viewLayout.paintCache(this.canvas,a,0,0)}this._updateDisplay=false}this.onFinished!=null&&this.onFinished()},doLayout:function(){if(this.track!=null){var a=this.viewLayout.layoutSize;if(!this.autoSizeWidth)a.x=this.canvas.get_width()-this.viewLayout.contentPadding.getHorizontal();this.viewLayout.prepareLayout(new c.model.Rectangle(0,0,a.x,a.y),0,0);this.autoSizeWidth&&this.canvas.set_width(this.viewLayout.width);this.canvas.set_height(this.viewLayout.height);
this.onLayouted!=null&&this.onLayouted()}},updateScale:function(a){c.tablature.drawing.DrawingResources.init(a);this.viewLayout.init(a);this._updateDisplay=this._updateSong=true;this.updateTablature();this.invalidate()},setTrack:function(a){this.track=a;this._updateDisplay=this._updateSong=true;this.updateTablature();this.invalidate()},getLayoutSetting:function(a,b){var d=this.settings.get("layout."+a);return d!=null?d:b},setLayoutSetting:function(a,b){this.settings.set("layout."+a,b)},getStaveSetting:function(a,
b,d){a=this.settings.get(a+"."+b);return a!=null?a:d},setStaveSetting:function(a,b,d){this.settings.set(a+"."+b,d)},setViewLayoutByKey:function(a){this.viewLayout=a=="horizontal"?new c.tablature.HorizontalViewLayout:new c.tablature.PageViewLayout;this.viewLayout.setTablature(this);this.updateScale(1)},__class__:c.tablature.Tablature};c.tablature.drawing={};c.tablature.drawing.ClefPainter=function(){};c.tablature.drawing.ClefPainter.__name__=true;c.tablature.drawing.ClefPainter.paintAlto=function(a,
b,d,e){a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.AltoClef,b,d,e.scale)};c.tablature.drawing.ClefPainter.paintBass=function(a,b,d,e){a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.BassClef,b,d,e.scale)};c.tablature.drawing.ClefPainter.paintTenor=function(a,b,d,e){d-=Math.round(e.scoreLineSpacing);a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.TenorClef,b,d,e.scale)};c.tablature.drawing.ClefPainter.paintTreble=function(a,b,d,e){d-=Math.round(e.scoreLineSpacing);a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.TrebleClef,
b,d,e.scale)};c.tablature.drawing.DrawingContext=function(a){this.layers=[];this.layers[0]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(205,205,205),true,0);this.layers[1]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(34,34,17),true,0);this.layers[2]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(165,165,165),false,1);this.layers[3]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(34,34,17),true,0);this.layers[4]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(34,
34,17),false,a);this.layers[5]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(150,150,150),true,1);this.layers[6]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(150,150,150),true,0);this.layers[7]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(150,150,150),false,a);this.layers[8]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(150,150,150),false,a);this.layers[9]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(34,34,17),true,1);this.layers[10]=
new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(34,34,17),true,0);this.layers[11]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(34,34,17),false,a);this.layers[12]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(34,34,17),false,a);this.layers[13]=new c.tablature.drawing.DrawingLayer(c.model.Color.fromRgb(255,0,0),true,0)};c.tablature.drawing.DrawingContext.__name__=true;c.tablature.drawing.DrawingContext.prototype={get:function(a){return this.layers[a]},clear:function(){for(var a=
0,b=this.layers.length;a<b;)this.layers[a++].clear()},draw:function(){for(var a=0,b=this.layers.length;a<b;)this.layers[a++].draw(this.graphics)},__class__:c.tablature.drawing.DrawingContext};c.tablature.drawing.DrawingLayer=function(a,b,d){this._path=[];this._defaultColor=a;this._isFilled=b;this._penWidth=d;this._currentPosition=new c.model.Point(0,0)};c.tablature.drawing.DrawingLayer.__name__=true;c.tablature.drawing.DrawingLayer.prototype={finish:function(a){this._isFilled?a.fill():a.stroke()},
clear:function(){this._path=[]},resetColor:function(){this._path.push({Command:"setColor",Color:this._defaultColor})},setColor:function(a){this._path.push({Command:"setColor",Color:a})},addRect:function(a,b,d,e){this._path.push({Command:"addRect",X:a,Y:b,Width:d,Height:e})},addCircle:function(a,b,d){this._path.push({Command:"addCircle",X:a,Y:b,Radius:d/2})},addBezier:function(a,b,d,e,f,g,h,i){this._path.push({Command:"addBezier",X1:a,Y1:b,X2:d,Y2:e,X3:f,Y3:g,X4:h,Y4:i})},addPolygon:function(a){this._path.push({Command:"addPolygon",
Points:a})},addDashedLine:function(a,b,d,e){var f=d-a,g=e-b,h=Math.floor(Math.sqrt(f*f+g*g)/5);f=f/h;g=g/h;for(var i=d>a,j=e>b,k=0;k++<h;){var m=0,n=0;m=i?Math.min(a+f,d):Math.max(a+f,d);n=j?Math.min(b+g,e):Math.max(b+g,e);k%2==0&&this.addLine(a,b,m,n);a=m;b=n}},addLine:function(a,b,d,e){this.startFigure();this.moveTo(a,b);this.lineTo(d,e)},addMusicSymbol:function(a,b,d,e,f){if(f==null)f=0;if(f==0)f=e;(new c.tablature.drawing.SvgPainter(this,a,b,d,e,f)).paint()},addString:function(a,b,d,e){this._path.push({Command:"addString",
Text:a,Font:b,X:d+0.5,Y:e+0.5})},lineTo:function(a,b){this._path.push({Command:"lineTo",X:a+0.5,Y:b+0.5})},quadraticCurveTo:function(a,b,d,e){this._path.push({Command:"quadraticCurveTo",X1:a,Y1:b,X2:d,Y2:e})},bezierTo:function(a,b,d,e,f,g){this._path.push({Command:"bezierTo",X1:a,Y1:b,X2:d,Y2:e,X3:f,Y3:g})},moveTo:function(a,b){this._path.push({Command:"moveTo",X:Math.round(a)+0.5,Y:Math.round(b)+0.5})},closeFigure:function(){this._path.push({Command:"closeFigure"})},startFigure:function(){this._path.push({Command:"startFigure"})},
draw:function(a){a.set_textAlign("left");a.set_textBaseline("middle");a.set_fillStyle(this._defaultColor.asRgbString());a.set_strokeStyle(this._defaultColor.asRgbString());a.set_lineWidth(this._penWidth);a.beginPath();for(var b=0,d=this._path;b<d.length;){var e=d[b];++b;try{switch(e.Command){case "setColor":var f=e.Color.asRgbString();a.set_fillStyle(f);a.set_strokeStyle(f);break;case "startFigure":this.finish(a);a.beginPath();break;case "closeFigure":a.closePath();break;case "moveTo":a.moveTo(e.X,
e.Y);this._currentPosition.x=e.X;this._currentPosition.y=e.Y;break;case "lineTo":a.lineTo(e.X,e.Y);this._currentPosition.x=e.X;this._currentPosition.y=e.Y;break;case "bezierTo":a.bezierCurveTo(e.X1,e.Y1,e.X2,e.Y2,e.X3,e.Y3);this._currentPosition.x=e.X3;this._currentPosition.y=e.Y3;break;case "quadraticCurveTo":a.quadraticCurveTo(e.X1,e.Y1,e.X2,e.Y2);this._currentPosition.x=e.X2;this._currentPosition.y=e.Y2;break;case "addString":a.set_font(e.Font);a.fillText(e.Text,e.X,e.Y);break;case "addLine":a.moveTo(e.X1,
e.Y1);a.lineTo(e.X2,e.Y2);break;case "addPolygon":this.finish(a);a.beginPath();a.moveTo(e.Points[0].x,e.Points[0].y);var g=e.Points;for(e=0;e<g.length;){var h=g[e];++e;a.lineTo(h.x,h.y)}a.closePath();this.finish(a);a.beginPath();break;case "addBezier":a.moveTo(e.X1,e.Y1);a.bezierCurveTo(e.X2,e.Y2,e.X3,e.Y3,e.X4,e.Y4);break;case "addCircle":this.finish(a);a.beginPath();var i=e.Radius;a.circle(e.X+i,e.Y+i,i);a.closePath();break;case "addRect":a.rect(e.X,e.Y,e.Width,e.Height);break}}catch(j){x.Boot.__instanceof(j,
String);throw j;}}this.finish(a)},__class__:c.tablature.drawing.DrawingLayer};c.tablature.drawing.DrawingLayers=function(){};c.tablature.drawing.DrawingLayers.__name__=true;c.tablature.drawing.DrawingResources=function(){};c.tablature.drawing.DrawingResources.__name__=true;c.tablature.drawing.DrawingResources.init=function(a){c.tablature.drawing.DrawingResources.defaultFontHeight=Math.round(9*a);c.tablature.drawing.DrawingResources.defaultFont=c.tablature.drawing.DrawingResources.formatFontSize(c.tablature.drawing.DrawingResources.defaultFontHeight)+
" 'Arial'";c.tablature.drawing.DrawingResources.chordFont=c.tablature.drawing.DrawingResources.formatFontSize(9*a)+" 'Arial'";c.tablature.drawing.DrawingResources.timeSignatureFont=c.tablature.drawing.DrawingResources.formatFontSize(20*a)+" 'Arial'";c.tablature.drawing.DrawingResources.clefFontHeight=Math.round(16*a);c.tablature.drawing.DrawingResources.clefFont=c.tablature.drawing.DrawingResources.formatFontSize(c.tablature.drawing.DrawingResources.clefFontHeight)+" 'Times New Roman'";c.tablature.drawing.DrawingResources.musicFont=
c.tablature.drawing.DrawingResources.formatFontSize(13*a)+" 'Arial'";c.tablature.drawing.DrawingResources.tempoFont=c.tablature.drawing.DrawingResources.formatFontSize(11*a)+" 'Arial'";c.tablature.drawing.DrawingResources.graceFontHeight=Math.round(9*a);c.tablature.drawing.DrawingResources.graceFont=c.tablature.drawing.DrawingResources.formatFontSize(c.tablature.drawing.DrawingResources.graceFontHeight)+" 'Arial'";c.tablature.drawing.DrawingResources.noteFontHeight=Math.round(11*a);c.tablature.drawing.DrawingResources.noteFont=
c.tablature.drawing.DrawingResources.formatFontSize(c.tablature.drawing.DrawingResources.noteFontHeight)+" 'Arial'";c.tablature.drawing.DrawingResources.effectFontHeight=Math.round(11*a);c.tablature.drawing.DrawingResources.effectFont="italic "+c.tablature.drawing.DrawingResources.formatFontSize(c.tablature.drawing.DrawingResources.effectFontHeight)+" 'Times New Roman'";c.tablature.drawing.DrawingResources.titleFont=c.tablature.drawing.DrawingResources.formatFontSize(30*a)+" 'Times New Roman'";c.tablature.drawing.DrawingResources.subtitleFont=
c.tablature.drawing.DrawingResources.formatFontSize(19*a)+" 'Times New Roman'";c.tablature.drawing.DrawingResources.wordsFont=c.tablature.drawing.DrawingResources.formatFontSize(13*a)+" 'Times New Roman'";c.tablature.drawing.DrawingResources.copyrightFont="bold "+c.tablature.drawing.DrawingResources.formatFontSize(11*a)+" 'Arial'"};c.tablature.drawing.DrawingResources.formatFontSize=function(a){a=a;a*=Math.pow(10,2);a=Math.round(a)/Math.pow(10,2);return l.string(a)+"px"};c.tablature.drawing.DrawingResources.getScoreNoteSize=
function(a,b){var d=(b?a.scoreLineSpacing+1:a.scoreLineSpacing)-2;return new c.model.Point(Math.round(d*1.3),Math.round(d))};c.tablature.drawing.KeySignaturePainter=function(){};c.tablature.drawing.KeySignaturePainter.__name__=true;c.tablature.drawing.KeySignaturePainter.paintFlat=function(a,b,d,e){var f=e.scale*1.2;d-=Math.round(2*e.scoreLineSpacing);a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.KeyFlat,b,d,f)};c.tablature.drawing.KeySignaturePainter.paintNatural=function(a,b,d,e){var f=
e.scale*1.2;d-=Math.round(2*e.scoreLineSpacing);a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.KeyNormal,b,d,f)};c.tablature.drawing.KeySignaturePainter.paintSharp=function(a,b,d,e){var f=e.scale*1.2;d-=Math.round(1.5*e.scoreLineSpacing);a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.KeySharp,b,d,f)};c.tablature.drawing.KeySignaturePainter.paintSmallFlat=function(a,b,d,e){d-=e.scoreLineSpacing;a.addMusicSymbol(c.tablature.drawing.MusicFont.KeyFlat,b,d,e.scale)};c.tablature.drawing.KeySignaturePainter.paintSmallNatural=
function(a,b,d,e){d-=e.scoreLineSpacing;a.addMusicSymbol(c.tablature.drawing.MusicFont.KeyNormal,b,d,e.scale)};c.tablature.drawing.KeySignaturePainter.paintSmallSharp=function(a,b,d,e){var f=e.scale;d-=Math.round(e.scoreLineSpacing);a.addMusicSymbol(c.tablature.drawing.MusicFont.KeySharp,b,d,f)};c.tablature.drawing.MusicFont=function(){};c.tablature.drawing.MusicFont.__name__=true;c.tablature.drawing.NotePainter=function(){};c.tablature.drawing.NotePainter.__name__=true;c.tablature.drawing.NotePainter.paintFooter=
function(a,b,d,e,f,g){var h=g.scale;if(f==-1)b+=c.tablature.drawing.DrawingResources.getScoreNoteSize(g,false).x;g="";switch(e){case c.model.Duration.SIXTY_FOURTH:g=f==-1?c.tablature.drawing.MusicFont.FooterUpSixtyFourth:c.tablature.drawing.MusicFont.FooterDownSixtyFourth;break;case c.model.Duration.THIRTY_SECOND:g=f==-1?c.tablature.drawing.MusicFont.FooterUpThirtySecond:c.tablature.drawing.MusicFont.FooterDownThirtySecond;break;case c.model.Duration.SIXTEENTH:g=f==-1?c.tablature.drawing.MusicFont.FooterUpSixteenth:
c.tablature.drawing.MusicFont.FooterDownSixteenth;break;case c.model.Duration.EIGHTH:g=f==-1?c.tablature.drawing.MusicFont.FooterUpEighth:c.tablature.drawing.MusicFont.FooterDownEighth;break}g!=""&&a.addMusicSymbol(g,b,d,h)};c.tablature.drawing.NotePainter.paintBar=function(a,b,d,e,f,g,h,i){for(var j=Math.max(1,Math.round(3*i)),k=0;k<g;){var m=k++,n=d-m*5*i*h;m=f-m*5*i*h;a.startFigure();a.addPolygon([new c.model.Point(b,n),new c.model.Point(e,m),new c.model.Point(e,m+j),new c.model.Point(b,n+j),new c.model.Point(b,
n)]);a.closeFigure()}};c.tablature.drawing.NotePainter.paintHarmonic=function(a,b,d,e){a.addMusicSymbol(c.tablature.drawing.MusicFont.Harmonic,b,d,e)};c.tablature.drawing.NotePainter.paintNote=function(a,b,d,e,f){a.addMusicSymbol(f?c.tablature.drawing.MusicFont.NoteQuarter:c.tablature.drawing.MusicFont.NoteHalf,b,d,e)};c.tablature.drawing.NotePainter.paintDeadNote=function(a,b,d,e){a.addMusicSymbol(c.tablature.drawing.MusicFont.DeadNote,b,d,e)};c.tablature.drawing.NotePainter.paintPercussion=function(a,
b,d,e,f){var g=[32,34,35,36,38,39,40,41,43,45,47,48,50,55,56,58,60,61],h=[31,33,37,42,44,54,62,63,64,65,66];b=b.value;if(b<=30||b>=67||G.has(g,b))a.addMusicSymbol(c.tablature.drawing.MusicFont.NoteQuarter,d,e,f);else if(G.has(h,b))a.addMusicSymbol(c.tablature.drawing.MusicFont.Sticks,d,e,f);else if(b==46)a.addMusicSymbol(c.tablature.drawing.MusicFont.HiHat,d,e,f);else if(b==49||b==57)a.addMusicSymbol(c.tablature.drawing.MusicFont.Harmonic,d,e,f);else if(b==52)a.addMusicSymbol(c.tablature.drawing.MusicFont.ChineseCymbal,
d,e,f);else if(b==51||b==53||b==59)a.addMusicSymbol(c.tablature.drawing.MusicFont.RideCymbal,d,e,f)};c.tablature.drawing.SilencePainter=function(){};c.tablature.drawing.SilencePainter.__name__=true;c.tablature.drawing.SilencePainter.paintEighth=function(a,b,d,e){d+=e.scoreLineSpacing;a.addMusicSymbol(c.tablature.drawing.MusicFont.SilenceEighth,b,d,e.scale)};c.tablature.drawing.SilencePainter.paintWhole=function(a,b,d,e){d+=e.scoreLineSpacing;a.addMusicSymbol(c.tablature.drawing.MusicFont.SilenceHalf,
b,d,e.scale)};c.tablature.drawing.SilencePainter.paintHalf=function(a,b,d,e){d+=e.scoreLineSpacing*1.5;a.addMusicSymbol(c.tablature.drawing.MusicFont.SilenceHalf,b,d,e.scale)};c.tablature.drawing.SilencePainter.paintQuarter=function(a,b,d,e){d+=e.scoreLineSpacing;a.addMusicSymbol(c.tablature.drawing.MusicFont.SilenceQuarter,b,d,e.scale)};c.tablature.drawing.SilencePainter.paintSixteenth=function(a,b,d,e){d+=e.scoreLineSpacing*1.5;a.addMusicSymbol(c.tablature.drawing.MusicFont.SilenceSixteenth,b,d,
e.scale)};c.tablature.drawing.SilencePainter.paintThirtySecond=function(a,b,d,e){d+=e.scoreLineSpacing*0.5;a.addMusicSymbol(c.tablature.drawing.MusicFont.SilenceThirtySecond,b,d,e.scale)};c.tablature.drawing.SilencePainter.paintSixtyFourth=function(a,b,d,e){d+=e.scoreLineSpacing*0.5;a.addMusicSymbol(c.tablature.drawing.MusicFont.SilenceSixtyFourth,b,d,e.scale)};c.tablature.drawing.SvgPainter=function(a,b,d,e,f,g){this._layer=a;this._svg=b;this._x=d;this._y=e;this._xScale=f*0.98;this._yScale=g*0.98;
this._currentPosition=new c.model.Point(d,e);this._token=b.split(" ");this._currentIndex=0};c.tablature.drawing.SvgPainter.__name__=true;c.tablature.drawing.SvgPainter.prototype={getString:function(){if(this._currentIndex<this._token.length)return this._token[this._currentIndex++];throw"EOF";},peekNumber:function(){return l.parseFloat(this._token[this._currentIndex])},peekString:function(){return this._token[this._currentIndex]},isNextCommand:function(){var a=this.peekString();return a=="m"||a=="M"||
a=="c"||a=="C"||a=="q"||a=="Q"||a=="l"||a=="L"||a=="z"||a=="Z"},getNumber:function(){return l.parseFloat(this.getString())},parseCommand:function(){try{switch(this.getString()){case "M":this._currentPosition.x=this._x+this.getNumber()*this._xScale;this._currentPosition.y=this._y+this.getNumber()*this._yScale;this._layer.moveTo(this._currentPosition.x,this._currentPosition.y);break;case "m":this._currentPosition.x+=this.getNumber()*this._xScale;this._currentPosition.y+=this.getNumber()*this._yScale;
this._layer.moveTo(this._currentPosition.x,this._currentPosition.y);break;case "z":break;case "Z":this._layer.closeFigure();break;case "L":var a=true;do{this._currentPosition.x=this._x+this.getNumber()*this._xScale;this._currentPosition.y=this._y+this.getNumber()*this._yScale;this._layer.lineTo(this._currentPosition.x,this._currentPosition.y);a=!this.isNextCommand()}while(a);break;case "l":a=true;do{this._currentPosition.x+=this.getNumber()*this._xScale;this._currentPosition.y+=this.getNumber()*this._yScale;
this._layer.lineTo(this._currentPosition.x,this._currentPosition.y);a=!this.isNextCommand()}while(a);break;case "C":a=true;do{var b=this._x+this.getNumber()*this._xScale,d=this._y+this.getNumber()*this._yScale,e=this._x+this.getNumber()*this._xScale,f=this._y+this.getNumber()*this._yScale,g=this._x+this.getNumber()*this._xScale,h=this._y+this.getNumber()*this._yScale;this._currentPosition.x=g;this._currentPosition.y=h;this._layer.bezierTo(b,d,e,f,g,h);a=!this.isNextCommand()}while(a);break;case "c":a=
true;do{b=this._currentPosition.x+this.getNumber()*this._xScale;d=this._currentPosition.y+this.getNumber()*this._yScale;e=this._currentPosition.x+this.getNumber()*this._xScale;f=this._currentPosition.y+this.getNumber()*this._yScale;g=this._currentPosition.x+this.getNumber()*this._xScale;h=this._currentPosition.y+this.getNumber()*this._yScale;this._currentPosition.x=g;this._currentPosition.y=h;this._layer.bezierTo(b,d,e,f,g,h);a=!this.isNextCommand()}while(a&&this._currentIndex<this._token.length);
break;case "Q":a=true;do{b=this._x+this.getNumber()*this._xScale;d=this._y+this.getNumber()*this._yScale;e=this._x+this.getNumber()*this._xScale;f=this._y+this.getNumber()*this._yScale;this._currentPosition.x=e;this._currentPosition.y=f;this._layer.quadraticCurveTo(b,d,e,f);a=!this.isNextCommand()}while(a);break;case "q":a=true;do{b=this._currentPosition.x+this.getNumber()*this._xScale;d=this._currentPosition.y+this.getNumber()*this._yScale;e=this._currentPosition.x+this.getNumber()*this._xScale;
f=this._currentPosition.y+this.getNumber()*this._yScale;this._currentPosition.x=e;this._currentPosition.y=f;this._layer.quadraticCurveTo(b,d,e,f);a=!this.isNextCommand()}while(a&&this._currentIndex<this._token.length);break}}catch(i){this._currentIndex=this._token.length}},paint:function(){for(this._layer.startFigure();this._currentIndex<this._token.length;)this.parseCommand()},__class__:c.tablature.drawing.SvgPainter};c.tablature.drawing.TempoPainter=function(){};c.tablature.drawing.TempoPainter.__name__=
true;c.tablature.drawing.TempoPainter.paintTempo=function(a,b,d,e){var f=a.get(3);a=a.get(4);var g=Math.round(6*e),h=Math.round(12*e);c.tablature.drawing.NotePainter.paintNote(f,b,d+h,0.7*e,true);a.startFigure();a.addLine(b+g,d,b+g,d+h)};c.tablature.drawing.TripletFeelPainter=function(){};c.tablature.drawing.TripletFeelPainter.__name__=true;c.tablature.drawing.TripletFeelPainter.paintTripletFeel16=function(a,b,d,e){d-=Math.floor(3*e);a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.TripletFeel16,
b,d,e)};c.tablature.drawing.TripletFeelPainter.paintTripletFeel8=function(a,b,d,e){d-=Math.floor(3*e);a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.TripletFeel8,b,d,e)};c.tablature.drawing.TripletFeelPainter.paintTripletFeelNone16=function(a,b,d,e){d-=Math.floor(3*e);a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.TripletFeelNone16,b,d,e)};c.tablature.drawing.TripletFeelPainter.paintTripletFeelNone8=function(a,b,d,e){d-=Math.floor(3*e);a.get(3).addMusicSymbol(c.tablature.drawing.MusicFont.TripletFeelNone8,
b,d,e)};c.tablature.model={};c.tablature.model.BeatDrawing=function(a){c.model.Beat.call(this,a);this.effectsCache=new c.tablature.model.EffectsCache};c.tablature.model.BeatDrawing.__name__=true;c.tablature.model.BeatDrawing.__super__=c.model.Beat;c.tablature.model.BeatDrawing.prototype=y(c.model.Beat.prototype,{calculateTremoloBarOverflow:function(a){var b=[];b.push(0);b.push(0);if(this.effect.tremoloBar.points.length==0)return b;for(var d=null,e=null,f=0,g=this.effect.tremoloBar.points;f<g.length;){var h=
g[f];++f;if(d==null||d.value>h.value)d=h;if(e==null||e.value<h.value)e=h}f=this.getMinNote();f=((f==null?6:f.string)-1)*a.stringSpacing;b[0]=Math.round(Math.abs(d.value)*6*a.scale-f);b[1]=Math.round(Math.abs(e.value)*6*a.scale-f);return b},registerEffects:function(a){var b=this.measure;if(this.text!=null){b.effectsCache.text=true;this.effectsCache.text=true}if(this.effect.stroke.direction!=0){b.effectsCache.stroke=true;this.effectsCache.stroke=true}if(this.effect.hasRasgueado){b.effectsCache.rasgueado=
true;this.effectsCache.rasgueado=true}if(this.effect.hasPickStroke){b.effectsCache.pickStroke=true;this.effectsCache.pickStroke=true}if(this.effect.chord!=null){b.effectsCache.chord=true;this.effectsCache.chord=true}if(this.effect.fadeIn){b.effectsCache.fadeIn=true;this.effectsCache.fadeIn=true}if(this.effect.vibrato){b.effectsCache.beatVibrato=true;this.effectsCache.beatVibrato=true}if(this.effect.tremoloBar!=null){b.effectsCache.tremoloBar=true;this.effectsCache.tremoloBar=true;a=this.calculateTremoloBarOverflow(a);
b.effectsCache.tremoloBarTopOverflow=a[0];this.effectsCache.tremoloBarTopOverflow=a[0];b.effectsCache.tremoloBarBottomOverflow=a[1];this.effectsCache.tremoloBarBottomOverflow=a[1]}if(this.effect.mixTableChange!=null){b.effectsCache.mixTable=true;this.effectsCache.mixTable=true}if(this.effect.tapping||this.effect.slapping||this.effect.popping){b.effectsCache.tapSlapPop=true;this.effectsCache.tapSlapPop=true}},getNextBeat:function(){if(this._nextBeat==null)if(this.index<this.measure.beats.length-1)this._nextBeat=
this.measure.beats[this.index+1];else{var a=this.measure.getNextMeasure();if(a!=null)this._nextBeat=a.beats[0]}return this._nextBeat},getPreviousBeat:function(){if(this._prevBeat==null)if(this.index>0)this._prevBeat=this.measure.beats[this.index-1];else{var a=this.measure.getPreviousMeasure();if(a!=null)this._prevBeat=a.beats[a.beats.length-1]}return this._prevBeat},performLayout:function(a){this.width=0;this.effectsCache.reset();this.registerEffects(a);for(var b=0,d=this.voices.length;b<d;){var e=
this.voices[b++];if(!e.isEmpty){e.performLayout(a);this.width=Math.max(this.width,e.width)}this.effectsCache.fingering=Math.max(this.effectsCache.fingering,e.effectsCache.fingering)}},getNote:function(a,b){if(a<0||a>=this.voices.length)return null;for(var d=0,e=this.voices[a].notes;d<e.length;){var f=e[d];++d;if(f.string==b)return f}return null},getMinNote:function(){if(this._minNote==null)for(var a=0,b=this.getNotes();a<b.length;){var d=b[a];++a;if(this._minNote==null||this._minNote.realValue()<
d.realValue())this._minNote=d}return this._minNote},checkNote:function(a){this.measure.checkNote(a);if(this.minNote==null||this.minNote.realValue()>a.realValue())this.minNote=a;if(this.maxNote==null||this.maxNote.realValue()<a.realValue())this.maxNote=a},measureDrawing:function(){return this.measure},fullX:function(){return this.measure.staveLine.x+this.measure.x+this.measure.getDefaultSpacings(this.measure.staveLine.tablature.viewLayout)+this.x},fullWidth:function(){return this.width*this.measure.getSizingFactor()},
isFirstOfLine:function(){return this.measure.beats.length==0||this.index==0},__class__:c.tablature.model.BeatDrawing});c.tablature.model.BeatGroup=function(){this._voices=[]};c.tablature.model.BeatGroup.__name__=true;c.tablature.model.BeatGroup.canJoin=function(a,b){if(a==null||b==null||a.isRestVoice()||b.isRestVoice())return false;var d=a.beat.measure;if(d!=b.beat.measure)return false;var e=a.beat.start,f=b.beat.start;if(a.duration.value<c.model.Duration.EIGHTH||b.duration.value<c.model.Duration.EIGHTH)return e==
f;d=c.model.SongManager.getDivisionLength(d.header);return Math.floor((d+e)/d)==Math.floor((d+f)/d)};c.tablature.model.BeatGroup.prototype={checkNote:function(a){var b=a.realValue();if(this.firstMinNote==null||a.voice.beat.start<this.firstMinNote.voice.beat.start)this.firstMinNote=a;else if(a.voice.beat.start==this.firstMinNote.voice.beat.start)if(a.realValue()<this.firstMinNote.realValue())this.firstMinNote=a;if(this.firstMaxNote==null||a.voice.beat.start<this.firstMaxNote.voice.beat.start)this.firstMaxNote=
a;else if(a.voice.beat.start==this.firstMaxNote.voice.beat.start)if(a.realValue()>this.firstMaxNote.realValue())this.firstMaxNote=a;if(this.lastMinNote==null||a.voice.beat.start>this.lastMinNote.voice.beat.start)this.lastMinNote=a;else if(a.voice.beat.start==this.lastMinNote.voice.beat.start)if(a.realValue()<this.lastMinNote.realValue())this.lastMinNote=a;if(this.lastMaxNote==null||a.voice.beat.start>this.lastMaxNote.voice.beat.start)this.lastMaxNote=a;else if(a.voice.beat.start==this.lastMaxNote.voice.beat.start)if(a.realValue()>
this.lastMaxNote.realValue())this.lastMaxNote=a;if(this.maxNote==null||b>this.maxNote.realValue())this.maxNote=a;if(this.minNote==null||b<this.minNote.realValue())this.minNote=a},check:function(a){if(a.beat.measure.track.isPercussionTrack)this.isPercussion=true;var b=false;if(this._voices.length==0)b=true;else if(c.tablature.model.BeatGroup.canJoin(this._lastVoice,a))b=true;if(b){this._lastVoice=a;this._voices.push(a);this.checkNote(a.minNote);this.checkNote(a.maxNote)}return b},getNoteValueForPosition:function(a){return a.voice.beat.measure.track.isPercussionTrack?
c.tablature.model.PercussionMapper.getValue(a):a.realValue()},getDirection:function(){var a=Math.abs(this.getNoteValueForPosition(this.minNote)-(c.tablature.model.BeatGroup.SCORE_MIDDLE_KEYS[this._voices[0].beat.measure.clef]+100)),b=Math.abs(this.getNoteValueForPosition(this.maxNote)-(c.tablature.model.BeatGroup.SCORE_MIDDLE_KEYS[this._voices[0].beat.measure.clef]-100));return a>b?1:2},__class__:c.tablature.model.BeatGroup};c.tablature.model.DrawingSongModelFactory=function(){c.model.SongFactory.call(this)};
c.tablature.model.DrawingSongModelFactory.__name__=true;c.tablature.model.DrawingSongModelFactory.__super__=c.model.SongFactory;c.tablature.model.DrawingSongModelFactory.prototype=y(c.model.SongFactory.prototype,{newMeasureHeader:function(){return new c.tablature.model.MeasureHeaderDrawing(this)},newVoice:function(a){return new c.tablature.model.VoiceDrawing(this,a)},newBeat:function(){return new c.tablature.model.BeatDrawing(this)},newMeasure:function(a){return new c.tablature.model.MeasureDrawing(a)},
newNote:function(){return new c.tablature.model.NoteDrawing(this)},__class__:c.tablature.model.DrawingSongModelFactory});c.tablature.model.EffectsCache=function(){this.reset()};c.tablature.model.EffectsCache.__name__=true;c.tablature.model.EffectsCache.prototype={reset:function(){this.bend=false;this.bendOverflow=0;this.harmonic=false;this.harmonicType=-1;this.letRing=this.staccato=this.palmMute=this.heavyAccentuatedNote=this.accentuatedNote=this.ghostNote=this.hammer=this.slide=this.deadNote=this.vibrato=
this.beatVibrato=this.tremoloPicking=this.trill=this.grace=false;this.leftHandFingering=[];this.rightHandFingering=[];this.fingering=0;this.marker=this.triplet=this.tripletFeel=this.tempo=this.text=this.mixTable=this.tapSlapPop=this.tremoloBar=this.fadeIn=this.chord=this.pickStroke=this.rasgueado=this.stroke=this.slide=false},__class__:c.tablature.model.EffectsCache};c.tablature.model.JoinedType={__ename__:true,__constructs__:["NoneLeft","NoneRight","Left","Right"]};c.tablature.model.JoinedType.NoneLeft=
["NoneLeft",0];c.tablature.model.JoinedType.NoneLeft.toString=B;c.tablature.model.JoinedType.NoneLeft.__enum__=c.tablature.model.JoinedType;c.tablature.model.JoinedType.NoneRight=["NoneRight",1];c.tablature.model.JoinedType.NoneRight.toString=B;c.tablature.model.JoinedType.NoneRight.__enum__=c.tablature.model.JoinedType;c.tablature.model.JoinedType.Left=["Left",2];c.tablature.model.JoinedType.Left.toString=B;c.tablature.model.JoinedType.Left.__enum__=c.tablature.model.JoinedType;c.tablature.model.JoinedType.Right=
["Right",3];c.tablature.model.JoinedType.Right.toString=B;c.tablature.model.JoinedType.Right.__enum__=c.tablature.model.JoinedType;c.tablature.model.MeasureDrawing=function(a){c.model.Measure.call(this,a);this.effectsCache=new c.tablature.model.EffectsCache;this._registeredAccidentals=[];for(a=0;a<11;){a++;for(var b=[],d=0;d<7;){d++;b.push(false)}this._registeredAccidentals.push(b)}this._defaultSpacings=-1};c.tablature.model.MeasureDrawing.__name__=true;c.tablature.model.MeasureDrawing.__super__=
c.model.Measure;c.tablature.model.MeasureDrawing.prototype=y(c.model.Measure.prototype,{calculateKeySignatureSpacing:function(a){if(!this.header.shouldPaintKeySignature(this))return 0;var b=this.header.keySignature,d=0;if(this.getPreviousMeasure()!=null)d=this.getPreviousMeasure().header.keySignature;var e=0;e=d<=7?d:d-7;d=0;d=b<=7?b:b-7;return Math.round((e+d)*8*a.scale)},calculateTimeSignatureSpacing:function(a){if(!this.header.shouldPaintTimeSignature(this))return 0;return 30*a.scale},calculateClefSpacing:function(a){if(!this.shouldPaintClef())return 0;
return 40*a.scale},shouldPaintClef:function(){return this.getPreviousMeasure()==null||this.getPreviousMeasure().clef!=this.clef||this.isFirstOfLine()},getSizingFactor:function(){var a=this.width-this._defaultSpacings;if(a==0)return 1;return(a+this.spacing)/a},getDefaultSpacings:function(a,b){if(b==null)b=false;if(this._defaultSpacings>=0&&!b)return this._defaultSpacings;var d=0;d+=this.calculateClefSpacing(a);d+=this.calculateKeySignatureSpacing(a);d+=this.calculateTimeSignatureSpacing(a);d+=this.header.repeatClose>
0?20*a.scale:0;d+=10*a.scale;d+=10*a.scale;return this._defaultSpacings=d},registerSpacings:function(){if(this.getPreviousMeasure()==null||this.getPreviousMeasure().header.tempo.value!=this.header.tempo.value)this.effectsCache.tempo=true;if(this.getPreviousMeasure()==null&&this.header.tripletFeel!=0||this.getPreviousMeasure()!=null&&this.getPreviousMeasure().header.tripletFeel!=this.header.tripletFeel)this.effectsCache.tripletFeel=true;if(this.header.hasMarker())this.effectsCache.marker=true},getRealStart:function(a){var b=
this.divisionLength,d=a,e=d%b==0;if(!e){for(var f=c.model.Duration.MIN_TIME,g=0;g<f;){g++;d++;if(e=d%b==0)break}e||(d=a)}return d},calculateDivisionLength:function(){var a=c.model.Duration.QUARTER_TIME;switch(this.header.timeSignature.denominator.value){case c.model.Duration.EIGHTH:if(this.header.timeSignature.numerator%3==0)a+=Math.floor(c.model.Duration.QUARTER_TIME/2);break}return a},getNextMeasure:function(){if(this._nextMeasure==null)this._nextMeasure=this.header.number<this.track.measures.length?
this.track.measures[this.header.number]:null;return this._nextMeasure},getPreviousMeasure:function(){if(this._prevMeasure==null)this._prevMeasure=this.header.number>1?this.track.measures[this.header.number-2]:null;return this._prevMeasure},performLayout:function(a){this.groups=[];this.spacing=this.width=0;this.effectsCache.reset();this.registerSpacings(a);this.width+=this.getDefaultSpacings(a,true);for(var b=0,d=0,e=this.beats.length;d<e;){var f=this.beats[d++];f.x=b;f.performLayout(a);b+=f.width;
this.effectsCache.fingering=Math.max(this.effectsCache.fingering,f.effectsCache.fingering)}this.divisionLength=this.calculateDivisionLength();this.maxUpGroup=this.minDownGroup=null;e=0;for(d=this.groups;e<d.length;){a=d[e];++e;if(a.getDirection()==2){if(this.minDownGroup==null||this.minDownGroup.minNote.realValue()>a.minNote.realValue())this.minDownGroup=a}else if(this.maxUpGroup==null||this.maxUpGroup.maxNote.realValue()<a.maxNote.realValue())this.maxUpGroup=a}this.width+=b},clearRegisteredAccidentals:function(){for(var a=
0;a<11;)for(var b=a++,d=0;d<7;){var e=d++;this._registeredAccidentals[b][e]=false}},setSpacing:function(a){this.spacing=a;for(var b=a=0,d=this.beats;b<d.length;){var e=d[b];++b;e=e;e.x=a;a+=e.fullWidth()}},applyNoteAccitental:function(a){var b=a.realValue();if(b>=0&&b<128){var d=this.header.keySignature,e=a.swapAccidentals?d>7:d<=7,f=b%12;b=b/12|0;var g=e?2:3;e=e?c.tablature.model.MeasureDrawing.ACCIDENTAL_SHARP_NOTES:c.tablature.model.MeasureDrawing.ACCIDENTAL_FLAT_NOTES;var h=c.tablature.model.MeasureDrawing.ACCIDENTAL_NOTES[f];
d=c.tablature.model.MeasureDrawing.ACCIDENTALS[d][e[f]]==g;if(d!=h&&!this._registeredAccidentals[b][e[f]]){this._registeredAccidentals[b][e[f]]=true;a.accidental=h?g:1;return}if(d==h&&this._registeredAccidentals[b][e[f]]){this._registeredAccidentals[b][e[f]]=false;a.accidental=h?g:1;return}}a.accidental=0},checkNote:function(a){if(this.minNote==null||this.minNote.realValue()>a.realValue())this.minNote=a;if(this.maxNote==null||this.maxNote.realValue()<a.realValue())this.maxNote=a},headerDrawing:function(){return this.header},
isFirstOfLine:function(){return this.staveLine.measures.length==0||this.staveLine.measures[0]==this.header.number-1},__class__:c.tablature.model.MeasureDrawing});c.tablature.model.MeasureHeaderDrawing=function(a){c.model.MeasureHeader.call(this,a)};c.tablature.model.MeasureHeaderDrawing.__name__=true;c.tablature.model.MeasureHeaderDrawing.__super__=c.model.MeasureHeader;c.tablature.model.MeasureHeaderDrawing.prototype=y(c.model.MeasureHeader.prototype,{shouldPaintTimeSignature:function(a){a=a.getPreviousMeasure();
return a==null||a.header.timeSignature.numerator!=this.timeSignature.numerator||a.header.timeSignature.denominator.value!=this.timeSignature.denominator.value},shouldPaintKeySignature:function(a){if(a.getPreviousMeasure()==null&&this.keySignature==0)return false;else if(a.track.isPercussionTrack)return false;else if(a.getPreviousMeasure()!=null&&a.getPreviousMeasure().header.keySignature==this.keySignature&&a.getPreviousMeasure().header.keySignatureType==this.keySignatureType)return false;return true},
__class__:c.tablature.model.MeasureHeaderDrawing});c.tablature.model.NoteDrawing=function(a){c.model.Note.call(this,a);this.accidental=-1};c.tablature.model.NoteDrawing.__name__=true;c.tablature.model.NoteDrawing.__super__=c.model.Note;c.tablature.model.NoteDrawing.prototype=y(c.model.Note.prototype,{calculateBendOverflow:function(a){for(var b=null,d=0,e=this.effect.bend.points;d<e.length;){var f=e[d];++d;if(b==null||b.value<f.value)b=f}if(b==null)return 0;return Math.round(b.value*6*a.scale-(this.string-
1)*a.stringSpacing)},registerEffects:function(a){var b=this.voice.beat.measure,d=this.voice.beat,e=this.voice;if(this.effect.isFingering){e.effectsCache.fingering++;if(this.effect.leftHandFinger!=-2&&this.effect.leftHandFinger!=-1){e.effectsCache.leftHandFingering.push(this.effect.leftHandFinger);G.has(d.effectsCache.leftHandFingering,this.effect.leftHandFinger)||d.effectsCache.leftHandFingering.push(this.effect.leftHandFinger);G.has(b.effectsCache.leftHandFingering,this.effect.leftHandFinger)||b.effectsCache.leftHandFingering.push(this.effect.leftHandFinger)}if(this.effect.rightHandFinger!=
-2&&this.effect.rightHandFinger!=-1){e.effectsCache.rightHandFingering.push(this.effect.rightHandFinger);G.has(d.effectsCache.rightHandFingering,this.effect.rightHandFinger)||d.effectsCache.rightHandFingering.push(this.effect.rightHandFinger);G.has(b.effectsCache.rightHandFingering,this.effect.rightHandFinger)||b.effectsCache.rightHandFingering.push(this.effect.rightHandFinger)}}if(this.effect.isBend()){e.effectsCache.bend=true;e.effectsCache.bendOverflow=this.calculateBendOverflow(a);b.effectsCache.bend=
true;b.effectsCache.bendOverflow=b.effectsCache.bendOverflow;d.effectsCache.bend=true;d.effectsCache.bendOverflow=b.effectsCache.bendOverflow}if(this.effect.isHarmonic()){e.effectsCache.harmonic=true;b.effectsCache.harmonic=true;d.effectsCache.harmonic=true;if(e.effectsCache.harmonicType==-1){e.effectsCache.harmonicType=this.effect.harmonic.type;b.effectsCache.harmonicType=this.effect.harmonic.type;d.effectsCache.harmonicType=this.effect.harmonic.type}}if(this.effect.isGrace()){e.effectsCache.grace=
true;b.effectsCache.grace=true;d.effectsCache.grace=true}if(this.effect.isTrill()){e.effectsCache.trill=true;b.effectsCache.trill=true;d.effectsCache.trill=true}if(this.effect.isTremoloPicking()){e.effectsCache.tremoloPicking=true;b.effectsCache.tremoloPicking=true;d.effectsCache.tremoloPicking=true}if(this.effect.vibrato){e.effectsCache.vibrato=true;b.effectsCache.vibrato=true;d.effectsCache.vibrato=true}if(this.effect.deadNote){e.effectsCache.deadNote=true;b.effectsCache.deadNote=true;d.effectsCache.deadNote=
true}if(this.effect.slide){e.effectsCache.slide=true;b.effectsCache.slide=true;d.effectsCache.slide=true}if(this.effect.hammer){e.effectsCache.hammer=true;b.effectsCache.hammer=true;d.effectsCache.hammer=true}if(this.effect.ghostNote){e.effectsCache.ghostNote=true;b.effectsCache.ghostNote=true;d.effectsCache.ghostNote=true}if(this.effect.accentuatedNote){e.effectsCache.accentuatedNote=true;b.effectsCache.accentuatedNote=true;d.effectsCache.accentuatedNote=true}if(this.effect.heavyAccentuatedNote){e.effectsCache.heavyAccentuatedNote=
true;b.effectsCache.heavyAccentuatedNote=true;d.effectsCache.heavyAccentuatedNote=true}if(this.effect.palmMute){e.effectsCache.palmMute=true;b.effectsCache.palmMute=true;d.effectsCache.palmMute=true}if(this.effect.staccato){e.effectsCache.staccato=true;b.effectsCache.staccato=true;d.effectsCache.staccato=true}if(this.effect.letRing){e.effectsCache.letRing=true;b.effectsCache.letRing=true;d.effectsCache.letRing=true}},performLayout:function(a){this.scorePosY=0;this.noteSize=a.getNoteSize(this);this.voice.checkNote(this);
this.registerEffects(a)},measureDrawing:function(){return this.voice.beat.measure},beatDrawing:function(){return this.voice.beat},voiceDrawing:function(){return this.voice},getAccitental:function(){this.accidental<0&&this.voice.beat.measure.applyNoteAccitental(this);return this.accidental},__class__:c.tablature.model.NoteDrawing});c.tablature.model.PercussionMapper=function(){};c.tablature.model.PercussionMapper.__name__=true;c.tablature.model.PercussionMapper.getValue=function(a){a=a.value;return a<=
34?60:a<=36?53:a<=40?60:a==41?55:a==42?67:a==43?57:a==44?53:a==45?59:a==46?67:a==47?62:a==48?64:a==49?67:a==50?65:a<=53?67:a==54?62:a==55?60:a==56?64:a==57?67:a==58?60:a==59?67:a==60?52:a==61?50:a==62?57:a==63?59:a==64?55:a==65?52:a==66?50:60};c.tablature.model.TripletGroup=function(a){this._voiceIndex=a;this.voices=[]};c.tablature.model.TripletGroup.__name__=true;c.tablature.model.TripletGroup.prototype={check:function(a){if(this.voices.length==0)this.triplet=a.duration.tuplet.enters;else if(a.index!=
this._voiceIndex||a.duration.tuplet.enters!=this.triplet||this.isFull())return false;this.voices.push(a);return true},isFull:function(){return this.voices.length==this.triplet},__class__:c.tablature.model.TripletGroup};c.tablature.model.VoiceDrawing=function(a,b){c.model.Voice.call(this,a,b);this.effectsCache=new c.tablature.model.EffectsCache};c.tablature.model.VoiceDrawing.__name__=true;c.tablature.model.VoiceDrawing.__super__=c.model.Voice;c.tablature.model.VoiceDrawing.prototype=y(c.model.Voice.prototype,
{performLayout:function(a){this.width=a.getVoiceWidth(this);this.effectsCache.reset();this.notes.sort(M(this,this.compareNotes));this.anyDisplaced=false;for(var b=null,d=0,e=this.notes;d<e.length;){var f=e[d];++d;f=f;f.displaced=c.tablature.staves.ScoreStave.isDisplaced(b,f);if(f.displaced)this.anyDisplaced=true;f.performLayout(a);b=f}if(this.anyDisplaced)this.width+=Math.floor(c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x);a=this.getPreviousVoice();b=this.getNextVoice();e=d=false;
this.joinedType=c.tablature.model.JoinedType.NoneRight;this.leftJoin=this;this.rightJoin=this;this.isJoinedGreaterThanQuarter=false;if(c.tablature.model.BeatGroup.canJoin(this,a)){e=true;if(a.duration.value>=this.duration.value){this.leftJoin=a;this.rightJoin=this;this.joinedType=c.tablature.model.JoinedType.Left;d=true}if(a.duration.value>c.model.Duration.QUARTER)this.isJoinedGreaterThanQuarter=true}if(c.tablature.model.BeatGroup.canJoin(this,b)){if(b.duration.value>=this.duration.value){this.rightJoin=
b;if(a==null||a.isRestVoice()||a.duration.value<this.duration.value)this.leftJoin=this;d=true;this.joinedType=c.tablature.model.JoinedType.Right}if(b.duration.value>c.model.Duration.QUARTER)this.isJoinedGreaterThanQuarter=true}if(!d&&e)this.joinedType=c.tablature.model.JoinedType.NoneLeft;if(!this.isRestVoice()){if(this.beatGroup==null)if(a!=null&&a.beatGroup!=null&&a.beatGroup.check(this))this.beatGroup=a.beatGroup;else{this.beatGroup=new c.tablature.model.BeatGroup;this.beatGroup.check(this)}G.has(this.beat.measure.groups,
this.beatGroup)||this.beat.measure.groups.push(this.beatGroup)}if(this.duration.tuplet!=null&&!this.duration.tuplet.equals(c.model.Tuplet.NORMAL)){this.beat.effectsCache.triplet=true;this.beat.measure.effectsCache.triplet=true;if(a!=null&&a.beat.measure.staveLine!=this.beat.measure.staveLine)a=null;if(a==null||a.tripletGroup==null||!a.tripletGroup.check(this)){this.tripletGroup=new c.tablature.model.TripletGroup(this.index);this.tripletGroup.check(this)}else this.tripletGroup=a.tripletGroup}},compareNotes:function(a,
b){if(a.realValue()>b.realValue())return 1;if(a.realValue()<b.realValue())return-1;return 0},checkNote:function(a){this.beat.checkNote(a);if(this.minNote==null||this.minNote.realValue()>a.realValue())this.minNote=a;if(this.maxNote==null||this.maxNote.realValue()<a.realValue())this.maxNote=a;if(this.minStringNote==null||this.minStringNote.string>a.string)this.minStringNote=a;if(this.maxStringNote==null||this.maxStringNote.string<a.string)this.maxStringNote=a},getNextVoice:function(){var a=this.beat.getNextBeat();
if(a==null)return null;return a!=null?a.voices[this.index]:null},getPreviousVoice:function(){var a=this.beat.getPreviousBeat();if(a==null)return null;return a!=null?a.voices[this.index]:null},measureDrawing:function(){return this.beat.measure},beatDrawing:function(){return this.beat},__class__:c.tablature.model.VoiceDrawing});c.tablature.staves={};c.tablature.staves.Stave=function(a,b){this.index=0;this.line=a;this.layout=b};c.tablature.staves.Stave.__name__=true;c.tablature.staves.Stave.prototype=
{getTimeSignatureSymbol:function(a){switch(a){case 0:return c.tablature.drawing.MusicFont.Num0;case 1:return c.tablature.drawing.MusicFont.Num1;case 2:return c.tablature.drawing.MusicFont.Num2;case 3:return c.tablature.drawing.MusicFont.Num3;case 4:return c.tablature.drawing.MusicFont.Num4;case 5:return c.tablature.drawing.MusicFont.Num5;case 6:return c.tablature.drawing.MusicFont.Num6;case 7:return c.tablature.drawing.MusicFont.Num7;case 8:return c.tablature.drawing.MusicFont.Num8;case 9:return c.tablature.drawing.MusicFont.Num9}return null},
paintTimeSignatureNumber:function(a,b,d,e,f,g){if(d<10){a=this.getTimeSignatureSymbol(d);a!=null&&b.get(3).addMusicSymbol(a,e,f,g)}else{a=Math.floor(d/10);d=d-a*10;a=this.getTimeSignatureSymbol(a);a!=null&&b.get(3).addMusicSymbol(a,e,f,g);a=this.getTimeSignatureSymbol(d);a!=null&&b.get(3).addMusicSymbol(a,e+10*g,f,g)}},paintDivisions:function(a,b,d,e,f,g,h,i){var j=l.string(d.header.number),k=b.get(3),m=b.get(4),n=Math.max(1,Math.round(3*a.scale));this.index==0&&b.get(13).addString(j,c.tablature.drawing.DrawingResources.defaultFont,
e+Math.round(a.scale*2),f+h-c.tablature.drawing.DrawingResources.defaultFontHeight);f+=h;i=f+i;g=Math.max(1,g*a.scale);if(d.header.isRepeatOpen){k.addRect(e,f,n,i-f);m.startFigure();h=Math.floor(e+n+3*a.scale);m.addLine(h,f,h,i);h+=Math.floor(2*a.scale);j=f+(i-f)/2;var u=6*a.scale;k.addCircle(h,j-u-g,g);k.addCircle(h,j+u,g)}else{m.startFigure();m.addLine(e,f,e,i)}e+=d.width+d.spacing;if(d.header.repeatClose>0||d.header.number==d.track.measureCount()){h=Math.floor(e-(n+3*a.scale));m.startFigure();
m.addLine(h,f,h,i);k.addRect(e-n,f,n,i-f);if(d.header.repeatClose>0){h-=Math.floor(2*a.scale)+g;j=f+(i-f)/2;u=6*a.scale;k.addCircle(h,j-u-g,g);k.addCircle(h,j+u,g);if(this.index==0){a="x"+(d.header.repeatClose+1);b.graphics.measureText(a);k.addString(a,c.tablature.drawing.DrawingResources.defaultFont,h-g,f-c.tablature.drawing.DrawingResources.defaultFontHeight)}}}else{m.startFigure();m.addLine(e,f,e,i)}},paintMeasure:function(){},paintStave:function(){},prepare:function(){},getLineBottomSpacing:function(){return 0},
getLineTopSpacing:function(){return 0},getBarBottomSpacing:function(){return 0},getBarTopSpacing:function(){return 0},getStaveId:function(){return""},__class__:c.tablature.staves.Stave};c.tablature.staves.ScoreStave=function(a,b){c.tablature.staves.Stave.call(this,a,b);this.spacing=new c.tablature.staves.StaveSpacing(13);this.spacing.set(0,Math.floor(15*b.scale));this.spacing.set(8,Math.floor(15*b.scale));this.spacing.set(10,Math.floor(b.scoreLineSpacing*4));this.spacing.set(12,Math.floor(15*b.scale));
a.setFeaturePaintPriority(c.tablature.staves.StaveFeatures.TimeSignature,2)};c.tablature.staves.ScoreStave.__name__=true;c.tablature.staves.ScoreStave.isDisplaced=function(a,b){if(a==null)return false;var d=a.realValue(),e=b.realValue(),f=b.voice.beat.measure.header.keySignature;if(Math.floor(d/12)!=Math.floor(e/12))return false;f=f<=7?c.tablature.staves.ScoreStave.SCORE_SHARP_POSITIONS:c.tablature.staves.ScoreStave.SCORE_FLAT_POSITIONS;return Math.abs(f[e%12]-f[d%12])<=1&&!a.displaced};c.tablature.staves.ScoreStave.__super__=
c.tablature.staves.Stave;c.tablature.staves.ScoreStave.prototype=y(c.tablature.staves.Stave.prototype,{paintChord:function(a,b,d,e,f){if(d.effect.isChord()){f+=this.spacing.get(3);b.get(9).addString(d.effect.chord.name,c.tablature.drawing.DrawingResources.defaultFont,e,f+Math.floor(c.tablature.drawing.DrawingResources.defaultFontHeight/2))}},paintBeatEffects:function(a,b,d,e,f){this.paintChord(a,b,d,e,f)},paintTremoloPicking:function(a,b,d,e,f){if(d.effect.isTremoloPicking()){var g=d.voice.beatGroup.getDirection();
f=g!=1?f+Math.floor(8*a.scale):f-Math.floor(16*a.scale);e=g!=1?e-Math.floor(5*a.scale):e+Math.floor(3*a.scale);var h="";switch(d.effect.tremoloPicking.duration.value){case c.model.Duration.EIGHTH:h=c.tablature.drawing.MusicFont.TrillUpEigth;if(g==2)f+=Math.floor(8*a.scale);break;case c.model.Duration.SIXTEENTH:h=c.tablature.drawing.MusicFont.TrillUpSixteenth;if(g==2)f+=Math.floor(4*a.scale);break;case c.model.Duration.THIRTY_SECOND:h=c.tablature.drawing.MusicFont.TrillUpThirtySecond;break}b=d.voice.index==
0?b.get(10):b.get(6);h!=""&&b.addMusicSymbol(h,e,f,a.scale)}},paintGraceNote:function(a,b,d,e,f){if(d.effect.isGrace()){var g=a.scoreLineSpacing/2.25,h=e-10*a.scale,i=f-9*a.scale;b=d.voice.index==0?b.get(10):b.get(6);if(d.effect.deadNote)i+=a.scoreLineSpacing;b.addMusicSymbol(d.effect.deadNote?c.tablature.drawing.MusicFont.GraceDeadNote:c.tablature.drawing.MusicFont.GraceNote,h-g*1.33,i,a.scale);if(d.effect.grace.transition==3||d.effect.grace.transition==1){d=f+10*a.scale;c.tablature.staves.TablatureStave.paintTie(a,
b,e-10*a.scale,d,e,d,true)}}},paintDottedNote:function(a,b,d,e,f,g){if(d.duration.isDotted||d.duration.isDoubleDotted){var h=Math.floor(c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x);if(d.anyDisplaced&&!e)f+=h;b=d.index==0?b.get(9):b.get(5);e=3*a.scale;f+=Math.round(c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x+4*a.scale);g+=Math.round(4*a.scale);b.addCircle(Math.round(f-e/2),Math.round(g-e/2),e);d.duration.isDoubleDotted&&b.addCircle(Math.round(f+(e+2)-e/2),
Math.round(g-e/2),e)}},paintStaccato:function(a,b,d,e,f){if(d.effect.staccato){d=d.voice.beatGroup.getDirection()==1?d.voice.minNote:d.voice.maxNote;var g=2*a.scale;f=f+this.spacing.get(10)+this.getNoteScorePosY(a,d);f+=Math.round((4+a.scale)*(d.voice.beatGroup.getDirection()==1?1:-1));e+=Math.round(c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x/1.5-g);(d.voice.index==0?b.get(9):b.get(5)).addCircle(e,f,g)}},paintHammerOn:function(a,b,d,e,f){if(d.effect.hammer){var g=d.voice.beat.getNextBeat(),
h=g==null?null:g.getNote(d.voice.index,d.string);g=d.voice.index==0?b.get(10):b.get(6);d.voice.index==0?b.get(11):b.get(7);b=d.voice.beatGroup.getDirection()==2;var i=Math.round(c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x),j=Math.round((4+a.scale)*(!b?1:-1)),k=f+this.spacing.get(10)+this.getNoteScorePosY(a,d)+j,m=e+i/2;d=h!=null?e+(d.voice.beat.fullWidth()+i/2):m+15*a.scale;f=h!=null?f+this.spacing.get(10)+this.getNoteScorePosY(a,h)+j:k;c.tablature.staves.TablatureStave.paintTie(a,
g,m,k,d,f,!b)}},paintSlide:function(a,b,d,e,f){if(d.effect.slide){var g=d.voice.beat.getNextBeat();g=g==null?null:g.getNote(d.voice.index,d.string);if(g!=null&&(d.effect.slideType==1||d.effect.slideType==0)){var h=d.voice.beatGroup.getDirection()==2,i=Math.round(4*a.scale),j=i*(!h?1:-1),k=Math.round(c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x),m=f+this.spacing.get(10)+this.getNoteScorePosY(a,d)-j,n=e+k+i;i=g!=null?e+d.voice.beat.fullWidth()-j-i:n+15*a.scale;var u=g!=null?f+this.spacing.get(10)+
this.getNoteScorePosY(a,g):m;(d.voice.index==0?b.get(11):b.get(7)).addLine(n,m,i,u);if(d.effect.slideType==1){b=d.voice.index==0?b.get(10):b.get(6);m=f+this.spacing.get(10)+this.getNoteScorePosY(a,d)+j;n=e+k/2;i=g!=null?e+(d.voice.beat.fullWidth()+k/2):n+15*a.scale;u=g!=null?f+this.spacing.get(10)+this.getNoteScorePosY(a,g)+j:m;c.tablature.staves.TablatureStave.paintTie(a,b,n,m,i,u,!h)}}}},paintTiedNote:function(a,b,d,e,f){var g=d.voice.beat.getNextBeat();g=g==null?null:g.getNote(d.voice.index,d.string);
if(g!=null&&g.isTiedNote){b=d.voice.index==0?b.get(10):b.get(6);var h=d.voice.beatGroup.getDirection()==2,i=Math.round(c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x),j=Math.round((4+a.scale)*(!h?1:-1)),k=f+this.spacing.get(10)+this.getNoteScorePosY(a,d)+j,m=e+i/2;d=g!=null?e+(d.voice.beat.fullWidth()+i/2):m+15*a.scale;f=g!=null?f+this.spacing.get(10)+this.getNoteScorePosY(a,g)+j:k;c.tablature.staves.TablatureStave.paintTie(a,b,m,k,d,f,!h)}},paintEffects:function(a,b,d,e,f,g){this.paintDottedNote(a,
b,d.voice,d.displaced,e,g);this.paintStaccato(a,b,d,e,f);this.paintGraceNote(a,b,d,e,g);this.paintTremoloPicking(a,b,d,e,g);this.paintHammerOn(a,b,d,e,f);this.paintSlide(a,b,d,e,f);this.paintTiedNote(a,b,d,e,f)},getNoteScorePosY:function(a,b){if(b.scorePosY<=0){var d=b.voice.beat.measure.header.keySignature,e=b.voice.beat.measure.clef,f=a.scoreLineSpacing/2,g=b.voice.beat.measure.track.isPercussionTrack?c.tablature.model.PercussionMapper.getValue(b):b.realValue(),h=g%12;g=7*Math.floor(g/12)*f;d=(b.swapAccidentals?
d>7:d<=7)?Math.floor(c.tablature.staves.ScoreStave.SCORE_SHARP_POSITIONS[h]*f-g):Math.floor(c.tablature.staves.ScoreStave.SCORE_FLAT_POSITIONS[h]*f-g);d+=Math.floor(c.tablature.staves.ScoreStave.SCORE_CLEF_OFFSETS[e]*f)+Math.round(a.scale);b.scorePosY=d}return b.scorePosY},paintNote:function(a,b,d,e,f){var g=f+this.spacing.get(10)+this.getNoteScorePosY(a,d),h=e,i=d.voice.index==0?b.get(9):b.get(5),j=d.voice.index==0?b.get(10):b.get(6),k=d.voice.beatGroup.getDirection(),m=Math.floor(c.tablature.drawing.DrawingResources.getScoreNoteSize(a,
false).x);if(d.displaced)if(k==1)h+=m;else h-=m;if(!d.voice.beat.measure.track.isPercussionTrack){var n=e-Math.floor(7*a.scale);if(d.voice.anyDisplaced&&k==2)n-=m;k=g+3*a.scale;if(d.getAccitental()==1)c.tablature.drawing.KeySignaturePainter.paintSmallNatural(i,n,k,a);else if(d.getAccitental()==2)c.tablature.drawing.KeySignaturePainter.paintSmallSharp(i,n,k,a);else d.getAccitental()==3&&c.tablature.drawing.KeySignaturePainter.paintSmallFlat(i,n,k,a)}if(d.voice.beat.measure.track.isPercussionTrack)c.tablature.drawing.NotePainter.paintPercussion(i,
d,e,g,a.scale);else if(d.effect.isHarmonic()){e=d.voice.duration.value>=c.model.Duration.QUARTER;c.tablature.drawing.NotePainter.paintHarmonic(e?i:j,h,g,a.scale)}else if(d.effect.deadNote)c.tablature.drawing.NotePainter.paintDeadNote(i,h,g,a.scale);else{e=d.voice.duration.value>=c.model.Duration.QUARTER;c.tablature.drawing.NotePainter.paintNote(i,h,g,a.scale,e)}this.paintEffects(a,b,d,h,f,g)},paintTriplet:function(a,b,d,e,f){if(!d.duration.tuplet.equals(c.model.Tuplet.NORMAL)){var g=d.index==0?b.get(9):
b.get(5),h=d.index==0?b.get(12):b.get(8);f+=this.spacing.get(6);var i=d.getPreviousVoice();if(d.tripletGroup.isFull()&&(i==null||i.tripletGroup==null||i.tripletGroup!=d.tripletGroup)){g=d.tripletGroup.voices[d.tripletGroup.voices.length-1];e=d.tripletGroup.voices[0].beat.fullX();g=g.beat.fullX();if((d.isRestVoice()?1:d.beatGroup.getDirection())==1){a=Math.floor(c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x);e+=a;g+=a}a=g-e;i=this.spacing.spacing[6];d=l.string(d.tripletGroup.triplet);
b.graphics.set_font(c.tablature.drawing.DrawingResources.effectFont);b=b.graphics.measureText(d);h.addLine(e,f+i,e,f);h.addLine(e,f,e+a/2-b,f);h.addString(d,c.tablature.drawing.DrawingResources.effectFont,e+(a-b)/2,f);h.addLine(e+a/2+b,f,g,f);h.addLine(g,f+i,g,f)}else d.tripletGroup.isFull()||g.addString(l.string(d.duration.tuplet.enters),c.tablature.drawing.DrawingResources.defaultFont,e,f)}},calculateBeamY:function(a,b,d,e){var f=Math.round(10*a.scale),g=28*(this.layout.scoreLineSpacing/8),h=28*
(this.layout.scoreLineSpacing/8),i,j,k;if(d==2){if(b.minNote!=b.firstMinNote&&b.minNote!=b.lastMinNote)return this.getNoteScorePosY(a,b.minNote)+h;d=0;i=b.firstMinNote.voice.beat.fullX();j=b.lastMinNote.voice.beat.fullX();k=Math.round(this.getNoteScorePosY(a,b.firstMinNote)+h);a=Math.round(this.getNoteScorePosY(a,b.lastMinNote)+h);if(k>a&&k-a>f)a=k-f;if(a>k&&a-k>f)k=a-f}else{if(b.maxNote!=b.firstMaxNote&&b.maxNote!=b.lastMaxNote)return this.getNoteScorePosY(a,b.maxNote)-g;d=0;i=b.firstMaxNote.voice.beat.fullX();
j=b.lastMaxNote.voice.beat.fullX();k=Math.round(this.getNoteScorePosY(a,b.firstMaxNote)-g);a=Math.round(this.getNoteScorePosY(a,b.lastMaxNote)-g);if(k<a&&a-k>f)a=k+f;if(a<k&&k-a>f)k=a+f}if(k-a!=0&&i-j!=0&&i-e!=0)d=Math.round((k-a)/(i-j)*(i-e));return k-d},getOffset:function(a){return a*(this.layout.scoreLineSpacing/8)},paintBeam:function(a,b,d,e,f){if(!d.isRestVoice()){f+=this.spacing.get(10);var g=d.index==0?b.get(9):b.get(5),h=d.index==0?b.get(12):b.get(8);if(d.duration.value>=c.model.Duration.HALF){b=
d.beatGroup.getDirection();var i=d.beat.measure.header.keySignature,j=d.beat.measure.clef,k=b==1?c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x:0,m=b==1?Math.round(a.scoreLineSpacing/3)+1:Math.round(a.scoreLineSpacing/3)*2,n=f+(b==1?this.getNoteScorePosY(a,d.minNote):this.getNoteScorePosY(a,d.maxNote)),u=Math.round(f+this.calculateBeamY(a,d.beatGroup,b,Math.round(e+k),i,j));h.addLine(e+k,n+m,e+k,u+m);if(d.duration.value>=c.model.Duration.EIGHTH){h=d.duration.index()-2;if(h>0){n=
b==2?1:-1;if((d.joinedType==c.tablature.model.JoinedType.NoneRight||d.joinedType==c.tablature.model.JoinedType.NoneLeft)&&!d.isJoinedGreaterThanQuarter)c.tablature.drawing.NotePainter.paintFooter(g,e,u,d.duration.value,n,a);else{var r;if(d.joinedType==c.tablature.model.JoinedType.NoneRight){u=Math.floor(e+k);e=Math.floor(e+6*a.scale+k);r=d.beat.fullX();k=Math.floor(d.beat.fullX()+6*a.scale)}else if(d.joinedType==c.tablature.model.JoinedType.NoneLeft){u=Math.floor(e-6*a.scale+k);e=Math.floor(e+k);
r=Math.floor(d.beat.fullX()-6*a.scale);k=d.beat.fullX()}else{u=Math.floor(d.leftJoin.beat.fullX()+k);e=Math.ceil(d.rightJoin.beat.fullX()+k);r=d.leftJoin.beat.fullX();k=d.rightJoin.beat.fullX()}r=Math.floor(f+m+this.calculateBeamY(a,d.beatGroup,b,r,i,j));d=Math.floor(f+m+this.calculateBeamY(a,d.beatGroup,b,k,i,j));c.tablature.drawing.NotePainter.paintBar(g,u,r,e,d,h,n,a.scale)}}}}}},paintSilence:function(a,b,d,e,f){e+=Math.round(3*a.scale);f+=this.spacing.get(10);var g=d.index==0?b.get(9):b.get(5);
switch(d.duration.value){case c.model.Duration.WHOLE:c.tablature.drawing.SilencePainter.paintWhole(g,e,f,a);f+=Math.round(10*a.scale);e+=Math.round(a.scale);break;case c.model.Duration.HALF:c.tablature.drawing.SilencePainter.paintHalf(g,e,f,a);f+=Math.round(10*a.scale);e+=Math.round(a.scale);break;case c.model.Duration.QUARTER:c.tablature.drawing.SilencePainter.paintQuarter(g,e,f,a);f+=Math.round(10*a.scale);e+=Math.round(a.scale);break;case c.model.Duration.EIGHTH:c.tablature.drawing.SilencePainter.paintEighth(g,
e,f,a);f+=Math.round(10*a.scale);e+=Math.round(a.scale);break;case c.model.Duration.SIXTEENTH:c.tablature.drawing.SilencePainter.paintSixteenth(g,e,f,a);f+=Math.round(10*a.scale);e+=Math.round(a.scale);break;case c.model.Duration.THIRTY_SECOND:c.tablature.drawing.SilencePainter.paintThirtySecond(g,e,f,a);f+=Math.round(2*a.scale);e+=Math.round(3*a.scale);break;case c.model.Duration.SIXTY_FOURTH:c.tablature.drawing.SilencePainter.paintSixtyFourth(g,e,f,a);f+=Math.round(2*a.scale);e+=Math.round(5*a.scale);
break}this.paintDottedNote(a,b,d,false,e,f)},paintVoice:function(a,b,d,e,f){if(!d.isEmpty){if(d.isRestVoice())this.paintSilence(a,b,d,e,f);else for(var g=0,h=d.notes;g<h.length;){var i=h[g];++g;this.paintNote(a,b,i,e,f)}this.paintBeam(a,b,d,e,f);this.paintTriplet(a,b,d,e,f)}},paintExtraLines2:function(a,b,d,e,f){d=f+this.getNoteScorePosY(b,d)-b.scale;var g=e-3*b.scale;e=e+12*b.scale;b=b.scoreLineSpacing;if(d<f)for(f=f;f>d;){a.get(2).startFigure();a.get(2).addLine(g,f,e,f);f-=b}else if(d>f+b*4)for(f=
f+b*5;f<d+b;){a.get(2).startFigure();a.get(2).addLine(g,f,e,f);f+=b}},paintExtraLines:function(a,b,d,e,f){if(!d.isRestBeat()){f=f+this.spacing.get(10);this.paintExtraLines2(b,a,d.minNote,e,f);this.paintExtraLines2(b,a,d.maxNote,e,f)}},paintBeat:function(a,b,d,e,f){this.paintExtraLines(a,b,d,e,f);for(var g=0,h=d.voices;g<h.length;){var i=h[g];++g;this.paintVoice(a,b,i,e,f)}this.paintBeatEffects(a,b,d,e,f)},paintBeats:function(a,b,d,e,f){var g=0;for(d=d.beats;g<d.length;){var h=d[g];++g;h=h;this.paintBeat(a,
b,h,e+h.x,f)}},paintRepeatEndings:function(a,b,d,e,f){if(!(d.header.repeatAlternative<=0)){f+=this.spacing.get(7);var g=this.spacing.spacing[7];a=Math.floor(3*a.scale);var h=b.get(4);h.startFigure();h.addLine(e,f+g,e,f);h.addLine(e,f,e+d.width+d.spacing-a*2,f);g="";for(h=0;h<8;){var i=h++;if((d.header.repeatAlternative&1<<i)!=0)g+=g.length>0?", "+(i+1):l.string(i+1)}b.get(3).addString(g,c.tablature.drawing.DrawingResources.defaultFont,e+a,f+a+c.tablature.drawing.DrawingResources.defaultFontHeight/
2)}},paintMarker:function(a,b,d,e,f){if(d.effectsCache.marker){f+=this.spacing.get(2);b.get(9).addString(d.header.marker.title,c.tablature.drawing.DrawingResources.defaultFont,e,f+Math.floor(c.tablature.drawing.DrawingResources.defaultFontHeight/2))}},paintTripletFeel:function(a,b,d,e,f){if(d.effectsCache.tripletFeel){f+=this.spacing.get(4);if(d.header.tripletFeel==0&&d.getPreviousMeasure()!=null){d=d.getPreviousMeasure().header.tripletFeel;if(d==1)c.tablature.drawing.TripletFeelPainter.paintTripletFeelNone8(b,
e,f,a.scale);else d==2&&c.tablature.drawing.TripletFeelPainter.paintTripletFeelNone16(b,e,f,a.scale)}else if(d.header.tripletFeel==1)c.tablature.drawing.TripletFeelPainter.paintTripletFeel8(b,e,f,a.scale);else d.header.tripletFeel==2&&c.tablature.drawing.TripletFeelPainter.paintTripletFeel16(b,e,f,a.scale)}},paintTempo:function(a,b,d,e,f){if(d.effectsCache.tempo){f+=this.spacing.get(5);c.tablature.drawing.TempoPainter.paintTempo(b,e,f,a.scale);e+=Math.round(8*a.scale);a=" = "+d.header.tempo.value;
b.get(3).addString(a,c.tablature.drawing.DrawingResources.defaultFont,e,f+c.tablature.drawing.DrawingResources.defaultFontHeight)}},paintText:function(a,b,d,e,f){if(d.effectsCache.text){f+=this.spacing.get(1);a=0;for(d=d.beats;a<d.length;){var g=d[a];++a;if(g.text!=null){var h=g;g=g.text.value;b.get(9).addString(g,c.tablature.drawing.DrawingResources.defaultFont,e+h.x,f+Math.floor(c.tablature.drawing.DrawingResources.defaultFontHeight/2))}}}},paintTimeSignature:function(a,b,d,e,f){if(d.header.shouldPaintTimeSignature(d)&&
this.line.shouldPaintFeature(c.tablature.staves.StaveFeatures.TimeSignature,2)){f+=this.spacing.get(10);var g=e=e+d.calculateClefSpacing(a)+d.calculateKeySignatureSpacing(a)+Math.floor(15*a.scale),h=Math.round(2*a.scoreLineSpacing);if(d.header.timeSignature.numerator>9&&d.header.timeSignature.denominator.value<10)g+=Math.round(10*a.scale/2);if(d.header.timeSignature.numerator<10&&d.header.timeSignature.denominator.value>9)e+=Math.round(10*a.scale/2);this.paintTimeSignatureNumber(a,b,d.header.timeSignature.numerator,
e,f+0,a.scale);this.paintTimeSignatureNumber(a,b,d.header.timeSignature.denominator.value,g,f+h,a.scale)}},paintKeySignature:function(a,b,d,e,f){if(d.header.shouldPaintKeySignature(d)){e+=d.calculateClefSpacing(a)+Math.floor(10*a.scale);f+=this.spacing.get(10);var g=d.header.keySignature,h=d.getPreviousMeasure()!=null?d.getPreviousMeasure().header.keySignature:0,i=0;switch(d.clef){case 0:i=0;break;case 1:i=2;break;case 2:i=-1;break;case 3:i=1;break}d=h<=7?h:h-7;var j=h<=7?c.tablature.staves.ScoreStave.SCORE_KEYSHARP_POSITIONS:
c.tablature.staves.ScoreStave.SCORE_KEYFLAT_POSITIONS;h=a.scoreLineSpacing/2;for(var k=0;k<d;){var m=k++;m=Math.round((j[m]+i)*h+6*a.scale);c.tablature.drawing.KeySignaturePainter.paintNatural(b,e,f+m,a);e+=Math.floor(8*a.scale)}d=g<=7?g:g-7;if(g<=7)for(k=0;k<d;){m=k++;m=Math.round((c.tablature.staves.ScoreStave.SCORE_KEYSHARP_POSITIONS[m]+i)*h+2*a.scale);c.tablature.drawing.KeySignaturePainter.paintSharp(b,e,f+m,a);e+=Math.floor(8*a.scale)}else for(k=0;k<d;){m=k++;m=Math.round((c.tablature.staves.ScoreStave.SCORE_KEYFLAT_POSITIONS[m]+
i)*h+a.scale);c.tablature.drawing.KeySignaturePainter.paintFlat(b,e,f+m,a);e+=Math.floor(8*a.scale)}}},paintClef:function(a,b,d,e,f){if(d.shouldPaintClef()){e+=Math.round(14*a.scale);f+=this.spacing.get(10);if(d.clef==0)c.tablature.drawing.ClefPainter.paintTreble(b,e,f,a);else if(d.clef==1)c.tablature.drawing.ClefPainter.paintBass(b,e,f,a);else if(d.clef==2)c.tablature.drawing.ClefPainter.paintTenor(b,e,f,a);else d.clef==3&&c.tablature.drawing.ClefPainter.paintAlto(b,e,f,a)}},paintMeasure:function(a,
b,d,e,f){e=e+d.x;this.spacing.get(0);this.paintDivisions(a,b,d,e,f,3,this.spacing.get(10),this.spacing.spacing[10]);this.paintClef(a,b,d,e,f);this.paintKeySignature(a,b,d,e,f);this.paintTimeSignature(a,b,d,e,f);this.paintRepeatEndings(a,b,d,e,f);e+=d.getDefaultSpacings(a);this.paintText(a,b,d,e,f);this.paintTempo(a,b,d,e,f);this.paintTripletFeel(a,b,d,e,f);this.paintMarker(a,b,d,e,f);this.paintBeats(a,b,d,e,f)},paintStave:function(a,b,d,e){e=e+this.spacing.get(10);for(var f=1;f<6;){f++;b.get(2).startFigure();
b.get(2).addLine(d,e,d+this.line.width,e);e+=Math.round(a.scoreLineSpacing)}},prepare:function(a){a.effectsCache.text&&this.spacing.set(1,this.layout.effectSpacing);a.effectsCache.tempo&&this.spacing.set(5,20*this.layout.scale);a.effectsCache.tripletFeel&&this.spacing.set(4,30*this.layout.scale);a.effectsCache.triplet&&this.spacing.set(6,5*this.layout.scale);a.effectsCache.marker&&this.spacing.set(2,this.layout.effectSpacing);a.effectsCache.chord&&this.spacing.set(3,this.layout.effectSpacing);a.header.repeatAlternative>
0&&this.spacing.set(7,Math.floor(15*this.layout.scale));var b=this.spacing.spacing[9],d=this.spacing.get(10),e=this.spacing.get(11),f=a.minDownGroup==null?null:a.minDownGroup.minNote;if(f!=null){b=d-b;f=this.getNoteScorePosY(this.layout,f)+b;f=b-f;this.spacing.spacing[9]<f&&this.spacing.set(9,f)}a=a.maxUpGroup==null?null:a.maxUpGroup.maxNote;if(a!=null){d=this.getNoteScorePosY(this.layout,a)+d-e;this.spacing.spacing[11]<d&&this.spacing.set(11,d)}},getLineBottomSpacing:function(){return 11},getLineTopSpacing:function(){return 10},
getBarBottomSpacing:function(){return 11},getBarTopSpacing:function(){return 8},__class__:c.tablature.staves.ScoreStave});c.tablature.staves.StaveFactory=function(){};c.tablature.staves.StaveFactory.__name__=true;c.tablature.staves.StaveFactory.getStave=function(a,b,d){switch(a){case "score":return new c.tablature.staves.ScoreStave(b,d);case "tablature":return new c.tablature.staves.TablatureStave(b,d)}return null};c.tablature.staves.StaveFeatures={__ename__:true,__constructs__:["TimeSignature"]};
c.tablature.staves.StaveFeatures.TimeSignature=["TimeSignature",0];c.tablature.staves.StaveFeatures.TimeSignature.toString=B;c.tablature.staves.StaveFeatures.TimeSignature.__enum__=c.tablature.staves.StaveFeatures;c.tablature.staves.StaveLine=function(){this.measures=[];this.staves=[];this.spacing=new c.tablature.staves.StaveSpacing(2);this.paintFeatures=[];for(var a=0,b=N.getEnumConstructs(c.tablature.staves.StaveFeatures).length;a<b;){a++;this.paintFeatures.push(0)}this.x=this.y=0;this.fullLine=
false;this.width=0};c.tablature.staves.StaveLine.__name__=true;c.tablature.staves.StaveLine.prototype={paint:function(a,b,d){if(this.staves.length!=0){for(var e=this.y+this.spacing.get(0),f=0,g=this.staves.length;f<g;){var h=this.staves[f++];h.paintStave(a,d,this.x,e);for(var i,j=0,k=this.measures.length;j<k;){i=this.measures[j++];i=b.measures[i];h.paintMeasure(a,d,i,this.x,e)}e+=h.spacing.getSize()}if(this.staves.length>1){f=this.staves[0];b=this.staves[this.staves.length-1];g=this.y+this.spacing.get(0);
e=e-b.spacing.getSize();h=d.get(3);d=d.get(4);j=g+f.spacing.get(f.getBarTopSpacing());k=e+b.spacing.get(b.getBarBottomSpacing());a=Math.floor(3*a.scale);h.addRect(this.x-a-a,j,a,k-j);i=this.x-a-a;var m=this.x+a*2;h.startFigure();h.moveTo(i,j);h.bezierTo(i,j,this.x,j,m,j-a);h.bezierTo(this.x,j+a,i,j+a,i,j+a);h.closeFigure();h.startFigure();h.moveTo(i,k);h.bezierTo(i,k,this.x,k,m,k+a);h.bezierTo(this.x,k-a,i,k-a,i,k-a);h.closeFigure();a=g+f.spacing.get(f.getLineTopSpacing());b=e+b.spacing.get(b.getLineBottomSpacing());
d.addLine(this.x,a,this.x,b)}}},addStave:function(a){a.index=this.staves.length;this.staves.push(a)},addMeasure:function(a){this.measures.push(a)},getHeight:function(){var a=0;a+=this.spacing.getSize();for(var b=0,d=this.staves;b<d.length;){var e=d[b];++b;a+=e.spacing.getSize()}return a},setFeaturePaintPriority:function(a,b){if(b==null)b=1;if(this.getFeaturePaintPriority(a)<b)this.paintFeatures[a[1]]=b},shouldPaintFeature:function(a,b){if(b==null)b=1;return this.getFeaturePaintPriority(a)<=b},getFeaturePaintPriority:function(a){return this.paintFeatures[a[1]]},
lastIndex:function(){return this.measures[this.measures.length-1]},__class__:c.tablature.staves.StaveLine};c.tablature.staves.StaveSpacing=function(a){this.spacing=[];for(var b=0;b<a;){b++;this.spacing.push(0)}};c.tablature.staves.StaveSpacing.__name__=true;c.tablature.staves.StaveSpacing.prototype={getSize:function(){return this.get(this.spacing.length)},set:function(a,b){this.spacing[a]=Math.round(b)},get:function(a){for(var b=0,d=0;d<a;){var e=d++;b+=this.spacing[e]}return b},__class__:c.tablature.staves.StaveSpacing};
c.tablature.staves.TablatureStave=function(a,b){c.tablature.staves.Stave.call(this,a,b);this.spacing=new c.tablature.staves.StaveSpacing(18);this.spacing.set(0,Math.floor(15*b.scale));this.spacing.set(11,Math.floor(10*b.scale));this.spacing.set(12,(a.track.stringCount()-1)*b.stringSpacing);this.spacing.set(13,Math.floor(10*b.scale));this.spacing.set(17,Math.floor(15*b.scale));a.setFeaturePaintPriority(c.tablature.staves.StaveFeatures.TimeSignature);this._rangeIndices=[0,0]};c.tablature.staves.TablatureStave.__name__=
true;c.tablature.staves.TablatureStave.paintTie=function(a,b,d,e,f,g,h){if(h==null)h=false;var i=15*a.scale;a=4*a.scale;var j={x:g-e,y:f-d},k=Math.sqrt(j.x*j.x+j.y*j.y);if(h)j.x*=-1;else j.y*=-1;j.x/=k;j.y/=k;k={x:(f+d)/2,y:(g+e)/2};h={x:k.x+i*j.x,y:k.y+i*j.y};i={x:k.x+(i-a)*j.x,y:k.y+(i-a)*j.y};b.startFigure();b.moveTo(d,e);b.quadraticCurveTo(h.x,h.y,f,g);b.quadraticCurveTo(i.x,i.y,d,e);b.closeFigure()};c.tablature.staves.TablatureStave.__super__=c.tablature.staves.Stave;c.tablature.staves.TablatureStave.prototype=
y(c.tablature.staves.Stave.prototype,{paintStroke:function(a,b,d,e,f){if(d.effect.stroke.direction!=0){e-=Math.floor(2*a.scale);f=f+this.spacing.get(12);a=f+((d.measure.track.stringCount()-1)*a.stringSpacing|0);b=b.get(4);b.startFigure();b.startFigure();b.addLine(e,f,e,a);if(d.effect.stroke.direction==1){b.addLine(e,f,e+3,f+5);b.addLine(e,f,e-3,f+5)}else{b.addLine(e,a,e+3,a-5);b.addLine(e,a,e-3,a-5)}}},paintFadeIn:function(a,b,d,e,f){if(d.effect.fadeIn){f+=this.spacing.get(7);a=Math.round(4*a.scale);
d=d.fullWidth();b=b.get(12);b.startFigure();b.addBezier(e,f,e,f,e+d,f,e+d,f-a);b.startFigure();b.addBezier(e,f,e,f,e+d,f,e+d,f+a)}},paintTabSlapPop:function(a,b,d,e,f){a=b.get(10);f=f+this.spacing.get(2);if(d.effect.tapping)a.addString("T",c.tablature.drawing.DrawingResources.defaultFont,e,f);else if(d.effect.slapping)a.addString("S",c.tablature.drawing.DrawingResources.defaultFont,e,f);else d.effect.popping&&a.addString("P",c.tablature.drawing.DrawingResources.defaultFont,e,f)},paintBeatVibrato:function(a,
b,d,e,f){if(d.effect.vibrato){d=d.fullWidth();this.paintVibrato(a,b.get(10),e,f+this.spacing.get(5),d,1)}},paintTremoloBar:function(a,b,d,e,f){if(d!=null){var g=d.voice.beat;if(g.effect.isTremoloBar()){var h=a.scale;f=f+this.spacing.get(12)+((d.string-1)*a.stringSpacing|0);e+=Math.floor(d.noteSize.x);var i=e+g.fullWidth(),j=f-60*h;a=d.voice.index==0?b.get(10):b.get(6);d=d.voice.index==0?b.get(11):b.get(7);if(g.effect.tremoloBar.points.length>=2){i=(i-e)/12;j=(f-j)/12;d.startFigure();for(var k=0,m=
g.effect.tremoloBar.points.length-1;k<m;){var n=k++,u=g.effect.tremoloBar.points[n],r=g.effect.tremoloBar.points[n+1];if(!(u.value==r.value&&n==g.effect.tremoloBar.points.length-2)){var s=new c.model.Point(e+i*u.position,f-j*u.value);n=new c.model.Point(e+i*r.position,f-j*r.value);d.addLine(s.x,s.y,n.x,n.y);if(r.value!=0){s=r.value*0.5;u=r.value-u.value>=0;r="";if(s<0)r+="-";if(s>=1||s<=-1)r+=l.string(Math.floor(Math.abs(s)))+" ";else if(s<0)r+="-";s-=Math.floor(s);if(s==0.25)r+="1/4";else if(s==
0.5)r+="1/2";else if(s==0.75)r+="3/4";b.graphics.set_font(c.tablature.drawing.DrawingResources.defaultFont);s=b.graphics.measureText(r);a.addString(r,c.tablature.drawing.DrawingResources.defaultFont,n.x-s/2,u?n.y-c.tablature.drawing.DrawingResources.defaultFontHeight-3*h:n.y+3*h)}}}}}}},paintBeatEffects:function(a,b,d,e,f){this.paintTremoloBar(a,b,d.getMinNote(),e,f);this.paintBeatVibrato(a,b,d,e,f);this.paintTabSlapPop(a,b,d,e,f);this.paintFadeIn(a,b,d,e,f);this.paintStroke(a,b,d,e,f)},paintSlides:function(a,
b,d,e,f){if(d.effect.slide){var g=d.noteSize.x*2,h=15*a.scale,i=3*a.scale,j=d.voice.index==0?b.get(11):b.get(7);j.startFigure();if(d.effect.slideType==4)j.addLine(e-h,f+i,e,f-i);else if(d.effect.slideType==5)j.addLine(e-h,f-i,e,f+i);else if(d.effect.slideType==2)j.addLine(e+g,f-i,e+g+h,f+i);else if(d.effect.slideType==3)j.addLine(e+g,f+i,e+g+h,f-i);else{h=d.voice.beat.getNextBeat();h=h==null?null:h.getNote(d.voice.index,d.string);if(h!=null){if(h.value<d.value)j.addLine(e+g,f-i,e+d.voice.beat.fullWidth(),
f+i);else h.value>d.value?j.addLine(e+g,f+i,e+d.voice.beat.fullWidth(),f-i):j.addLine(e+g,f,e+d.voice.beat.fullWidth(),f);if(d.effect.slideType==1){this.paintHammerOn(a,b,d,e,f);g=d.string>3;i=e+d.noteSize.x/2;f=g?f+c.tablature.drawing.DrawingResources.noteFontHeight/2:f-c.tablature.drawing.DrawingResources.noteFontHeight/2;e=h!=null?e+d.voice.beat.fullWidth()+h.noteSize.x/2:i+15*a.scale;b=d.voice.index==0?b.get(10):b.get(6);c.tablature.staves.TablatureStave.paintTie(a,b,i,f,e,f,g)}}else j.addLine(e+
g,f,e+d.voice.beat.fullWidth(),f)}}},paintBend:function(a,b,d,e,f){if(d.effect.isBend()){a=a.scale;e+=Math.floor(d.noteSize.x);var g=e+d.voice.beat.fullWidth(),h=f-60*a,i=d.voice.index==0?b.get(10):b.get(6),j=d.voice.index==0?b.get(11):b.get(7);if(d.effect.bend.points.length>=2){g=(g-e)/12;h=(f-h)/12;j.startFigure();for(var k=0,m=d.effect.bend.points.length-1;k<m;){var n=k++,u=d.effect.bend.points[n],r=d.effect.bend.points[n+1];if(!(u.value==r.value&&n==d.effect.bend.points.length-2)){var s=new c.model.Point(e+
g*u.position,f-h*u.value);n=new c.model.Point(e+g*r.position,f-h*r.value);var C=new c.model.Point(s.x+(n.x-s.x),f-h*u.value);j.addBezier(s.x,s.y,C.x,C.y,n.x,n.y,n.x,n.y);s=3*a;if(r.value>u.value){j.addLine(n.x-0.5,n.y,n.x-s-0.5,n.y+s);j.addLine(n.x-0.5,n.y,n.x+s-0.5,n.y+s)}else if(r.value!=u.value){j.addLine(n.x-0.5,n.y,n.x-s-0.5,n.y-s);j.addLine(n.x-0.5,n.y,n.x+s-0.5,n.y-s)}if(r.value!=0){s=(r.value-u.value)*0.25;u=s>0;s=Math.abs(s);r="";if(s==1)r="full";else if(s>1){r+=l.string(Math.floor(s))+" ";
s-=Math.floor(s)}if(s==0.25)r+="1/4";else if(s==0.5)r+="1/2";else if(s==0.75)r+="3/4";b.graphics.set_font(c.tablature.drawing.DrawingResources.defaultFont);s=b.graphics.measureText(r);i.addString(r,c.tablature.drawing.DrawingResources.defaultFont,n.x-s/2,u?n.y-c.tablature.drawing.DrawingResources.defaultFontHeight+2*a:n.y+c.tablature.drawing.DrawingResources.defaultFontHeight/2+2*a)}}}}}},paintHammerOn:function(a,b,d,e,f){if(d.effect.hammer){var g=d.voice.beat.getNextBeat(),h=g==null?null:g.getNote(d.voice.index,
d.string);g=d.string>3||h==null;b=d.voice.index==0?b.get(10):b.get(6);var i=e+d.noteSize.x/2;f=g?f+c.tablature.drawing.DrawingResources.noteFontHeight/2:f-c.tablature.drawing.DrawingResources.noteFontHeight/2;d=h!=null?e+d.voice.beat.fullWidth()+h.noteSize.x/2:i+15*a.scale;c.tablature.staves.TablatureStave.paintTie(a,b,i,f,d,f,g)}},paintFingering:function(a,b,d,e,f){if(d.effectsCache.fingering!=0){f+=Math.round(c.tablature.drawing.DrawingResources.effectFontHeight/2);b=d.index==0?b.get(10):b.get(6);
f=f+this.spacing.get(16);for(var g=0,h=d.effectsCache.leftHandFingering;g<h.length;){var i=h[g];++g;if(i!=-2&&i!=-1){var j="";switch(i){case 0:j="T";break;case 1:j="1";break;case 2:j="2";break;case 3:j="3";break;case 4:j="4";break}b.addString(j,c.tablature.drawing.DrawingResources.effectFont,e,f)}f+=Math.floor(a.effectSpacing)}g=0;for(h=d.effectsCache.rightHandFingering;g<h.length;){i=h[g];++g;if(i!=-2&&i!=-1){j="";switch(i){case 0:j="p";break;case 1:j="i";break;case 2:j="m";break;case 3:j="a";break;
case 4:j="c";break}b.addString(j,c.tablature.drawing.DrawingResources.effectFont,e,f)}f+=Math.floor(a.effectSpacing)}}},paintHarmonics:function(a,b,d,e,f){if(d.effectsCache.harmonic){a="";switch(d.effectsCache.harmonicType){case 0:a="Harm";break;case 1:a="A.H";break;case 2:a="T.H";break;case 3:a="P.H";break;case 4:a="S.H";break}(d.index==0?b.get(10):b.get(6)).addString(a,c.tablature.drawing.DrawingResources.effectFont,e,f+this.spacing.get(8))}},paintTrillBeat:function(a,b,d,e,f){if(d.effectsCache.trill)(d.index==
0?b.get(10):b.get(6)).addString("Tr",c.tablature.drawing.DrawingResources.effectFont,e,f+this.spacing.get(6))},paintTrillNote:function(a,b,d,e,f){if(d.effect.isTrill())(d.voice.index==0?b.get(10):b.get(6)).addString("("+d.effect.trill.fret+")",c.tablature.drawing.DrawingResources.graceFont,e+2*d.noteSize.x,f)},paintVibrato:function(a,b,d,e,f,g){if(g==null)g=1;var h=18*a.scale*g;f=Math.floor(Math.max(1,f/h));for(var i=0;i<f;){i++;b.addMusicSymbol(c.tablature.drawing.MusicFont.VibratoLeftRight,d,e,
a.scale*g);d+=Math.floor(h)}},paintNoteVibrato:function(a,b,d,e,f){if(d.effectsCache.vibrato){b=d.index==0?b.get(10):b.get(6);d=d.beat.fullWidth();this.paintVibrato(a,b,e,f+this.spacing.get(6),d,0.75)}},paintRange:function(a,b,d,e,f,g,h,i,j,k,m){var n=e+d.beat.fullWidth(),u=j!=null&&j.beat.measure.staveLine==d.beat.measure.staveLine,r=h!=null&&h.beat.measure.staveLine==d.beat.measure.staveLine,s=d.index==0?b.get(9):b.get(5);h=d.index==0?b.get(12):b.get(8);h.startFigure();f+=c.tablature.drawing.DrawingResources.effectFontHeight;
if(i=!i||!r){r=8*a.scale;n-=r}if(!u||!k){s.addString(g,c.tablature.drawing.DrawingResources.effectFont,e,f);b.graphics.set_font(c.tablature.drawing.DrawingResources.effectFont);r=b.graphics.measureText(g)+4*a.scale;e+=r;this._rangeIndices[m]=e}else u&&d.beat==d.beat.measure.beats[0]&&j.beat.measure.getDefaultSpacings(a);if(i){h.startFigure();h.addDashedLine(this._rangeIndices[m],f,n,f);a=8*a.scale;h.startFigure();h.addLine(n,f-a/2,n,f+a/2)}},paintPalmMute:function(a,b,d,e,f){if(d.effectsCache.palmMute){f=
f+this.spacing.get(4);var g=d.getNextVoice(),h=d.getPreviousVoice();this.paintRange(a,b,d,e,f,"P.M.",g,g!=null&&g.effectsCache.palmMute,h,h!=null&&h.effectsCache.palmMute,1)}},paintLetRing:function(a,b,d,e,f){if(d.effectsCache.letRing){f=f+this.spacing.get(3);var g=d.getNextVoice(),h=d.getPreviousVoice();this.paintRange(a,b,d,e,f,"ring",g,g!=null&&g.effectsCache.letRing,h,h!=null&&h.effectsCache.letRing,0)}},paintAccentuatedNote:function(a,b,d,e,f){if(d.effectsCache.accentuatedNote||d.effectsCache.heavyAccentuatedNote){e=
e+d.minNote.noteSize.x/2;f=f+this.spacing.get(1);(d.index==0?b.get(9):b.get(5)).addMusicSymbol(d.effectsCache.accentuatedNote?c.tablature.drawing.MusicFont.AccentuatedNote:c.tablature.drawing.MusicFont.HeavyAccentuatedNote,e,f,a.scale)}},paintGrace:function(a,b,d,e,f){if(d.effect.isGrace()){b=d.voice.index==0?b.get(10):b.get(6);d=d.effect.grace.isDead?"X":l.string(d.effect.grace.fret);b.addString(d,c.tablature.drawing.DrawingResources.graceFont,e-Math.round(7*a.scale),f)}},paintEffects:function(a,
b,d,e,f,g){this.paintGrace(a,b,d,e,g);this.paintHammerOn(a,b,d,e,g);this.paintBend(a,b,d,e,g);this.paintSlides(a,b,d,e,g);this.paintTrillNote(a,b,d,e,g)},paintVoiceEffects:function(a,b,d,e,f){if(!(d.isEmpty||d.isRestVoice())){this.paintAccentuatedNote(a,b,d,e,f);this.paintLetRing(a,b,d,e,f);this.paintPalmMute(a,b,d,e,f);this.paintNoteVibrato(a,b,d,e,f);this.paintHarmonics(a,b,d,e,f);this.paintFingering(a,b,d,e,f);this.paintTrillBeat(a,b,d,e,f)}},getNoteTablaturePosY:function(a,b){return this.spacing.get(12)+
((b.string-1)*a.stringSpacing|0)},paintNote:function(a,b,d,e,f){var g=e,h=f+this.getNoteTablaturePosY(a,d);g+=c.tablature.drawing.DrawingResources.getScoreNoteSize(a,false).x/2|0;var i=d.voice.index==0?b.get(9):b.get(5);if(d.isTiedNote){if(d.voice.beat.isFirstOfLine()){j="("+d.value+")";b.graphics.set_font(c.tablature.drawing.DrawingResources.noteFont);k=b.graphics.measureText(j);i.addString(j,c.tablature.drawing.DrawingResources.noteFont,g-k/2,h)}}else{var j=d.effect.deadNote?"X":l.string(d.value);
j=d.effect.ghostNote?"("+j+")":j;b.graphics.set_font(c.tablature.drawing.DrawingResources.noteFont);var k=b.graphics.measureText(j);i.addString(j,c.tablature.drawing.DrawingResources.noteFont,g-k/2,h)}this.paintEffects(a,b,d,e,f,h)},calculateBeamY:function(a,b,d,e){var f=Math.round(10*a.scale),g,h,i;if(d==2){if(b.minNote!=b.firstMinNote&&b.minNote!=b.lastMinNote)return this.getNoteTablaturePosY(a,b.minNote)+0;d=0;g=b.firstMinNote.voice.beat.fullX();h=b.lastMinNote.voice.beat.fullX();i=Math.round(this.getNoteTablaturePosY(a,
b.firstMinNote)+0);a=Math.round(this.getNoteTablaturePosY(a,b.lastMinNote)+0);if(i>a&&i-a>f)a=i-f;if(a>i&&a-i>f)i=a-f}else{if(b.maxNote!=b.firstMaxNote&&b.maxNote!=b.lastMaxNote)return this.getNoteTablaturePosY(a,b.maxNote)-0;d=0;g=b.firstMaxNote.voice.beat.fullX();h=b.lastMaxNote.voice.beat.fullX();i=Math.round(this.getNoteTablaturePosY(a,b.firstMaxNote)-0);a=Math.round(this.getNoteTablaturePosY(a,b.lastMaxNote)-0);if(i<a&&a-i>f)a=i+f;if(a<i&&i-a>f)i=a+f}if(i-a!=0&&g-h!=0&&g-e!=0)d=Math.round((i-
a)/(g-h)*(g-e));return i-d},paintBeam:function(a,b,d,e,f){if(!(d.isRestVoice()||this.line.tablature.getStaveSetting("tablature","rhythm",false)==false)){var g=d.index==0?b.get(9):b.get(5),h=d.index==0?b.get(12):b.get(8);if(d.duration.value>=c.model.Duration.HALF){b=d.maxStringNote.noteSize.x/2;var i=Math.floor(f+this.getNoteTablaturePosY(a,d.maxStringNote)+a.stringSpacing/1.5);f=f+this.spacing.get(16);h.addLine(e+b,i,e+b,f);if(d.duration.value>=c.model.Duration.QUARTER){h=d.duration.index()-2;if(h>
0){if(d.joinedType==c.tablature.model.JoinedType.NoneRight){i=Math.round(e+b);d=Math.round(e+6*a.scale+b)}else if(d.joinedType==c.tablature.model.JoinedType.NoneLeft){i=Math.round(e-6*a.scale+b);d=Math.round(e+b)}else{i=Math.round(d.leftJoin.beat.fullX()+b);d=Math.round(d.rightJoin.beat.fullX()+d.rightJoin.maxStringNote.noteSize.x/2)}c.tablature.drawing.NotePainter.paintBar(g,i,f,d,f,h,1,a.scale)}}}}},paintVoice:function(a,b,d,e,f){if(!d.isEmpty){for(var g=0,h=d.notes;g<h.length;){var i=h[g];++g;
this.paintNote(a,b,i,e,f)}this.paintBeam(a,b,d,e,f);this.paintVoiceEffects(a,b,d,e,f)}},paintBeat:function(a,b,d,e,f){for(var g=0,h=d.voices;g<h.length;){var i=h[g];++g;this.paintVoice(a,b,i,e,f)}this.paintBeatEffects(a,b,d,e,f)},paintBeats:function(a,b,d,e,f){var g=0;for(d=d.beats;g<d.length;){var h=d[g];++g;h=h;this.paintBeat(a,b,h,e+h.x,f)}},paintTimeSignature:function(a,b,d,e,f){if(!(!d.header.shouldPaintTimeSignature(d)||!this.line.shouldPaintFeature(c.tablature.staves.StaveFeatures.TimeSignature)||
this.line.track.stringCount()<3)){f+=this.spacing.get(12);var g=2*a.scale|0,h=this.spacing.spacing[12],i=h/2-g*2|0,j=i/15,k=e=e+d.calculateClefSpacing(a)+d.calculateKeySignatureSpacing(a)+Math.floor(15*a.scale);h=h-i-g;if(d.header.timeSignature.numerator>9&&d.header.timeSignature.denominator.value<10)k+=Math.round(10*j/2);if(d.header.timeSignature.numerator<10&&d.header.timeSignature.denominator.value>9)e+=Math.round(10*j/2);this.paintTimeSignatureNumber(a,b,d.header.timeSignature.numerator,e,f+g,
j);this.paintTimeSignatureNumber(a,b,d.header.timeSignature.denominator.value,k,f+h,j)}},paintClef:function(a,b,d){d.isFirstOfLine()},paintMeasure:function(a,b,d,e,f){e=e+d.x;this.paintTimeSignature(a,b,d,e,f);this.paintDivisions(a,b,d,e,f,5,this.spacing.get(12),this.spacing.spacing[12]);this.paintClef(a,b,d,e,f);e+=d.getDefaultSpacings(a);this.paintBeats(a,b,d,e,f)},paintStave:function(a,b,d,e){e=e+this.spacing.get(12);for(var f=0,g=this.line.track.stringCount();f<g;){f++;b.get(2).startFigure();
b.get(2).addLine(d,e,d+this.line.width,e);e+=a.stringSpacing}},prepare:function(a){a.effectsCache.accentuatedNote&&this.spacing.set(1,this.layout.effectSpacing);a.effectsCache.letRing&&this.spacing.set(3,this.layout.effectSpacing);a.effectsCache.tapSlapPop&&this.spacing.set(2,this.layout.effectSpacing);a.effectsCache.palmMute&&this.spacing.set(4,this.layout.effectSpacing);a.effectsCache.harmonic&&this.spacing.set(8,this.layout.effectSpacing);a.effectsCache.beatVibrato&&this.spacing.set(5,this.layout.effectSpacing);
a.effectsCache.vibrato&&this.spacing.set(6,this.layout.effectSpacing);a.effectsCache.fadeIn&&this.spacing.set(7,this.layout.effectSpacing);this.line.tablature.getStaveSetting("tablature","rhythm",false)==true&&this.spacing.set(15,20*this.layout.scale);a.effectsCache.bend&&this.spacing.spacing[9]<a.effectsCache.bendOverflow&&this.spacing.set(9,a.effectsCache.bendOverflow);if(a.effectsCache.fingering>0){var b=a.effectsCache.fingering*this.layout.effectSpacing;this.spacing.spacing[16]<b&&this.spacing.set(16,
b)}if(a.effectsCache.tremoloBar){this.spacing.spacing[10]<a.effectsCache.tremoloBarTopOverflow&&this.spacing.set(10,a.effectsCache.tremoloBarTopOverflow);this.spacing.spacing[14]<a.effectsCache.tremoloBarBottomOverflow&&this.spacing.set(14,a.effectsCache.tremoloBarBottomOverflow)}},getLineBottomSpacing:function(){return 13},getLineTopSpacing:function(){return 12},getBarBottomSpacing:function(){return 14},getBarTopSpacing:function(){return 11},getStaveId:function(){return"tablature"},__class__:c.tablature.staves.TablatureStave});
var p={};p.ds={};p.ds.StringMap=function(){this.h={}};p.ds.StringMap.__name__=true;p.ds.StringMap.__interfaces__=[O];p.ds.StringMap.prototype={exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},__class__:p.ds.StringMap};p.xml={};p.xml._Fast={};p.xml._Fast.NodeAccess=function(a){this.__x=a};p.xml._Fast.NodeAccess.__name__=true;p.xml._Fast.NodeAccess.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(b==
null)throw(this.__x.nodeType==o.Document?"Document":this.__x.get_nodeName())+" is missing element "+a;return new p.xml.Fast(b)},__class__:p.xml._Fast.NodeAccess};p.xml._Fast.AttribAccess=function(a){this.__x=a};p.xml._Fast.AttribAccess.__name__=true;p.xml._Fast.AttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==o.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);if(b==null)throw this.__x.get_nodeName()+" is missing attribute "+a;return b},__class__:p.xml._Fast.AttribAccess};
p.xml._Fast.HasAttribAccess=function(a){this.__x=a};p.xml._Fast.HasAttribAccess.__name__=true;p.xml._Fast.HasAttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==o.Document)throw"Cannot access document attribute "+a;return this.__x.exists(a)},__class__:p.xml._Fast.HasAttribAccess};p.xml._Fast.HasNodeAccess=function(a){this.__x=a};p.xml._Fast.HasNodeAccess.__name__=true;p.xml._Fast.HasNodeAccess.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:p.xml._Fast.HasNodeAccess};
p.xml._Fast.NodeListAccess=function(a){this.__x=a};p.xml._Fast.NodeListAccess.__name__=true;p.xml._Fast.NodeListAccess.prototype={resolve:function(a){var b=new L;for(a=this.__x.elementsNamed(a);a.hasNext();){var d=a.next();b.add(new p.xml.Fast(d))}return b},__class__:p.xml._Fast.NodeListAccess};p.xml.Fast=function(a){if(a.nodeType!=o.Document&&a.nodeType!=o.Element)throw"Invalid nodeType "+l.string(a.nodeType);this.x=a;this.node=new p.xml._Fast.NodeAccess(a);this.nodes=new p.xml._Fast.NodeListAccess(a);
this.att=new p.xml._Fast.AttribAccess(a);this.has=new p.xml._Fast.HasAttribAccess(a);this.hasNode=new p.xml._Fast.HasNodeAccess(a)};p.xml.Fast.__name__=true;p.xml.Fast.prototype={get_elements:function(){var a=this.x.elements();return{hasNext:M(a,a.hasNext),next:function(){var b=a.next();if(b==null)return null;return new p.xml.Fast(b)}}},get_innerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.get_name()+" does not have data";var b=a.next(),d=a.next();if(d!=null){if(b.nodeType==
o.PCData&&d.nodeType==o.CData&&q.trim(b.get_nodeValue())==""){b=a.next();if(b==null||b.nodeType==o.PCData&&q.trim(b.get_nodeValue())==""&&a.next()==null)return d.get_nodeValue()}throw this.get_name()+" does not only have data";}if(b.nodeType!=o.PCData&&b.nodeType!=o.CData)throw this.get_name()+" does not have data";return b.get_nodeValue()},get_name:function(){return this.x.nodeType==o.Document?"Document":this.x.get_nodeName()},__class__:p.xml.Fast};p.xml.Parser=function(){};p.xml.Parser.__name__=
true;p.xml.Parser.parse=function(a){var b=o.createDocument();p.xml.Parser.doParse(a,0,b);return b};p.xml.Parser.doParse=function(a,b,d){if(b==null)b=0;for(var e=null,f=1,g=1,h=null,i=0,j=0,k=0,m=a.charCodeAt(b),n=new F;m==m;){switch(f){case 0:switch(m){case 10:case 13:case 9:case 32:break;default:f=g;continue}break;case 1:switch(m){case 60:f=0;g=2;break;default:i=b;f=13;continue}break;case 13:if(m==60){f=o.createPCData(n.b+v.substr(a,i,b-i));n=new F;d.addChild(f);j++;f=0;g=2}else if(m==38){n.addSub(a,
i,b-i);f=18;g=13;i=b+1}break;case 17:if(m==93&&a.charCodeAt(b+1)==93&&a.charCodeAt(b+2)==62){f=o.createCData(v.substr(a,i,b-i));d.addChild(f);j++;b+=2;f=1}break;case 2:switch(m){case 33:if(a.charCodeAt(b+1)==91){b+=2;if(v.substr(a,b,6).toUpperCase()!="CDATA[")throw"Expected <![CDATA[";b+=5;f=17;i=b+1}else if(a.charCodeAt(b+1)==68||a.charCodeAt(b+1)==100){if(v.substr(a,b+2,6).toUpperCase()!="OCTYPE")throw"Expected <!DOCTYPE";b+=8;f=16;i=b+1}else if(a.charCodeAt(b+1)!=45||a.charCodeAt(b+2)!=45)throw"Expected <!--";
else{b+=2;f=15;i=b+1}break;case 63:f=14;i=b;break;case 47:if(d==null)throw"Expected node name";i=b+1;f=0;g=10;break;default:f=3;i=b;continue}break;case 3:if(!(m>=97&&m<=122||m>=65&&m<=90||m>=48&&m<=57||m==58||m==46||m==95||m==45)){if(b==i)throw"Expected node name";e=o.createElement(v.substr(a,i,b-i));d.addChild(e);f=0;g=4;continue}break;case 4:switch(m){case 47:f=11;j++;break;case 62:f=9;j++;break;default:f=5;i=b;continue}break;case 5:if(!(m>=97&&m<=122||m>=65&&m<=90||m>=48&&m<=57||m==58||m==46||
m==95||m==45)){if(i==b)throw"Expected attribute name";h=v.substr(a,i,b-i);if(e.exists(h))throw"Duplicate attribute";f=0;g=6;continue}break;case 6:switch(m){case 61:f=0;g=7;break;default:throw"Expected =";}break;case 7:switch(m){case 34:case 39:f=8;i=b;break;default:throw'Expected "';}break;case 8:if(m==a.charCodeAt(i)){g=v.substr(a,i+1,b-i-1);e.set(h,g);f=0;g=4}break;case 9:i=b=p.xml.Parser.doParse(a,b,e);f=1;break;case 11:switch(m){case 62:f=1;break;default:throw"Expected >";}break;case 12:switch(m){case 62:j==
0&&d.addChild(o.createPCData(""));return b;default:throw"Expected >";}case 10:if(!(m>=97&&m<=122||m>=65&&m<=90||m>=48&&m<=57||m==58||m==46||m==95||m==45)){if(i==b)throw"Expected node name";if(v.substr(a,i,b-i)!=d.get_nodeName())throw"Expected </"+d.get_nodeName()+">";f=0;g=12;continue}break;case 15:if(m==45&&a.charCodeAt(b+1)==45&&a.charCodeAt(b+2)==62){d.addChild(o.createComment(v.substr(a,i,b-i)));b+=2;f=1}break;case 16:if(m==91)k++;else if(m==93)k--;else if(m==62&&k==0){d.addChild(o.createDocType(v.substr(a,
i,b-i)));f=1}break;case 14:if(m==63&&a.charCodeAt(b+1)==62){b++;f=v.substr(a,i+1,b-i-2);d.addChild(o.createProcessingInstruction(f));f=1}break;case 18:if(m==59){i=v.substr(a,i,b-i);if(i.charCodeAt(0)==35){i=i.charCodeAt(1)==120?l.parseInt("0"+v.substr(i,1,i.length-1)):l.parseInt(v.substr(i,1,i.length-1));n.b+=l.string(String.fromCharCode(i))}else n.b+=p.xml.Parser.escapes.exists(i)?l.string(p.xml.Parser.escapes.get(i)):l.string("&"+i+";");i=b+1;f=g}break}m=a.charCodeAt(++b)}if(f==1){i=b;f=13}if(f==
13){if(b!=i||j==0)d.addChild(o.createPCData(n.b+v.substr(a,i,b-i)));return b}throw"Unexpected end";};var x={};x.Boot=function(){};x.Boot.__name__=true;x.Boot.__string_rec=function(a,b){if(a==null)return"null";if(b.length>=5)return"<...>";var d=typeof a;if(d=="function"&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(a.length==2)return a[0];d=a[0]+"(";b+="\t";for(var e=2,f=a.length;e<f;){var g=e++;d+=g!=2?","+x.Boot.__string_rec(a[g],b):x.Boot.__string_rec(a[g],
b)}return d+")"}e=a.length;d="[";b+="\t";for(f=0;f<e;){g=f++;d+=(g>0?",":"")+x.Boot.__string_rec(a[g],b)}d+="]";return d}try{f=a.toString}catch(h){return"???"}if(f!=null&&f!=Object.toString){d=a.toString();if(d!="[object Object]")return d}f=null;d="{\n";b+="\t";e=a.hasOwnProperty!=null;for(f in a)if(!(e&&!a.hasOwnProperty(f)))if(!(f=="prototype"||f=="__class__"||f=="__super__"||f=="__interfaces__"||f=="__properties__")){if(d.length!=2)d+=", \n";d+=b+f+" : "+x.Boot.__string_rec(a[f],b)}b=b.substring(1);
d+="\n"+b+"}";return d;case "function":return"<function>";case "string":return a;default:return String(a)}};x.Boot.__interfLoop=function(a,b){if(a==null)return false;if(a==b)return true;var d=a.__interfaces__;if(d!=null)for(var e=0,f=d.length;e<f;){var g=e++;g=d[g];if(g==b||x.Boot.__interfLoop(g,b))return true}return x.Boot.__interfLoop(a.__super__,b)};x.Boot.__instanceof=function(a,b){if(b==null)return false;switch(b){case V:return(a|0)===a;case P:return typeof a=="number";case Q:return typeof a==
"boolean";case String:return typeof a=="string";case W:return true;default:if(a!=null){if(typeof b=="function"){if(a instanceof b){if(b==Array)return a.__enum__==null;return true}if(x.Boot.__interfLoop(a.__class__,b))return true}}else return false;if(b==X&&a.__name__!=null)return true;if(b==Y&&a.__ename__!=null)return true;return a.__enum__==b}};x.Boot.__cast=function(a,b){if(x.Boot.__instanceof(a,b))return a;else throw"Cannot cast "+l.string(a)+" to "+l.string(b);};var S=0;if(Array.prototype.indexOf)v.remove=
function(a,b){var d=a.indexOf(b);if(d==-1)return false;a.splice(d,1);return true};Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=true;Array.prototype.__class__=Array;Array.__name__=true;var V={__name__:["Int"]},W={__name__:["Dynamic"]},P=Number;P.__name__=["Float"];var Q=Boolean;
Q.__ename__=["Bool"];var X={__name__:["Class"]},Y={};o.Element="element";o.PCData="pcdata";o.CData="cdata";o.Comment="comment";o.DocType="doctype";o.ProcessingInstruction="processingInstruction";o.Document="document";c.file.alphatex.AlphaTexParser.EOL=String.fromCharCode(0);c.file.alphatex.AlphaTexParser.TRACK_CHANNELS=[0,1];c.file.gpx.FileSystem.HEADER_BCFS=1397113666;c.file.gpx.FileSystem.HEADER_BCFZ=1514554178;c.file.guitarpro.GpReaderBase.DEFAULT_CHARSET="UTF-8";c.file.guitarpro.GpReaderBase.BEND_POSITION=
60;c.file.guitarpro.GpReaderBase.BEND_SEMITONE=25;c.io.BitInputStream.BYTE_SIZE=8;c.io.DataOutputStream.LN2=Math.log(2);c.midi.MidiController.ALL_NOTES_OFF=123;c.midi.MidiController.BALANCE=10;c.midi.MidiController.CHORUS=93;c.midi.MidiController.DATA_ENTRY_LSB=38;c.midi.MidiController.DATA_ENTRY_MSB=6;c.midi.MidiController.EXPRESSION=11;c.midi.MidiController.PHASER=95;c.midi.MidiController.REVERB=91;c.midi.MidiController.RPN_LSB=100;c.midi.MidiController.RPN_MBS=101;c.midi.MidiController.TREMOLO=
92;c.midi.MidiController.VOLUME=7;c.midi.MidiMessageDataUtils.TICK_MOVE=1;c.midi.MidiMessageFileUtils.TICK_MOVE=1;c.midi.MidiMessageFileUtils.REST_MESSAGE=0;c.midi.MidiSequenceParser.DEFAULT_BEND=64;c.midi.MidiSequenceParser.DEFAULT_BEND_SEMITONE=2.75;c.midi.MidiSequenceParser.DEFAULT_DURATION_DEAD=30;c.midi.MidiSequenceParser.DEFAULT_DURATION_PM=80;c.midi.MidiSequenceParser.DEFAULT_METRONOME_KEY=37;c.midi.MidiSequenceParserFlags.ADD_DEFAULT_CONTROLS=1;c.midi.MidiSequenceParserFlags.ADD_MIXER_MESSAGES=
2;c.midi.MidiSequenceParserFlags.ADD_METRONOME=4;c.midi.MidiSequenceParserFlags.ADD_FIRST_TICK_MOVE=8;c.midi.MidiSequenceParserFlags.DEFAULT_PLAY_FLAGS=15;c.model.Beat.MAX_VOICES=2;c.model.BeatStrokeDirection.None=0;c.model.BeatStrokeDirection.Up=1;c.model.BeatStrokeDirection.Down=2;c.model.Color.Black=c.model.Color.fromRgb(0,0,0);c.model.Color.Red=c.model.Color.fromRgb(255,0,0);c.model.Duration.MIN_TIME=Math.floor(Math.floor(c.model.Duration.QUARTER_TIME*(4/c.model.Duration.SIXTY_FOURTH))*2/3);c.model.Duration.QUARTER_TIME=
960;c.model.Duration.WHOLE=1;c.model.Duration.HALF=2;c.model.Duration.QUARTER=4;c.model.Duration.EIGHTH=8;c.model.Duration.SIXTEENTH=16;c.model.Duration.THIRTY_SECOND=32;c.model.Duration.SIXTY_FOURTH=64;c.model.HeaderFooterElements.NONE=0;c.model.HeaderFooterElements.TITLE=1;c.model.HeaderFooterElements.SUBTITLE=2;c.model.HeaderFooterElements.ARTIST=4;c.model.HeaderFooterElements.ALBUM=8;c.model.HeaderFooterElements.WORDS=16;c.model.HeaderFooterElements.MUSIC=32;c.model.HeaderFooterElements.WORDS_AND_MUSIC=
64;c.model.HeaderFooterElements.COPYRIGHT=128;c.model.HeaderFooterElements.PAGE_NUMBER=256;c.model.HeaderFooterElements.ALL=511;c.model.Lyrics.MAX_LINE_COUNT=5;c.model.Marker.DEFAULT_COLOR=c.model.Color.Red;c.model.Marker.DEFAULT_TITLE="Untitled";c.model.Measure.DEFAULT_CLEF=0;c.model.MeasureClef.Treble=0;c.model.MeasureClef.Bass=1;c.model.MeasureClef.Tenor=2;c.model.MeasureClef.Alto=3;c.model.MeasureHeader.DEFAULT_KEY_SIGNATURE=0;c.model.MidiChannel.DEFAULT_PERCUSSION_CHANNEL=9;c.model.MidiChannel.DEFAULT_INSTRUMENT=
25;c.model.MidiChannel.DEFAULT_VOLUME=127;c.model.MidiChannel.DEFAULT_BALANCE=64;c.model.MidiChannel.DEFAULT_CHORUS=0;c.model.MidiChannel.DEFAULT_REVERB=0;c.model.MidiChannel.DEFAULT_PHASER=0;c.model.MidiChannel.DEFAULT_TREMOLO=0;c.model.SlideType.FastSlideTo=0;c.model.SlideType.SlowSlideTo=1;c.model.SlideType.OutDownWards=2;c.model.SlideType.OutUpWards=3;c.model.SlideType.IntoFromBelow=4;c.model.SlideType.IntoFromAbove=5;c.model.TripletFeel.None=0;c.model.TripletFeel.Eighth=1;c.model.TripletFeel.Sixteenth=
2;c.model.Tuning.TUNING_REGEX=new K("([a-g]b?)([0-9])","i");c.model.Tuplet.NORMAL=new c.model.Tuplet;c.model.Velocities.MIN_VELOCITY=15;c.model.Velocities.VELOCITY_INCREMENT=16;c.model.Velocities.PIANO_PIANISSIMO=15;c.model.Velocities.PIANISSIMO=31;c.model.Velocities.PIANO=47;c.model.Velocities.MEZZO_PIANO=63;c.model.Velocities.MEZZO_FORTE=79;c.model.Velocities.FORTE=95;c.model.Velocities.FORTISSIMO=111;c.model.Velocities.FORTE_FORTISSIMO=127;c.model.Velocities.DEFAULT=95;c.model.VoiceDirection.None=
0;c.model.VoiceDirection.Up=1;c.model.VoiceDirection.Down=2;c.model.effects.BendEffect.SEMITONE_LENGTH=1;c.model.effects.BendEffect.MAX_POSITION=12;c.model.effects.BendEffect.MAX_VALUE=12;c.model.effects.BendTypes.None=0;c.model.effects.BendTypes.Bend=1;c.model.effects.BendTypes.BendRelease=2;c.model.effects.BendTypes.BendReleaseBend=3;c.model.effects.BendTypes.Prebend=4;c.model.effects.BendTypes.PrebendRelease=5;c.model.effects.BendTypes.Dip=6;c.model.effects.BendTypes.Dive=7;c.model.effects.BendTypes.ReleaseUp=
8;c.model.effects.BendTypes.InvertedDip=9;c.model.effects.BendTypes.Return=10;c.model.effects.BendTypes.ReleaseDown=11;c.model.effects.FingeringType.Unknown=-2;c.model.effects.FingeringType.NoOrDead=-1;c.model.effects.FingeringType.Thumb=0;c.model.effects.FingeringType.IndexFinger=1;c.model.effects.FingeringType.MiddleFinger=2;c.model.effects.FingeringType.AnnularFinger=3;c.model.effects.FingeringType.LittleFinger=4;c.model.effects.GraceEffectTransition.None=0;c.model.effects.GraceEffectTransition.Slide=
1;c.model.effects.GraceEffectTransition.Bend=2;c.model.effects.GraceEffectTransition.Hammer=3;c.model.effects.HarmonicEffect.NATURAL_FREQUENCIES=[[12,12],[9,28],[5,28],[7,19],[4,28],[3,31]];c.model.effects.HarmonicType.None=-1;c.model.effects.HarmonicType.Natural=0;c.model.effects.HarmonicType.Artificial=1;c.model.effects.HarmonicType.Tapped=2;c.model.effects.HarmonicType.Pinch=3;c.model.effects.HarmonicType.Semi=4;c.platform.PlatformFactory.SVG_CANVAS="svg";c.platform.svg.FontSizes.TIMES_NEW_ROMAN_11PT=
[3,4,5,6,6,9,9,2,4,4,6,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,5,10,8,7,7,8,7,6,7,8,4,4,8,7,10,8,8,7,8,7,5,8,8,7,11,8,8,7,4,3,4,5,6,4,5,5,5,5,5,4,5,6,3,3,6,3,9,6,6,6,5,4,4,4,5,6,7,6,6,5,5,2,5,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,6,6,6,6,2,5,4,8,4,6,6,0,8,6,4,6,3,3,4,5,5,4,4,3,3,6,8,8,8,5,8,8,8,8,8,8,11,7,7,7,7,7,4,4,4,4,8,8,8,8,8,8,8,6,8,8,8,8,8,8,6,5,5,5,5,5,5,5,8,5,5,5,5,5,3,3,3,3,6,6,6,6,6,6,6,6,6,5,5,5,5,6,6];c.platform.svg.FontSizes.ARIAL_11PT=[3,2,4,6,6,10,
7,2,4,4,4,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,6,11,8,7,7,7,6,6,8,7,2,5,7,6,8,7,8,6,8,7,7,6,7,8,10,7,8,7,3,3,3,5,6,4,6,6,6,6,6,4,6,6,2,2,5,2,8,6,6,6,6,4,6,3,6,6,10,6,6,6,4,2,4,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,6,6,7,6,2,6,4,8,4,6,6,0,8,6,4,6,4,4,4,6,6,4,4,4,5,6,9,10,10,6,8,8,8,8,8,8,11,7,6,6,6,6,2,2,2,2,8,7,8,8,8,8,8,6,8,7,7,7,7,8,7,7,6,6,6,6,6,6,10,6,6,6,6,6,2,2,2,2,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6];c.platform.svg.FontSizes.CONTROL_CHARS=32;c.tablature.PageViewLayout.LAYOUT_ID=
"page";c.tablature.PageViewLayout.PAGE_PADDING=new c.model.Padding(20,40,20,40);c.tablature.PageViewLayout.WIDTH_ON_100=795;c.tablature.HorizontalViewLayout.LAYOUT_ID="horizontal";c.tablature.HorizontalViewLayout.PAGE_PADDING=c.tablature.PageViewLayout.PAGE_PADDING;c.tablature.Tablature.DEFAULT_LAYOUT=c.tablature.PageViewLayout.LAYOUT_ID;c.tablature.drawing.DrawingLayers.Background=0;c.tablature.drawing.DrawingLayers.LayoutBackground=1;c.tablature.drawing.DrawingLayers.Lines=2;c.tablature.drawing.DrawingLayers.MainComponents=
3;c.tablature.drawing.DrawingLayers.MainComponentsDraw=4;c.tablature.drawing.DrawingLayers.Voice2=5;c.tablature.drawing.DrawingLayers.VoiceEffects2=6;c.tablature.drawing.DrawingLayers.VoiceEffectsDraw2=7;c.tablature.drawing.DrawingLayers.VoiceDraw2=8;c.tablature.drawing.DrawingLayers.Voice1=9;c.tablature.drawing.DrawingLayers.VoiceEffects1=10;c.tablature.drawing.DrawingLayers.VoiceEffectsDraw1=11;c.tablature.drawing.DrawingLayers.VoiceDraw1=12;c.tablature.drawing.DrawingLayers.Red=13;c.tablature.drawing.MusicFont.Num0=
"M 0.00 7.99 C -0.00 10.44 0.57 13.08 2.37 14.84 4.18 16.54 7.44 16.36 8.93 14.32 10.61 12.22 10.97 9.39 10.78 6.78 10.62 4.66 9.96 2.42 8.31 0.97 6.53 -0.48 3.60 -0.29 2.11 1.49 0.53 3.25 -0.00 5.69 0.00 7.99 z M 5.46 15.13 C 4.46 15.17 3.80 14.18 3.64 13.29 3.03 10.66 3.00 7.93 3.19 5.25 3.32 3.95 3.53 2.57 4.31 1.48 4.74 0.87 5.67 0.62 6.26 1.14 c 0.83 0.69 1.03 1.84 1.25 2.84 0.43 2.46 0.39 4.99 0.13 7.47 -0.15 1.22 -0.44 2.57 -1.43 3.40 -0.21 0.15 -0.48 0.25 -0.75 0.26 z";c.tablature.drawing.MusicFont.Num1=
"m 2.36 14.48 c 0 -3.87 0 -7.74 0 -11.61 C 1.69 4.15 1.01 5.42 0.34 6.7 0.23 6.54 -0.11 6.44 0.06 6.22 0.83 4.14 1.59 2.07 2.36 -8.04e-8 c 1.09 0 2.18 0 3.26 0 0 4.81 0 9.62 0 14.43 0.11 0.73 1 0.75 1.57 0.86 0 0.24 0 0.47 0 0.71 -2.13 0 -4.25 0 -6.38 0 0 -0.22 0 -0.44 0 -0.66 C 1.34 15.22 1.98 15.2 2.31 14.7 l 0.04 -0.11 0.01 -0.11 0 0 z";c.tablature.drawing.MusicFont.Num2="M 3.85 1.11 C 3.32 1.21 2.1 1.37 2.27 2.07 2.67 2.48 3.62 2.08 4.03 2.69 4.75 3.6 4.54 5.13 3.54 5.77 2.47 6.55 0.7 5.98 0.42 4.65 0.08 3.16 0.99 1.68 2.2 0.89 3.47 -0.05 5.13 -0.15 6.63 0.14 8.35 0.44 10.17 1.45 10.71 3.21 11.09 4.36 10.77 5.67 9.91 6.52 8.88 7.62 7.45 8.16 6.21 8.97 5.29 9.48 4.4 10.07 3.69 10.86 3.15 11.41 2.75 12.06 2.32 12.69 3.58 11.96 5.15 11.47 6.56 12.08 c 0.95 0.31 1.61 1.07 2.42 1.6 0.8 0.43 1.88 -0.18 2.04 -1.06 0.14 -0.38 -0.08 -1.05 0.51 -0.88 0 1.34 -0.22 2.91 -1.38 3.76 -1.28 0.84 -2.98 0.49 -4.21 -0.25 -1.07 -0.69 -2.23 -1.52 -3.58 -1.31 -0.7 0.04 -1.55 0.4 -1.55 1.21 0.03 0.51 -0.25 0.64 -0.69 0.57 C -0.13 15.35 0.24 14.47 0.46 13.97 1.46 11.79 3.35 10.24 4.96 8.53 6.02 7.37 7.19 6.26 7.94 4.87 8.18 4.24 7.99 3.53 7.75 2.92 7.1 1.44 5.3 1.1 3.85 1.11 z";
c.tablature.drawing.MusicFont.Num3="M 3.22 8.29 C 3.23 8.01 3.1 7.62 3.54 7.72 4.49 7.43 5.46 7.06 6.26 6.45 7.1 5.78 7.29 4.61 7.05 3.61 6.73 2.07 5.23 0.71 3.6 0.92 2.89 0.97 2.15 1.23 1.72 1.82 1.74 2.68 3.01 2.05 3.3 2.84 3.67 3.53 3.69 4.51 3.15 5.12 2.55 5.68 1.58 5.71 0.85 5.42 0.01 5.03 -0.06 3.95 0.03 3.15 0.13 1.84 1.12 0.72 2.37 0.37 3.58 0.02 4.88 -0.09 6.13 0.08 8.23 0.48 10.01 2.41 9.97 4.59 9.99 5.54 9.71 6.56 8.9 7.13 8.55 7.51 7.7 7.79 7.51 8.03 8.58 8.44 9.59 9.24 9.84 10.4 10.24 11.96 9.69 13.7 8.45 14.73 7.42 15.7 5.97 16.12 4.57 15.99 3.13 15.92 1.48 15.62 0.59 14.37 -0.04 13.45 -0.17 12.21 0.2 11.17 0.58 10.38 1.62 10.33 2.38 10.46 c 0.72 0.1 1.21 0.8 1.18 1.51 0.05 0.67 -0.18 1.54 -0.95 1.67 -0.44 0.08 -1.01 -0.03 -0.69 0.57 0.43 0.7 1.47 0.83 2.25 0.83 C 5.8 14.9 7.14 13.37 7.18 11.75 7.33 10.64 6.6 9.62 5.64 9.14 4.9 8.75 4.13 8.36 3.29 8.31 c -0.03 0 -0.05 -0.01 -0.08 -0.01 z";
c.tablature.drawing.MusicFont.Num4="M 8.59 0 C 7.19 2.33 5.9 4.72 4.32 6.93 3.6 7.94 2.96 9.02 2.27 10.05 c -0.32 0.5 -0.65 1 -0.97 1.51 1.39 0 2.78 0 4.17 0 0 -1.73 0 -3.45 0 -5.18 C 6.65 5.4 7.83 4.42 9.01 3.44 c 0 2.71 0 5.42 0 8.12 0.5 0 1 0 1.5 0 0 0.24 0 0.47 0 0.71 -0.5 0 -1 0 -1.5 0 0.07 0.8 -0.13 1.72 0.32 2.42 0.26 0.44 1.11 0.34 1.18 0.79 -0.05 0.19 0.14 0.61 -0.19 0.52 -2.14 0 -4.29 0 -6.43 0 0 -0.24 0 -0.47 0 -0.71 0.55 -0.2 1.46 -0.31 1.48 -1.05 0.05 -0.65 0.06 -1.31 0.11 -1.97 -1.82 0 -3.65 0 -5.47 0 C 0 12.03 0 11.8 0 11.56 1.69 10.37 2.77 8.48 3.38 6.55 3.79 4.36 4.2 2.18 4.61 0 5.94 0 7.26 0 8.59 0 z";
c.tablature.drawing.MusicFont.Num5="M 0.66 0 C 1.76 0.32 2.92 0.45 4.06 0.55 5.57 0.61 7.1 0.43 8.57 0.05 8.59 0.92 8.37 1.88 7.62 2.41 7 2.88 6.18 2.89 5.45 3 4.24 3.07 3.01 2.97 1.83 2.7 1.48 2.4 1.68 3.01 1.62 3.22 c 0 1.27 0 2.53 0 3.8 0.82 -0.93 2.05 -1.53 3.31 -1.39 1.75 0.04 3.55 1 4.22 2.68 C 9.94 10.33 9.22 12.72 7.73 14.23 6.61 15.47 4.92 16.14 3.26 15.99 2.03 15.88 0.67 15.28 0.25 14.04 -0.02 13.19 -0.16 12.2 0.25 11.37 0.73 10.53 1.87 10.47 2.71 10.7 3.53 10.9 3.87 11.82 3.79 12.59 3.8 13.31 3.33 14.07 2.56 14.13 2.18 14.28 1.61 14.49 2.22 14.78 3.24 15.48 4.8 15.51 5.7 14.58 6.89 13.39 7.07 11.57 7 9.96 6.89 8.75 6.37 7.41 5.22 6.84 3.97 6.29 2.37 6.8 1.68 7.98 1.53 8.17 1.19 8.03 0.96 8.07 0.62 8.17 0.64 7.92 0.66 7.66 c 0 -2.55 0 -5.11 0 -7.66 z";
c.tablature.drawing.MusicFont.Num6="M 7.93 1.53 C 7.56 0.85 6.71 0.49 5.94 0.52 4.82 0.56 4.18 1.66 3.88 2.62 3.35 4.32 3.15 6.16 3.49 7.93 3.54 8.37 3.92 8.63 4.13 8.12 5.06 7.07 6.65 6.72 7.97 7.14 9.42 7.71 10.23 9.29 10.37 10.77 10.53 12.37 9.98 14.11 8.63 15.06 6.81 16.44 3.96 16.31 2.39 14.6 0.9 12.97 0.19 10.75 0.04 8.58 -0.18 6.28 0.56 3.93 2.03 2.15 3.04 0.86 4.6 -0.11 6.28 0.01 7.59 0.02 8.97 0.64 9.54 1.88 9.98 2.82 10.18 4.13 9.38 4.95 8.96 5.48 8.26 5.69 7.61 5.5 6.9 5.4 6.31 4.82 6.25 4.1 6.08 3.28 6.33 2.33 7.09 1.89 7.34 1.71 7.62 1.57 7.93 1.53 z M 7.71 11.72 C 7.67 10.66 7.76 9.51 7.19 8.56 6.59 7.5 4.72 7.59 4.31 8.78 3.84 10.14 3.82 11.61 3.98 13.03 c 0.14 0.82 0.31 1.87 1.2 2.2 0.72 0.29 1.63 -0.01 1.94 -0.74 0.41 -0.86 0.57 -1.82 0.59 -2.77 z";
c.tablature.drawing.MusicFont.Num7="M 2.97 16 C 3.15 14.66 3.24 13.27 3.84 12.02 4.33 10.82 5.19 9.83 6.14 8.96 7.36 7.69 8.64 6.4 9.38 4.79 9.59 4.25 9.66 3.67 9.79 3.12 8.69 3.83 7.34 4.39 6.02 3.99 4.95 3.75 4.06 3.09 3.08 2.65 2.38 2.35 1.34 2.38 0.98 3.17 0.78 3.58 0.62 3.96 0.12 3.83 -0.13 3.85 0.06 3.43 0 3.26 0 2.34 0 1.43 0 0.52 0.38 0.45 0.63 0.56 0.69 0.97 0.88 1.7 1.76 1.48 2.19 1.12 2.92 0.67 3.64 0.1 4.52 0 5.48 -0.03 6.3 0.52 7.07 1.02 7.73 1.37 8.7 1.7 9.31 1.08 9.75 0.84 9.47 -0.08 10.01 0 10.28 -0.03 10.5 -0.03 10.4 0.31 10.38 1.58 10.46 2.86 10.34 4.13 10.24 5.12 9.88 6.06 9.33 6.89 8.72 7.98 8.01 9.02 7.45 10.13 6.91 11.48 6.76 12.95 6.73 14.38 6.68 14.88 7.04 15.76 6.69 16 5.45 16 4.21 16 2.97 16 z";
c.tablature.drawing.MusicFont.Num8="M 6.97 7.18 C 7.96 7.59 8.61 8.51 9.23 9.34 9.71 9.98 9.88 10.8 9.76 11.58 9.66 13.11 8.81 14.58 7.46 15.33 5.48 16.48 2.64 16.15 1.15 14.34 0.26 13.3 -0.1 11.87 0.02 10.52 0.3 9.39 1.21 8.5 2.2 7.94 2.89 7.75 1.76 7.47 1.61 7.13 0.1 5.63 -0.1 2.86 1.5 1.35 3.29 -0.4 6.51 -0.5 8.27 1.36 9.09 2.23 9.43 3.49 9.31 4.67 9.04 5.65 8.25 6.4 7.43 6.95 7.29 7.04 7.13 7.12 6.97 7.18 z M 6.16 6.54 C 7.34 6 8.09 4.61 7.81 3.32 7.66 2.1 6.72 0.95 5.45 0.81 4.37 0.6 3.18 1.02 2.61 1.99 2.22 2.58 2.07 3.48 2.66 4 3.69 5.04 5.13 5.51 6.16 6.54 z M 3.17 8.44 C 2.19 8.9 1.31 9.78 1.26 10.92 1.11 12.72 2.32 14.69 4.17 15.01 5.32 15.21 6.73 15.01 7.4 13.94 7.83 13.37 7.9 12.54 7.43 11.97 6.35 10.42 4.51 9.72 3.17 8.44 z";
c.tablature.drawing.MusicFont.Num9="m 2.46 14.47 c 0.29 0.65 1.09 0.94 1.76 1.01 1.1 0.1 1.93 -0.87 2.24 -1.83 0.55 -1.74 0.69 -3.61 0.43 -5.41 C 6.87 7.79 6.47 7.26 6.22 7.88 5.24 8.98 3.53 9.34 2.18 8.77 0.99 8.19 0.32 6.88 0.07 5.62 -0.22 3.91 0.3 1.97 1.76 0.94 3.55 -0.42 6.33 -0.31 7.93 1.3 9.74 3.09 10.4 5.74 10.39 8.22 10.41 10.83 9.17 13.42 7.12 15.04 5.69 16.16 3.56 16.33 1.99 15.41 0.83 14.66 0.19 13.12 0.55 11.77 0.85 10.85 1.86 10.24 2.82 10.48 c 0.72 0.09 1.28 0.71 1.33 1.42 0.19 0.86 -0.16 1.8 -0.92 2.27 -0.23 0.16 -0.49 0.27 -0.76 0.3 z M 2.68 4.28 C 2.73 5.38 2.62 6.6 3.28 7.56 3.94 8.53 5.67 8.32 6.03 7.18 6.54 5.72 6.61 4.13 6.36 2.61 6.23 1.73 5.67 0.71 4.67 0.67 3.84 0.55 3.14 1.22 2.98 1.99 2.76 2.73 2.68 3.51 2.68 4.28 z";
c.tablature.drawing.MusicFont.TrebleClef="m 12.59 0 c 2.7 1.29 2.98 5.15 3.47 7.79 0.22 4.83 -1.46 9.94 -5.32 13.04 0.32 1.61 0.63 3.22 0.95 4.83 3.43 -0.81 7.18 1.04 8.41 4.39 1.63 3.61 0.97 8.6 -2.85 10.54 -2.1 0.44 -2.9 1.25 -2.1 3.23 0.27 2.38 1.27 4.75 0.81 7.14 -1.19 3.63 -6.7 5.59 -9.39 2.39 C 3.23 51.02 5.74 45.06 9.8 46.71 13.45 47.85 11.75 53.84 8.1 53 c 2.3 2.55 6.27 0.67 7.16 -2.21 0.42 -2.48 -0.55 -4.95 -0.84 -7.42 C 14.64 40.51 11.15 42.78 9.42 41.93 2.94 41.14 -2.13 33.51 0.9 27.4 2.85 23.29 5.93 19.8 9.2 16.68 8.1 12.71 7.19 8.36 8.84 4.39 9.55 2.66 10.4 0.17 12.59 0 z M 11 25.71 c -0.28 -1.46 -0.57 -2.93 -0.85 -4.39 -3.08 3.09 -6.5 6.49 -7.28 10.97 -0.78 5 4.52 9.16 9.2 8.84 2.38 0.26 1.53 -1.63 1.24 -3.06 -0.62 -3.07 -1.24 -6.14 -1.86 -9.21 -3.95 0.27 -6.15 6.08 -2.88 8.62 0.75 1.11 5.35 2.82 1.83 1.77 C 6.94 37.88 4.59 33.92 5.95 30.3 6.7 28.02 8.65 26.22 11 25.71 z m 3.78 -19.02 c 0.53 -3.18 -3.29 -3.92 -4 -0.83 -1.76 3.04 -1.8 6.6 -1.05 9.94 0.96 0.42 3.17 -2.31 3.81 -3.67 0.95 -1.63 1.59 -3.55 1.24 -5.45 z m -2.54 22.17 c 0.75 3.81 1.5 7.63 2.24 11.44 3.92 -0.62 5.81 -5.58 3.62 -8.78 -1.23 -1.94 -3.6 -2.98 -5.86 -2.66 z";
c.tablature.drawing.MusicFont.AltoClef="M 0 32 C 0 21.38 0 10.77 0 0.15 c 1.33 0 2.66 0 3.99 0 0 10.62 0 21.23 0 31.85 C 2.66 32 1.33 32 0 32 z m 5.35 0 c 0 -10.62 0 -21.23 0 -31.85 0.39 0.09 1.17 -0.19 1.31 0.16 0 10.57 0 21.13 0 31.7 -0.44 0 -0.87 0 -1.31 0 z M 9.34 18.17 C 8.85 17.25 7.32 16.44 7.05 15.9 c 2.11 -1.25 3.59 -3.49 3.95 -5.92 0.15 1.3 0.74 2.78 2.15 3.09 1.39 0.43 3.17 0.18 3.92 -1.22 C 18.24 9.71 18.15 7.13 17.95 4.76 17.78 3.06 16.96 0.96 15.02 0.72 13.91 0.57 11.57 0.97 11.76 2.28 c 1.28 -0.3 2.92 0.73 2.5 2.19 -0.37 1.9 -3.18 2.09 -4.2 0.62 -1.03 -1.34 0.04 -3.16 1.27 -3.94 2.83 -1.99 7.29 -1.4 9.27 1.53 2.17 3.1 1.38 7.77 -1.6 10.08 -1.75 1.45 -4.25 2.14 -6.46 1.5 -1.25 -0.78 -1.4 1.51 -2.65 1.79 1.22 0.33 1.47 2.76 2.71 1.95 1.83 -0.61 3.93 -0.16 5.57 0.79 2.67 1.56 4.19 4.78 3.65 7.83 -0.43 3.08 -3.39 5.43 -6.46 5.38 -2.28 0.13 -4.93 -1.05 -5.57 -3.4 -0.57 -2.02 2.25 -3.54 3.76 -2.24 1.14 0.73 1.13 2.73 -0.26 3.18 -0.66 0.26 -2.36 0.07 -1.07 1.03 1.43 1.1 3.86 1.14 4.88 -0.54 1.23 -2.05 1.09 -4.59 0.9 -6.89 -0.21 -1.71 -0.87 -3.95 -2.84 -4.27 -1.35 -0.16 -3.1 0.14 -3.59 1.62 -0.35 0.58 -0.41 2.41 -0.61 0.83 -0.29 -1.15 -0.86 -2.23 -1.61 -3.14 z";
c.tablature.drawing.MusicFont.TenorClef="M 0 32 C 0 21.38 0 10.77 0 0.15 c 1.33 0 2.66 0 3.99 0 0 10.62 0 21.23 0 31.85 C 2.66 32 1.33 32 0 32 z m 5.35 0 c 0 -10.62 0 -21.23 0 -31.85 0.39 0.09 1.17 -0.19 1.31 0.16 0 10.57 0 21.13 0 31.7 -0.44 0 -0.87 0 -1.31 0 z M 9.34 18.17 C 8.85 17.25 7.32 16.44 7.05 15.9 c 2.11 -1.25 3.59 -3.49 3.95 -5.92 0.15 1.3 0.74 2.78 2.15 3.09 1.39 0.43 3.17 0.18 3.92 -1.22 C 18.24 9.71 18.15 7.13 17.95 4.76 17.78 3.06 16.96 0.96 15.02 0.72 13.91 0.57 11.57 0.97 11.76 2.28 c 1.28 -0.3 2.92 0.73 2.5 2.19 -0.37 1.9 -3.18 2.09 -4.2 0.62 -1.03 -1.34 0.04 -3.16 1.27 -3.94 2.83 -1.99 7.29 -1.4 9.27 1.53 2.17 3.1 1.38 7.77 -1.6 10.08 -1.75 1.45 -4.25 2.14 -6.46 1.5 -1.25 -0.78 -1.4 1.51 -2.65 1.79 1.22 0.33 1.47 2.76 2.71 1.95 1.83 -0.61 3.93 -0.16 5.57 0.79 2.67 1.56 4.19 4.78 3.65 7.83 -0.43 3.08 -3.39 5.43 -6.46 5.38 -2.28 0.13 -4.93 -1.05 -5.57 -3.4 -0.57 -2.02 2.25 -3.54 3.76 -2.24 1.14 0.73 1.13 2.73 -0.26 3.18 -0.66 0.26 -2.36 0.07 -1.07 1.03 1.43 1.1 3.86 1.14 4.88 -0.54 1.23 -2.05 1.09 -4.59 0.9 -6.89 -0.21 -1.71 -0.87 -3.95 -2.84 -4.27 -1.35 -0.16 -3.1 0.14 -3.59 1.62 -0.35 0.58 -0.41 2.41 -0.61 0.83 -0.29 -1.15 -0.86 -2.23 -1.61 -3.14 z";
c.tablature.drawing.MusicFont.BassClef="M 4.44 2.42 C 3.48 3.2 3.45 5.34 4.96 5.44 6.05 5.76 7.62 5.57 8.09 6.88 8.46 8 8.36 9.52 7.18 10.13 5.64 11.02 3.46 11.09 2.03 9.94 0.65 8.76 0.96 6.72 1.42 5.18 2.1 3.05 3.6 0.9 5.9 0.38 c 3.09 -0.82 6.79 -0.41 9.09 2 2.38 2.38 3.52 6.21 2.02 9.35 -1.51 3.28 -4.31 5.71 -7.08 7.91 -2.66 2.01 -5.53 3.78 -8.59 5.11 -0.49 0.46 -1.68 0.21 -1.19 -0.4 C 3.76 22.94 7.03 20.65 9.63 17.79 11.95 15.13 12.83 11.53 13 8.08 13.12 5.82 12.46 3.29 10.45 2 8.62 0.77 6.09 0.99 4.44 2.42 z M 20.84 2.57 c 1.6 -0.11 2.58 2.03 1.54 3.21 -0.89 1.19 -3.02 0.83 -3.39 -0.64 -0.43 -1.24 0.53 -2.58 1.85 -2.57 z m 0 7.01 c 1.6 -0.11 2.58 2.03 1.54 3.21 -0.89 1.19 -3.02 0.83 -3.39 -0.64 -0.43 -1.23 0.54 -2.59 1.85 -2.57 z";
c.tablature.drawing.MusicFont.TripletFeel8="m 24.36 19.36 c 2.02 0 4.05 0 6.07 0 0.13 -0.91 -1.28 -0.27 -1.87 -0.46 -1.4 0 -2.8 0 -4.2 0 0 0.15 0 0.31 0 0.46 z m 0 1.86 c 2.02 -0.02 4.07 0.04 6.07 -0.03 0.16 -0.94 -1.24 -0.3 -1.8 -0.49 -1.42 0 -2.84 0 -4.26 0 1.4e-5 0.17 -2.7e-5 0.35 1.8e-5 0.52 z M 38.01 5.56 c -0.02 5.52 0.04 11.04 -0.03 16.55 -0.24 2.29 -3.95 4.19 -5.23 1.73 -0.79 -2.65 3.29 -4.74 4.89 -3.15 0 -5.04 0 -10.09 0 -15.13 0.12 1.28e-4 0.25 -3.18e-4 0.37 3.77e-4 z m -16.45 0 c -0.02 5.52 0.04 11.04 -0.03 16.55 -0.23 2.27 -3.95 4.2 -5.21 1.73 -0.75 -2.47 3.01 -4.95 4.87 -3.02 0 -4.4 0 -8.8 0 -13.21 -2.92 0 -5.84 0 -8.76 0 -0.02 4.83 0.04 9.67 -0.03 14.5 -0.23 2.28 -3.96 4.2 -5.22 1.73 -0.81 -2.65 3.28 -4.74 4.88 -3.15 0 -5.04 0 -10.09 0 -15.13 3.17 5.03e-4 6.34 0 9.5 7.55e-4 z M 1.22 18.4 c -0.17 2.26 0.72 4.54 2.62 5.84 C 4.83 25.09 2.04 23.4 1.79 22.77 -0.18 20.74 -0.63 17.36 1.12 15.05 1.67 13.94 3.72 12.2 4.07 12.38 2.04 13.75 1.02 15.97 1.22 18.4 z m 54.61 0 c 0.17 2.26 -0.72 4.54 -2.62 5.84 -0.99 0.85 1.8 -0.84 2.05 -1.47 1.97 -2.04 2.42 -5.41 0.67 -7.73 -0.55 -1.11 -2.61 -2.84 -2.95 -2.66 2.02 1.36 3.04 3.58 2.85 6.01 z M 47.2 5.56 c 0.16 2.22 2.22 3.33 3.46 4.91 2.35 2.49 1.74 6.43 -0.23 8.95 0.24 -1.29 1.6 -3.21 1.07 -4.96 -0.39 -2.26 -2.25 -4.05 -4.36 -4.78 -0.02 4.14 0.04 8.29 -0.03 12.43 -0.21 2.29 -3.95 4.19 -5.21 1.73 -0.75 -2.48 3.02 -4.95 4.88 -3.02 0 -5.09 0 -10.17 0 -15.26 0.14 3.77e-4 0.28 -6.55e-4 0.42 3.77e-4 z M 39.84 2.19 c -0.03 0.75 -1.39 0.18 -1.99 0.36 -0.67 0.08 -1.88 -0.37 -1.52 0.75 0.18 1.15 -0.39 1.34 -0.24 0.09 -0.2 -0.97 0.1 -1.44 1.12 -1.19 0.88 0 1.75 0 2.63 0 z m 9.04 0 C 48.8 2.87 49.06 3.9 48.76 4.37 48.3 4.09 49.03 2.63 48.38 2.54 c -1.08 0 -2.16 0 -3.25 0 0.03 -0.75 1.39 -0.18 1.99 -0.36 0.58 0 1.17 0 1.75 0 z m -7.12 0.15 c 1.28 -0.03 2.54 -2.28 0.38 -2.02 -0.98 0.3 0.97 0.93 -0.44 1.44 -2.45 -0.8 3.03 -3.31 2.65 -0.47 -0.36 1.15 -1.5 0.72 -0.52 1.75 0.03 2.63 -5.38 1.26 -2.65 -0.3 1.73 0.44 -1.53 1.48 0.33 1.58 1.32 -0.08 2.02 -1.92 0.25 -1.98 z";
c.tablature.drawing.MusicFont.TripletFeel16="m 24.36 19.36 c 2.02 0 4.05 0 6.07 0 0.12 -0.89 -1.29 -0.25 -1.87 -0.45 -1.4 0 -2.8 0 -4.2 0 0 0.15 0 0.3 0 0.45 z m 0 1.86 c 2.02 -0.02 4.07 0.04 6.07 -0.03 0.16 -0.94 -1.24 -0.3 -1.8 -0.49 -1.42 0 -2.84 0 -4.26 0 5e-6 0.17 -9e-6 0.35 6e-6 0.52 z M 1.22 18.4 c -0.17 2.26 0.72 4.54 2.62 5.86 0.99 0.86 -1.81 -0.84 -2.05 -1.47 -1.97 -2.04 -2.42 -5.41 -0.67 -7.73 0.55 -1.11 2.61 -2.85 2.95 -2.66 -2.02 1.36 -3.04 3.58 -2.85 6.01 z m 54.61 0 c 0.17 2.26 -0.72 4.54 -2.62 5.86 -0.99 0.86 1.81 -0.84 2.05 -1.47 1.97 -2.04 2.42 -5.41 0.67 -7.73 -0.55 -1.11 -2.61 -2.84 -2.95 -2.66 2.04 1.39 3.03 3.55 2.85 6.01 z M 39.84 2.19 c -0.01 0.77 -1.39 0.19 -1.99 0.37 -0.67 0.08 -1.87 -0.37 -1.5 0.75 0.2 0.99 -0.41 1.5 -0.25 0.21 -0.1 -0.87 -0.1 -1.65 1 -1.33 0.92 0 1.83 0 2.75 0 z m 9.04 0 c -0.09 0.69 0.17 1.72 -0.12 2.2 -0.46 -0.28 0.27 -1.74 -0.38 -1.83 -1.08 0 -2.16 0 -3.25 0 0.01 -0.77 1.39 -0.19 1.99 -0.37 0.58 0 1.17 0 1.75 0 z m -7.12 0.15 c 1.28 -0.03 2.54 -2.28 0.38 -2.02 -0.97 0.31 0.97 0.93 -0.44 1.45 -2.46 -0.81 3.02 -3.33 2.65 -0.49 -0.37 1.14 -1.5 0.73 -0.52 1.77 0.01 2.62 -5.38 1.24 -2.65 -0.31 1.73 0.44 -1.54 1.47 0.33 1.59 1.32 -0.07 2.02 -1.94 0.25 -1.99 z m 0.91 8.6 c 0.09 -0.68 -0.17 -1.71 0.12 -2.19 1.33 0 2.66 0 3.99 0 0.22 -0.97 -0.14 -1.36 -1.12 -1.13 -2.55 0 -5.1 0 -7.65 0 -0.02 4.83 0.04 9.67 -0.03 14.5 -0.24 2.29 -3.95 4.19 -5.23 1.73 -0.79 -2.65 3.3 -4.75 4.89 -3.13 0 -5.04 0 -10.09 0 -15.13 3.17 0 6.34 0 9.5 0 -0.02 5.51 0.04 11.03 -0.03 16.53 -0.21 2.29 -3.95 4.19 -5.21 1.73 -0.75 -2.48 3.04 -4.96 4.88 -3.01 0 -3.3 0 -6.6 0 -9.9 -1.37 10e-7 -2.75 -3e-6 -4.12 2e-6 z M 21.56 5.58 c -0.02 5.51 0.04 11.03 -0.03 16.53 -0.23 2.27 -3.95 4.2 -5.21 1.73 -0.75 -2.47 3.03 -4.96 4.87 -3.01 0 -3.38 0 -6.76 0 -10.14 -2.92 0 -5.84 0 -8.76 0 -0.02 3.81 0.04 7.61 -0.03 11.42 -0.23 2.28 -3.96 4.2 -5.22 1.73 -0.81 -2.65 3.3 -4.75 4.88 -3.13 0 -5.04 0 -10.09 0 -15.13 3.17 0 6.34 0 9.5 0 z M 21.19 8.64 C 21.49 7.58 20.84 7.48 19.95 7.61 c -2.5 0 -5.01 0 -7.51 0 -0.3 1.06 0.35 1.16 1.25 1.03 2.5 0 5.01 0 7.51 0 z";
c.tablature.drawing.MusicFont.TripletFeelNone8="m 25.85 19.36 c 2.02 0 4.05 0 6.07 0 0.13 -0.91 -1.28 -0.27 -1.87 -0.46 -1.4 0 -2.8 0 -4.2 0 0 0.15 0 0.31 0 0.46 z m 0 1.86 c 2.02 -0.02 4.07 0.04 6.07 -0.03 0.16 -0.94 -1.24 -0.31 -1.8 -0.49 -1.42 0 -2.84 0 -4.26 0 5e-5 0.17 -9.1e-5 0.35 6e-5 0.52 z M 48.78 5.56 c -0.02 5.52 0.04 11.04 -0.03 16.55 -0.23 2.27 -3.95 4.2 -5.21 1.73 -0.75 -2.47 3.01 -4.95 4.87 -3.02 0 -4.4 0 -8.8 0 -13.21 -2.92 0 -5.84 0 -8.76 0 -0.02 4.83 0.04 9.67 -0.03 14.5 -0.23 2.28 -3.96 4.2 -5.22 1.73 -0.81 -2.65 3.28 -4.74 4.88 -3.15 0 -5.04 0 -10.09 0 -15.13 3.17 6.67e-4 6.34 0 9.5 10e-4 z M 1.22 18.4 C 1.05 20.65 1.94 22.93 3.84 24.24 4.83 25.09 2.04 23.4 1.79 22.77 -0.18 20.74 -0.63 17.36 1.12 15.05 1.67 13.94 3.72 12.2 4.07 12.38 2.03 13.78 1.04 15.94 1.22 18.4 z m 54.61 0 c 0.17 2.26 -0.72 4.54 -2.62 5.84 -0.99 0.85 1.8 -0.84 2.05 -1.47 1.97 -2.04 2.42 -5.41 0.67 -7.73 -0.55 -1.11 -2.61 -2.84 -2.95 -2.66 2.04 1.39 3.03 3.55 2.85 6.01 z M 12.43 5.56 c -0.02 5.52 0.04 11.04 -0.03 16.55 -0.24 2.29 -3.95 4.19 -5.23 1.73 -0.79 -2.65 3.29 -4.74 4.89 -3.15 0 -5.04 0 -10.09 0 -15.13 0.12 1.7e-4 0.25 -4.21e-4 0.37 5e-4 z m 9.19 0 c 0.16 2.22 2.22 3.33 3.46 4.91 2.35 2.49 1.74 6.43 -0.23 8.95 0.24 -1.29 1.6 -3.21 1.07 -4.96 -0.39 -2.26 -2.25 -4.05 -4.36 -4.78 -0.02 4.14 0.04 8.29 -0.03 12.43 -0.21 2.29 -3.95 4.19 -5.21 1.73 -0.75 -2.48 3.02 -4.95 4.88 -3.02 0 -5.09 0 -10.17 0 -15.26 0.14 5e-4 0.28 -8.68e-4 0.42 5e-4 z m -7.36 -3.38 c -0.03 0.75 -1.39 0.18 -1.99 0.36 -0.67 0.08 -1.87 -0.37 -1.5 0.75 0.2 0.99 -0.41 1.5 -0.25 0.21 -0.1 -0.87 -0.09 -1.63 1 -1.31 0.92 0 1.83 0 2.75 0 z m 9.04 0 c -0.09 0.68 0.17 1.71 -0.12 2.19 -0.46 -0.28 0.27 -1.74 -0.38 -1.83 -1.08 0 -2.16 0 -3.25 0 0.03 -0.75 1.39 -0.18 1.99 -0.36 0.58 0 1.17 0 1.75 0 z m -7.12 0.15 c 1.28 -0.03 2.54 -2.28 0.38 -2.02 -0.98 0.3 0.97 0.93 -0.44 1.44 -2.45 -0.8 3.03 -3.31 2.65 -0.47 -0.36 1.15 -1.5 0.72 -0.52 1.75 0.03 2.63 -5.38 1.26 -2.65 -0.3 1.73 0.44 -1.53 1.48 0.33 1.58 1.32 -0.08 2.02 -1.92 0.25 -1.98 z";
c.tablature.drawing.MusicFont.TripletFeelNone16="m 24.36 19.36 c 2.02 0 4.05 0 6.07 0 0.12 -0.89 -1.29 -0.25 -1.87 -0.45 -1.4 0 -2.8 0 -4.2 0 0 0.15 0 0.3 0 0.45 z m 0 1.86 c 2.02 -0.02 4.07 0.04 6.07 -0.03 0.16 -0.94 -1.24 -0.31 -1.8 -0.49 -1.42 0 -2.84 0 -4.26 0 5e-6 0.17 -9e-6 0.35 6e-6 0.52 z M 1.22 18.4 C 1.05 20.66 1.94 22.94 3.84 24.25 4.83 25.11 2.03 23.41 1.79 22.78 -0.18 20.74 -0.63 17.37 1.12 15.05 1.67 13.94 3.72 12.2 4.07 12.38 2.04 13.75 1.02 15.97 1.22 18.4 z m 54.61 0 c 0.17 2.26 -0.72 4.54 -2.62 5.86 -0.99 0.86 1.81 -0.84 2.05 -1.47 1.97 -2.04 2.42 -5.41 0.67 -7.73 -0.55 -1.11 -2.61 -2.84 -2.95 -2.66 2.02 1.36 3.04 3.58 2.85 6.01 z M 14.26 2.19 c -0.01 0.77 -1.39 0.19 -1.99 0.37 -0.67 0.08 -1.87 -0.37 -1.5 0.75 0.2 0.99 -0.41 1.5 -0.25 0.21 -0.1 -0.87 -0.1 -1.65 1 -1.33 0.92 0 1.83 0 2.75 0 z m 9.04 0 c -0.09 0.69 0.17 1.72 -0.12 2.2 -0.49 -0.25 0.26 -1.75 -0.39 -1.83 -1.08 0 -2.15 0 -3.23 0 0.01 -0.77 1.39 -0.19 1.99 -0.37 0.58 0 1.17 0 1.75 0 z m -7.12 0.15 c 1.28 -0.03 2.54 -2.28 0.38 -2.02 -0.97 0.31 0.97 0.93 -0.44 1.45 -2.46 -0.81 3.02 -3.33 2.65 -0.49 -0.37 1.14 -1.5 0.73 -0.52 1.77 0.01 2.62 -5.38 1.24 -2.65 -0.31 1.73 0.44 -1.54 1.47 0.33 1.59 1.32 -0.07 2.02 -1.94 0.25 -1.99 z M 47.14 5.58 c -0.02 5.51 0.04 11.03 -0.03 16.53 -0.23 2.27 -3.95 4.2 -5.21 1.73 -0.75 -2.47 3.03 -4.96 4.87 -3.01 0 -3.38 0 -6.76 0 -10.14 -2.92 0 -5.84 0 -8.76 0 -0.02 3.81 0.04 7.61 -0.03 11.42 -0.23 2.28 -3.96 4.2 -5.22 1.73 -0.81 -2.65 3.3 -4.75 4.88 -3.13 0 -5.04 0 -10.09 0 -15.13 3.17 3.33e-4 6.34 -6.67e-4 9.5 5e-4 z m -0.37 3.06 c 0.3 -1.06 -0.35 -1.16 -1.25 -1.03 -2.5 0 -5.01 0 -7.51 0 -0.3 1.06 0.35 1.16 1.25 1.03 2.5 0 5.01 0 7.51 0 z M 17.09 10.93 c 0.09 -0.68 -0.17 -1.71 0.12 -2.19 1.33 0 2.66 0 3.99 0 0.22 -0.97 -0.14 -1.36 -1.12 -1.13 -2.55 0 -5.1 0 -7.65 0 -0.02 4.83 0.04 9.67 -0.03 14.5 -0.24 2.29 -3.95 4.19 -5.23 1.73 -0.79 -2.65 3.3 -4.75 4.89 -3.13 0 -5.04 0 -10.09 0 -15.13 3.17 0 6.34 0 9.5 0 -0.02 5.51 0.04 11.03 -0.03 16.53 -0.21 2.29 -3.95 4.19 -5.21 1.73 -0.75 -2.48 3.04 -4.96 4.88 -3.01 0 -3.3 0 -6.6 0 -9.9 -1.37 3.32e-4 -2.75 -6.65e-4 -4.12 5e-4 z";
c.tablature.drawing.MusicFont.KeySharp="m 3.11 3.97 c 0 -1.32 0 -2.65 0 -3.97 0.22 0 0.43 0 0.65 0 0 1.24 0 2.48 0 3.73 0.31 -0.13 0.62 -0.27 0.93 -0.4 0 0.79 0 1.57 0 2.36 C 4.38 5.82 4.07 5.95 3.76 6.09 c 0 1.27 0 2.53 0 3.8 0.31 -0.15 0.62 -0.29 0.93 -0.44 0 0.79 0 1.57 0 2.36 -0.31 0.13 -0.62 0.27 -0.93 0.4 0 1.29 0 2.58 0 3.87 -0.22 0 -0.43 0 -0.65 0 0 -1.21 0 -2.41 0 -3.62 -0.51 0.22 -1.03 0.43 -1.54 0.65 0 1.3 0 2.6 0 3.9 -0.22 0 -0.43 0 -0.65 0 0 -1.22 0 -2.44 0 -3.66 C 0.62 13.47 0.31 13.59 0 13.71 0 12.92 0 12.14 0 11.35 c 0.31 -0.12 0.62 -0.24 0.93 -0.37 0 -1.27 0 -2.53 0 -3.8 C 0.62 7.32 0.31 7.46 0 7.59 0 6.79 0 5.99 0 5.19 0.31 5.07 0.62 4.95 0.93 4.83 c 0 -1.29 0 -2.58 0 -3.87 0.22 0 0.43 0 0.65 0 0 1.21 0 2.41 0 3.62 C 2.09 4.38 2.6 4.17 3.11 3.97 z M 1.57 6.94 c 0 1.27 0 2.53 0 3.8 0.51 -0.22 1.03 -0.43 1.54 -0.65 0 -1.25 0 -2.51 0 -3.76 -0.51 0.2 -1.03 0.41 -1.54 0.61 z";
c.tablature.drawing.MusicFont.KeyNormal="M 0 12.45 C 0 8.3 0 4.15 0 0 c 0.24 0 0.47 0 0.71 0 0 1.87 0 3.74 0 5.6 C 1.84 5.29 2.97 4.98 4.1 4.67 c 0 4.11 0 8.22 0 12.33 -0.22 0 -0.44 0 -0.67 0 0 -1.83 0 -3.66 0 -5.49 C 2.29 11.82 1.14 12.13 0 12.45 z M 0.71 10.37 C 1.61 10.12 2.52 9.87 3.43 9.62 c 0 -1.01 0 -2.02 0 -3.03 -0.91 0.25 -1.82 0.5 -2.73 0.74 0 1.01 0 2.02 0 3.03 z";c.tablature.drawing.MusicFont.KeyFlat="m 0 2 c 0.21 0 0.42 0 0.63 0 0 2.93 0 5.85 0 8.78 0.88 -0.5 1.91 -1.01 2.95 -0.78 0.91 0.24 1.29 1.34 1.1 2.18 -0.31 1.25 -1.36 2.14 -2.38 2.83 C 1.42 15.52 0.7 16.27 0 17 0 12 0 7 0 2 z m 2.64 8.71 c -0.62 -0.36 -1.3 0.1 -1.8 0.47 -0.31 0.1 -0.19 0.42 -0.21 0.67 0 1.28 0 2.57 0 3.85 C 1.13 15.18 1.67 14.71 2.13 14.17 2.68 13.42 3.31 12.58 3.25 11.6 3.21 11.22 2.97 10.89 2.64 10.71 z";
c.tablature.drawing.MusicFont.SilenceHalf="m 0 4 c 3.22 0 6.44 0 9.66 0 0 -1.33 0 -2.67 0 -4 C 6.44 0 3.22 0 0 0 0 1.33 0 2.67 0 4 z";c.tablature.drawing.MusicFont.SilenceQuarter="M 2.4 0.04 C 4.3 2.23 6.19 4.42 8.09 6.61 6.57 7.75 5.58 9.43 4.76 11.11 c -0.52 1.6 0.26 3.29 1.29 4.5 0.24 0.66 2.07 1.26 1.03 1.93 -1.31 0.03 -2.84 -0.37 -3.95 0.55 -0.77 0.84 -0.45 2.17 0.21 2.97 0.14 0.66 1.69 1.33 1.09 1.84 C 3.38 22.69 2.74 21.73 1.92 21.12 1.1 20.27 0.05 19.37 0 18.1 0 16.77 1.21 15.64 2.52 15.61 3.61 15.48 4.75 15.77 5.64 16.42 3.91 14.2 2.18 11.98 0.46 9.77 1.95 8.55 2.86 6.78 3.55 5.02 3.88 3.53 2.92 2.2 2.17 1.01 1.62 0.63 1.35 -0.35 2.4 0.04 z";
c.tablature.drawing.MusicFont.SilenceEighth="M 2.19 0 C 3.49 -0.03 4.76 1.37 4.32 2.66 4.26 3.18 3.53 3.64 3.47 3.89 4.27 4.3 5.11 3.75 5.7 3.24 6.67 2.38 7.28 1.18 7.97 0.11 8.48 -0.19 8.34 0.36 8.25 0.65 7.15 5.44 6.06 10.22 4.96 15 4.63 15 4.3 15 3.97 15 4.95 11.06 5.93 7.12 6.92 3.18 6.24 4.45 4.71 4.96 3.34 4.89 2.47 4.82 1.53 4.65 0.84 4.09 -0.23 3.23 -0.33 1.4 0.74 0.52 1.14 0.16 1.66 0.01 2.19 0 z";c.tablature.drawing.MusicFont.SilenceSixteenth="M 4.58 12.12 C 5.95 11.59 6.78 10.24 7.35 8.97 7.83 7.03 8.3 5.09 8.77 3.15 8.07 4.45 6.51 4.93 5.11 4.84 4.52 4.91 3.98 4.62 3.43 4.44 2.32 4.03 1.69 2.76 1.97 1.62 2.28 0.02 4.57 -0.55 5.64 0.63 6.55 1.43 6.51 3.05 5.45 3.71 5.36 4.19 6.59 3.99 6.98 3.66 8.23 2.89 8.83 1.47 9.7 0.35 9.87 -0.15 10.51 0 10.17 0.49 8.42 7.99 6.67 15.5 4.91 23 4.6 23 4.29 23 3.98 23 4.92 19.1 5.86 15.19 6.8 11.29 6.13 12.56 4.62 13.09 3.25 13 2.02 12.96 0.61 12.44 0.14 11.2 -0.3 10.11 0.24 8.69 1.41 8.35 2.54 7.9 3.92 8.55 4.28 9.72 4.57 10.55 4.21 11.58 3.4 11.97 c 0.39 0.12 0.78 0.29 1.18 0.15 z";
c.tablature.drawing.MusicFont.SilenceThirtySecond="M 6.47 12.03 C 8.29 11.3 9.21 9.34 9.56 7.51 9.92 6.04 10.27 4.56 10.63 3.08 9.64 4.92 7.15 5.09 5.38 4.46 3.78 3.93 3.21 1.56 4.57 0.49 5.72 -0.52 7.61 0.15 8.07 1.55 8.6 2.43 7.48 3.5 7.35 3.83 8.35 4.33 9.38 3.44 10 2.71 c 0.66 -0.83 1.13 -1.9 1.82 -2.66 0.56 -0.12 0.05 0.61 0.07 0.91 C 9.56 10.97 7.22 20.99 4.89 31 4.57 30.92 3.75 31.23 4.04 30.68 4.95 26.9 5.86 23.12 6.77 19.35 5.77 21.17 3.29 21.4 1.53 20.67 0.07 20.13 -0.56 18.04 0.6 16.92 c 1.08 -1.13 3.22 -0.66 3.66 0.87 0.53 0.87 -0.54 1.99 -0.73 2.28 1.18 0.47 2.29 -0.59 2.93 -1.48 0.66 -0.79 0.95 -1.76 1.15 -2.75 C 7.98 14.32 8.35 12.78 8.72 11.25 7.96 12.7 6.22 13.02 4.72 12.93 3.53 12.75 2.13 12.09 1.95 10.75 1.57 9.33 2.89 7.91 4.33 8.13 5.89 8.21 6.92 10.33 5.77 11.51 c -1.03 0.58 0.16 0.67 0.7 0.52 z";
c.tablature.drawing.MusicFont.SilenceSixtyFourth="M 6.61 20.61 C 8.85 19.73 9.53 17.2 9.98 15.06 10.25 13.86 10.53 12.67 10.81 11.47 9.73 13.44 6.96 13.6 5.13 12.7 3.51 11.89 3.43 9.15 5.21 8.5 6.88 7.68 9.03 9.67 8.14 11.37 7.48 12.01 7.22 12.47 8.36 12.31 9.96 11.87 11.03 10.26 11.43 8.72 11.89 6.88 12.35 5.04 12.8 3.2 11.95 4.77 9.95 5.12 8.33 4.85 6.95 4.62 5.61 3.49 5.82 1.97 5.87 0.05 8.65 -0.7 9.75 0.8 10.95 1.74 9.66 3.52 9.62 3.97 11.16 4.33 12.19 2.71 12.93 1.6 13.18 1.26 14.26 -0.61 14.24 0.38 11.16 13.59 8.07 26.79 4.99 40 c -0.52 0.01 -1.23 0.16 -0.81 -0.58 0.91 -3.78 1.82 -7.55 2.73 -11.33 -1.12 2.02 -4.06 2.2 -5.86 1.06 -1.46 -0.88 -1.41 -3.42 0.28 -4.01 1.6 -0.79 3.65 0.92 3.01 2.62 -0.29 0.74 -1.37 1.25 -0.01 1.2 1.47 -0.28 2.42 -1.65 3.07 -2.89 C 7.89 23.99 8.41 21.91 8.91 19.82 8.06 21.39 6.06 21.74 4.45 21.47 3.08 21.23 1.74 20.1 1.96 18.59 c 0.05 -1.91 2.83 -2.68 3.93 -1.17 0.83 0.89 0.61 2.48 -0.48 3.06 0.39 0.2 0.78 0.3 1.2 0.13";
c.tablature.drawing.MusicFont.NoteHalf="M 2.84 0.88 C 4.09 0.12 5.69 -0.3 7.1 0.27 8.33 0.78 9.2 2.15 8.95 3.49 8.73 5.19 7.49 6.6 6.01 7.36 4.74 8.13 3.1 8.5 1.71 7.87 0.9 7.54 0.27 6.82 0.07 5.97 -0.18 4.85 0.23 3.69 0.83 2.76 1.35 1.99 2.05 1.35 2.84 0.88 z M 7.91 1.43 C 7.36 0.98 6.59 1.13 5.95 1.23 4.3 1.64 2.8 2.67 1.87 4.1 1.37 4.83 0.95 5.67 0.95 6.57 1.02 7.12 1.71 7.29 2.16 7.12 3.55 6.78 4.87 6.15 6 5.27 6.9 4.47 7.68 3.49 8.05 2.34 8.13 2.04 8.15 1.67 7.91 1.43 z";c.tablature.drawing.MusicFont.NoteQuarter=
"m 2.85 0.87 c 1.24 -0.76 2.82 -1.17 4.22 -0.63 1.05 0.44 1.91 1.47 1.93 2.64 0.05 1.64 -0.96 3.17 -2.29 4.07 -0.97 0.62 -2.03 1.19 -3.21 1.24 -1.24 0.1 -2.62 -0.46 -3.21 -1.6 -0.58 -1.19 -0.23 -2.62 0.46 -3.69 0.52 -0.83 1.25 -1.54 2.1 -2.03 z";c.tablature.drawing.MusicFont.Harmonic="M 0 4.58 C 1.47 6.06 2.94 7.53 4.42 9 5.24 8 6.1 7.01 7.18 6.28 7.97 5.66 8.76 5.04 9.55 4.42 8.1 2.94 6.64 1.47 5.19 0 4.4 1 3.39 1.79 2.51 2.7 1.75 3.42 0.9 4.04 0 4.58 z";c.tablature.drawing.MusicFont.Sticks="m 4.23 4.91 l 3.65 3.65 0.62 -0.64 -3.62 -3.62 L 8.44 0.74 7.82 0.12 4.23 3.70 0.63 0.10 0 0.74 3.59 4.34 l -3.59 3.6 0.6 0.6 3.63 -3.63 z";
c.tablature.drawing.MusicFont.HiHat="m 9.00 6 q 0 0.70 -0.32 1.41 Q 8.35 8.13 7.75 8.71 7.14 9.30 6.44 9.63 5.74 9.95 5 10.00 q -0.73 0 -1.44 -0.32 Q 2.83 9.35 2.24 8.75 1.66 8.14 1.33 7.44 1.00 6.74 0.99 6 q 0 -0.73 0.32 -1.44 Q 1.64 3.83 2.24 3.24 2.85 2.66 3.55 2.33 4.25 2.00 5 1.99 5.73 2.02 6.44 2.35 7.16 2.67 7.75 3.28 8.33 3.88 8.66 4.58 8.99 5.28 9.00 6 z M 10 6 Q 10 5.10 9.59 4.20 9.18 3.31 8.43 2.56 7.68 1.81 6.80 1.42 5.92 1.03 5 1 4.10 1 3.20 1.40 2.31 1.81 1.56 2.56 0.81 3.31 0.42 4.19 0.03 5.07 0 6.03 0 6.92 0.40 7.82 0.81 8.71 1.56 9.45 2.31 10.18 3.19 10.57 4.07 10.96 5 11 5.94 10.96 6.84 10.56 7.73 10.15 8.45 9.42 9.16 8.68 9.57 7.80 9.98 6.92 10 6 z M 4.93 6.76 L 7.03 8.86 7.83 8.03 5.83 6 7.83 3.96 7.03 3.13 4.93 5.23 2.89 3.19 2.13 3.96 4.16 6 2.13 8.03 2.89 8.80 4.93 6.76 z";
c.tablature.drawing.MusicFont.ChineseCymbal="m 4.55 -4.03 l 5.46 5.48 -0.61 0.63 -4.88 -4.86 -4.85 4.85 -0.64 -0.61 5.53 -5.48 z m -0.03 9.94 l 2.99 2.97 1.37 -1.35 L 5.91 4.54 8.90 1.58 7.56 0.23 4.55 3.26 1.54 0.20 0.25 1.49 3.27 4.52 0.18 7.61 1.51 8.94 4.52 5.91 z";c.tablature.drawing.MusicFont.RideCymbal="M 8 7 L 4 11 0 7 4 3 8 7 z m -1.44 0.44 l -3 -3 -2.12 2.12 3 3 2.12 -2.12 z";c.tablature.drawing.MusicFont.DeadNote="M 4.99 5.57 C 5.47 5.71 5.89 6.1 5.92 6.62 6.03 7.41 6 8.21 6.01 9 7.01 9 8 9 9 9 9 7.98 9 6.97 9 5.95 8.15 5.94 7.29 6.01 6.46 5.81 6 5.73 5.63 5.31 5.57 4.86 5.59 4.53 5.49 4.18 5.69 3.88 5.88 3.45 6.34 3.24 6.78 3.22 7.52 3.14 8.26 3.16 9 3.16 9 2.14 9 1.12 9 0.11 c -1 0 -1.99 0 -2.99 0 -0.02 0.85 0.06 1.71 -0.15 2.54 -0.08 0.46 -0.49 0.82 -0.95 0.88 -0.31 0 -0.63 0 -0.94 0 C 3.49 3.39 3.09 2.96 3.07 2.44 2.97 1.67 2.99 0.89 2.99 0.11 c -1 0 -1.99 0 -2.99 0 C 0 1.12 0 2.14 0 3.16 0.85 3.17 1.71 3.1 2.54 3.3 3 3.38 3.37 3.8 3.43 4.25 3.41 4.58 3.51 4.93 3.31 5.23 3.12 5.66 2.66 5.87 2.22 5.89 1.48 5.97 0.74 5.95 0 5.95 0 6.97 0 7.98 0 9 1 9 1.99 9 2.99 9 3.01 8.15 2.93 7.29 3.14 6.46 3.22 6.01 3.61 5.63 4.05 5.57 c 0.31 0 0.63 0 0.94 0 z";
c.tablature.drawing.MusicFont.FooterUpEighth="m 0.19 11.86 c 0 -2.27 0 -4.54 0 -6.81 0.48 -0.06 0.88 -0.02 0.83 0.6 0.24 0.91 0.39 1.87 0.97 2.64 0.77 1.2 1.99 2 2.94 3.05 1.54 1.55 2.98 3.28 3.69 5.38 0.9 2.5 0.48 5.26 -0.41 7.69 C 7.72 25.71 7 26.91 6.22 28.04 5.56 27.64 6.21 27.27 6.49 26.8 7.6 25.04 8.1 22.96 8.13 20.89 7.98 18.65 7.01 16.5 5.43 14.9 4.12 13.58 2.53 12.46 0.76 11.86 c -0.19 0 -0.38 0 -0.57 0 z";c.tablature.drawing.MusicFont.FooterUpSixteenth="M 8.07 20.52 C 7.82 17.12 5.48 14.18 2.56 12.58 2.07 12.29 0.91 11.58 1.59 12.64 c 0.77 1.69 2.4 2.7 3.62 4.04 1.09 1.16 2.18 2.39 2.86 3.85 z M 0.77 16.91 c -0.41 0.05 -0.76 0.04 -0.61 -0.47 0 -3.81 0 -7.63 0 -11.44 0.68 -0.18 0.91 0.23 0.95 0.88 0.22 1.17 0.68 2.3 1.52 3.17 2.01 1.94 4.22 3.83 5.48 6.39 1.09 2.1 1.29 4.58 0.65 6.85 0.69 2.06 0.29 4.29 -0.3 6.33 C 7.97 30.2 7.16 31.66 6.2 33 5.34 32.46 6.74 31.89 6.81 31.21 7.72 29.5 8.14 27.55 8.09 25.63 8.07 24.87 7.89 24.71 7.64 25.48 7.22 26.28 6.73 27.27 6.16 27.82 5.36 27.28 6.83 26.67 6.86 25.97 7.2 25.28 7.52 24.57 7.7 23.81 6.9 20.89 4.51 18.65 1.85 17.35 1.5 17.18 1.14 17.04 0.77 16.91 z";
c.tablature.drawing.MusicFont.FooterUpThirtySecond="M 8.01 20.36 C 7.74 16.68 5.06 13.56 1.83 12 0.45 11.27 2.17 13.66 2.65 14.1 4.63 15.98 6.8 17.88 8.01 20.36 z M 0 0 c 0.93 -0.29 0.82 0.81 1.05 1.43 0.28 1.77 1.66 3.01 2.91 4.15 2.23 2.1 4.42 4.59 4.92 7.72 0.18 1.25 0.16 2.54 -0.14 3.77 0.47 1.66 0.4 3.44 -0.05 5.09 0.76 2.36 0.23 4.92 -0.58 7.2 C 7.63 30.66 6.93 31.87 6.12 33 5.24 32.32 7.02 31.52 7.01 30.63 7.76 29 8.11 27.16 8.01 25.38 7.92 23.94 7.38 26.08 6.99 26.49 6.78 27.03 5.82 28.32 5.86 27.28 6.73 26.26 7.28 24.99 7.63 23.71 7.37 23.06 7.05 21.19 6.48 22.6 6.31 23.58 5.27 22.84 6.07 22.36 7.31 21.2 5.4 20.07 4.7 19.16 3.49 18.08 2.05 17.14 0.48 16.72 -0.13 16.92 -0.01 16.4 0 15.97 0 10.65 0 5.32 0 0 z M 7.83 14.77 C 7.21 11.4 4.6 8.64 1.52 7.29 2.3 8.95 3.91 9.95 5.11 11.27 6.13 12.34 7.1 13.51 7.83 14.77 z";
c.tablature.drawing.MusicFont.FooterUpSixtyFourth="m 8.07 20.53 c -0.29 -3.95 -3.31 -7.22 -6.84 -8.72 0.54 2.1 2.54 3.27 3.92 4.8 1.11 1.19 2.23 2.44 2.92 3.93 z M 7.9 14.89 C 7.27 11.48 4.63 8.71 1.53 7.34 2.35 9.08 4.05 10.11 5.29 11.51 c 0.96 1.04 1.89 2.14 2.6 3.38 z M 0.63 21.56 C -0.04 21.75 -0.08 21.32 0 20.78 0 13.85 0 6.93 0 0 1.28 -0.3 0.81 1.63 1.32 2.36 2.13 4.32 4.02 5.46 5.39 6.99 7.43 9.14 9.15 11.87 9.07 14.93 c -0.18 1.54 -0.19 2.99 0.07 4.53 0.08 1.48 -0.63 2.86 -0.06 4.3 0.31 1.41 -0.31 2.81 -0.15 4.19 C 9.47 31.5 8.2 35.14 6.12 38 5.21 37.29 7.03 36.51 7.01 35.59 7.78 33.88 8.18 31.95 8 30.08 7.46 31 6.83 32.93 6.01 33.09 5.75 32.27 7.34 31.19 7.39 30.1 8.1 29.16 7.42 27.28 6.82 27.01 6.69 27.62 5.8 28.35 5.91 27.5 7.37 26.46 5.84 25.23 5.02 24.33 3.79 23.1 2.27 22.15 0.63 21.56 z m 7.27 3.46 c 0.17 0.54 0.11 -0.4 0 0 z M 6.47 22.86 c 0.4 0.56 1.45 2.23 1.12 0.71 -0.34 -0.71 -0.43 -2.27 -1.12 -0.71 z M 1.38 17.15 c 0.95 2.06 3.03 3.19 4.41 4.92 0.71 1 1.16 -0.97 0.26 -1.33 C 4.84 19.15 3.21 17.92 1.38 17.15 z";
c.tablature.drawing.MusicFont.FooterDownEighth="m 0 -9.83 c 0 2.27 0 4.54 0 6.81 0.48 0.06 0.88 0.02 0.83 -0.6 0.24 -0.91 0.39 -1.87 0.97 -2.64 0.77 -1.2 1.99 -2 2.94 -3.05 1.54 -1.55 2.98 -3.28 3.69 -5.38 0.9 -2.5 0.48 -5.26 -0.41 -7.69 -0.49 -1.3 -1.21 -2.49 -2 -3.63 -0.65 0.41 -0.01 0.78 0.27 1.24 1.11 1.76 1.61 3.85 1.64 5.91 -0.15 2.24 -1.12 4.39 -2.7 5.99 -1.31 1.33 -2.89 2.45 -4.67 3.05 -0.19 0 -0.38 0 -0.57 0 z";c.tablature.drawing.MusicFont.FooterDownSixteenth="m 7.94 -15.56 c -0.25 3.4 -2.58 6.34 -5.51 7.94 -0.49 0.29 -1.65 1 -0.97 -0.06 0.77 -1.69 2.4 -2.7 3.62 -4.04 1.09 -1.16 2.18 -2.39 2.86 -3.85 z m -7.29 3.61 c -0.41 -0.05 -0.76 -0.04 -0.61 0.47 0 3.81 0 7.63 0 11.44 0.68 0.18 0.91 -0.23 0.95 -0.88 C 1.2 -2.1 1.67 -3.22 2.5 -4.09 c 2.01 -1.94 4.22 -3.83 5.48 -6.39 1.09 -2.1 1.29 -4.58 0.65 -6.85 0.69 -2.06 0.29 -4.29 -0.3 -6.33 -0.49 -1.58 -1.3 -3.04 -2.26 -4.38 -0.86 0.54 0.54 1.11 0.61 1.79 0.91 1.7 1.33 3.66 1.28 5.58 -0.03 0.76 -0.21 0.92 -0.46 0.15 -0.41 -0.8 -0.9 -1.79 -1.48 -2.34 -0.8 0.55 0.67 1.15 0.7 1.86 0.33 0.69 0.66 1.4 0.84 2.15 -0.8 2.92 -3.19 5.17 -5.85 6.46 -0.35 0.17 -0.71 0.31 -1.08 0.44 z";
c.tablature.drawing.MusicFont.FooterDownThirtySecond="m 8.01 -20.41 c -0.27 3.68 -2.94 6.8 -6.18 8.36 -1.38 0.73 0.34 -1.66 0.81 -2.1 1.99 -1.88 4.16 -3.78 5.36 -6.26 z M 0 -0.05 c 0.93 0.29 0.82 -0.81 1.05 -1.43 0.28 -1.77 1.66 -3.01 2.91 -4.15 2.23 -2.1 4.42 -4.59 4.92 -7.72 0.18 -1.25 0.16 -2.54 -0.14 -3.77 0.47 -1.66 0.4 -3.44 -0.05 -5.09 0.76 -2.36 0.23 -4.92 -0.58 -7.2 -0.49 -1.3 -1.2 -2.51 -2.01 -3.64 -0.88 0.68 0.9 1.48 0.89 2.37 0.76 1.63 1.1 3.46 1.01 5.25 -0.09 1.44 -0.63 -0.71 -1.03 -1.11 -0.2 -0.54 -1.16 -1.83 -1.12 -0.8 0.87 1.02 1.41 2.29 1.77 3.58 -0.27 0.65 -0.58 2.52 -1.15 1.11 -0.17 -0.98 -1.21 -0.24 -0.41 0.24 1.25 1.17 -0.67 2.29 -1.37 3.2 -1.21 1.08 -2.64 2.02 -4.21 2.43 -0.61 -0.2 -0.5 0.33 -0.48 0.75 0 5.32 0 10.65 0 15.97 z M 7.83 -14.82 c -0.62 3.37 -3.24 6.13 -6.32 7.48 0.78 -1.66 2.39 -2.66 3.59 -3.99 1.02 -1.06 1.99 -2.23 2.73 -3.5 z";
c.tablature.drawing.MusicFont.FooterDownSixtyFourth="m 8.07 -20.56 c -0.29 3.95 -3.31 7.22 -6.84 8.72 0.54 -2.1 2.54 -3.27 3.92 -4.8 1.11 -1.19 2.23 -2.44 2.92 -3.93 z m -0.18 5.64 c -0.63 3.4 -3.26 6.17 -6.37 7.54 0.82 -1.73 2.52 -2.77 3.76 -4.17 0.96 -1.04 1.89 -2.14 2.6 -3.38 z M 0.63 -21.59 C -0.04 -21.78 -0.08 -21.35 0 -20.81 c 0 6.93 0 13.85 0 20.78 1.28 0.3 0.81 -1.63 1.32 -2.36 0.81 -1.96 2.71 -3.1 4.07 -4.63 2.04 -2.14 3.76 -4.87 3.68 -7.94 -0.18 -1.54 -0.19 -2.99 0.07 -4.53 0.08 -1.48 -0.63 -2.86 -0.06 -4.3 0.31 -1.41 -0.31 -2.81 -0.15 -4.19 0.54 -3.56 -0.73 -7.2 -2.82 -10.06 -0.91 0.71 0.92 1.49 0.9 2.41 0.77 1.71 1.17 3.64 0.98 5.51 -0.53 -0.92 -1.16 -2.85 -1.99 -3.01 -0.25 0.82 1.33 1.9 1.38 3 0.71 0.93 0.03 2.82 -0.57 3.08 -0.13 -0.61 -1.02 -1.34 -0.91 -0.49 1.47 1.04 -0.07 2.27 -0.89 3.17 -1.23 1.23 -2.76 2.19 -4.4 2.77 z m 7.27 -3.46 c 0.17 -0.54 0.11 0.4 0 0 z m -1.43 2.16 c 0.4 -0.56 1.45 -2.23 1.12 -0.71 -0.34 0.71 -0.43 2.27 -1.12 0.71 z m -5.09 5.72 c 0.95 -2.06 3.03 -3.19 4.41 -4.92 0.71 -1 1.16 0.97 0.26 1.33 -1.21 1.58 -2.84 2.82 -4.67 3.59 z";
c.tablature.drawing.MusicFont.GraceNote="M 5.62 17.02 C 5.29 18.81 3.42 20.24 1.6 19.97 0.55 19.79 -0.23 18.68 0.06 17.64 0.39 16.16 1.83 15.13 3.28 14.9 c 0.74 -0.1 1.55 0.13 2.02 0.73 0 -1.96 0 -3.92 0 -5.87 C 4.9 10.37 4.49 10.98 4.09 11.59 3.8 11.45 3.57 11.3 3.89 11.03 4.36 10.31 4.83 9.59 5.3 8.87 c 0 -2.95 0 -5.91 0 -8.86 C 5.96 -0.19 5.81 0.67 6 1.07 6.28 2.38 7.49 3.11 8.34 4.03 8.54 4.12 8.68 3.59 8.86 3.42 9.23 2.86 9.59 2.3 9.96 1.74 10.25 1.89 10.48 2.04 10.17 2.31 9.7 3.03 9.24 3.75 8.77 4.47 10 5.79 11.01 7.48 10.97 9.33 10.96 11.24 10.21 13.07 9.11 14.6 8.58 14.15 9.69 13.65 9.69 13.08 10.16 12.06 10.38 10.91 10.31 9.79 10.14 8.16 9.25 6.69 7.99 5.67 7.22 6.79 6.45 8 5.68 9.15 c 0 2.62 0 5.25 0 7.87 l -0.05 0 -0.01 0 -9e-7 0 z M 7.6 5.36 C 7.07 5.03 6.11 4.27 5.68 4.46 c 0 1.27 0 2.53 0 3.8 C 6.32 7.29 6.96 6.33 7.6 5.36 z";
c.tablature.drawing.MusicFont.GraceDeadNote="M 0.78 8 C 0.52 8 0.26 8 0 8 0 5.33 0 2.67 0 0 c 3.99 0 7.97 0 11.96 0 0 2.67 0 5.33 0 8 -0.25 0 -0.5 0 -0.76 0 0 -1.9 0 -3.79 0 -5.69 -3.48 0 -6.95 0 -10.43 0 0 1.9 0 3.79 0 5.69 z";c.tablature.drawing.MusicFont.TrillUpEigth="M 0 4.77 L 9 0.37 9 2.71 0 7 0 4.77 z";c.tablature.drawing.MusicFont.TrillUpSixteenth="M 0 8.77 L 9 4.37 9 6.71 0 11 0 8.77 z M 0 4.73 L 9 0.33 9 2.67 0 6.96 0 4.73 z";c.tablature.drawing.MusicFont.TrillUpThirtySecond="M 0 5.14 L 9 0.73 9 3.07 0 7.37 0 5.14 z M 0 9.01 L 9 4.61 9 6.95 0 11.24 0 9.01 z M 0 12.77 L 9 8.37 9 10.71 0 15 0 12.77 z";
c.tablature.drawing.MusicFont.AccentuatedNote="M 13 3.18 L 0 6 0 5.63 11.13 3.18 0 0.73 0 0.36 13 3.18 z";c.tablature.drawing.MusicFont.HeavyAccentuatedNote="M 11 12 L 7.6 12 4.15 5.61 0.84 12 0 12 5.22 1.7 11 12 z";c.tablature.drawing.MusicFont.VibratoLeftRight="M 11.19 5.58 C 10.1 6.65 9.09 7.81 7.93 8.81 7.35 9.3 6.98 8.26 6.55 7.93 5.36 6.62 4.18 5.31 2.98 4 2.41 4.23 2 4.73 1.53 5.13 1.02 5.62 0.51 6.1 0 6.59 0.02 6.16 -0.05 5.69 0.03 5.29 1.79 3.63 3.51 1.94 5.28 0.3 5.93 -0.41 6.4 0.74 6.92 1.1 7.99 2.21 8.99 3.4 10.14 4.44 11.34 3.53 12.36 2.39 13.47 1.36 13.89 0.9 14.4 0.54 14.88 0.14 c 0.54 0.23 0.81 0.82 1.22 1.23 0.81 0.91 1.56 1.88 2.41 2.74 0.45 0.72 1.08 0.87 1.61 0.14 0.59 -0.63 1.15 -1.28 1.73 -1.92 -0.02 0.45 0.04 0.93 -0.03 1.35 C 20.28 5.23 18.76 6.8 17.21 8.32 16.78 8.86 16.09 9.29 15.65 8.51 14.46 7.28 13.39 5.93 12.16 4.75 11.73 4.87 11.54 5.35 11.19 5.58 z";
c.tablature.model.BeatGroup.SCORE_MIDDLE_KEYS=[55,40,40,50];c.tablature.model.MeasureDrawing.ACCIDENTAL_SHARP_NOTES=[0,0,1,1,2,3,3,4,4,5,5,6];c.tablature.model.MeasureDrawing.ACCIDENTAL_FLAT_NOTES=[0,1,1,2,2,3,4,4,5,5,6,6];c.tablature.model.MeasureDrawing.ACCIDENTAL_NOTES=[false,true,false,true,false,false,true,false,true,false,true,false];c.tablature.model.MeasureDrawing.NONE=0;c.tablature.model.MeasureDrawing.NATURAL=1;c.tablature.model.MeasureDrawing.SHARP=2;c.tablature.model.MeasureDrawing.FLAT=
3;c.tablature.model.MeasureDrawing.ACCIDENTALS=[[1,1,1,1,1,1,1],[1,1,1,2,1,1,1],[2,1,1,2,1,1,1],[2,1,1,2,2,1,1],[2,2,1,2,2,1,1],[2,2,1,2,2,2,1],[2,2,2,2,2,2,1],[2,2,2,2,2,2,2],[1,1,1,1,1,1,3],[1,1,3,1,1,1,3],[1,1,3,1,1,3,3],[1,3,3,1,1,3,3],[1,3,3,1,3,3,3],[3,3,3,1,3,3,3],[3,3,3,3,3,3,3]];c.tablature.model.MeasureDrawing.CLEF_OFFSET=40;c.tablature.model.MeasureDrawing.TIME_SIGNATURE_SPACING=30;c.tablature.model.MeasureDrawing.LEFT_SPACING=10;c.tablature.model.MeasureDrawing.RIGHT_SPACING=10;c.tablature.staves.Stave.TS_NUMBER_WIDTH=
10;c.tablature.staves.Stave.TS_NUMBER_HEIGHT=15;c.tablature.staves.ScoreStave.SCORE_KEYSHARP_POSITIONS=[0,3,-1,2,5,1,4];c.tablature.staves.ScoreStave.SCORE_KEYFLAT_POSITIONS=[4,1,5,2,6,3,7];c.tablature.staves.ScoreStave.SCORE_SHARP_POSITIONS=[7,7,6,6,5,4,4,3,3,2,2,1];c.tablature.staves.ScoreStave.SCORE_FLAT_POSITIONS=[7,6,6,5,5,4,3,3,2,2,1,1];c.tablature.staves.ScoreStave.SCORE_CLEF_OFFSETS=[30,18,22,24];c.tablature.staves.ScoreStave.UP_OFFSET=28;c.tablature.staves.ScoreStave.DOWN_OFFSET=28;c.tablature.staves.ScoreStave.STAVE_ID=
"score";c.tablature.staves.ScoreStave.TopPadding=0;c.tablature.staves.ScoreStave.Text=1;c.tablature.staves.ScoreStave.Marker=2;c.tablature.staves.ScoreStave.Chord=3;c.tablature.staves.ScoreStave.TripletFeels=4;c.tablature.staves.ScoreStave.Tempo=5;c.tablature.staves.ScoreStave.Triplet=6;c.tablature.staves.ScoreStave.RepeatEnding=7;c.tablature.staves.ScoreStave.ScoreTopPadding=8;c.tablature.staves.ScoreStave.ScoreTopLines=9;c.tablature.staves.ScoreStave.ScoreMiddleLines=10;c.tablature.staves.ScoreStave.ScoreBottomLines=
11;c.tablature.staves.ScoreStave.BottomPadding=12;c.tablature.staves.ScoreStave.TimeSignaturePriority=2;c.tablature.staves.StaveLine.TopPadding=0;c.tablature.staves.StaveLine.BottomSpacing=1;c.tablature.staves.TablatureStave.STAVE_ID="tablature";c.tablature.staves.TablatureStave.TopPadding=0;c.tablature.staves.TablatureStave.AccentuatedNote=1;c.tablature.staves.TablatureStave.TapingEffect=2;c.tablature.staves.TablatureStave.LetRing=3;c.tablature.staves.TablatureStave.PalmMute=4;c.tablature.staves.TablatureStave.BeatVibrato=
5;c.tablature.staves.TablatureStave.NoteVibrato=6;c.tablature.staves.TablatureStave.FadeIn=7;c.tablature.staves.TablatureStave.Harmonics=8;c.tablature.staves.TablatureStave.Bends=9;c.tablature.staves.TablatureStave.TremoloBarTop=10;c.tablature.staves.TablatureStave.TablatureTopSeparator=11;c.tablature.staves.TablatureStave.Tablature=12;c.tablature.staves.TablatureStave.TablatureBottomSeparator=13;c.tablature.staves.TablatureStave.TremoloBarBottom=14;c.tablature.staves.TablatureStave.Rhythm=15;c.tablature.staves.TablatureStave.Fingering=
16;c.tablature.staves.TablatureStave.BottomPadding=17;p.xml.Parser.escapes=function(){var a=new p.ds.StringMap;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);c.Main.main()})();
