!function($global){"use strict";var $estr=function(){return js_Boot.__string_rec(this,"")};function $extend(from,fields){function Inherit(){}Inherit.prototype=from;var proto=new Inherit;for(var name in fields)proto[name]=fields[name];return fields.toString!==Object.prototype.toString&&(proto.toString=fields.toString),proto}var EReg=function(r,opt){this.r=new RegExp(r,opt.split("u").join(""))};EReg.__name__=!0,EReg.prototype={match:function(s){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(s),this.r.s=s,null!=this.r.m},matched:function(n){if(null!=this.r.m&&n>=0&&n<this.r.m.length)return this.r.m[n];throw new js__$Boot_HaxeError("EReg::matched")},__class__:EReg};var HxOverrides=function(){};HxOverrides.__name__=!0,HxOverrides.cca=function(s,index){var x=s.charCodeAt(index);if(x==x)return x},HxOverrides.substr=function(s,pos,len){if(null==len)len=s.length;else if(len<0){if(0!=pos)return"";len=s.length+len}return s.substr(pos,len)},HxOverrides.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}},Math.__name__=!0;var Std=function(){};Std.__name__=!0,Std.string=function(s){return js_Boot.__string_rec(s,"")},Std.parseInt=function(x){var v=parseInt(x,10);return 0!=v||120!=HxOverrides.cca(x,1)&&88!=HxOverrides.cca(x,1)||(v=parseInt(x)),isNaN(v)?null:v};var StringBuf=function(){this.b=""};StringBuf.__name__=!0,StringBuf.prototype={__class__:StringBuf};var StringTools=function(){};StringTools.__name__=!0,StringTools.startsWith=function(s,start){return s.length>=start.length&&HxOverrides.substr(s,0,start.length)==start},StringTools.endsWith=function(s,end){var elen=end.length,slen=s.length;return slen>=elen&&HxOverrides.substr(s,slen-elen,elen)==end},StringTools.isSpace=function(s,pos){var c=HxOverrides.cca(s,pos);return c>8&&c<14||32==c},StringTools.ltrim=function(s){for(var l=s.length,r=0;r<l&&StringTools.isSpace(s,r);)++r;return r>0?HxOverrides.substr(s,r,l-r):s},StringTools.rtrim=function(s){for(var l=s.length,r=0;r<l&&StringTools.isSpace(s,l-r-1);)++r;return r>0?HxOverrides.substr(s,0,l-r):s},StringTools.trim=function(s){return StringTools.ltrim(StringTools.rtrim(s))},StringTools.replace=function(s,sub,by){return s.split(sub).join(by)};var system_Exception=function(){};system_Exception.__name__=!0,system_Exception.prototype={Exception_CsString:function(message){this.Message=message},__class__:system_Exception};var alphaTab_AlphaTabException=function(){system_Exception.call(this)};alphaTab_AlphaTabException.__name__=!0,alphaTab_AlphaTabException.__super__=system_Exception,alphaTab_AlphaTabException.prototype=$extend(system_Exception.prototype,{AlphaTabException:function(message){return this.Exception_CsString(message),this.Description=message,this},__class__:alphaTab_AlphaTabException});var alphaTab_platform_IPathCanvas=function(){};alphaTab_platform_IPathCanvas.__name__=!0,alphaTab_platform_IPathCanvas.prototype={__class__:alphaTab_platform_IPathCanvas};var alphaTab_platform_ICanvas=function(){};alphaTab_platform_ICanvas.__name__=!0,alphaTab_platform_ICanvas.__interfaces__=[alphaTab_platform_IPathCanvas],alphaTab_platform_ICanvas.prototype={__class__:alphaTab_platform_ICanvas};var alphaTab_platform_svg_SvgCanvas=function(){this._currentPath="",this._currentPathIsEmpty=!0,this.set_Color(new alphaTab_platform_model_Color(255,255,255,255)),this.set_LineWidth(1),this.set_Font(new alphaTab_platform_model_Font("Arial",10,0)),this.set_TextAlign(0),this.set_TextBaseline(0)};alphaTab_platform_svg_SvgCanvas.__name__=!0,alphaTab_platform_svg_SvgCanvas.__interfaces__=[alphaTab_platform_IPathCanvas,alphaTab_platform_ICanvas],alphaTab_platform_svg_SvgCanvas.prototype={get_Color:function(){return this.__Color},set_Color:function(value){return this.__Color=value},get_LineWidth:function(){return this.__LineWidth},set_LineWidth:function(value){return this.__LineWidth=value},get_Font:function(){return this.__Font},set_Font:function(value){return this.__Font=value},get_TextAlign:function(){return this.__TextAlign},set_TextAlign:function(value){return this.__TextAlign=value},get_TextBaseline:function(){return this.__TextBaseline},set_TextBaseline:function(value){return this.__TextBaseline=value},get_Resources:function(){return this.__Resources},set_Resources:function(value){return this.__Resources=value},BeginRender:function(width,height){this.Buffer="",this.Buffer+=Std.string('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'),this.Buffer+=Std.string(width),this.Buffer+=Std.string('px" height="'),this.Buffer+=Std.string(height),this.Buffer+=Std.string('px" class="alphaTabSurfaceSvg">\n');this._currentPath="",this._currentPathIsEmpty=!0},BeginGroup:function(identifier){this.Buffer+=Std.string('<g class="'+identifier+'">')},EndGroup:function(){this.Buffer+=Std.string("</g>")},EndRender:function(){return this.Buffer+=Std.string("</svg>"),this.Buffer},FillRect:function(x,y,w,h){if(w>0){var s='<rect x="'+(system_Convert.ToInt32_Single(x)-.5)+'" y="'+(system_Convert.ToInt32_Single(y)-.5)+'" width="'+w+'" height="'+h+'" fill="'+this.get_Color().RGBA+'" />\n';this.Buffer+=Std.string(s)}},StrokeRect:function(x,y,w,h){var s='<rect x="'+(system_Convert.ToInt32_Single(x)-.5)+'" y="'+(system_Convert.ToInt32_Single(y)-.5)+'" width="'+w+'" height="'+h+'" stroke="'+this.get_Color().RGBA+'"';if(this.Buffer+=Std.string(s),1!=this.get_LineWidth()){var s1=' stroke-width="'+this.get_LineWidth()+'"';this.Buffer+=Std.string(s1)}this.Buffer+=Std.string(' fill="transparent" />\n')},BeginPath:function(){},ClosePath:function(){this._currentPath+=Std.string(" z")},MoveTo:function(x,y){this._currentPath+=Std.string(" M"+(x-.5)+","+(y-.5))},LineTo:function(x,y){this._currentPathIsEmpty=!1,this._currentPath+=Std.string(" L"+(x-.5)+","+(y-.5))},QuadraticCurveTo:function(cpx,cpy,x,y){this._currentPathIsEmpty=!1,this._currentPath+=Std.string(" Q"+cpx+","+cpy+","+x+","+y)},BezierCurveTo:function(cp1x,cp1y,cp2x,cp2y,x,y){this._currentPathIsEmpty=!1,this._currentPath+=Std.string(" C"+cp1x+","+cp1y+","+cp2x+","+cp2y+","+x+","+y)},FillCircle:function(x,y,radius){this._currentPathIsEmpty=!1,this._currentPath+=Std.string(" M"+(x-radius)+","+y+" A1,1 0 0,0 "+(x+radius)+","+y+" A1,1 0 0,0 "+(x-radius)+","+y+" z"),this.Fill()},Fill:function(){if(!this._currentPathIsEmpty){if(this.Buffer+=Std.string('<path d="'+this._currentPath+'"'),"#000000"!=this.get_Color().RGBA){var s=' fill="'+this.get_Color().RGBA+'"';this.Buffer+=Std.string(s)}this.Buffer+=Std.string(' stroke="none"/>')}this._currentPath="",this._currentPathIsEmpty=!0},Stroke:function(){if(!this._currentPathIsEmpty){var s='<path d="'+this._currentPath+'" stroke="'+this.get_Color().RGBA+'"';1!=this.get_LineWidth()&&(s=s+' stroke-width="'+Std.string(this.get_LineWidth())+'"'),s+=' fill="none" />',this.Buffer+=Std.string(s)}this._currentPath="",this._currentPathIsEmpty=!0},FillText:function(text,x,y){var s='<text x="'+system_Convert.ToInt32_Single(x)+'" y="'+system_Convert.ToInt32_Single(y)+'" style="font:'+this.get_Font().ToCssString(1)+'"  dominant-baseline="'+this.GetSvgBaseLine()+'"';"#000000"!=this.get_Color().RGBA&&(s=s+' fill="'+this.get_Color().RGBA+'"'),0!=this.get_TextAlign()&&(s=s+' text-anchor="'+this.GetSvgTextAlignment()+'"'),s=s+">"+text+"</text>",this.Buffer+=Std.string(s)},GetSvgTextAlignment:function(){switch(this.get_TextAlign()){case 0:return"start";case 1:return"middle";case 2:return"end"}return""},GetSvgBaseLine:function(){switch(this.get_TextBaseline()){case 0:return"hanging";case 1:return"middle";case 2:return"bottom";default:return""}},MeasureText:function(text){if(null==text||0==text.length)return 0;var font=1;return-1!=this.get_Font().Family.indexOf("Times")&&(font=0),alphaTab_platform_svg_FontSizes.MeasureString(text,font,this.get_Font().Size,this.get_Font().Style)},FillMusicFontSymbol:function(x,y,scale,symbol){throw new js__$Boot_HaxeError("abstract")},OnPreRender:function(){return null},OnRenderFinished:function(){return null},__class__:alphaTab_platform_svg_SvgCanvas};var alphaTab_platform_svg_CssFontSvgCanvas=function(){alphaTab_platform_svg_SvgCanvas.call(this)};alphaTab_platform_svg_CssFontSvgCanvas.__name__=!0,alphaTab_platform_svg_CssFontSvgCanvas.__super__=alphaTab_platform_svg_SvgCanvas,alphaTab_platform_svg_CssFontSvgCanvas.prototype=$extend(alphaTab_platform_svg_SvgCanvas.prototype,{FillMusicFontSymbol:function(x,y,scale,symbol){var s='<g transform="translate('+(system_Convert.ToInt32_Single(x)-.5)+" "+(system_Convert.ToInt32_Single(y)-.5)+')" class="at" ><text';if(this.Buffer+=Std.string(s),1!=scale&&(this.Buffer+=Std.string('  style="font-size: '+100*scale+'%"')),"#000000"!=this.get_Color().RGBA){var s1=' fill="'+this.get_Color().RGBA+'"';this.Buffer+=Std.string(s1)}this.Buffer+=Std.string(">&#"+symbol+";</text></g>")},__class__:alphaTab_platform_svg_CssFontSvgCanvas});var alphaTab_platform_model_Color=function(r,g,b,a){null==a&&(a=255),this.Raw=a<<24|r<<16|g<<8|b,255==this.get_A()?this.RGBA="#"+alphaTab_platform_Platform.ToHexString(this.get_R(),2)+alphaTab_platform_Platform.ToHexString(this.get_G(),2)+alphaTab_platform_Platform.ToHexString(this.get_B(),2):this.RGBA="rgba("+this.get_R()+","+this.get_G()+","+this.get_B()+","+this.get_A()/255+")"};alphaTab_platform_model_Color.__name__=!0,alphaTab_platform_model_Color.prototype={get_A:function(){return system_Convert.ToUInt8(this.Raw>>24&255)},get_R:function(){return system_Convert.ToUInt8(this.Raw>>16&255)},get_G:function(){return system_Convert.ToUInt8(this.Raw>>8&255)},get_B:function(){return system_Convert.ToUInt8(255&this.Raw)},__class__:alphaTab_platform_model_Color};var alphaTab_platform_Platform=function(){};alphaTab_platform_Platform.__name__=!0,alphaTab_platform_Platform.ParseFloat=function(s){return parseFloat(s)},alphaTab_platform_Platform.GetCallerName=function(){return arguments.callee.caller.caller.name},alphaTab_platform_Platform.Log=function(logLevel,category,msg,details){var stack=haxe_CallStack.toString(haxe_CallStack.callStack());switch(msg="[AlphaTab]["+category+"] "+msg,logLevel){case 0:break;case 1:window.console.debug([msg,details]);break;case 2:window.console.info([msg,details]);break;case 3:window.console.warn([msg,details]);break;case 4:window.console.error([msg,stack,details])}},alphaTab_platform_Platform.NewObject=function(){return{}},alphaTab_platform_Platform.JsonExists=function(json,property){return json&&property in json},alphaTab_platform_Platform.JsonKeys=function(json){return Object.keys(json)},alphaTab_platform_Platform.Log2=function(f){return Math.log2(f)},alphaTab_platform_Platform.ParseInt=function(s){var val=parseInt(s);return isNaN(val)?-2147483648:val},alphaTab_platform_Platform.CloneArray=function(array){return new Int32Array(array)},alphaTab_platform_Platform.BlockCopy=function(src,srcOffset,dst,dstOffset,count){for(var i=0;i<count;)dst[dstOffset+i]=src[srcOffset+i],++i},alphaTab_platform_Platform.StringFromCharCode=function(c){return String.fromCharCode(c)},alphaTab_platform_Platform.ReadSignedByte=function(readable){var n=readable.ReadByte();return n>=128?system_Convert.ToInt8(n-256):system_Convert.ToInt8(n)},alphaTab_platform_Platform.ToString=function(data){for(var s="",i=0;i<data.length;){var c=data[i++];if(c<128){if(0==c)break;s+=String.fromCharCode(c)}else if(c<224)s+=String.fromCharCode((63&c)<<6|127&data[i++]);else if(c<240)s+=String.fromCharCode((31&c)<<12|(127&data[i++])<<6|127&data[i++]);else{var u=(15&c)<<18|(127&data[i++])<<12|(127&data[i++])<<6|127&data[i++];s+=String.fromCharCode(55232+(u>>18)),s+=String.fromCharCode(1023&u|56320)}}return s},alphaTab_platform_Platform.StringToByteArray=function(contents){for(var byteArray=system__$FixedArray_FixedArray_$Impl_$._new(contents.length),i=0;i<contents.length;){var this1=system_Convert.ToUInt16(HxOverrides.cca(contents,i));byteArray[i]=system_Convert.ToUInt8(this1),++i}return byteArray},alphaTab_platform_Platform.S4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},alphaTab_platform_Platform.NewGuid=function(){var lhs=alphaTab_platform_Platform.S4()+alphaTab_platform_Platform.S4(),this1=system_Convert.ToUInt16(45),lhs1=lhs+Std.string(this1)+alphaTab_platform_Platform.S4(),this2=system_Convert.ToUInt16(45),lhs2=lhs1+Std.string(this2)+alphaTab_platform_Platform.S4(),this3=system_Convert.ToUInt16(45),lhs3=lhs2+Std.string(this3)+alphaTab_platform_Platform.S4(),this4=system_Convert.ToUInt16(45);return lhs3+Std.string(this4)+alphaTab_platform_Platform.S4()+alphaTab_platform_Platform.S4()+alphaTab_platform_Platform.S4()},alphaTab_platform_Platform.Member=function(s,name){return s[name]},alphaTab_platform_Platform.Match=function(s,regex){return s.match(regex)},alphaTab_platform_Platform.IsTruthy=function(o){return!!o},alphaTab_platform_Platform.IsNaN=function(v){return isNaN(v)},alphaTab_platform_Platform.TypeOf=function(o){return typeof o},alphaTab_platform_Platform.ArrayBufferToByteArray=function(data){return new Uint8Array(data)},alphaTab_platform_Platform.IsStringNumber=function(s,allowSign){if(null==allowSign&&(allowSign=!0),0==s.length)return!1;var c=system_Convert.ToUInt16(HxOverrides.cca(s,0));return alphaTab_platform_Platform.IsCharNumber(c,allowSign)},alphaTab_platform_Platform.IsCharNumber=function(c,allowSign){return null==allowSign&&(allowSign=!0),!(!allowSign||45!=c)||c>=48&&c<=57},alphaTab_platform_Platform.IsWhiteSpace=function(c){return 32==c||11==c||13==c||10==c},alphaTab_platform_Platform.ToHexString=function(n,digits){null==digits&&(digits=0);for(var s="";;){var this1=system_Convert.ToUInt16(HxOverrides.cca("0123456789ABCDEF",15&n));if(s=String.fromCharCode(this1)+s,!((n>>=4)>0))break}for(;s.length<digits;)s="0"+s;return s};var system_Convert=function(){};system_Convert.__name__=!0,system_Convert.ToInt8=function(v){return system_Convert._int32Buffer[0]=v,system_Convert._int8Buffer[0]},system_Convert.ToUInt8=function(v){return system_Convert._int32Buffer[0]=v,system_Convert._uint8Buffer[0]},system_Convert.ToInt16=function(v){return system_Convert._int32Buffer[0]=v,system_Convert._int16Buffer[0]},system_Convert.ToUInt16=function(v){return system_Convert._int32Buffer[0]=v,system_Convert._uint16Buffer[0]},system_Convert.ToUInt32=function(v){return system_Convert._int32Buffer[0]=v,system_Convert._uint32Buffer[0]},system_Convert.ToInt64=function(v){return v},system_Convert.ToUInt64=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToInt32=function(v){return system_Convert._uint32Buffer[0]=v,system_Convert._int32Buffer[0]},system_Convert.ToBoolean_Byte=function(v){return 0!=v},system_Convert.ToChar_Byte=function(v){return v},system_Convert.ToSByte_Byte=function(v){return system_Convert.ToInt8(v)},system_Convert.ToByte_Byte=function(v){return v},system_Convert.ToInt16_Byte=function(v){return v},system_Convert.ToUInt16_Byte=function(v){return v},system_Convert.ToInt32_Byte=function(v){return v},system_Convert.ToUInt32_Byte=function(v){return v},system_Convert.ToInt64_Byte=function(v){return v},system_Convert.ToUInt64_Byte=function(v){return v},system_Convert.ToSingle_Byte=function(v){return v},system_Convert.ToDouble_Byte=function(v){return v},system_Convert.ToBoolean_Char=function(v){throw new js__$Boot_HaxeError(new system_InvalidCastException("cannot cast system.Char to system.Boolean"))},system_Convert.ToChar_Char=function(v){return v},system_Convert.ToByte_Char=function(v){return system_Convert.ToUInt8(v)},system_Convert.ToSByte_Char=function(v){return system_Convert.ToInt8(v)},system_Convert.ToInt16_Char=function(v){return system_Convert.ToInt16(v)},system_Convert.ToUInt16_Char=function(v){return v},system_Convert.ToInt32_Char=function(v){return v},system_Convert.ToUInt32_Char=function(v){return v},system_Convert.ToInt64_Char=function(v){return v},system_Convert.ToUInt64_Char=function(v){return v},system_Convert.ToSingle_Char=function(v){throw new js__$Boot_HaxeError(new system_InvalidCastException("cannot cast system.Char to system.Single"))},system_Convert.ToDouble_Char=function(v){throw new js__$Boot_HaxeError(new system_InvalidCastException("cannot cast system.Char to system.Double"))},system_Convert.ToBoolean_Double=function(v){return 0!=v},system_Convert.ToChar_Double=function(v){throw new js__$Boot_HaxeError(new system_InvalidCastException("cannot cast system.Double to system.Char"))},system_Convert.ToByte_Double=function(v){return system_Convert.ToUInt8(system_Convert.ToInt32_Double(v))},system_Convert.ToSByte_Double=function(v){return system_Convert.ToInt8(system_Convert.ToInt32_Double(v))},system_Convert.ToInt16_Double=function(v){return system_Convert.ToInt16(system_Convert.ToInt32_Double(v))},system_Convert.ToUInt16_Double=function(v){return system_Convert.ToUInt16(system_Convert.ToInt32_Double(v))},system_Convert.ToInt32_Double=function(v){if(v>=0){if(v<2147483647.5){var result=0|v,dif=v-result;return(dif>.5||.5==dif&&0!=(1&result))&&++result,result}}else if(v>=-2147483648.5){var result1=0|v,dif1=v-result1;return(dif1<-.5||-.5==dif1&&0!=(1&result1))&&--result1,result1}throw new js__$Boot_HaxeError(new system_OverflowException("Value was either too large or too small for a Int32."))},system_Convert.ToUInt32_Double=function(v){return system_Convert.ToUInt32(system_Convert.ToInt32_Double(v))},system_Convert.ToInt64_Double=function(v){return 0|v},system_Convert.ToUInt64_Double=function(v){return system_Convert.ToInt64(0|v)},system_Convert.ToSingle_Double=function(v){return v},system_Convert.ToDouble_Double=function(v){return v},system_Convert.ToBoolean_Int16=function(v){return 0!=v},system_Convert.ToChar_Int16=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToSByte_Int16=function(v){return system_Convert.ToInt8(v)},system_Convert.ToByte_Int16=function(v){return system_Convert.ToUInt8(v)},system_Convert.ToInt16_Int16=function(v){return v},system_Convert.ToUInt16_Int16=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToInt32_Int16=function(v){return v},system_Convert.ToUInt32_Int16=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToInt64_Int16=function(v){return v},system_Convert.ToUInt64_Int16=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToSingle_Int16=function(v){return v},system_Convert.ToDouble_Int16=function(v){return v},system_Convert.ToBoolean_Int32=function(v){return 0!=v},system_Convert.ToChar_Int32=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToSByte_Int32=function(v){return system_Convert.ToInt8(v)},system_Convert.ToByte_Int32=function(v){return system_Convert.ToUInt8(v)},system_Convert.ToInt16_Int32=function(v){return system_Convert.ToInt16(v)},system_Convert.ToUInt16_Int32=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToInt32_Int32=function(v){return v},system_Convert.ToUInt32_Int32=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToInt64_Int32=function(v){return v},system_Convert.ToUInt64_Int32=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToSingle_Int32=function(v){return v},system_Convert.ToDouble_Int32=function(v){return v},system_Convert.ToBoolean_Int64=function(v){return 0!=v},system_Convert.ToChar_Int64=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToSByte_Int64=function(v){return system_Convert.ToInt8(v)},system_Convert.ToByte_Int64=function(v){return system_Convert.ToUInt8(v)},system_Convert.ToInt16_Int64=function(v){return system_Convert.ToInt16(v)},system_Convert.ToUInt16_Int64=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToInt32_Int64=function(v){return system_Convert.ToInt32(v)},system_Convert.ToUInt32_Int64=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToInt64_Int64=function(v){return v},system_Convert.ToUInt64_Int64=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToSingle_Int64=function(v){return v},system_Convert.ToDouble_Int64=function(v){return v},system_Convert.ToBoolean_SByte=function(v){return 0!=v},system_Convert.ToChar_SByte=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToSByte_SByte=function(v){return v},system_Convert.ToByte_SByte=function(v){return system_Convert.ToUInt8(v)},system_Convert.ToInt16_SByte=function(v){return v},system_Convert.ToUInt16_SByte=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToInt32_SByte=function(v){return v},system_Convert.ToUInt32_SByte=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToInt64_SByte=function(v){return v},system_Convert.ToUInt64_SByte=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToSingle_SByte=function(v){return v},system_Convert.ToDouble_SByte=function(v){return v},system_Convert.ToBoolean_Single=function(v){return 0!=v},system_Convert.ToChar_Single=function(v){throw new js__$Boot_HaxeError(new system_InvalidCastException("cannot cast system.Single to system.Char"))},system_Convert.ToByte_Single=function(v){return system_Convert.ToUInt8(system_Convert.ToInt32_Single(v))},system_Convert.ToSByte_Single=function(v){return system_Convert.ToInt8(system_Convert.ToInt32_Single(v))},system_Convert.ToInt16_Single=function(v){return system_Convert.ToInt16(system_Convert.ToInt32_Single(v))},system_Convert.ToUInt16_Single=function(v){return system_Convert.ToUInt16(system_Convert.ToInt32_Single(v))},system_Convert.ToInt32_Single=function(v){var this1=v;return system_Convert.ToInt32_Double(this1)},system_Convert.ToUInt32_Single=function(v){return system_Convert.ToUInt32(system_Convert.ToInt32_Single(v))},system_Convert.ToInt64_Single=function(v){return 0|v},system_Convert.ToUInt64_Single=function(v){return system_Convert.ToInt64(0|v)},system_Convert.ToSingle_Single=function(v){return v},system_Convert.ToDouble_Single=function(v){return v},system_Convert.ToBoolean_UInt16=function(v){return 0!=v},system_Convert.ToChar_UInt16=function(v){return v},system_Convert.ToSByte_UInt16=function(v){return system_Convert.ToInt8(v)},system_Convert.ToByte_UInt16=function(v){return system_Convert.ToUInt8(v)},system_Convert.ToInt16_UInt16=function(v){return system_Convert.ToInt16(v)},system_Convert.ToUInt16_UInt16=function(v){return v},system_Convert.ToInt32_UInt16=function(v){return v},system_Convert.ToUInt32_UInt16=function(v){return v},system_Convert.ToInt64_UInt16=function(v){return v},system_Convert.ToUInt64_UInt16=function(v){return v},system_Convert.ToSingle_UInt16=function(v){return v},system_Convert.ToDouble_UInt16=function(v){return v},system_Convert.ToBoolean_UInt32=function(v){return 0!=v},system_Convert.ToChar_UInt32=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToSByte_UInt32=function(v){return system_Convert.ToInt8(v)},system_Convert.ToByte_UInt32=function(v){return system_Convert.ToUInt8(v)},system_Convert.ToInt16_UInt32=function(v){return system_Convert.ToInt16(v)},system_Convert.ToUInt16_UInt32=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToInt32_UInt32=function(v){return system_Convert.ToInt32(v)},system_Convert.ToUInt32_UInt32=function(v){return v},system_Convert.ToInt64_UInt32=function(v){return v},system_Convert.ToUInt64_UInt32=function(v){return v},system_Convert.ToSingle_UInt32=function(v){return v},system_Convert.ToDouble_UInt32=function(v){return v},system_Convert.ToBoolean_UInt64=function(v){return 0!=v},system_Convert.ToChar_UInt64=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToSByte_UInt64=function(v){return system_Convert.ToInt8(v)},system_Convert.ToByte_UInt64=function(v){return system_Convert.ToUInt8(v)},system_Convert.ToInt16_UInt64=function(v){return system_Convert.ToInt16(v)},system_Convert.ToUInt16_UInt64=function(v){return system_Convert.ToUInt16(v)},system_Convert.ToInt32_UInt64=function(v){return system_Convert.ToInt32(v)},system_Convert.ToUInt32_UInt64=function(v){return system_Convert.ToUInt32(v)},system_Convert.ToInt64_UInt64=function(v){return system_Convert.ToInt32(v)},system_Convert.ToUInt64_UInt64=function(v){return v},system_Convert.ToSingle_UInt64=function(v){return v},system_Convert.ToDouble_UInt64=function(v){return v};var alphaTab_platform_model_Font=function(family,size,style){null==style&&(style=0),this.Family=family,this.Size=size,this.Style=style,this._css=this.ToCssString(1)};alphaTab_platform_model_Font.__name__=!0,alphaTab_platform_model_Font.prototype={get_IsBold:function(){return 0!=(1&this.Style)},get_IsItalic:function(){return 0!=(2&this.Style)},Clone:function(){return new alphaTab_platform_model_Font(this.Family,this.Size,this.Style)},ToCssString:function(scale){if(null==scale&&(scale=1),null!=this._css&&1==scale)return this._css;var buf="";return this.get_IsBold()&&(buf+=Std.string("bold ")),this.get_IsItalic()&&(buf+=Std.string("italic ")),buf+=Std.string(this.Size*scale),buf+=Std.string("px "),buf+=Std.string("'"),buf+=Std.string(this.Family),buf+=Std.string("'")},__class__:alphaTab_platform_model_Font};var alphaTab_util_Logger=function(){};alphaTab_util_Logger.__name__=!0,alphaTab_util_Logger.Debug=function(category,msg,details){alphaTab_util_Logger.Log(1,category,msg,details)},alphaTab_util_Logger.Warning=function(category,msg,details){alphaTab_util_Logger.Log(3,category,msg,details)},alphaTab_util_Logger.Info=function(category,msg,details){alphaTab_util_Logger.Log(2,category,msg,details)},alphaTab_util_Logger.Error=function(category,msg,details){alphaTab_util_Logger.Log(4,category,msg,details)},alphaTab_util_Logger.Log=function(logLevel,category,msg,details){logLevel<alphaTab_util_Logger.LogLevel||alphaTab_platform_Platform.Log(logLevel,category,msg,details)},alphaTab_util_Logger.prototype={__class__:alphaTab_util_Logger};var haxe_CallStack=function(){};haxe_CallStack.__name__=!0,haxe_CallStack.getStack=function(e){if(null==e)return[];var oldValue=Error.prepareStackTrace;Error.prepareStackTrace=function(error,callsites){for(var stack=[],_g=0;_g<callsites.length;){var site=callsites[_g];++_g,null!=haxe_CallStack.wrapCallSite&&(site=haxe_CallStack.wrapCallSite(site));var method=null,fullName=site.getFunctionName();if(null!=fullName){var idx=fullName.lastIndexOf(".");if(idx>=0){var className=HxOverrides.substr(fullName,0,idx),methodName=HxOverrides.substr(fullName,idx+1,null);method=haxe_StackItem.Method(className,methodName)}}stack.push(haxe_StackItem.FilePos(method,site.getFileName(),site.getLineNumber()))}return stack};var a=haxe_CallStack.makeStack(e.stack);return Error.prepareStackTrace=oldValue,a},haxe_CallStack.callStack=function(){try{throw new Error}catch(e){e instanceof js__$Boot_HaxeError&&(e=e.val);var a=haxe_CallStack.getStack(e);return a.shift(),a}},haxe_CallStack.toString=function(stack){for(var b=new StringBuf,_g=0;_g<stack.length;){var s=stack[_g];++_g,b.b+="\nCalled from ",haxe_CallStack.itemToString(b,s)}return b.b},haxe_CallStack.itemToString=function(b,s){switch(s[1]){case 0:b.b+="a C function";break;case 1:var m=s[2];b.b+="module ",b.b+=null==m?"null":""+m;break;case 2:var line=s[4],file=s[3],s1=s[2];null!=s1&&(haxe_CallStack.itemToString(b,s1),b.b+=" ("),b.b+=null==file?"null":""+file,b.b+=" line ",b.b+=null==line?"null":""+line,null!=s1&&(b.b+=")");break;case 3:var meth=s[3],cname=s[2];b.b+=null==cname?"null":""+cname,b.b+=".",b.b+=null==meth?"null":""+meth;break;case 4:var n=s[2];b.b+="local function #",b.b+=null==n?"null":""+n}},haxe_CallStack.makeStack=function(s){if(null==s)return[];if("string"==typeof s){var stack=s.split("\n");"Error"==stack[0]&&stack.shift();for(var m=[],rie10=new EReg("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",""),_g=0;_g<stack.length;){var line=stack[_g];if(++_g,rie10.match(line)){var path=rie10.matched(1).split("."),meth=path.pop(),file=rie10.matched(2),line1=Std.parseInt(rie10.matched(3));m.push(haxe_StackItem.FilePos("Anonymous function"==meth?haxe_StackItem.LocalFunction():"Global code"==meth?null:haxe_StackItem.Method(path.join("."),meth),file,line1))}else m.push(haxe_StackItem.Module(StringTools.trim(line)))}return m}return s};var js_Boot=function(){};js_Boot.__name__=!0,js_Boot.getClass=function(o){if(o instanceof Array&&null==o.__enum__)return Array;var cl=o.__class__;if(null!=cl)return cl;var name=js_Boot.__nativeClassName(o);return null!=name?js_Boot.__resolveNativeClass(name):null},js_Boot.__string_rec=function(o,s){if(null==o)return"null";if(s.length>=5)return"<...>";var t=typeof o;switch("function"==t&&(o.__name__||o.__ename__)&&(t="object"),t){case"function":return"<function>";case"object":if(o instanceof Array){if(o.__enum__){if(2==o.length)return o[0];var str=o[0]+"(";s+="\t";for(var _g1=2,_g=o.length;_g1<_g;){var i=_g1++;str+=2!=i?","+js_Boot.__string_rec(o[i],s):js_Boot.__string_rec(o[i],s)}return str+")"}var l=o.length,str1="[";s+="\t";for(var _g11=0,_g2=l;_g11<_g2;){var i2=_g11++;str1+=(i2>0?",":"")+js_Boot.__string_rec(o[i2],s)}return str1+="]"}var tostr;try{tostr=o.toString}catch(e){return"???"}if(null!=tostr&&tostr!=Object.toString&&"function"==typeof tostr){var s2=o.toString();if("[object Object]"!=s2)return s2}var k=null,str2="{\n";s+="\t";var hasp=null!=o.hasOwnProperty;for(var k in o)hasp&&!o.hasOwnProperty(k)||"prototype"!=k&&"__class__"!=k&&"__super__"!=k&&"__interfaces__"!=k&&"__properties__"!=k&&(2!=str2.length&&(str2+=", \n"),str2+=s+k+" : "+js_Boot.__string_rec(o[k],s));return str2+="\n"+(s=s.substring(1))+"}";case"string":return o;default:return String(o)}},js_Boot.__interfLoop=function(cc,cl){if(null==cc)return!1;if(cc==cl)return!0;var intf=cc.__interfaces__;if(null!=intf)for(var _g1=0,_g=intf.length;_g1<_g;){var i1=intf[_g1++];if(i1==cl||js_Boot.__interfLoop(i1,cl))return!0}return js_Boot.__interfLoop(cc.__super__,cl)},js_Boot.__instanceof=function(o,cl){if(null==cl)return!1;switch(cl){case Array:return o instanceof Array&&null==o.__enum__;case Bool:return"boolean"==typeof o;case Dynamic:return!0;case Float:return"number"==typeof o;case Int:return"number"==typeof o&&(0|o)===o;case String:return"string"==typeof o;default:if(null==o)return!1;if("function"==typeof cl){if(o instanceof cl)return!0;if(js_Boot.__interfLoop(js_Boot.getClass(o),cl))return!0}else if("object"==typeof cl&&js_Boot.__isNativeObj(cl)&&o instanceof cl)return!0;return cl==Class&&null!=o.__name__||(cl==Enum&&null!=o.__ename__||o.__enum__==cl)}},js_Boot.__cast=function(o,t){if(js_Boot.__instanceof(o,t))return o;throw new js__$Boot_HaxeError("Cannot cast "+Std.string(o)+" to "+Std.string(t))},js_Boot.__nativeClassName=function(o){var name=js_Boot.__toStr.call(o).slice(8,-1);return"Object"==name||"Function"==name||"Math"==name||"JSON"==name?null:name},js_Boot.__isNativeObj=function(o){return null!=js_Boot.__nativeClassName(o)},js_Boot.__resolveNativeClass=function(name){return $global[name]};var haxe_StackItem={__ename__:!0,__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"]};haxe_StackItem.CFunction=["CFunction",0],haxe_StackItem.CFunction.toString=$estr,haxe_StackItem.CFunction.__enum__=haxe_StackItem,haxe_StackItem.Module=function(m){var $x=["Module",1,m];return $x.__enum__=haxe_StackItem,$x.toString=$estr,$x},haxe_StackItem.FilePos=function(s,file,line){var $x=["FilePos",2,s,file,line];return $x.__enum__=haxe_StackItem,$x.toString=$estr,$x},haxe_StackItem.Method=function(classname,method){var $x=["Method",3,classname,method];return $x.__enum__=haxe_StackItem,$x.toString=$estr,$x},haxe_StackItem.LocalFunction=function(v){var $x=["LocalFunction",4,v];return $x.__enum__=haxe_StackItem,$x.toString=$estr,$x};var alphaTab_rendering_layout_ScoreLayout=function(renderer){this.Renderer=renderer;this._barRendererLookup={}};alphaTab_rendering_layout_ScoreLayout.__name__=!0,alphaTab_rendering_layout_ScoreLayout.prototype={get_Name:function(){throw new js__$Boot_HaxeError("abstract")},get_SupportsResize:function(){throw new js__$Boot_HaxeError("abstract")},Resize:function(){throw new js__$Boot_HaxeError("abstract")},LayoutAndRender:function(){this.CreateScoreInfoGlyphs(),this.DoLayoutAndRender()},DoLayoutAndRender:function(){throw new js__$Boot_HaxeError("abstract")},CreateScoreInfoGlyphs:function(){alphaTab_util_Logger.Info("ScoreLayout","Creating score info glyphs",null);var flags=this.Renderer.Settings.Layout.Get("hideInfo",!1)?0:511,score=this.Renderer.Score,res=this.Renderer.RenderingResources;this.ScoreInfoGlyphs={};var s=score.Title;null!=s&&0!=s.length&&0!=(1&flags)&&(this.ScoreInfoGlyphs[1]=new alphaTab_rendering_glyphs_TextGlyph(0,0,score.Title,res.TitleFont,1));var s1=score.SubTitle;null!=s1&&0!=s1.length&&0!=(2&flags)&&(this.ScoreInfoGlyphs[2]=new alphaTab_rendering_glyphs_TextGlyph(0,0,score.SubTitle,res.SubTitleFont,1));var s2=score.Artist;null!=s2&&0!=s2.length&&0!=(4&flags)&&(this.ScoreInfoGlyphs[4]=new alphaTab_rendering_glyphs_TextGlyph(0,0,score.Artist,res.SubTitleFont,1));var s3=score.Album;null!=s3&&0!=s3.length&&0!=(8&flags)&&(this.ScoreInfoGlyphs[8]=new alphaTab_rendering_glyphs_TextGlyph(0,0,score.Album,res.SubTitleFont,1));var s4=score.Music;if(!!(null!=s4&&0!=s4.length&&score.Music==score.Words)&&0!=(64&flags))this.ScoreInfoGlyphs[64]=new alphaTab_rendering_glyphs_TextGlyph(0,0,"Music and Words by "+score.Words,res.WordsFont,1);else{var s5=score.Music;null!=s5&&0!=s5.length&&0!=(32&flags)&&(this.ScoreInfoGlyphs[32]=new alphaTab_rendering_glyphs_TextGlyph(0,0,"Music by "+score.Music,res.WordsFont,2));var s6=score.Words;null!=s6&&0!=s6.length&&0!=(16&flags)&&(this.ScoreInfoGlyphs[16]=new alphaTab_rendering_glyphs_TextGlyph(0,0,"Words by "+score.Music,res.WordsFont,0))}if(1==this.Renderer.Tracks.length&&!this.Renderer.Tracks[0].IsPercussion&&!this.Renderer.Settings.Layout.Get("hideTuning",!1)){var tuning=alphaTab_model_Tuning.FindTuning(this.Renderer.Tracks[0].Tuning);null!=tuning&&(this.TuningGlyph=new alphaTab_rendering_glyphs_TuningGlyph(0,0,this.get_Scale(),this.Renderer.RenderingResources,tuning))}},get_Scale:function(){return this.Renderer.Settings.Scale},CreateEmptyStaveGroup:function(){var group=new alphaTab_rendering_staves_StaveGroup;group.Layout=this;for(var trackIndex=0;trackIndex<this.Renderer.Tracks.length;){var staveProfile,track=this.Renderer.Tracks[trackIndex];staveProfile=track.IsPercussion?"score":track.get_IsStringed()?this.Renderer.Settings.Staves.Id:"score";for(var profile=alphaTab_Environment.StaveProfiles.hasOwnProperty(staveProfile)?alphaTab_Environment.StaveProfiles[staveProfile]:alphaTab_Environment.StaveProfiles.default,staveIndex=0;staveIndex<track.Staves.length;){for(var renderStaveIndex=0;renderStaveIndex<profile.length;){var factory=profile[renderStaveIndex],staff=track.Staves[staveIndex];factory.CanCreate(track,staff)&&group.AddStaff(track,new alphaTab_rendering_staves_Staff(trackIndex,staff,factory)),++renderStaveIndex}++staveIndex}++trackIndex}return group},RegisterBarRenderer:function(key,renderer){if(!this._barRendererLookup.hasOwnProperty(key)){this._barRendererLookup[key]={}}this._barRendererLookup[key][renderer.Bar.Id]=renderer},UnregisterBarRenderer:function(key,renderer){if(this._barRendererLookup.hasOwnProperty(key)){var lookup=this._barRendererLookup[key];renderer.Bar.Id;delete lookup[index]}},GetRendererForBar:function(key,bar){var barRendererId=bar.Id;return this._barRendererLookup.hasOwnProperty(key)&&this._barRendererLookup[key].hasOwnProperty(barRendererId)?this._barRendererLookup[key][barRendererId]:null},RenderAnnotation:function(){var canvas=this.Renderer.Canvas,resources=this.Renderer.RenderingResources,height=2*resources.CopyrightFont.Size;this.Height=this.Height+height;var x=this.Width/2;canvas.BeginRender(this.Width,height),canvas.set_Color(resources.MainGlyphColor),canvas.set_Font(resources.CopyrightFont),canvas.set_TextAlign(1),canvas.FillText("Rendered using alphaTab (http://www.alphaTab.net)",x,resources.CopyrightFont.Size);canvas.EndRender();this.Renderer.OnPartialRenderFinished(new alphaTab_rendering_RenderFinishedEventArgs)},__class__:alphaTab_rendering_layout_ScoreLayout};var alphaTab_rendering_layout_PageViewLayout=function(renderer){alphaTab_rendering_layout_ScoreLayout.call(this,renderer)};alphaTab_rendering_layout_PageViewLayout.__name__=!0,alphaTab_rendering_layout_PageViewLayout.__super__=alphaTab_rendering_layout_ScoreLayout,alphaTab_rendering_layout_PageViewLayout.prototype=$extend(alphaTab_rendering_layout_ScoreLayout.prototype,{get_Name:function(){return"PageView"},DoLayoutAndRender:function(){var x=alphaTab_rendering_layout_PageViewLayout.PagePadding[0],y=alphaTab_rendering_layout_PageViewLayout.PagePadding[1],this1=this.Renderer.Settings.Width;this.Width=this1;this._allMasterBarRenderers=[],y=this.LayoutAndRenderScoreInfo(x,y,-1),y=this.LayoutAndRenderScore(x,y),this.Height=y+alphaTab_rendering_layout_PageViewLayout.PagePadding[3]},get_SupportsResize:function(){return!0},Resize:function(){var x=alphaTab_rendering_layout_PageViewLayout.PagePadding[0],y=alphaTab_rendering_layout_PageViewLayout.PagePadding[1],this1=this.Renderer.Settings.Width;this.Width=this1;var oldHeight=this.Height;y=this.LayoutAndRenderScoreInfo(x,y,oldHeight),y=this.ResizeAndRenderScore(x,y,oldHeight),this.Height=y+alphaTab_rendering_layout_PageViewLayout.PagePadding[3]},LayoutAndRenderScoreInfo:function(x,y,totalHeight){null==totalHeight&&(totalHeight=-1),alphaTab_util_Logger.Info(this.get_Name(),"Layouting score info",null);for(var scale=this.get_Scale(),res=this.Renderer.RenderingResources,centeredGlyphs=[1,2,4,8,64],i=0;i<centeredGlyphs.length;){if(this.ScoreInfoGlyphs.hasOwnProperty(centeredGlyphs[i])){var glyph=this.ScoreInfoGlyphs[centeredGlyphs[i]];glyph.X=this.Width/2,glyph.Y=y,glyph.TextAlign=1,y+=glyph.Font.Size}++i}var musicOrWords=!1,musicOrWordsHeight=0;if(this.ScoreInfoGlyphs.hasOwnProperty(32)){var glyph1=this.ScoreInfoGlyphs[32];glyph1.X=this.Width-alphaTab_rendering_layout_PageViewLayout.PagePadding[2],glyph1.Y=y,glyph1.TextAlign=2,musicOrWords=!0,musicOrWordsHeight=glyph1.Font.Size}if(this.ScoreInfoGlyphs.hasOwnProperty(16)){var glyph2=this.ScoreInfoGlyphs[16];glyph2.X=x,glyph2.Y=y,glyph2.TextAlign=0,musicOrWords=!0,musicOrWordsHeight=glyph2.Font.Size}musicOrWords&&(y+=musicOrWordsHeight),null!=this.TuningGlyph&&(y+=20*scale,this.TuningGlyph.X=x,this.TuningGlyph.Y=y,y+=this.TuningGlyph.Height),y+=20*scale;var canvas=this.Renderer.Canvas;canvas.BeginRender(this.Width,y),canvas.set_Color(res.ScoreInfoColor),canvas.set_TextAlign(1);for(var this2=this.ScoreInfoGlyphs,key=$iterator(Object.keys(this2))();key.hasNext();){var key1=key.next();this.ScoreInfoGlyphs[key1].Paint(0,0,canvas)}null!=this.TuningGlyph&&this.TuningGlyph.Paint(0,0,canvas);canvas.EndRender();return this.Renderer.OnPartialRenderFinished(new alphaTab_rendering_RenderFinishedEventArgs),y},ResizeAndRenderScore:function(x,y,oldHeight){var canvas=this.Renderer.Canvas;if(-1!=this.Renderer.Settings.Layout.Get("barsPerRow",-1))for(var i=0;i<this._groups.length;){var group=this._groups[i];this.FitGroup(group),group.FinalizeGroup(),y+=this.PaintGroup(group,oldHeight,canvas),++i}else{this._groups=[];var currentIndex=0,maxWidth=this.get_MaxWidth(),group1=this.CreateEmptyStaveGroup();for(group1.Index=this._groups.length,group1.X=x,group1.Y=y;currentIndex<this._allMasterBarRenderers.length;){var renderers=this._allMasterBarRenderers[currentIndex];group1.Width+renderers.Width<=maxWidth||0==group1.MasterBarsRenderers.length?(group1.AddMasterBarRenderers(this.Renderer.Tracks,renderers),++currentIndex):(group1.IsFull=!0,group1.IsLast=!1,this._groups.push(group1),this.FitGroup(group1),group1.FinalizeGroup(),y+=this.PaintGroup(group1,oldHeight,canvas),(group1=this.CreateEmptyStaveGroup()).Index=this._groups.length,group1.X=x,group1.Y=y)}this.FitGroup(group1),group1.FinalizeGroup(),y+=this.PaintGroup(group1,oldHeight,canvas)}return y},LayoutAndRenderScore:function(x,y){var score=this.Renderer.Score,canvas=this.Renderer.Canvas,startIndex=this.Renderer.Settings.Layout.Get("start",1);--startIndex;var currentBarIndex=startIndex=Math.min(score.MasterBars.length-1,Math.max(0,startIndex)),endBarIndex=this.Renderer.Settings.Layout.Get("count",score.MasterBars.length);endBarIndex<0&&(endBarIndex=score.MasterBars.length),endBarIndex=startIndex+endBarIndex-1,endBarIndex=Math.min(score.MasterBars.length-1,Math.max(0,endBarIndex));for(this._groups=[];currentBarIndex<=endBarIndex;){var group=this.CreateStaveGroup(currentBarIndex,endBarIndex);this._groups.push(group),group.X=x,group.Y=y,currentBarIndex=group.get_LastBarIndex()+1,this.FitGroup(group),group.FinalizeGroup(),alphaTab_util_Logger.Info(this.get_Name(),"Rendering partial from bar "+group.get_FirstBarIndex()+" to "+group.get_LastBarIndex(),null),y+=this.PaintGroup(group,y,canvas)}return y},PaintGroup:function(group,totalHeight,canvas){var height=group.get_Height()+20*this.get_Scale();canvas.BeginRender(this.Width,height),this.Renderer.Canvas.set_Color(this.Renderer.RenderingResources.MainGlyphColor),this.Renderer.Canvas.set_TextAlign(0),group.Paint(0,-group.Y,canvas),totalHeight+=height;var result=canvas.EndRender(),args=new alphaTab_rendering_RenderFinishedEventArgs;return args.TotalWidth=this.Width,args.TotalHeight=totalHeight,args.Width=this.Width,args.Height=height,args.RenderResult=result,args.FirstMasterBarIndex=group.get_FirstBarIndex(),args.LastMasterBarIndex=group.get_LastBarIndex(),this.Renderer.OnPartialRenderFinished(args),height},FitGroup:function(group){(group.IsFull||group.Width>this.get_MaxWidth())&&group.ScaleToWidth(this.get_MaxWidth()),this.Width=Math.max(this.Width,group.Width)},CreateStaveGroup:function(currentBarIndex,endIndex){var group=this.CreateEmptyStaveGroup();group.Index=this._groups.length;for(var barsPerRow=this.Renderer.Settings.Layout.Get("barsPerRow",-1),maxWidth=this.get_MaxWidth(),end=endIndex+1,i=currentBarIndex;i<end;){var renderers;null!=this._barsFromPreviousGroup&&this._barsFromPreviousGroup.MasterBar.Index==i?renderers=group.AddMasterBarRenderers(this.Renderer.Tracks,this._barsFromPreviousGroup):(renderers=group.AddBars(this.Renderer.Tracks,i),this._allMasterBarRenderers.push(renderers)),this._barsFromPreviousGroup=null;var groupIsFull=!1;if(-1==barsPerRow&&group.Width>=maxWidth&&0!=group.MasterBarsRenderers.length?groupIsFull=!0:group.MasterBarsRenderers.length==barsPerRow+1&&(groupIsFull=!0),groupIsFull)return group.RevertLastBar(),group.IsFull=!0,group.IsLast=!1,this._barsFromPreviousGroup=renderers,group;group.X=0,++i}return group.IsLast=endIndex==group.get_LastBarIndex(),group},get_MaxWidth:function(){return this.Renderer.Settings.Width-alphaTab_rendering_layout_PageViewLayout.PagePadding[0]-alphaTab_rendering_layout_PageViewLayout.PagePadding[2]},__class__:alphaTab_rendering_layout_PageViewLayout});var alphaTab_rendering_layout_HorizontalScreenLayout=function(renderer){alphaTab_rendering_layout_ScoreLayout.call(this,renderer)};alphaTab_rendering_layout_HorizontalScreenLayout.__name__=!0,alphaTab_rendering_layout_HorizontalScreenLayout.__super__=alphaTab_rendering_layout_ScoreLayout,alphaTab_rendering_layout_HorizontalScreenLayout.prototype=$extend(alphaTab_rendering_layout_ScoreLayout.prototype,{get_Name:function(){return"HorizontalScreen"},get_SupportsResize:function(){return!1},Resize:function(){},DoLayoutAndRender:function(){var score=this.Renderer.Score,canvas=this.Renderer.Canvas,startIndex=this.Renderer.Settings.Layout.Get("start",1);--startIndex;var currentBarIndex=startIndex=Math.min(score.MasterBars.length-1,Math.max(0,startIndex)),endBarIndex=this.Renderer.Settings.Layout.Get("count",score.MasterBars.length);endBarIndex<0&&(endBarIndex=score.MasterBars.length),endBarIndex=startIndex+endBarIndex-1,endBarIndex=Math.min(score.MasterBars.length-1,Math.max(0,endBarIndex)),this._group=this.CreateEmptyStaveGroup(),this._group.IsLast=!0,this._group.X=alphaTab_rendering_layout_HorizontalScreenLayout.PagePadding[0],this._group.Y=alphaTab_rendering_layout_HorizontalScreenLayout.PagePadding[1];for(var countPerPartial=this.Renderer.Settings.Layout.Get("countPerPartial",10),partials=[],currentPartial=new alphaTab_rendering_layout_HorizontalScreenLayoutPartialInfo;currentBarIndex<=endBarIndex;){var result=this._group.AddBars(this.Renderer.Tracks,currentBarIndex);if(0==currentPartial.MasterBars.length&&result.IsLinkedToPrevious&&partials.length>0){var previousPartial=partials[partials.length-1];previousPartial.MasterBars.push(score.MasterBars[currentBarIndex]),previousPartial.Width=previousPartial.Width+result.Width}else currentPartial.MasterBars.push(score.MasterBars[currentBarIndex]),currentPartial.Width=currentPartial.Width+result.Width,currentPartial.MasterBars.length>=countPerPartial&&(0==partials.length&&(currentPartial.Width=currentPartial.Width+this._group.X+this._group.AccoladeSpacing),partials.push(currentPartial),alphaTab_util_Logger.Info(this.get_Name(),"Finished partial from bar "+currentPartial.MasterBars[0].Index+" to "+currentPartial.MasterBars[currentPartial.MasterBars.length-1].Index,null),currentPartial=new alphaTab_rendering_layout_HorizontalScreenLayoutPartialInfo);++currentBarIndex}currentPartial.MasterBars.length>0&&(0==partials.length&&(currentPartial.Width=currentPartial.Width+this._group.X+this._group.AccoladeSpacing),partials.push(currentPartial),alphaTab_util_Logger.Info(this.get_Name(),"Finished partial from bar "+currentPartial.MasterBars[0].Index+" to "+currentPartial.MasterBars[currentPartial.MasterBars.length-1].Index,null)),this._group.FinalizeGroup(),this.Height=this._group.Y+this._group.get_Height()+alphaTab_rendering_layout_HorizontalScreenLayout.PagePadding[3],this.Width=this._group.X+this._group.Width+alphaTab_rendering_layout_HorizontalScreenLayout.PagePadding[2],currentBarIndex=0;for(var i=0;i<partials.length;){var partial=partials[i];canvas.BeginRender(partial.Width,this.Height),canvas.set_Color(this.Renderer.RenderingResources.MainGlyphColor),canvas.set_TextAlign(0);var renderX=this._group.GetBarX(partial.MasterBars[0].Index)+this._group.AccoladeSpacing;0==i&&(renderX=renderX-this._group.X+this._group.AccoladeSpacing),alphaTab_util_Logger.Info(this.get_Name(),"Rendering partial from bar "+partial.MasterBars[0].Index+" to "+partial.MasterBars[partial.MasterBars.length-1].Index,null),this._group.PaintPartial(-renderX,this._group.Y,this.Renderer.Canvas,currentBarIndex,partial.MasterBars.length);canvas.EndRender();this.Renderer.OnPartialRenderFinished(new alphaTab_rendering_RenderFinishedEventArgs),currentBarIndex+=partial.MasterBars.length,++i}},__class__:alphaTab_rendering_layout_HorizontalScreenLayout});var alphaTab_rendering_IEffectBarRendererInfo=function(){};alphaTab_rendering_IEffectBarRendererInfo.__name__=!0,alphaTab_rendering_IEffectBarRendererInfo.prototype={__class__:alphaTab_rendering_IEffectBarRendererInfo};var alphaTab_rendering_effects_TempoEffectInfo=function(){};alphaTab_rendering_effects_TempoEffectInfo.__name__=!0,alphaTab_rendering_effects_TempoEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_TempoEffectInfo.prototype={get_EffectId:function(){return"tempo"},get_HideOnMultiTrack:function(){return!0},get_CanShareBand:function(){return!1},get_SizingMode:function(){return 0},ShouldCreateGlyph:function(beat){return 0==beat.Voice.Bar.Staff.Index&&0==beat.Voice.Index&&0==beat.Index&&(null!=beat.Voice.Bar.get_MasterBar().TempoAutomation||0==beat.Voice.Bar.Index)},CreateNewGlyph:function(renderer,beat){var tempo;return tempo=null!=beat.Voice.Bar.get_MasterBar().TempoAutomation?system_Convert.ToInt32_Single(beat.Voice.Bar.get_MasterBar().TempoAutomation.Value):beat.Voice.Bar.Staff.Track.Score.Tempo,new alphaTab_rendering_glyphs_TempoGlyph(0,0,tempo)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_TempoEffectInfo};var alphaTab_rendering_effects_TripletFeelEffectInfo=function(){};alphaTab_rendering_effects_TripletFeelEffectInfo.__name__=!0,alphaTab_rendering_effects_TripletFeelEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_TripletFeelEffectInfo.prototype={get_EffectId:function(){return"triplet-feel"},get_HideOnMultiTrack:function(){return!0},get_CanShareBand:function(){return!1},get_SizingMode:function(){return 0},ShouldCreateGlyph:function(beat){return 0==beat.Index&&(0==beat.Voice.Bar.get_MasterBar().Index&&0!=beat.Voice.Bar.get_MasterBar().TripletFeel||beat.Voice.Bar.get_MasterBar().Index>0&&beat.Voice.Bar.get_MasterBar().TripletFeel!=beat.Voice.Bar.get_MasterBar().PreviousMasterBar.TripletFeel)},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_TripletFeelGlyph(beat.Voice.Bar.get_MasterBar().TripletFeel)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_TripletFeelEffectInfo};var alphaTab_rendering_effects_MarkerEffectInfo=function(){};alphaTab_rendering_effects_MarkerEffectInfo.__name__=!0,alphaTab_rendering_effects_MarkerEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_MarkerEffectInfo.prototype={get_EffectId:function(){return"marker"},get_HideOnMultiTrack:function(){return!0},get_CanShareBand:function(){return!0},get_SizingMode:function(){return 0},ShouldCreateGlyph:function(beat){return 0==beat.Voice.Bar.Staff.Index&&0==beat.Voice.Index&&0==beat.Index&&beat.Voice.Bar.get_MasterBar().get_IsSectionStart()},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_TextGlyph(0,0,beat.Voice.Bar.get_MasterBar().Section.Text,renderer.get_Resources().MarkerFont,0)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_MarkerEffectInfo};var alphaTab_rendering_effects_TextEffectInfo=function(){};alphaTab_rendering_effects_TextEffectInfo.__name__=!0,alphaTab_rendering_effects_TextEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_TextEffectInfo.prototype={get_EffectId:function(){return"text"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!1},get_SizingMode:function(){return 1},ShouldCreateGlyph:function(beat){var s=beat.Text;return!(null==s||0==StringTools.trim(s).length)},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_TextGlyph(0,0,beat.Text,renderer.get_Resources().EffectFont,0)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_TextEffectInfo};var alphaTab_rendering_effects_ChordsEffectInfo=function(){};alphaTab_rendering_effects_ChordsEffectInfo.__name__=!0,alphaTab_rendering_effects_ChordsEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_ChordsEffectInfo.prototype={get_EffectId:function(){return"chords"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!0},get_SizingMode:function(){return 1},ShouldCreateGlyph:function(beat){return beat.get_HasChord()},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_TextGlyph(0,0,beat.get_Chord().Name,renderer.get_Resources().EffectFont,0)},CanExpand:function(from,to){return!1},__class__:alphaTab_rendering_effects_ChordsEffectInfo};var alphaTab_rendering_effects_NoteEffectInfoBase=function(){};alphaTab_rendering_effects_NoteEffectInfoBase.__name__=!0,alphaTab_rendering_effects_NoteEffectInfoBase.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_NoteEffectInfoBase.prototype={ShouldCreateGlyph:function(beat){this.LastCreateInfo=[];for(var i=0,j=beat.Notes.length;i<j;){var n=beat.Notes[i];this.ShouldCreateGlyphForNote(n)&&this.LastCreateInfo.push(n),++i}return this.LastCreateInfo.length>0},ShouldCreateGlyphForNote:function(note){throw new js__$Boot_HaxeError("abstract")},get_EffectId:function(){throw new js__$Boot_HaxeError("abstract")},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!0},get_SizingMode:function(){throw new js__$Boot_HaxeError("abstract")},CreateNewGlyph:function(renderer,beat){throw new js__$Boot_HaxeError("abstract")},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_NoteEffectInfoBase};var alphaTab_rendering_effects_TrillEffectInfo=function(){alphaTab_rendering_effects_NoteEffectInfoBase.call(this)};alphaTab_rendering_effects_TrillEffectInfo.__name__=!0,alphaTab_rendering_effects_TrillEffectInfo.__super__=alphaTab_rendering_effects_NoteEffectInfoBase,alphaTab_rendering_effects_TrillEffectInfo.prototype=$extend(alphaTab_rendering_effects_NoteEffectInfoBase.prototype,{get_EffectId:function(){return"trill"},ShouldCreateGlyphForNote:function(note){return note.get_IsTrill()},get_SizingMode:function(){return 1},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_TrillGlyph(0,0)},__class__:alphaTab_rendering_effects_TrillEffectInfo});var alphaTab_rendering_effects_BeatVibratoEffectInfo=function(){};alphaTab_rendering_effects_BeatVibratoEffectInfo.__name__=!0,alphaTab_rendering_effects_BeatVibratoEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_BeatVibratoEffectInfo.prototype={get_EffectId:function(){return"beat-vibrato"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!0},get_SizingMode:function(){return 3},ShouldCreateGlyph:function(beat){return 0!=beat.Vibrato},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_VibratoGlyph(0,5*renderer.get_Scale(),1.4)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_BeatVibratoEffectInfo};var alphaTab_rendering_effects_NoteVibratoEffectInfo=function(){alphaTab_rendering_effects_NoteEffectInfoBase.call(this)};alphaTab_rendering_effects_NoteVibratoEffectInfo.__name__=!0,alphaTab_rendering_effects_NoteVibratoEffectInfo.__super__=alphaTab_rendering_effects_NoteEffectInfoBase,alphaTab_rendering_effects_NoteVibratoEffectInfo.prototype=$extend(alphaTab_rendering_effects_NoteEffectInfoBase.prototype,{get_EffectId:function(){return"note-vibrato"},ShouldCreateGlyphForNote:function(note){return 0!=note.Vibrato||!!note.IsTieDestination&&0!=note.TieOrigin.Vibrato},get_SizingMode:function(){return 3},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_VibratoGlyph(0,5*renderer.get_Scale(),1.2)},__class__:alphaTab_rendering_effects_NoteVibratoEffectInfo});var alphaTab_rendering_effects_AlternateEndingsEffectInfo=function(){};alphaTab_rendering_effects_AlternateEndingsEffectInfo.__name__=!0,alphaTab_rendering_effects_AlternateEndingsEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_AlternateEndingsEffectInfo.prototype={get_EffectId:function(){return"alternate-feel"},get_HideOnMultiTrack:function(){return!0},get_CanShareBand:function(){return!1},get_SizingMode:function(){return 4},ShouldCreateGlyph:function(beat){return 0==beat.Index&&0!=beat.Voice.Bar.get_MasterBar().AlternateEndings},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_AlternateEndingsGlyph(0,0,beat.Voice.Bar.get_MasterBar().AlternateEndings)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_AlternateEndingsEffectInfo};var alphaTab_rendering_BarRendererFactory=function(){this.IsInAccolade=!0,this.HideOnPercussionTrack=!1,this.HideOnMultiTrack=!1};alphaTab_rendering_BarRendererFactory.__name__=!0,alphaTab_rendering_BarRendererFactory.prototype={get_StaffId:function(){throw new js__$Boot_HaxeError("abstract")},CanCreate:function(track,staff){return!this.HideOnPercussionTrack||!track.IsPercussion},Create:function(renderer,bar,staveSettings){throw new js__$Boot_HaxeError("abstract")},__class__:alphaTab_rendering_BarRendererFactory};var alphaTab_rendering_EffectBarRendererFactory=function(staffId,infos){alphaTab_rendering_BarRendererFactory.call(this),this._infos=infos,this._staffId=staffId,this.IsInAccolade=!1};alphaTab_rendering_EffectBarRendererFactory.__name__=!0,alphaTab_rendering_EffectBarRendererFactory.__super__=alphaTab_rendering_BarRendererFactory,alphaTab_rendering_EffectBarRendererFactory.prototype=$extend(alphaTab_rendering_BarRendererFactory.prototype,{get_StaffId:function(){return this._staffId},Create:function(renderer,bar,staveSettings){return new alphaTab_rendering_EffectBarRenderer(renderer,bar,this._infos)},__class__:alphaTab_rendering_EffectBarRendererFactory});var alphaTab_rendering_ScoreBarRendererFactory=function(){alphaTab_rendering_BarRendererFactory.call(this)};alphaTab_rendering_ScoreBarRendererFactory.__name__=!0,alphaTab_rendering_ScoreBarRendererFactory.__super__=alphaTab_rendering_BarRendererFactory,alphaTab_rendering_ScoreBarRendererFactory.prototype=$extend(alphaTab_rendering_BarRendererFactory.prototype,{get_StaffId:function(){return"score"},Create:function(renderer,bar,staveSettings){return new alphaTab_rendering_ScoreBarRenderer(renderer,bar)},__class__:alphaTab_rendering_ScoreBarRendererFactory});var alphaTab_rendering_effects_CrescendoEffectInfo=function(){};alphaTab_rendering_effects_CrescendoEffectInfo.__name__=!0,alphaTab_rendering_effects_CrescendoEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_CrescendoEffectInfo.prototype={get_EffectId:function(){return"crescendo"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!0},get_SizingMode:function(){return 3},ShouldCreateGlyph:function(beat){return 0!=beat.Crescendo},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_CrescendoGlyph(0,0,beat.Crescendo)},CanExpand:function(from,to){return from.Crescendo==to.Crescendo},__class__:alphaTab_rendering_effects_CrescendoEffectInfo};var alphaTab_rendering_effects_DynamicsEffectInfo=function(){};alphaTab_rendering_effects_DynamicsEffectInfo.__name__=!0,alphaTab_rendering_effects_DynamicsEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_DynamicsEffectInfo.prototype={get_EffectId:function(){return"dynamics"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!1},get_SizingMode:function(){return 1},ShouldCreateGlyph:function(beat){return 0==beat.Voice.Index&&(0==beat.Index&&0==beat.Voice.Bar.Index||null!=beat.PreviousBeat&&beat.Dynamic!=beat.PreviousBeat.Dynamic)},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_DynamicsGlyph(0,0,beat.Dynamic)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_DynamicsEffectInfo};var alphaTab_rendering_effects_LyricsEffectInfo=function(){};alphaTab_rendering_effects_LyricsEffectInfo.__name__=!0,alphaTab_rendering_effects_LyricsEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_LyricsEffectInfo.prototype={get_EffectId:function(){return"lyrics"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!1},get_SizingMode:function(){return 1},ShouldCreateGlyph:function(beat){return null!=beat.Lyrics},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_LyricsGlyph(0,0,beat.Lyrics,renderer.get_Resources().EffectFont,1)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_LyricsEffectInfo};var alphaTab_rendering_effects_TapEffectInfo=function(){};alphaTab_rendering_effects_TapEffectInfo.__name__=!0,alphaTab_rendering_effects_TapEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_TapEffectInfo.prototype={get_EffectId:function(){return"tap"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!0},get_SizingMode:function(){return 1},ShouldCreateGlyph:function(beat){return!(!beat.Slap&&!beat.Pop)||beat.Tap},CreateNewGlyph:function(renderer,beat){var res=renderer.get_Resources();return beat.Slap?new alphaTab_rendering_glyphs_TextGlyph(0,0,"S",res.EffectFont,0):beat.Pop?new alphaTab_rendering_glyphs_TextGlyph(0,0,"P",res.EffectFont,0):new alphaTab_rendering_glyphs_TextGlyph(0,0,"T",res.EffectFont,0)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_TapEffectInfo};var alphaTab_rendering_effects_FadeInEffectInfo=function(){};alphaTab_rendering_effects_FadeInEffectInfo.__name__=!0,alphaTab_rendering_effects_FadeInEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_FadeInEffectInfo.prototype={get_EffectId:function(){return"fade-in"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!0},get_SizingMode:function(){return 1},ShouldCreateGlyph:function(beat){return beat.FadeIn},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_FadeInGlyph(0,0)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_FadeInEffectInfo};var alphaTab_rendering_effects_HarmonicsEffectInfo=function(){alphaTab_rendering_effects_NoteEffectInfoBase.call(this)};alphaTab_rendering_effects_HarmonicsEffectInfo.__name__=!0,alphaTab_rendering_effects_HarmonicsEffectInfo.HarmonicToString=function(type){switch(type){case 1:return"N.H.";case 2:return"A.H.";case 3:return"P.H.";case 4:return"T.H.";case 5:return"S.H.";case 6:return"Fdbk."}return""},alphaTab_rendering_effects_HarmonicsEffectInfo.__super__=alphaTab_rendering_effects_NoteEffectInfoBase,alphaTab_rendering_effects_HarmonicsEffectInfo.prototype=$extend(alphaTab_rendering_effects_NoteEffectInfoBase.prototype,{get_EffectId:function(){return"harmonics"},ShouldCreateGlyphForNote:function(note){return!!note.get_IsHarmonic()&&((note.Beat!=this._beat||note.HarmonicType>this._beatType)&&(this._beat=note.Beat,this._beatType=note.HarmonicType),!0)},get_SizingMode:function(){return 1},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_TextGlyph(0,0,alphaTab_rendering_effects_HarmonicsEffectInfo.HarmonicToString(this._beatType),renderer.get_Resources().EffectFont,0)},__class__:alphaTab_rendering_effects_HarmonicsEffectInfo});var alphaTab_rendering_effects_LetRingEffectInfo=function(){alphaTab_rendering_effects_NoteEffectInfoBase.call(this)};alphaTab_rendering_effects_LetRingEffectInfo.__name__=!0,alphaTab_rendering_effects_LetRingEffectInfo.__super__=alphaTab_rendering_effects_NoteEffectInfoBase,alphaTab_rendering_effects_LetRingEffectInfo.prototype=$extend(alphaTab_rendering_effects_NoteEffectInfoBase.prototype,{get_EffectId:function(){return"let-ring"},get_CanShareBand:function(){return!1},ShouldCreateGlyphForNote:function(note){return note.IsLetRing},get_SizingMode:function(){return 3},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_LineRangedGlyph("LetRing")},__class__:alphaTab_rendering_effects_LetRingEffectInfo});var alphaTab_rendering_effects_CapoEffectInfo=function(){};alphaTab_rendering_effects_CapoEffectInfo.__name__=!0,alphaTab_rendering_effects_CapoEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_CapoEffectInfo.prototype={get_EffectId:function(){return"capo"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!1},get_SizingMode:function(){return 1},ShouldCreateGlyph:function(beat){return 0==beat.Index&&0==beat.Voice.Bar.Index&&0!=beat.Voice.Bar.Staff.Track.Capo},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_TextGlyph(0,0,"Capo. fret "+beat.Voice.Bar.Staff.Track.Capo,renderer.get_Resources().EffectFont,0)},CanExpand:function(from,to){return!1},__class__:alphaTab_rendering_effects_CapoEffectInfo};var alphaTab_rendering_effects_PalmMuteEffectInfo=function(){alphaTab_rendering_effects_NoteEffectInfoBase.call(this)};alphaTab_rendering_effects_PalmMuteEffectInfo.__name__=!0,alphaTab_rendering_effects_PalmMuteEffectInfo.__super__=alphaTab_rendering_effects_NoteEffectInfoBase,alphaTab_rendering_effects_PalmMuteEffectInfo.prototype=$extend(alphaTab_rendering_effects_NoteEffectInfoBase.prototype,{get_EffectId:function(){return"palm-mute"},ShouldCreateGlyphForNote:function(note){return note.IsPalmMute},get_SizingMode:function(){return 3},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_LineRangedGlyph("P.M.")},__class__:alphaTab_rendering_effects_PalmMuteEffectInfo});var alphaTab_rendering_effects_PickStrokeEffectInfo=function(){};alphaTab_rendering_effects_PickStrokeEffectInfo.__name__=!0,alphaTab_rendering_effects_PickStrokeEffectInfo.__interfaces__=[alphaTab_rendering_IEffectBarRendererInfo],alphaTab_rendering_effects_PickStrokeEffectInfo.prototype={get_EffectId:function(){return"pick-stroke"},get_HideOnMultiTrack:function(){return!1},get_CanShareBand:function(){return!0},get_SizingMode:function(){return 1},ShouldCreateGlyph:function(beat){return 0!=beat.PickStroke},CreateNewGlyph:function(renderer,beat){return new alphaTab_rendering_glyphs_PickStrokeGlyph(0,0,beat.PickStroke)},CanExpand:function(from,to){return!0},__class__:alphaTab_rendering_effects_PickStrokeEffectInfo};var alphaTab_rendering_TabBarRendererFactory=function(showTimeSignature,showRests,showTiedNotes){alphaTab_rendering_BarRendererFactory.call(this),this._showTimeSignature=showTimeSignature,this._showRests=showRests,this._showTiedNotes=showTiedNotes,this.HideOnPercussionTrack=!0};alphaTab_rendering_TabBarRendererFactory.__name__=!0,alphaTab_rendering_TabBarRendererFactory.__super__=alphaTab_rendering_BarRendererFactory,alphaTab_rendering_TabBarRendererFactory.prototype=$extend(alphaTab_rendering_BarRendererFactory.prototype,{get_StaffId:function(){return"tab"},CanCreate:function(track,staff){return track.Tuning.length>0&&alphaTab_rendering_BarRendererFactory.prototype.CanCreate.call(this,track,staff)},Create:function(renderer,bar,staveSettings){var tabBarRenderer=new alphaTab_rendering_TabBarRenderer(renderer,bar);return tabBarRenderer.ShowRests=this._showRests,tabBarRenderer.ShowTimeSignature=this._showTimeSignature,tabBarRenderer.ShowTiedNotes=this._showTiedNotes,tabBarRenderer.RenderRhythm=staveSettings.Get("rhythm",tabBarRenderer.RenderRhythm),tabBarRenderer.RhythmHeight=staveSettings.Get("rhythmHeight",tabBarRenderer.RhythmHeight),tabBarRenderer.RhythmBeams=staveSettings.Get("rhythmBeams",tabBarRenderer.RhythmBeams),tabBarRenderer},__class__:alphaTab_rendering_TabBarRendererFactory});var alphaTab_Environment=function(){};alphaTab_Environment.__name__=!0,alphaTab_Environment.PlatformInit=function(){if(alphaTab_Environment.RenderEngines.svg=function(){return new alphaTab_platform_svg_CssFontSvgCanvas},alphaTab_Environment.RenderEngines.default=function(){return new alphaTab_platform_svg_CssFontSvgCanvas},alphaTab_Environment.CheckFontLoad(),Math.log2=Math.log2||function(x){return Math.log(x)*Math.LOG2E},$global.document){var document=window.document,vbAjaxLoader="";vbAjaxLoader+='<script type="text/vbscript">\r\n',vbAjaxLoader+="Function VbAjaxLoader(method, fileName)\r\n",vbAjaxLoader+="    Dim xhr\r\n",vbAjaxLoader+='    Set xhr = CreateObject("Microsoft.XMLHTTP")\r\n',vbAjaxLoader+="    xhr.Open method, fileName, False\r\n",vbAjaxLoader+='    xhr.setRequestHeader "Accept-Charset", "x-user-defined"\r\n',vbAjaxLoader+="    xhr.send\r\n",vbAjaxLoader+="    Dim byteArray()\r\n",vbAjaxLoader+="    if xhr.Status = 200 Then\r\n",vbAjaxLoader+="        Dim byteString\r\n",vbAjaxLoader+="        Dim i\r\n",vbAjaxLoader+="        byteString=xhr.responseBody\r\n",vbAjaxLoader+="        ReDim byteArray(LenB(byteString))\r\n",vbAjaxLoader+="        For i = 1 To LenB(byteString)\r\n",vbAjaxLoader+="            byteArray(i-1) = AscB(MidB(byteString, i, 1))\r\n",vbAjaxLoader+="        Next\r\n",vbAjaxLoader+="    End If\r\n",vbAjaxLoader+="    VbAjaxLoader=byteArray\r\n",vbAjaxLoader+="End Function\r\n";var s=vbAjaxLoader+="<\/script>\r\n";document.write(s);var scriptElement=js_Boot.__cast(document.currentScript,HTMLScriptElement);if(!scriptElement)try{var error=new Error,stack=error.stack;if(!stack)throw error;alphaTab_Environment.ScriptFile=alphaTab_Environment.ScriptFileFromStack(stack)}catch(e){if(e instanceof js__$Boot_HaxeError&&(e=e.val),!js_Boot.__instanceof(e,Error))throw e;var stack1=e.stack;stack1?alphaTab_Environment.ScriptFile=alphaTab_Environment.ScriptFileFromStack(stack1):scriptElement=js_Boot.__cast(document.querySelector('script[data-alphatab]")'),HTMLScriptElement)}var s1=alphaTab_Environment.ScriptFile;null!=s1&&0!=s1.length||(scriptElement?alphaTab_Environment.ScriptFile=scriptElement.src:alphaTab_util_Logger.Warning("Environment","Could not automatically find alphaTab script file for worker, please add the data-alphatab attribute to the script tag that includes alphaTab or provide it when initializing alphaTab",null))}},alphaTab_Environment.ScriptFileFromStack=function(stack){var matches=stack.match("(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?");return matches||(matches=stack.match("^(?:|[^:@]*@|.+\\)@(?=data:text\\/javascript|blob|http[s]?|file)|.+?\\s+(?: at |@)(?:[^:\\(]+ )*[\\(]?)(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?"))||(matches=stack.match("\\)@(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?"))?matches[1]:null},alphaTab_Environment.CheckFontLoad=function(){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope)alphaTab_Environment.IsFontLoaded=!1;else{if(!!window.document.fonts&&!!window.document.fonts.load)window.document.fonts.load("1em alphaTab").then(function(_){return alphaTab_Environment.IsFontLoaded=!0,!0});else{var checkFont=null;checkFont=function(){var document=window.document,testItem=document.getElementById("alphaTabFontChecker");null==testItem&&((testItem=document.createElement("div")).setAttribute("id","alphaTabFontChecker"),testItem.style.opacity="0",testItem.style.position="absolute",testItem.style.left="0",testItem.style.top="0",testItem.style.fontSize="100px",testItem.classList.add("at"),testItem.innerHTML="&#57424;",document.body.appendChild(testItem));var width=testItem.offsetWidth;width>30&&width<100?(alphaTab_Environment.IsFontLoaded=!0,document.body.removeChild(testItem)):window.setTimeout(function(){checkFont()},1e3)},window.addEventListener("DOMContentLoaded",function(){checkFont()})}}},alphaTab_Environment.prototype={__class__:alphaTab_Environment};var alphaTab_LayoutSettings=function(){this.AdditionalSettings={}};alphaTab_LayoutSettings.__name__=!0,alphaTab_LayoutSettings.get_Defaults=function(){var settings=new alphaTab_LayoutSettings;return settings.Mode="page",settings},alphaTab_LayoutSettings.prototype={Get:function(key,def){var this1=this.AdditionalSettings,key1=key.toLowerCase();return this1.hasOwnProperty(key1)?this.AdditionalSettings[key.toLowerCase()]:def},__class__:alphaTab_LayoutSettings};var alphaTab_Main=function(){};alphaTab_Main.__name__=!0,alphaTab_Main.main=function(){alphaTab_platform_javaScript_JsWorker.Init()};var alphaTab_Settings=function(){};alphaTab_Settings.__name__=!0,alphaTab_Settings.SetDefaults=function(settings){settings.UseWebWorker=!0},alphaTab_Settings.FromJson=function(json,dataAttributes){if(js_Boot.__instanceof(json,alphaTab_Settings))return js_Boot.__cast(json,alphaTab_Settings);var settings=alphaTab_Settings.get_Defaults();return settings.ScriptFile=alphaTab_Environment.ScriptFile,alphaTab_Settings.FillFromJson(settings,json,dataAttributes),settings},alphaTab_Settings.FillFromJson=function(settings,json,dataAttributes){var global=$global;if(global.document&&global.ALPHATAB_ROOT?(settings.ScriptFile=global.ALPHATAB_ROOT,settings.ScriptFile=alphaTab_Settings.EnsureFullUrl(settings.ScriptFile),settings.ScriptFile=alphaTab_Settings.AppendScriptName(settings.ScriptFile)):settings.ScriptFile=alphaTab_Environment.ScriptFile,global.document&&global.ALPHATAB_FONT)settings.FontDirectory=global.ALPHATAB_FONT,settings.FontDirectory=alphaTab_Settings.EnsureFullUrl(settings.FontDirectory);else{settings.FontDirectory=settings.ScriptFile;var s=settings.FontDirectory;if(null!=s&&0!=s.length){var this1=settings.FontDirectory,this2=system_Convert.ToUInt16(47),lastSlash=this1.lastIndexOf(Std.string(this2));lastSlash>=0&&(settings.FontDirectory=HxOverrides.substr(settings.FontDirectory,0,lastSlash)+"/Font/")}}if(json&&"useWorker"in json?settings.UseWebWorker=json.useWorker:null!=dataAttributes&&dataAttributes.hasOwnProperty("useWorker")&&(settings.UseWebWorker=!!dataAttributes.useWorker),json&&"scale"in json?settings.Scale=json.scale:null!=dataAttributes&&dataAttributes.hasOwnProperty("scale")&&(settings.Scale=dataAttributes.scale),json&&"width"in json?settings.Width=json.width:null!=dataAttributes&&dataAttributes.hasOwnProperty("width")&&(settings.Width=dataAttributes.width),json&&"engine"in json?settings.Engine=json.engine:null!=dataAttributes&&dataAttributes.hasOwnProperty("engine")&&(settings.Engine=dataAttributes.engine),json&&"stretchForce"in json?settings.StretchForce=json.stretchForce:null!=dataAttributes&&dataAttributes.hasOwnProperty("stretchForce")&&(settings.StretchForce=dataAttributes.stretchForce),json&&"forcePianoFingering"in json?settings.ForcePianoFingering=json.forcePianoFingering:null!=dataAttributes&&dataAttributes.hasOwnProperty("forcePianoFingering")&&(settings.ForcePianoFingering=dataAttributes.forcePianoFingering),json&&"lazy"in json?settings.DisableLazyLoading=!json.lazy:null!=dataAttributes&&dataAttributes.hasOwnProperty("lazy")&&(settings.DisableLazyLoading=!dataAttributes.lazy),json&&"transpositionPitches"in json)settings.TranspositionPitches=json.transpositionPitches;else if(null!=dataAttributes&&dataAttributes.hasOwnProperty("transpositionPitches")){var pitchOffsets=dataAttributes.transpositionPitches;null!=pitchOffsets&&pitchOffsets.length&&(settings.TranspositionPitches=pitchOffsets)}if(json&&"displayTranspositionPitches"in json)settings.DisplayTranspositionPitches=json.displayTranspositionPitches;else if(null!=dataAttributes&&dataAttributes.hasOwnProperty("displayTranspositionPitches")){var pitchOffsets1=dataAttributes.displayTranspositionPitches;null!=pitchOffsets1&&pitchOffsets1.length&&(settings.DisplayTranspositionPitches=pitchOffsets1)}if(json&&"scriptFile"in json&&(settings.ScriptFile=alphaTab_Settings.EnsureFullUrl(json.scriptFile),settings.ScriptFile=alphaTab_Settings.AppendScriptName(settings.ScriptFile)),json&&"fontDirectory"in json&&(settings.FontDirectory=alphaTab_Settings.EnsureFullUrl(json.fontDirectory)),json&&"layout"in json?settings.Layout=alphaTab_Settings.LayoutFromJson(json.layout):null!=dataAttributes&&dataAttributes.hasOwnProperty("layout")&&(settings.Layout=alphaTab_Settings.LayoutFromJson(dataAttributes.layout)),null!=dataAttributes)for(var key=$iterator(Object.keys(dataAttributes))();key.hasNext();){var key1=key.next();if(StringTools.startsWith(key1,"layout")){var property=HxOverrides.substr(key1,6,null);settings.Layout.AdditionalSettings[property.toLowerCase()]=dataAttributes[key1]}}if(json&&"staves"in json?settings.Staves=alphaTab_Settings.StavesFromJson(json.staves):null!=dataAttributes&&dataAttributes.hasOwnProperty("staves")&&(settings.Staves=alphaTab_Settings.StavesFromJson(dataAttributes.staves)),null!=dataAttributes)for(var key2=$iterator(Object.keys(dataAttributes))();key2.hasNext();){var key3=key2.next();if(StringTools.startsWith(key3,"staves")){var property1=HxOverrides.substr(key3,6,null);settings.Staves.AdditionalSettings[property1.toLowerCase()]=dataAttributes[key3]}}},alphaTab_Settings.StavesFromJson=function(json){var staveSettings;if("string"==typeof json)staveSettings=new alphaTab_StaveSettings(json);else{if(!json.id)return new alphaTab_StaveSettings("score-tab");if(staveSettings=new alphaTab_StaveSettings(json.id),json.additionalSettings)for(var json1=json.additionalSettings,keys2=Object.keys(json1),key2=HxOverrides.iter(keys2);key2.hasNext();){var key21=key2.next();staveSettings.AdditionalSettings[key21.toLowerCase()]=json.additionalSettings[key21]}}return staveSettings},alphaTab_Settings.LayoutFromJson=function(json){var layout=new alphaTab_LayoutSettings;if("string"==typeof json)layout.Mode=json;else if(json.mode&&(layout.Mode=json.mode),json.additionalSettings)for(var json1=json.additionalSettings,keys=Object.keys(json1),key=HxOverrides.iter(keys);key.hasNext();){var key1=key.next();layout.AdditionalSettings[key1.toLowerCase()]=json.additionalSettings[key1]}return layout},alphaTab_Settings.AppendScriptName=function(url){return null==url||0==url.length||StringTools.endsWith(url,".js")||(StringTools.endsWith(url,"/")||(url+="/"),url+="AlphaTab.js"),url},alphaTab_Settings.EnsureFullUrl=function(relativeUrl){var global=$global;if(!StringTools.startsWith(relativeUrl,"http")&&!StringTools.startsWith(relativeUrl,"https")){var root="";return root+=Std.string(global.location.protocol),root+=Std.string("//"),root+=Std.string(global.location.hostName),global.location.port&&(root+=Std.string(":"),root+=Std.string(global.location.port)),root+=Std.string(relativeUrl),StringTools.endsWith(relativeUrl,"/")||(root+=Std.string("/")),root}return relativeUrl},alphaTab_Settings.get_Defaults=function(){var settings=new alphaTab_Settings;return settings.Scale=1,settings.StretchForce=1,settings.Width=-1,settings.Engine="default",settings.TranspositionPitches=system__$FixedArray_FixedArray_$Impl_$._new(0),settings.DisplayTranspositionPitches=system__$FixedArray_FixedArray_$Impl_$._new(0),settings.Layout=alphaTab_LayoutSettings.get_Defaults(),settings.Staves=new alphaTab_StaveSettings("default"),alphaTab_Settings.SetDefaults(settings),settings},alphaTab_Settings.prototype={ToJson:function(){var json={};json.useWorker=this.UseWebWorker,json.scale=this.Scale,json.width=this.Width,json.engine=this.Engine,json.stretchForce=this.StretchForce,json.forcePianoFingering=this.ForcePianoFingering,json.transpositionPitches=this.TranspositionPitches,json.displayTranspositionPitches=this.DisplayTranspositionPitches,json.scriptFile=this.ScriptFile,json.fontDirectory=this.FontDirectory,json.lazy=this.DisableLazyLoading,json.layout={},json.layout.mode=this.Layout.Mode,json.layout.additionalSettings={};for(var this1=this.Layout.AdditionalSettings,setting=$iterator(Object.keys(this1))();setting.hasNext();){var setting1=setting.next();json.layout.additionalSettings[setting1]=this.Layout.AdditionalSettings[setting1]}json.staves={},json.staves.id=this.Staves.Id,json.staves.additionalSettings={};for(var this2=this.Staves.AdditionalSettings,additionalSetting=$iterator(Object.keys(this2))();additionalSetting.hasNext();){var additionalSetting1=additionalSetting.next();json.staves.additionalSettings[additionalSetting1]=this.Staves.AdditionalSettings[additionalSetting1]}return json},__class__:alphaTab_Settings};var alphaTab_StaveSettings=function(id){this.Id=id;this.AdditionalSettings={}};alphaTab_StaveSettings.__name__=!0,alphaTab_StaveSettings.prototype={Get:function(key,def){var this1=this.AdditionalSettings,key1=key.toLowerCase();return this1.hasOwnProperty(key1)?this.AdditionalSettings[key.toLowerCase()]:def},__class__:alphaTab_StaveSettings};var alphaTab_audio_GeneralMidi=function(){};alphaTab_audio_GeneralMidi.__name__=!0,alphaTab_audio_GeneralMidi.GetValue=function(name){if(null==alphaTab_audio_GeneralMidi._values){(alphaTab_audio_GeneralMidi._values={}).acousticgrandpiano=0,alphaTab_audio_GeneralMidi._values.brightacousticpiano=1,alphaTab_audio_GeneralMidi._values.electricgrandpiano=2,alphaTab_audio_GeneralMidi._values.honkytonkpiano=3,alphaTab_audio_GeneralMidi._values.electricpiano1=4,alphaTab_audio_GeneralMidi._values.electricpiano2=5,alphaTab_audio_GeneralMidi._values.harpsichord=6,alphaTab_audio_GeneralMidi._values.clavinet=7,alphaTab_audio_GeneralMidi._values.celesta=8,alphaTab_audio_GeneralMidi._values.glockenspiel=9,alphaTab_audio_GeneralMidi._values.musicbox=10,alphaTab_audio_GeneralMidi._values.vibraphone=11,alphaTab_audio_GeneralMidi._values.marimba=12,alphaTab_audio_GeneralMidi._values.xylophone=13,alphaTab_audio_GeneralMidi._values.tubularbells=14,alphaTab_audio_GeneralMidi._values.dulcimer=15,alphaTab_audio_GeneralMidi._values.drawbarorgan=16,alphaTab_audio_GeneralMidi._values.percussiveorgan=17,alphaTab_audio_GeneralMidi._values.rockorgan=18,alphaTab_audio_GeneralMidi._values.churchorgan=19,alphaTab_audio_GeneralMidi._values.reedorgan=20,alphaTab_audio_GeneralMidi._values.accordion=21,alphaTab_audio_GeneralMidi._values.harmonica=22,alphaTab_audio_GeneralMidi._values.tangoaccordion=23,alphaTab_audio_GeneralMidi._values.acousticguitarnylon=24,alphaTab_audio_GeneralMidi._values.acousticguitarsteel=25,alphaTab_audio_GeneralMidi._values.electricguitarjazz=26,alphaTab_audio_GeneralMidi._values.electricguitarclean=27,alphaTab_audio_GeneralMidi._values.electricguitarmuted=28,alphaTab_audio_GeneralMidi._values.overdrivenguitar=29,alphaTab_audio_GeneralMidi._values.distortionguitar=30,alphaTab_audio_GeneralMidi._values.guitarharmonics=31,alphaTab_audio_GeneralMidi._values.acousticbass=32,alphaTab_audio_GeneralMidi._values.electricbassfinger=33,alphaTab_audio_GeneralMidi._values.electricbasspick=34,alphaTab_audio_GeneralMidi._values.fretlessbass=35,alphaTab_audio_GeneralMidi._values.slapbass1=36,alphaTab_audio_GeneralMidi._values.slapbass2=37,alphaTab_audio_GeneralMidi._values.synthbass1=38,alphaTab_audio_GeneralMidi._values.synthbass2=39,alphaTab_audio_GeneralMidi._values.violin=40,alphaTab_audio_GeneralMidi._values.viola=41,alphaTab_audio_GeneralMidi._values.cello=42,alphaTab_audio_GeneralMidi._values.contrabass=43,alphaTab_audio_GeneralMidi._values.tremolostrings=44,alphaTab_audio_GeneralMidi._values.pizzicatostrings=45,alphaTab_audio_GeneralMidi._values.orchestralharp=46,alphaTab_audio_GeneralMidi._values.timpani=47,alphaTab_audio_GeneralMidi._values.stringensemble1=48,alphaTab_audio_GeneralMidi._values.stringensemble2=49,alphaTab_audio_GeneralMidi._values.synthstrings1=50,alphaTab_audio_GeneralMidi._values.synthstrings2=51,alphaTab_audio_GeneralMidi._values.choiraahs=52,alphaTab_audio_GeneralMidi._values.voiceoohs=53,alphaTab_audio_GeneralMidi._values.synthvoice=54,alphaTab_audio_GeneralMidi._values.orchestrahit=55,alphaTab_audio_GeneralMidi._values.trumpet=56,alphaTab_audio_GeneralMidi._values.trombone=57,alphaTab_audio_GeneralMidi._values.tuba=58,alphaTab_audio_GeneralMidi._values.mutedtrumpet=59,alphaTab_audio_GeneralMidi._values.frenchhorn=60,alphaTab_audio_GeneralMidi._values.brasssection=61,alphaTab_audio_GeneralMidi._values.synthbrass1=62,alphaTab_audio_GeneralMidi._values.synthbrass2=63,alphaTab_audio_GeneralMidi._values.sopranosax=64,alphaTab_audio_GeneralMidi._values.altosax=65,alphaTab_audio_GeneralMidi._values.tenorsax=66,alphaTab_audio_GeneralMidi._values.baritonesax=67,alphaTab_audio_GeneralMidi._values.oboe=68,alphaTab_audio_GeneralMidi._values.englishhorn=69,alphaTab_audio_GeneralMidi._values.bassoon=70,alphaTab_audio_GeneralMidi._values.clarinet=71,alphaTab_audio_GeneralMidi._values.piccolo=72,alphaTab_audio_GeneralMidi._values.flute=73,alphaTab_audio_GeneralMidi._values.recorder=74,alphaTab_audio_GeneralMidi._values.panflute=75,alphaTab_audio_GeneralMidi._values.blownbottle=76,alphaTab_audio_GeneralMidi._values.shakuhachi=77,alphaTab_audio_GeneralMidi._values.whistle=78,alphaTab_audio_GeneralMidi._values.ocarina=79,alphaTab_audio_GeneralMidi._values.lead1square=80,alphaTab_audio_GeneralMidi._values.lead2sawtooth=81,alphaTab_audio_GeneralMidi._values.lead3calliope=82,alphaTab_audio_GeneralMidi._values.lead4chiff=83,alphaTab_audio_GeneralMidi._values.lead5charang=84,alphaTab_audio_GeneralMidi._values.lead6voice=85,alphaTab_audio_GeneralMidi._values.lead7fifths=86,alphaTab_audio_GeneralMidi._values.lead8bassandlead=87,alphaTab_audio_GeneralMidi._values.pad1newage=88,alphaTab_audio_GeneralMidi._values.pad2warm=89,alphaTab_audio_GeneralMidi._values.pad3polysynth=90,alphaTab_audio_GeneralMidi._values.pad4choir=91,alphaTab_audio_GeneralMidi._values.pad5bowed=92,alphaTab_audio_GeneralMidi._values.pad6metallic=93,alphaTab_audio_GeneralMidi._values.pad7halo=94,alphaTab_audio_GeneralMidi._values.pad8sweep=95,alphaTab_audio_GeneralMidi._values.fx1rain=96,alphaTab_audio_GeneralMidi._values.fx2soundtrack=97,alphaTab_audio_GeneralMidi._values.fx3crystal=98,alphaTab_audio_GeneralMidi._values.fx4atmosphere=99,alphaTab_audio_GeneralMidi._values.fx5brightness=100,alphaTab_audio_GeneralMidi._values.fx6goblins=101,alphaTab_audio_GeneralMidi._values.fx7echoes=102,alphaTab_audio_GeneralMidi._values.fx8scifi=103,alphaTab_audio_GeneralMidi._values.sitar=104,alphaTab_audio_GeneralMidi._values.banjo=105,alphaTab_audio_GeneralMidi._values.shamisen=106,alphaTab_audio_GeneralMidi._values.koto=107,alphaTab_audio_GeneralMidi._values.kalimba=108,alphaTab_audio_GeneralMidi._values.bagpipe=109,alphaTab_audio_GeneralMidi._values.fiddle=110,alphaTab_audio_GeneralMidi._values.shanai=111,alphaTab_audio_GeneralMidi._values.tinklebell=112,alphaTab_audio_GeneralMidi._values.agogo=113,alphaTab_audio_GeneralMidi._values.steeldrums=114,alphaTab_audio_GeneralMidi._values.woodblock=115,alphaTab_audio_GeneralMidi._values.taikodrum=116,alphaTab_audio_GeneralMidi._values.melodictom=117,alphaTab_audio_GeneralMidi._values.synthdrum=118,alphaTab_audio_GeneralMidi._values.reversecymbal=119,alphaTab_audio_GeneralMidi._values.guitarfretnoise=120,alphaTab_audio_GeneralMidi._values.breathnoise=121,alphaTab_audio_GeneralMidi._values.seashore=122,alphaTab_audio_GeneralMidi._values.birdtweet=123,alphaTab_audio_GeneralMidi._values.telephonering=124,alphaTab_audio_GeneralMidi._values.helicopter=125,alphaTab_audio_GeneralMidi._values.applause=126,alphaTab_audio_GeneralMidi._values.gunshot=127}return name=StringTools.replace(name.toLowerCase()," ",""),alphaTab_audio_GeneralMidi._values.hasOwnProperty(name)?alphaTab_audio_GeneralMidi._values[name]:0},alphaTab_audio_GeneralMidi.IsPiano=function(program){return program<=7||program>=16&&program<=23},alphaTab_audio_GeneralMidi.IsGuitar=function(program){return program>=24&&program<=39||105==program||43==program},alphaTab_audio_GeneralMidi.prototype={__class__:alphaTab_audio_GeneralMidi};var alphaTab_audio_MidiUtils=function(){};alphaTab_audio_MidiUtils.__name__=!0,alphaTab_audio_MidiUtils.TicksToMillis=function(ticks,tempo){return system_Convert.ToInt32_Double(ticks*(6e4/(960*tempo)))},alphaTab_audio_MidiUtils.ToTicks=function(duration){return alphaTab_audio_MidiUtils.ValueToTicks(duration)},alphaTab_audio_MidiUtils.ValueToTicks=function(duration){var denomninator=duration;return denomninator<0&&(denomninator=1/-denomninator),system_Convert.ToInt32_Single(4/denomninator*960)},alphaTab_audio_MidiUtils.ApplyDot=function(ticks,doubleDotted){return doubleDotted?ticks+3*(ticks/4|0):ticks+(ticks/2|0)},alphaTab_audio_MidiUtils.ApplyTuplet=function(ticks,numerator,denominator){return ticks*denominator/numerator|0},alphaTab_audio_MidiUtils.DynamicToVelocity=function(dyn){return 15+16*dyn};var alphaTab_audio_generator_IMidiFileHandler=function(){};alphaTab_audio_generator_IMidiFileHandler.__name__=!0,alphaTab_audio_generator_IMidiFileHandler.prototype={__class__:alphaTab_audio_generator_IMidiFileHandler};var alphaTab_audio_generator_MidiFileGenerator=function(score,handler){this._score=score,this._currentTempo=this._score.Tempo,this._handler=handler,this.TickLookup=new alphaTab_audio_model_MidiTickLookup};alphaTab_audio_generator_MidiFileGenerator.__name__=!0,alphaTab_audio_generator_MidiFileGenerator.GenerateMidiFile=function(score){for(var midiFile=new alphaTab_audio_model_MidiFile,i=0,j=score.Tracks.length;i<j;)midiFile.CreateTrack(),++i;midiFile.InfoTrack=0;var handler=new alphaTab_audio_generator_MidiFileHandler(midiFile),generator=new alphaTab_audio_generator_MidiFileGenerator(score,handler);return generator.Generate(),midiFile.TickLookup=generator.TickLookup,midiFile},alphaTab_audio_generator_MidiFileGenerator.ToChannelShort=function(data){var value=Math.max(-32768,Math.min(32767,8*data-1));return Math.max(value,-1)+1},alphaTab_audio_generator_MidiFileGenerator.prototype={Generate:function(){for(var i=0,j=this._score.Tracks.length;i<j;)this.GenerateTrack(this._score.Tracks[i]),++i;for(var controller=new alphaTab_audio_generator_MidiPlaybackController(this._score),previousMasterBar=null;!controller.get_Finished();){var index=controller.Index,bar=this._score.MasterBars[index],currentTick=controller.CurrentTick;if(controller.ProcessCurrent(),controller.ShouldPlay){this.GenerateMasterBar(bar,previousMasterBar,currentTick);for(var i1=0,j1=this._score.Tracks.length;i1<j1;){for(var track=this._score.Tracks[i1],k=0,l=track.Staves.length;k<l;){var staff=track.Staves[k];index<staff.Bars.length&&this.GenerateBar(staff.Bars[index],currentTick),++k}++i1}}controller.MoveNext(),previousMasterBar=bar}for(var i2=0,j2=this._score.Tracks.length;i2<j2;)this._handler.FinishTrack(this._score.Tracks[i2].Index,controller.CurrentTick),++i2;this.TickLookup.Finish()},GenerateTrack:function(track){this.GenerateChannel(track,system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel),track.PlaybackInfo),track.PlaybackInfo.PrimaryChannel!=track.PlaybackInfo.SecondaryChannel&&this.GenerateChannel(track,system_Convert.ToUInt8(track.PlaybackInfo.SecondaryChannel),track.PlaybackInfo)},GenerateChannel:function(track,channel,playbackInfo){var volume=alphaTab_audio_generator_MidiFileGenerator.ToChannelShort(playbackInfo.Volume),balance=alphaTab_audio_generator_MidiFileGenerator.ToChannelShort(playbackInfo.Balance);this._handler.AddControlChange(track.Index,0,channel,system_Convert.ToUInt8(7),system_Convert.ToUInt8(volume)),this._handler.AddControlChange(track.Index,0,channel,system_Convert.ToUInt8(10),system_Convert.ToUInt8(balance)),this._handler.AddControlChange(track.Index,0,channel,system_Convert.ToUInt8(11),127),this._handler.AddControlChange(track.Index,0,channel,system_Convert.ToUInt8(100),0),this._handler.AddControlChange(track.Index,0,channel,system_Convert.ToUInt8(101),0),this._handler.AddControlChange(track.Index,0,channel,system_Convert.ToUInt8(38),0),this._handler.AddControlChange(track.Index,0,channel,system_Convert.ToUInt8(6),12),this._handler.AddProgramChange(track.Index,0,channel,system_Convert.ToUInt8(playbackInfo.Program))},GenerateMasterBar:function(masterBar,previousMasterBar,currentTick){null!=previousMasterBar&&previousMasterBar.TimeSignatureDenominator==masterBar.TimeSignatureDenominator&&previousMasterBar.TimeSignatureNumerator==masterBar.TimeSignatureNumerator||this._handler.AddTimeSignature(currentTick,masterBar.TimeSignatureNumerator,masterBar.TimeSignatureDenominator),null==previousMasterBar?(this._handler.AddTempo(currentTick,masterBar.Score.Tempo),this._currentTempo=masterBar.Score.Tempo):null!=masterBar.TempoAutomation&&(this._handler.AddTempo(currentTick,system_Convert.ToInt32_Single(masterBar.TempoAutomation.Value)),this._currentTempo=system_Convert.ToInt32_Single(masterBar.TempoAutomation.Value));var masterBarLookup=new alphaTab_audio_model_MasterBarTickLookup;masterBarLookup.MasterBar=masterBar,masterBarLookup.Start=currentTick,masterBarLookup.Tempo=this._currentTempo,masterBarLookup.End=masterBarLookup.Start+masterBar.CalculateDuration(),this.TickLookup.AddMasterBar(masterBarLookup)},GenerateBar:function(bar,barStartTick){for(var i=0,j=bar.Voices.length;i<j;)this.GenerateVoice(bar.Voices[i],barStartTick),++i},GenerateVoice:function(voice,barStartTick){if(!voice.IsEmpty||voice.Bar.get_IsEmpty()&&0==voice.Index)for(var i=0,j=voice.Beats.length;i<j;)this.GenerateBeat(voice.Beats[i],barStartTick),++i},GenerateBeat:function(beat,barStartTick){var beatStart=beat.Start,audioDuration=beat.Voice.Bar.get_IsEmpty()?beat.Voice.Bar.get_MasterBar().CalculateDuration():beat.CalculateDuration(),beatLookup=new alphaTab_audio_model_BeatTickLookup;beatLookup.Start=barStartTick+beatStart;var realTickOffset=null==beat.NextBeat?audioDuration:beat.NextBeat.get_AbsoluteStart()-beat.get_AbsoluteStart();beatLookup.End=barStartTick+beatStart+(realTickOffset>audioDuration?realTickOffset:audioDuration),beatLookup.Beat=beat,this.TickLookup.AddBeat(beatLookup);for(var track=beat.Voice.Bar.Staff.Track,i=0,j=beat.Automations.length;i<j;)this.GenerateAutomation(beat,beat.Automations[i],barStartTick),++i;if(beat.get_IsRest())this._handler.AddRest(track.Index,barStartTick+beatStart,track.PlaybackInfo.PrimaryChannel);else for(var brushInfo=this.GetBrushInfo(beat),i1=0,j1=beat.Notes.length;i1<j1;){var n=beat.Notes[i1];this.GenerateNote(n,barStartTick+beatStart,audioDuration,brushInfo),++i1}if(0!=beat.Vibrato){this.GenerateVibratorWithParams(beat.Voice.Bar.Staff.Track,barStartTick+beatStart,beat.CalculateDuration(),240,3)}},GenerateNote:function(note,beatStart,beatDuration,brushInfo){var track=note.Beat.Voice.Bar.Staff.Track,noteKey=note.get_RealValue(),brushOffset=note.get_IsStringed()&&note.String<=brushInfo.length?brushInfo[note.String-1]:0,noteStart=beatStart+brushOffset,noteDuration=this.GetNoteDuration(note,beatDuration)-brushOffset,dynamicValue=this.GetDynamicValue(note);note.get_HasBend()||this._handler.AddBend(track.Index,noteStart,system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel),system_Convert.ToUInt8(64)),note.Beat.FadeIn&&this.GenerateFadeIn(note,noteStart,noteDuration,noteKey,dynamicValue),!note.get_IsTrill()||track.IsPercussion?note.Beat.get_IsTremolo()?this.GenerateTremoloPicking(note,noteStart,noteDuration,noteKey,dynamicValue):(note.get_HasBend()?this.GenerateBend(note,noteStart,noteDuration,noteKey,dynamicValue):note.Beat.get_HasWhammyBar()?this.GenerateWhammyBar(note,noteStart,noteDuration,noteKey,dynamicValue):0!=note.SlideType?this.GenerateSlide(note,noteStart,noteDuration,noteKey,dynamicValue):0!=note.Vibrato&&this.GenerateVibrato(note,noteStart,noteDuration,noteKey,dynamicValue),0!=note.HarmonicType&&this.GenerateHarmonic(note,noteStart,noteDuration,noteKey,dynamicValue),note.IsTieDestination||this._handler.AddNote(track.Index,noteStart,noteDuration,system_Convert.ToUInt8(noteKey),dynamicValue,system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel))):this.GenerateTrill(note,noteStart,noteDuration,noteKey,dynamicValue)},GetNoteDuration:function(note,beatDuration){return this.ApplyDurationEffects(note,beatDuration)},ApplyDurationEffects:function(note,duration){if(note.IsDead)return this.ApplyStaticDuration(30,duration);if(note.IsPalmMute)return this.ApplyStaticDuration(80,duration);if(note.IsStaccato)return duration/2|0;if(note.IsTieOrigin){var endNote=note.TieDestination;if(note.IsTieDestination)return duration+this.GetNoteDuration(endNote,endNote.Beat.CalculateDuration());var startTick=note.Beat.get_AbsoluteStart();return endNote.Beat.get_AbsoluteStart()+this.GetNoteDuration(endNote,endNote.Beat.CalculateDuration())-startTick}return duration},ApplyStaticDuration:function(duration,maximum){var value=this._currentTempo*duration/60|0;return Math.min(value,maximum)},GetDynamicValue:function(note){var dynamicValue=note.Dynamic;note.Beat.Voice.Bar.Staff.Track.IsPercussion||null==note.HammerPullOrigin||--dynamicValue,note.IsGhost&&--dynamicValue;switch(note.Accentuated){case 1:++dynamicValue;break;case 2:dynamicValue+=2}return dynamicValue},GenerateFadeIn:function(note,noteStart,noteDuration,noteKey,dynamicValue){for(var track=note.Beat.Voice.Bar.Staff.Track,endVolume=alphaTab_audio_generator_MidiFileGenerator.ToChannelShort(track.PlaybackInfo.Volume),volumeFactor=js_Boot.__cast(endVolume,Float)/noteDuration,steps=noteDuration/120|0,endTick=noteStart+noteDuration,i=steps-1;i>=0;){var tick=endTick-120*i,volume=(tick-noteStart)*volumeFactor;i==steps-1&&(this._handler.AddControlChange(track.Index,noteStart,system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel),system_Convert.ToUInt8(7),system_Convert.ToUInt8(system_Convert.ToInt32_Single(volume))),this._handler.AddControlChange(track.Index,noteStart,system_Convert.ToUInt8(track.PlaybackInfo.SecondaryChannel),system_Convert.ToUInt8(7),system_Convert.ToUInt8(system_Convert.ToInt32_Single(volume)))),this._handler.AddControlChange(track.Index,tick,system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel),system_Convert.ToUInt8(7),system_Convert.ToUInt8(system_Convert.ToInt32_Single(volume))),this._handler.AddControlChange(track.Index,tick,system_Convert.ToUInt8(track.PlaybackInfo.SecondaryChannel),system_Convert.ToUInt8(7),system_Convert.ToUInt8(system_Convert.ToInt32_Single(volume))),--i}},GenerateHarmonic:function(note,noteStart,noteDuration,noteKey,dynamicValue){},GenerateVibrato:function(note,noteStart,noteDuration,noteKey,dynamicValue){var track=note.Beat.Voice.Bar.Staff.Track;this.GenerateVibratorWithParams(track,noteStart,noteDuration,480,2)},GenerateVibratorWithParams:function(track,noteStart,noteDuration,phaseLength,bendAmplitude){for(var phaseHalf=phaseLength/2|0,noteEnd=(noteStart+=phaseLength)+noteDuration;noteStart<noteEnd;){for(var phase=0,phaseDuration=noteStart+phaseLength<noteEnd?phaseLength:noteEnd-noteStart;phase<phaseDuration;){var bend=bendAmplitude*Math.sin(3.14159265358979*phase/phaseHalf);this._handler.AddBend(track.Index,noteStart+phase,system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel),system_Convert.ToUInt8(system_Convert.ToInt32_Double(64+bend))),phase+=16}noteStart+=phaseLength}},GenerateSlide:function(note,noteStart,noteDuration,noteKey,dynamicValue){},GenerateWhammyBar:function(note,noteStart,noteDuration,noteKey,dynamicValue){},GenerateBend:function(note,noteStart,noteDuration,noteKey,dynamicValue){for(var track=note.Beat.Voice.Bar.Staff.Track,ticksPerPosition=js_Boot.__cast(noteDuration,Float)/60,i=0;i<note.BendPoints.length-1;){var currentPoint=note.BendPoints[i],nextPoint=note.BendPoints[i+1],currentBendValue=64+2.75*currentPoint.Value,nextBendValue=64+2.75*nextPoint.Value,ticksPerValue=ticksPerPosition*(nextPoint.Offset-currentPoint.Offset)/Math.abs(nextBendValue-currentBendValue),tick=noteStart+ticksPerPosition*currentPoint.Offset;if(currentBendValue<nextBendValue)for(;currentBendValue<=nextBendValue;){var tmp=this._handler,track1=track.Index,tmp1=system_Convert.ToInt32_Double(tick),tmp2=system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel),this1=currentBendValue,this2=Math.round(this1);tmp.AddBend(track1,tmp1,tmp2,system_Convert.ToUInt8(system_Convert.ToInt32_Double(this2))),++currentBendValue,tick+=ticksPerValue}else if(currentBendValue>nextBendValue)for(;currentBendValue>=nextBendValue;){var tmp3=this._handler,track2=track.Index,tmp4=system_Convert.ToInt32_Double(tick),tmp5=system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel),this3=currentBendValue,this4=Math.round(this3);tmp3.AddBend(track2,tmp4,tmp5,system_Convert.ToUInt8(system_Convert.ToInt32_Double(this4))),--currentBendValue,tick+=ticksPerValue}++i}},GenerateTrill:function(note,noteStart,noteDuration,noteKey,dynamicValue){for(var track=note.Beat.Voice.Bar.Staff.Track,trillKey=note.get_StringTuning()+note.get_TrillFret(),trillLength=alphaTab_audio_MidiUtils.ToTicks(note.TrillSpeed),realKey=!0,tick=noteStart;tick+10<noteStart+noteDuration;)tick+trillLength>=noteStart+noteDuration&&(trillLength=noteStart+noteDuration-tick),this._handler.AddNote(track.Index,tick,trillLength,system_Convert.ToUInt8(realKey?trillKey:noteKey),dynamicValue,system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel)),realKey=!realKey,tick+=trillLength},GenerateTremoloPicking:function(note,noteStart,noteDuration,noteKey,dynamicValue){for(var track=note.Beat.Voice.Bar.Staff.Track,tpLength=alphaTab_audio_MidiUtils.ToTicks(note.Beat.TremoloSpeed),tick=noteStart;tick+10<noteStart+noteDuration;)tick+tpLength>=noteStart+noteDuration&&(tpLength=noteStart+noteDuration-tick),this._handler.AddNote(track.Index,tick,tpLength,system_Convert.ToUInt8(noteKey),dynamicValue,system_Convert.ToUInt8(track.PlaybackInfo.PrimaryChannel)),tick+=tpLength},GetBrushInfo:function(beat){var brushInfo=system__$FixedArray_FixedArray_$Impl_$._new(beat.Voice.Bar.Staff.Track.Tuning.length);if(0!=beat.BrushType){for(var stringUsed=0,i=0,j=beat.Notes.length;i<j;){var n=beat.Notes[i];n.IsTieDestination||(stringUsed|=1<<n.String-1,++i)}if(beat.Notes.length>0)for(var brushMove=0,brushIncrement=this.GetBrushIncrement(beat),i1=0,j1=beat.Voice.Bar.Staff.Track.Tuning.length;i1<j1;){var index=4==beat.BrushType||2==beat.BrushType?i1:brushInfo.length-1-i1;0!=(stringUsed&1<<index)&&(brushInfo[index]=brushMove,brushMove=brushIncrement),++i1}}return brushInfo},GetBrushIncrement:function(beat){if(0==beat.BrushDuration)return 0;var duration=beat.CalculateDuration();return 0==duration?0:system_Convert.ToInt32_Double(duration/8*(4/beat.BrushDuration))},GenerateAutomation:function(beat,automation,startMove){switch(automation.Type){case 1:var volume=alphaTab_audio_generator_MidiFileGenerator.ToChannelShort(system_Convert.ToInt32_Single(automation.Value));this._handler.AddControlChange(beat.Voice.Bar.Staff.Track.Index,beat.Start+startMove,system_Convert.ToUInt8(beat.Voice.Bar.Staff.Track.PlaybackInfo.PrimaryChannel),system_Convert.ToUInt8(7),system_Convert.ToUInt8(volume)),this._handler.AddControlChange(beat.Voice.Bar.Staff.Track.Index,beat.Start+startMove,system_Convert.ToUInt8(beat.Voice.Bar.Staff.Track.PlaybackInfo.SecondaryChannel),system_Convert.ToUInt8(7),system_Convert.ToUInt8(volume));break;case 2:this._handler.AddProgramChange(beat.Voice.Bar.Staff.Track.Index,beat.Start+startMove,system_Convert.ToUInt8(beat.Voice.Bar.Staff.Track.PlaybackInfo.PrimaryChannel),system_Convert.ToUInt8(system_Convert.ToInt32_Single(automation.Value))),this._handler.AddProgramChange(beat.Voice.Bar.Staff.Track.Index,beat.Start+startMove,system_Convert.ToUInt8(beat.Voice.Bar.Staff.Track.PlaybackInfo.SecondaryChannel),system_Convert.ToUInt8(system_Convert.ToInt32_Single(automation.Value)));break;case 3:var balance=alphaTab_audio_generator_MidiFileGenerator.ToChannelShort(system_Convert.ToInt32_Single(automation.Value));this._handler.AddControlChange(beat.Voice.Bar.Staff.Track.Index,beat.Start+startMove,system_Convert.ToUInt8(beat.Voice.Bar.Staff.Track.PlaybackInfo.PrimaryChannel),system_Convert.ToUInt8(10),system_Convert.ToUInt8(balance)),this._handler.AddControlChange(beat.Voice.Bar.Staff.Track.Index,beat.Start+startMove,system_Convert.ToUInt8(beat.Voice.Bar.Staff.Track.PlaybackInfo.SecondaryChannel),system_Convert.ToUInt8(10),system_Convert.ToUInt8(balance))}},__class__:alphaTab_audio_generator_MidiFileGenerator};var alphaTab_audio_generator_MidiFileHandler=function(midiFile){this._midiFile=midiFile};alphaTab_audio_generator_MidiFileHandler.__name__=!0,alphaTab_audio_generator_MidiFileHandler.__interfaces__=[alphaTab_audio_generator_IMidiFileHandler],alphaTab_audio_generator_MidiFileHandler.FixValue=function(value){return value>127?127:value},alphaTab_audio_generator_MidiFileHandler.BuildMetaMessage=function(metaType,data){var meta=alphaTab_io_ByteBuffer.Empty();return meta.WriteByte(255),meta.WriteByte(system_Convert.ToUInt8(255&metaType)),alphaTab_audio_generator_MidiFileHandler.WriteVarInt(meta,data.length),meta.Write(data,0,data.length),new alphaTab_audio_model_MidiMessage(meta.ToArray())},alphaTab_audio_generator_MidiFileHandler.WriteVarInt=function(data,v){for(var n=0,array=system__$FixedArray_FixedArray_$Impl_$._new(4);array[n++]=system_Convert.ToUInt8(127&v),(v>>=7)>0;);for(;n>0;)--n>0?data.WriteByte(system_Convert.ToUInt8(255&(128|array[n]))):data.WriteByte(array[n])},alphaTab_audio_generator_MidiFileHandler.BuildSysExMessage=function(data){var sysex=alphaTab_io_ByteBuffer.Empty();return sysex.WriteByte(240),alphaTab_audio_generator_MidiFileHandler.WriteVarInt(sysex,data.length+2),sysex.WriteByte(0),sysex.Write(data,0,data.length),sysex.WriteByte(247),new alphaTab_audio_model_MidiMessage(sysex.ToArray())},alphaTab_audio_generator_MidiFileHandler.prototype={AddEvent:function(track,tick,message){this._midiFile.Tracks[track].AddEvent(new alphaTab_audio_model_MidiEvent(tick,message))},MakeCommand:function(command,channel){return system_Convert.ToUInt8(240&command|15&channel)},AddTimeSignature:function(tick,timeSignatureNumerator,timeSignatureDenominator){for(var denominatorIndex=0;(timeSignatureDenominator>>=1)>0;)++denominatorIndex;this.AddEvent(this._midiFile.InfoTrack,tick,alphaTab_audio_generator_MidiFileHandler.BuildMetaMessage(88,[system_Convert.ToUInt8(255&timeSignatureNumerator),system_Convert.ToUInt8(255&denominatorIndex),48,8]))},AddRest:function(track,tick,channel){this.AddEvent(track,tick,alphaTab_audio_generator_MidiFileHandler.BuildSysExMessage([system_Convert.ToUInt8(0)]))},AddNote:function(track,start,length,key,dynamicValue,channel){var velocity=alphaTab_audio_MidiUtils.DynamicToVelocity(dynamicValue);this.AddEvent(track,start,new alphaTab_audio_model_MidiMessage([this.MakeCommand(144,channel),alphaTab_audio_generator_MidiFileHandler.FixValue(key),alphaTab_audio_generator_MidiFileHandler.FixValue(system_Convert.ToUInt8(velocity))])),this.AddEvent(track,start+length,new alphaTab_audio_model_MidiMessage([this.MakeCommand(128,channel),alphaTab_audio_generator_MidiFileHandler.FixValue(key),alphaTab_audio_generator_MidiFileHandler.FixValue(system_Convert.ToUInt8(velocity))]))},AddControlChange:function(track,tick,channel,controller,value){this.AddEvent(track,tick,new alphaTab_audio_model_MidiMessage([this.MakeCommand(176,channel),alphaTab_audio_generator_MidiFileHandler.FixValue(controller),alphaTab_audio_generator_MidiFileHandler.FixValue(value)]))},AddProgramChange:function(track,tick,channel,program){this.AddEvent(track,tick,new alphaTab_audio_model_MidiMessage([this.MakeCommand(192,channel),alphaTab_audio_generator_MidiFileHandler.FixValue(program)]))},AddTempo:function(tick,tempo){var tempoInUsq=6e7/tempo|0;this.AddEvent(this._midiFile.InfoTrack,tick,alphaTab_audio_generator_MidiFileHandler.BuildMetaMessage(81,[system_Convert.ToUInt8(tempoInUsq>>16&255),system_Convert.ToUInt8(tempoInUsq>>8&255),system_Convert.ToUInt8(255&tempoInUsq)]))},FinishTrack:function(track,tick){this.AddEvent(this._midiFile.InfoTrack,tick,alphaTab_audio_generator_MidiFileHandler.BuildMetaMessage(47,system__$FixedArray_FixedArray_$Impl_$._new(0)))},AddBend:function(track,tick,channel,value){this.AddEvent(track,tick,new alphaTab_audio_model_MidiMessage([this.MakeCommand(224,channel),0,alphaTab_audio_generator_MidiFileHandler.FixValue(value)]))},__class__:alphaTab_audio_generator_MidiFileHandler};var alphaTab_audio_generator_MidiPlaybackController=function(score){this._score=score,this.ShouldPlay=!0,this.Index=0,this.CurrentTick=0};alphaTab_audio_generator_MidiPlaybackController.__name__=!0,alphaTab_audio_generator_MidiPlaybackController.prototype={get_Finished:function(){return this.Index>=this._score.MasterBars.length},ProcessCurrent:function(){var masterBar=this._score.MasterBars[this.Index],masterBarAlternateEndings=masterBar.AlternateEndings;masterBar.RepeatGroup.IsClosed||masterBar.RepeatGroup.Openings[masterBar.RepeatGroup.Openings.length-1]!=masterBar||(this._repeatNumber=0,this._repeatOpen=!1),!masterBar.IsRepeatStart&&0!=masterBar.Index||0!=this._repeatNumber?masterBar.IsRepeatStart&&(this.ShouldPlay=!0):(this._repeatStartIndex=this.Index,this._repeatOpen=!0),this._repeatOpen&&masterBarAlternateEndings>0&&(0==(masterBarAlternateEndings&1<<this._repeatNumber)?this.ShouldPlay=!1:this.ShouldPlay=!0),this.ShouldPlay&&(this.CurrentTick=this.CurrentTick+masterBar.CalculateDuration())},MoveNext:function(){var masterBarRepeatCount=this._score.MasterBars[this.Index].RepeatCount-1;this._repeatOpen&&masterBarRepeatCount>0?this._repeatNumber<masterBarRepeatCount?(this.Index=this._repeatStartIndex,this._repeatNumber++):(this._repeatNumber=0,this._repeatOpen=!1,this.ShouldPlay=!0,this.Index++):this.Index++},__class__:alphaTab_audio_generator_MidiPlaybackController};var alphaTab_audio_model_BeatTickLookup=function(){};alphaTab_audio_model_BeatTickLookup.__name__=!0,alphaTab_audio_model_BeatTickLookup.prototype={__class__:alphaTab_audio_model_BeatTickLookup};var alphaTab_audio_model_MasterBarTickLookup=function(){this.Beats=[]};alphaTab_audio_model_MasterBarTickLookup.__name__=!0,alphaTab_audio_model_MasterBarTickLookup.prototype={Finish:function(){this.Beats.sort(function(a1,b1){return b=b1,a1.Start-b.Start;var b})},AddBeat:function(beat){this.Beats.push(beat)},__class__:alphaTab_audio_model_MasterBarTickLookup};var alphaTab_audio_model__$MidiController_MidiController_$Impl_$={};alphaTab_audio_model__$MidiController_MidiController_$Impl_$.__name__=!0,alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_audio_model__$MidiController_MidiController_$Impl_$.toString=function(this1){switch(this1){case 6:return"DataEntryCoarse";case 7:return"VolumeCoarse";case 10:return"PanCoarse";case 11:return"ExpressionControllerCoarse";case 38:return"DataEntryFine";case 100:return"RegisteredParameterFine";case 101:return"RegisteredParameterCourse"}return""};var alphaTab_audio_model_MidiEvent=function(tick,message){this.Tick=tick,this.Message=message};alphaTab_audio_model_MidiEvent.__name__=!0,alphaTab_audio_model_MidiEvent.prototype={get_DeltaTicks:function(){return null==this.PreviousEvent?0:this.Tick-this.PreviousEvent.Tick},WriteTo:function(s){this.WriteVariableInt(s,this.get_DeltaTicks()),this.Message.WriteTo(s)},WriteVariableInt:function(s,value){for(var array=system__$FixedArray_FixedArray_$Impl_$._new(4),n=0;array[n++]=system_Convert.ToUInt8(127&value),(value>>=7)>0;);for(;n>0;)--n>0?s.WriteByte(system_Convert.ToUInt8(128|array[n])):s.WriteByte(array[n])},__class__:alphaTab_audio_model_MidiEvent};var alphaTab_audio_model_MidiFile=function(){this.Tracks=[]};alphaTab_audio_model_MidiFile.__name__=!0,alphaTab_audio_model_MidiFile.prototype={CreateTrack:function(){var track=new alphaTab_audio_model_MidiTrack;return track.Index=this.Tracks.length,track.File=this,this.Tracks.push(track),track},WriteTo:function(s){var b=[77,84,104,100];s.Write(b,0,b.length),b=[0,0,0,6],s.Write(b,0,b.length),b=[0,1],s.Write(b,0,b.length);var v=system_Convert.ToInt16(this.Tracks.length);b=[system_Convert.ToUInt8(v>>8&255),system_Convert.ToUInt8(255&v)],s.Write(b,0,b.length),v=system_Convert.ToInt16(960),b=[system_Convert.ToUInt8(v>>8&255),system_Convert.ToUInt8(255&v)],s.Write(b,0,b.length);for(var i=0,j=this.Tracks.length;i<j;)this.Tracks[i].WriteTo(s),++i},__class__:alphaTab_audio_model_MidiFile};var alphaTab_audio_model_MidiMessage=function(data){this.Data=data};alphaTab_audio_model_MidiMessage.__name__=!0,alphaTab_audio_model_MidiMessage.prototype={WriteTo:function(s){s.Write(this.Data,0,this.Data.length)},__class__:alphaTab_audio_model_MidiMessage};var alphaTab_audio_model_MidiTickLookup=function(){this.MasterBars=[];this.MasterBarLookup={}};alphaTab_audio_model_MidiTickLookup.__name__=!0,alphaTab_audio_model_MidiTickLookup.prototype={Finish:function(){for(var i=0;i<this.MasterBars.length;)this.MasterBars[i].Finish(),++i},FindBeat:function(tracks,tick){var masterBar=this.FindMasterBar(tick);if(null==masterBar)return null;for(var trackLookup={},track=HxOverrides.iter(tracks);track.hasNext();){trackLookup[track.next().Index]=!0}for(var beat=null,index=0,beats=masterBar.Beats,b=0;b<beats.length;){var currentBeat=beats[b];if(trackLookup.hasOwnProperty(currentBeat.Beat.Voice.Bar.Staff.Track.Index)){if(currentBeat.Start<=tick&&tick<currentBeat.End)(null==beat||beat.Start<currentBeat.Start)&&(beat=beats[b],index=b);else if(currentBeat.End>tick)break;++b}}if(null==beat)return null;for(var nextBeat=null,b1=index+1;b1<beats.length;){var currentBeat1=beats[b1];if(trackLookup.hasOwnProperty(currentBeat1.Beat.Voice.Bar.Staff.Track.Index)){nextBeat=currentBeat1;break}++b1}if(null==nextBeat&&null!=masterBar.MasterBar.NextMasterBar){beats=this.GetMasterBar(masterBar.MasterBar.NextMasterBar).Beats;for(var b2=0;b2<beats.length;){var currentBeat2=beats[b2];if(trackLookup.hasOwnProperty(currentBeat2.Beat.Voice.Bar.Staff.Track.Index)){nextBeat=currentBeat2;break}++b2}}var result=new alphaTab_audio_model_MidiTickLookupFindBeatResult;return result.CurrentBeat=beat.Beat,result.NextBeat=null==nextBeat?null:nextBeat.Beat,result.Duration=alphaTab_audio_MidiUtils.TicksToMillis(beat.End-beat.Start,masterBar.Tempo),result},FindMasterBar:function(tick){for(var bars=this.MasterBars,bottom=0,top=bars.length-1;bottom<=top;){var middle=(top+bottom)/2|0,bar=bars[middle];if(tick>=bar.Start&&tick<bar.End)return bar;tick<bar.Start?top=middle-1:bottom=middle+1}return null},GetMasterBar:function(bar){return this.MasterBarLookup.hasOwnProperty(bar.Index)?this.MasterBarLookup[bar.Index]:new alphaTab_audio_model_MasterBarTickLookup},GetMasterBarStart:function(bar){return this.MasterBarLookup.hasOwnProperty(bar.Index)?this.MasterBarLookup[bar.Index].Start:0},AddMasterBar:function(masterBar){this.MasterBars.push(masterBar),this._currentMasterBar=masterBar,this.MasterBarLookup.hasOwnProperty(masterBar.MasterBar.Index)||(this.MasterBarLookup[masterBar.MasterBar.Index]=masterBar)},AddBeat:function(beat){this._currentMasterBar.AddBeat(beat)},__class__:alphaTab_audio_model_MidiTickLookup};var alphaTab_audio_model_MidiTickLookupFindBeatResult=function(){};alphaTab_audio_model_MidiTickLookupFindBeatResult.__name__=!0,alphaTab_audio_model_MidiTickLookupFindBeatResult.prototype={__class__:alphaTab_audio_model_MidiTickLookupFindBeatResult};var alphaTab_audio_model_MidiTrack=function(){};alphaTab_audio_model_MidiTrack.__name__=!0,alphaTab_audio_model_MidiTrack.prototype={AddEvent:function(e){if(e.Track=this,null==this.FirstEvent)this.FirstEvent=e,this.LastEvent=e;else if(this.LastEvent.Tick<=e.Tick)this.LastEvent.NextEvent=e,e.PreviousEvent=this.LastEvent,this.LastEvent=e;else if(this.FirstEvent.Tick>e.Tick)e.NextEvent=this.FirstEvent,this.FirstEvent.PreviousEvent=e,this.FirstEvent=e;else{if(e.Tick-this.FirstEvent.Tick<this.LastEvent.Tick-e.Tick){for(var previous=this.FirstEvent;null!=previous&&null!=previous.NextEvent&&previous.NextEvent.Tick<=e.Tick;)previous=previous.NextEvent;if(null==previous)return;var next=previous.NextEvent;previous.NextEvent=e,e.PreviousEvent=previous,e.NextEvent=next,null!=next&&(next.PreviousEvent=e)}else{for(var next1=this.LastEvent;null!=next1&&null!=next1.PreviousEvent&&next1.PreviousEvent.Tick>e.Tick;)next1=next1.PreviousEvent;if(null==next1)return;var previous1=next1.PreviousEvent;next1.PreviousEvent=e,e.NextEvent=next1,e.PreviousEvent=previous1,null!=previous1?previous1.NextEvent=e:this.FirstEvent=e}}},WriteTo:function(s){for(var trackData=alphaTab_io_ByteBuffer.Empty(),current=this.FirstEvent;null!=current;)current.WriteTo(trackData),current=current.NextEvent,0;var b=[77,84,114,107];s.Write(b,0,b.length);var data=trackData.ToArray(),l=data.length;b=[system_Convert.ToUInt8(l>>24&255),system_Convert.ToUInt8(l>>16&255),system_Convert.ToUInt8(l>>8&255),system_Convert.ToUInt8(255&l)],s.Write(b,0,b.length),s.Write(data,0,data.length)},__class__:alphaTab_audio_model_MidiTrack};var alphaTab_collections__$FastDictionary_FastDictionary_$Impl_$={};alphaTab_collections__$FastDictionary_FastDictionary_$Impl_$.__name__=!0,alphaTab_collections__$FastDictionary_FastDictionary_$Impl_$._new=function(){return{}},alphaTab_collections__$FastDictionary_FastDictionary_$Impl_$.get_Item=function(this1,index){return this1[index]},alphaTab_collections__$FastDictionary_FastDictionary_$Impl_$.set_Item=function(this1,index,value){return this1[index]=value},alphaTab_collections__$FastDictionary_FastDictionary_$Impl_$.get_Count=function(this1){return Object.keys(this1).length},alphaTab_collections__$FastDictionary_FastDictionary_$Impl_$.GetEnumerator=function(this1){return Object.keys(this1)},alphaTab_collections__$FastDictionary_FastDictionary_$Impl_$.Remove=function(this1,key){delete this1[index]},alphaTab_collections__$FastDictionary_FastDictionary_$Impl_$.ContainsKey=function(this1,key){return this1.hasOwnProperty(key)};var alphaTab_collections__$FastList_FastList_$Impl_$={};alphaTab_collections__$FastList_FastList_$Impl_$.__name__=!0,alphaTab_collections__$FastList_FastList_$Impl_$._new=function(){return[]},alphaTab_collections__$FastList_FastList_$Impl_$.get_Count=function(this1){return this1.length},alphaTab_collections__$FastList_FastList_$Impl_$.get_Item=function(this1,index){return this1[index]},alphaTab_collections__$FastList_FastList_$Impl_$.set_Item=function(this1,index,value){return this1[index]=value},alphaTab_collections__$FastList_FastList_$Impl_$.Add=function(this1,item){this1.push(item)},alphaTab_collections__$FastList_FastList_$Impl_$.Sort=function(this1,comparison){this1.sort(function(a,b){return comparison(a,b)})},alphaTab_collections__$FastList_FastList_$Impl_$.Clone=function(this1){return this1.slice(0)},alphaTab_collections__$FastList_FastList_$Impl_$.RemoveAt=function(this1,index){-1!=index&&this1.splice(index,1)},alphaTab_collections__$FastList_FastList_$Impl_$.ToArray=function(this1){return this1},alphaTab_collections__$FastList_FastList_$Impl_$.GetEnumerator=function(this1){return this1},alphaTab_collections__$FastList_FastList_$Impl_$.IndexOf=function(this1,item){return this1.indexOf(item)},alphaTab_collections__$FastList_FastList_$Impl_$.Reverse=function(this1){this1.reverse()};var alphaTab_collections__$StringBuilder_StringBuilder_$Impl_$={};alphaTab_collections__$StringBuilder_StringBuilder_$Impl_$.__name__=!0,alphaTab_collections__$StringBuilder_StringBuilder_$Impl_$._new=function(){return""},alphaTab_collections__$StringBuilder_StringBuilder_$Impl_$.Append=function(this1,s){Std.string(s)},alphaTab_collections__$StringBuilder_StringBuilder_$Impl_$.AppendChar=function(this1,i){String.fromCharCode(i)},alphaTab_collections__$StringBuilder_StringBuilder_$Impl_$.AppendLine=function(this1,s){null==s&&(s="")},alphaTab_collections__$StringBuilder_StringBuilder_$Impl_$.ToString=function(this1){return this1};var alphaTab_exporter_AlphaTexExporter=function(){this._builder=""};alphaTab_exporter_AlphaTexExporter.__name__=!0,alphaTab_exporter_AlphaTexExporter.prototype={Export:function(track){this.Score(track)},Score:function(track){this.MetaData(track),this.Bars(track)},ToTex:function(){return this._builder},MetaData:function(track){var score=track.Score;this.StringMetaData("title",score.Title),this.StringMetaData("subtitle",score.SubTitle),this.StringMetaData("artist",score.Artist),this.StringMetaData("album",score.Album),this.StringMetaData("words",score.Words),this.StringMetaData("music",score.Music),this.StringMetaData("copyright",score.Copyright),this._builder+=Std.string("\\tempo "),this._builder+=Std.string(score.Tempo),this._builder=this._builder+"\r\n",track.Capo>0&&(this._builder+=Std.string("\\capo "),this._builder+=Std.string(track.Capo),this._builder=this._builder+"\r\n"),this._builder+=Std.string("\\tuning");for(var i=0;i<track.Tuning.length;){this._builder+=Std.string(" ");var s=alphaTab_model_Tuning.GetTextForTuning(track.Tuning[i],!0);this._builder+=Std.string(s),++i}this._builder+=Std.string("\\instrument "),this._builder+=Std.string(track.PlaybackInfo.Program),this._builder=this._builder+"\r\n",this._builder+=Std.string("."),this._builder=this._builder+"\r\n"},StringMetaData:function(key,value){if(null!=value&&0!=StringTools.trim(value).length){this._builder+=Std.string("\\"),this._builder+=Std.string(key),this._builder+=Std.string(' "');var s=StringTools.replace(value,'"','\\"');this._builder+=Std.string(s),this._builder+=Std.string('"'),this._builder=this._builder+"\r\n"}},Bars:function(track){for(var i=0;i<1;){for(var j=0;j<track.Staves[i].Bars.length;)i>0&&(this._builder+=Std.string(" |"),this._builder=this._builder+"\r\n"),this.Bar(track.Staves[i].Bars[j]),++j;++i}},Bar:function(bar){this.BarMeta(bar),this.Voice(bar.Voices[0])},Voice:function(voice){for(var i=0;i<voice.Beats.length;)this.Beat(voice.Beats[i]),++i},Beat:function(beat){if(beat.get_IsRest())this._builder+=Std.string("r");else{beat.Notes.length>1&&(this._builder+=Std.string("("));for(var i=0;i<beat.Notes.length;)this.Note(beat.Notes[i]),++i;beat.Notes.length>1&&(this._builder+=Std.string(")"))}this._builder+=Std.string("."),this._builder+=Std.string(beat.Duration),this._builder+=Std.string(" "),this.BeatEffects(beat)},Note:function(note){note.IsDead?this._builder+=Std.string("x"):note.IsTieDestination?this._builder+=Std.string("-"):this._builder+=Std.string(note.Fret),this._builder+=Std.string("."),this._builder+=Std.string(note.Beat.Voice.Bar.Staff.Track.Tuning.length-note.String+1),this._builder+=Std.string(" "),this.NoteEffects(note)},NoteEffects:function(note){var hasEffectOpen=!1;if(note.get_HasBend()){hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("be (");for(var i=0;i<note.BendPoints.length;)this._builder+=Std.string(note.BendPoints[i].Offset),this._builder+=Std.string(" "),this._builder+=Std.string(note.BendPoints[i].Value),this._builder+=Std.string(" "),++i;this._builder+=Std.string(")")}switch(note.HarmonicType){case 1:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("nh ");break;case 2:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("ah ");break;case 3:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("ph ");break;case 4:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("th ");break;case 5:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("sh ")}if(note.get_IsTrill()){hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("tr ");var s=note.get_TrillFret();this._builder+=Std.string(s),this._builder+=Std.string(" ");switch(note.TrillSpeed){case 16:this._builder+=Std.string("16 ");break;case 32:this._builder+=Std.string("32 ");break;case 64:this._builder+=Std.string("64 ")}}0!=note.Vibrato&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("v ")),2==note.SlideType&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("sl ")),1==note.SlideType&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("ss ")),note.IsHammerPullOrigin&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("h ")),note.IsGhost&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("g ")),1==note.Accentuated?(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("ac ")):2==note.Accentuated&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("hac ")),note.IsPalmMute&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("pm ")),note.IsStaccato&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("st ")),note.IsLetRing&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("lr "));switch(note.LeftHandFinger){case 0:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("1 ");break;case 1:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("2 ");break;case 2:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("3 ");break;case 3:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("4 ");break;case 4:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("5 ")}switch(note.RightHandFinger){case 0:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("1 ");break;case 1:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("2 ");break;case 2:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("3 ");break;case 3:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("4 ");break;case 4:hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("5 ")}this.EffectClose(hasEffectOpen)},EffectOpen:function(hasBeatEffectOpen){return hasBeatEffectOpen||(this._builder+=Std.string("{")),!0},EffectClose:function(hasBeatEffectOpen){hasBeatEffectOpen&&(this._builder+=Std.string("}"))},BeatEffects:function(beat){var hasEffectOpen=!1;beat.FadeIn&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("f "));switch(beat.GraceType){case 1:this._builder+=Std.string("gr ob ");break;case 2:this._builder+=Std.string("gr ")}if(0!=beat.Vibrato&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("v ")),beat.Slap&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("s ")),beat.Pop&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("p ")),2==beat.Dots?(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("dd ")):1==beat.Dots&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("d ")),1==beat.PickStroke?(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("su ")):2==beat.PickStroke&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("sd ")),beat.get_HasTuplet()){var tupletValue=0;3==beat.TupletDenominator&&2==beat.TupletNumerator?tupletValue=3:5==beat.TupletDenominator&&4==beat.TupletNumerator?tupletValue=5:6==beat.TupletDenominator&&4==beat.TupletNumerator?tupletValue=6:7==beat.TupletDenominator&&4==beat.TupletNumerator?tupletValue=7:9==beat.TupletDenominator&&8==beat.TupletNumerator?tupletValue=9:10==beat.TupletDenominator&&8==beat.TupletNumerator?tupletValue=10:11==beat.TupletDenominator&&8==beat.TupletNumerator?tupletValue=11:12==beat.TupletDenominator&&8==beat.TupletNumerator&&(tupletValue=12),0!=tupletValue&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("tu "),this._builder+=Std.string(tupletValue),this._builder+=Std.string(" "))}if(beat.get_HasWhammyBar()){hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("tbe (");for(var i=0;i<beat.WhammyBarPoints.length;)this._builder+=Std.string(beat.WhammyBarPoints[i].Offset),this._builder+=Std.string(" "),this._builder+=Std.string(beat.WhammyBarPoints[i].Value),this._builder+=Std.string(" "),++i;this._builder+=Std.string(")")}beat.get_IsTremolo()&&(hasEffectOpen=this.EffectOpen(hasEffectOpen),this._builder+=Std.string("tp "),8==beat.TremoloSpeed?this._builder+=Std.string("8 "):16==beat.TremoloSpeed?this._builder+=Std.string("16 "):32==beat.TremoloSpeed?this._builder+=Std.string("32 "):this._builder+=Std.string("8 ")),this.EffectClose(hasEffectOpen)},BarMeta:function(bar){var masterBar=bar.get_MasterBar();if(masterBar.Index>0){var previousMasterBar=masterBar.PreviousMasterBar,previousBar=bar.PreviousBar;if(previousMasterBar.TimeSignatureDenominator==masterBar.TimeSignatureDenominator&&previousMasterBar.TimeSignatureNumerator==masterBar.TimeSignatureNumerator||(this._builder+=Std.string("\\ts "),this._builder+=Std.string(masterBar.TimeSignatureNumerator),this._builder+=Std.string(" "),this._builder+=Std.string(masterBar.TimeSignatureDenominator),this._builder=this._builder+"\r\n"),previousMasterBar.KeySignature!=masterBar.KeySignature){this._builder+=Std.string("\\ks ");switch(masterBar.KeySignature){case-7:this._builder+=Std.string("cb");break;case-6:this._builder+=Std.string("gb");break;case-5:this._builder+=Std.string("db");break;case-4:this._builder+=Std.string("ab");break;case-3:this._builder+=Std.string("eb");break;case-2:this._builder+=Std.string("bb");break;case-1:this._builder+=Std.string("f");break;case 0:this._builder+=Std.string("c");break;case 1:this._builder+=Std.string("g");break;case 2:this._builder+=Std.string("d");break;case 3:this._builder+=Std.string("a");break;case 4:this._builder+=Std.string("e");break;case 5:this._builder+=Std.string("b");break;case 6:this._builder+=Std.string("f#");break;case 7:this._builder+=Std.string("c#")}this._builder=this._builder+"\r\n"}if(bar.Clef!=previousBar.Clef){this._builder+=Std.string("\\clef ");switch(bar.Clef){case 0:this._builder+=Std.string("n");break;case 1:this._builder+=Std.string("c3");break;case 2:this._builder+=Std.string("c4");break;case 3:this._builder+=Std.string("f4");break;case 4:this._builder+=Std.string("g2")}this._builder=this._builder+"\r\n"}null!=masterBar.TempoAutomation&&(this._builder+=Std.string("\\tempo "),this._builder+=Std.string(masterBar.TempoAutomation.Value),this._builder=this._builder+"\r\n")}masterBar.IsRepeatStart&&(this._builder+=Std.string("\\ro "),this._builder=this._builder+"\r\n"),masterBar.get_IsRepeatEnd()&&(this._builder+=Std.string("\\rc "),this._builder+=Std.string(masterBar.RepeatCount+1),this._builder=this._builder+"\r\n")},__class__:alphaTab_exporter_AlphaTexExporter};var alphaTab_importer_AlphaTexException=function(){alphaTab_AlphaTabException.call(this)};alphaTab_importer_AlphaTexException.__name__=!0,alphaTab_importer_AlphaTexException.__super__=alphaTab_AlphaTabException,alphaTab_importer_AlphaTexException.prototype=$extend(alphaTab_AlphaTabException.prototype,{AlphaTexException:function(position,nonTerm,expected,symbol,symbolData){return this.AlphaTabException(""),this.Position=position,this.NonTerm=nonTerm,this.Expected=expected,this.Symbol=symbol,this.SymbolData=symbolData,null==this.SymbolData?this.Description="MalFormed AlphaTex: @"+this.Position+": Error on block "+this.NonTerm+", expected a "+alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.toString(this.Expected)+" found a "+alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.toString(this.Symbol):this.Description="MalFormed AlphaTex: @"+this.Position+": Error on block "+this.NonTerm+", invalid value: "+this.SymbolData,this},__class__:alphaTab_importer_AlphaTexException});var alphaTab_importer_ScoreImporter=function(){};alphaTab_importer_ScoreImporter.__name__=!0,alphaTab_importer_ScoreImporter.BuildImporters=function(){return[new alphaTab_importer_Gp3To5Importer,new alphaTab_importer_GpxImporter,new alphaTab_importer_AlphaTexImporter,new alphaTab_importer_MusicXmlImporter]},alphaTab_importer_ScoreImporter.prototype={Init:function(data){this.Data=data},get_Name:function(){throw new js__$Boot_HaxeError("abstract")},ReadScore:function(){throw new js__$Boot_HaxeError("abstract")},__class__:alphaTab_importer_ScoreImporter};var alphaTab_importer_AlphaTexImporter=function(){alphaTab_importer_ScoreImporter.call(this)};alphaTab_importer_AlphaTexImporter.__name__=!0,alphaTab_importer_AlphaTexImporter.IsLetter=function(code){return!alphaTab_importer_AlphaTexImporter.IsTerminal(code)&&(code>=33&&code<=47||code>=58&&code<=126||code>128)},alphaTab_importer_AlphaTexImporter.IsTerminal=function(ch){return 46==ch||123==ch||125==ch||91==ch||93==ch||40==ch||41==ch||124==ch||39==ch||34==ch||92==ch},alphaTab_importer_AlphaTexImporter.__super__=alphaTab_importer_ScoreImporter,alphaTab_importer_AlphaTexImporter.prototype=$extend(alphaTab_importer_ScoreImporter.prototype,{get_Name:function(){return"AlphaTex"},ReadScore:function(){try{this.CreateDefaultScore(),this._curChPos=0,this._currentDuration=4;return this._lyrics=[],this.NextChar(),this.NewSy(),this.Score(),this._score.Finish(),this._track.ApplyLyrics(this._lyrics),this._score}catch(e){throw e instanceof js__$Boot_HaxeError&&(e=e.val),js_Boot.__instanceof(e,alphaTab_importer_AlphaTexException)?new js__$Boot_HaxeError((new alphaTab_importer_UnsupportedFormatException).UnsupportedFormatException(e.Description)):e}},Error:function(nonterm,expected,symbolError){null==symbolError&&(symbolError=!0);var e;throw e=symbolError?(new alphaTab_importer_AlphaTexException).AlphaTexException(this._curChPos,nonterm,expected,this._sy,null):(new alphaTab_importer_AlphaTexException).AlphaTexException(this._curChPos,nonterm,expected,expected,this._syData),alphaTab_util_Logger.Error(this.get_Name(),e.Description,null),new js__$Boot_HaxeError(e)},CreateDefaultScore:function(){this._score=new alphaTab_model_Score,this._score.Tempo=120,this._score.TempoLabel="",this._track=new alphaTab_model_Track(1),this._track.PlaybackInfo.Program=25,this._track.PlaybackInfo.PrimaryChannel=alphaTab_importer_AlphaTexImporter.TrackChannels[0],this._track.PlaybackInfo.SecondaryChannel=alphaTab_importer_AlphaTexImporter.TrackChannels[1],this._track.Tuning=alphaTab_model_Tuning.GetDefaultTuningFor(6).Tunings,this._score.AddTrack(this._track)},ParseClefFromString:function(str){switch(str.toLowerCase()){case"c3":case"tenor":return 1;case"alto":case"c4":return 2;case"bass":case"f4":return 3;case"n":case"neutral":return 0;case"g2":case"treble":default:return 4}},ParseClefFromInt:function(i){switch(i){case 43:return 4;case 48:return 1;case 60:return 2;case 65:return 3;default:return 4}},ParseKeySignature:function(str){switch(str.toLowerCase()){case"a":return 3;case"ab":return-4;case"b":return 5;case"bb":return-2;case"c":return 0;case"c#":return 7;case"cb":return-7;case"d":return 2;case"db":return-5;case"e":return 4;case"eb":return-3;case"f":return-1;case"f#":return 6;case"g":return 1;case"gb":return-6;default:return 0}},NextChar:function(){var b=this.Data.ReadByte();-1==b?this._ch=0:(this._ch=b,this._curChPos++)},NewSy:function(){for(this._sy=0;;){if(0==this._ch)this._sy=1;else if(alphaTab_platform_Platform.IsWhiteSpace(this._ch))this.NextChar();else if(47==this._ch)if(this.NextChar(),47==this._ch)for(;13!=this._ch&&10!=this._ch&&0!=this._ch;)this.NextChar();else if(42==this._ch)for(;0!=this._ch;)if(42==this._ch){if(this.NextChar(),47==this._ch){this.NextChar();break}}else this.NextChar();else this.Error("symbol",5,!1);else if(34==this._ch||39==this._ch){var startChar=this._ch;this.NextChar();var s="";for(this._sy=5;this._ch!=startChar&&0!=this._ch;)s+=String.fromCharCode(this._ch),this.NextChar();this._syData=s,this.NextChar()}else if(45==this._ch)if(this._allowNegatives&&this.IsDigit(this._ch)){var number=this.ReadNumber();this._sy=2,this._syData=number}else this._sy=5,this._syData=this.ReadName();else if(46==this._ch)this._sy=4,this.NextChar();else if(58==this._ch)this._sy=3,this.NextChar();else if(40==this._ch)this._sy=7,this.NextChar();else if(92==this._ch){this.NextChar();var name=this.ReadName();this._sy=12,this._syData=name}else if(41==this._ch)this._sy=8,this.NextChar();else if(123==this._ch)this._sy=9,this.NextChar();else if(125==this._ch)this._sy=10,this.NextChar();else if(124==this._ch)this._sy=11,this.NextChar();else if(42==this._ch)this._sy=13,this.NextChar();else if(this.IsDigit(this._ch)){var number1=this.ReadNumber();this._sy=2,this._syData=number1}else if(alphaTab_importer_AlphaTexImporter.IsLetter(this._ch)){var name1=this.ReadName(),tuning=alphaTab_model_TuningParser.Parse(name1);null!=tuning?(this._sy=6,this._syData=tuning):(this._sy=5,this._syData=name1)}else this.Error("symbol",5,!1);if(0!=this._sy)break}},IsDigit:function(code){return code>=48&&code<=57||45==code&&this._allowNegatives},ReadName:function(){for(var str="";str+=String.fromCharCode(this._ch),this.NextChar(),alphaTab_importer_AlphaTexImporter.IsLetter(this._ch)||this.IsDigit(this._ch)||35==this._ch;);return str},ReadNumber:function(){for(var str="";str+=String.fromCharCode(this._ch),this.NextChar(),this.IsDigit(this._ch););return alphaTab_platform_Platform.ParseInt(str)},Score:function(){this.MetaData(),this.Bars()},MetaData:function(){for(var anyMeta=!1;12==this._sy;){var syData=Std.string(this._syData).toLowerCase();if("title"==syData)this.NewSy(),5==this._sy?this._score.Title=Std.string(this._syData):this.Error("title",5,!0),this.NewSy(),anyMeta=!0;else if("subtitle"==syData)this.NewSy(),5==this._sy?this._score.SubTitle=Std.string(this._syData):this.Error("subtitle",5,!0),this.NewSy(),anyMeta=!0;else if("artist"==syData)this.NewSy(),5==this._sy?this._score.Artist=Std.string(this._syData):this.Error("artist",5,!0),this.NewSy(),anyMeta=!0;else if("album"==syData)this.NewSy(),5==this._sy?this._score.Album=Std.string(this._syData):this.Error("album",5,!0),this.NewSy(),anyMeta=!0;else if("words"==syData)this.NewSy(),5==this._sy?this._score.Words=Std.string(this._syData):this.Error("words",5,!0),this.NewSy(),anyMeta=!0;else if("music"==syData)this.NewSy(),5==this._sy?this._score.Music=Std.string(this._syData):this.Error("music",5,!0),this.NewSy(),anyMeta=!0;else if("copyright"==syData)this.NewSy(),5==this._sy?this._score.Copyright=Std.string(this._syData):this.Error("copyright",5,!0),this.NewSy(),anyMeta=!0;else if("tempo"==syData)this.NewSy(),2==this._sy?this._score.Tempo=this._syData:this.Error("tempo",2,!0),this.NewSy(),anyMeta=!0;else if("capo"==syData)this.NewSy(),2==this._sy?this._track.Capo=this._syData:this.Error("capo",2,!0),this.NewSy(),anyMeta=!0;else if("tuning"==syData){this.NewSy();switch(this._sy){case 5:var text=Std.string(this._syData).toLowerCase();"piano"==text||"none"==text||"voice"==text?this._track.Tuning=system__$FixedArray_FixedArray_$Impl_$._new(0):this.Error("tuning",6,!0),this.NewSy();break;case 6:for(var tuning=[];;){var t=this._syData;if(tuning.push(t.get_RealValue()),this.NewSy(),6!=this._sy)break}this._track.Tuning=tuning;break;default:this.Error("tuning",6,!0)}anyMeta=!0}else if("instrument"==syData){if(this.NewSy(),2==this._sy){var instrument=this._syData;instrument>=0&&instrument<=128?this._track.PlaybackInfo.Program=this._syData:this.Error("instrument",2,!1)}else if(5==this._sy){var instrumentName=Std.string(this._syData).toLowerCase();this._track.PlaybackInfo.Program=alphaTab_audio_GeneralMidi.GetValue(instrumentName)}else this.Error("instrument",2,!0);this.NewSy(),anyMeta=!0}else if("lyrics"==syData){this.NewSy();var lyrics=new alphaTab_model_Lyrics;lyrics.StartBar=0,lyrics.Text="",2==this._sy&&(lyrics.StartBar=this._syData,this.NewSy()),5==this._sy?(lyrics.Text=this._syData,this.NewSy()):this.Error("lyrics",5,!0),this._lyrics.push(lyrics),anyMeta=!0}else{if(!anyMeta)break;this.Error("metaDataTags",5,!1)}}anyMeta?(4!=this._sy&&this.Error("song",4,!0),this.NewSy()):4==this._sy&&this.NewSy()},Bars:function(){for(this.Bar();1!=this._sy;)11!=this._sy&&this.Error("bar",11,!0),this.NewSy(),this.Bar()},Bar:function(){var master=new alphaTab_model_MasterBar;this._score.AddMasterBar(master);var bar=new alphaTab_model_Bar;this._track.AddBarToStaff(0,bar),master.Index>0&&(master.KeySignature=master.PreviousMasterBar.KeySignature,master.TimeSignatureDenominator=master.PreviousMasterBar.TimeSignatureDenominator,master.TimeSignatureNumerator=master.PreviousMasterBar.TimeSignatureNumerator,bar.Clef=bar.PreviousBar.Clef),this.BarMeta(bar);var voice=new alphaTab_model_Voice;for(bar.AddVoice(voice);11!=this._sy&&1!=this._sy;)this.Beat(voice);if(0==voice.Beats.length){var emptyBeat=new alphaTab_model_Beat;emptyBeat.IsEmpty=!0,voice.AddBeat(emptyBeat)}},Beat:function(voice){if(3==this._sy)return this._allowNegatives=!0,this.NewSy(),this._allowNegatives=!1,2!=this._sy&&this.Error("duration",2,!0),this._currentDuration=this.ParseDuration(this._syData),void this.NewSy();var beat=new alphaTab_model_Beat;if(voice.AddBeat(beat),null!=voice.Bar.get_MasterBar().TempoAutomation&&1==voice.Beats.length&&beat.Automations.push(voice.Bar.get_MasterBar().TempoAutomation),7==this._sy){for(this.NewSy(),this.Note(beat);8!=this._sy&&1!=this._sy;)this.Note(beat);8!=this._sy&&this.Error("note-list",8,!0),this.NewSy()}else 5==this._sy&&"r"==Std.string(this._syData).toLowerCase()?this.NewSy():this.Note(beat);4==this._sy&&(this._allowNegatives=!0,this.NewSy(),this._allowNegatives=!1,2!=this._sy&&this.Error("duration",2,!0),this._currentDuration=this.ParseDuration(this._syData),this.NewSy()),beat.Duration=this._currentDuration;var beatRepeat=1;13==this._sy&&(this.NewSy(),2!=this._sy?this.Error("multiplier",2,!0):beatRepeat=this._syData,this.NewSy()),this.BeatEffects(beat);for(var i=0;i<beatRepeat-1;)voice.AddBeat(beat.Clone()),++i},BeatEffects:function(beat){if(9==this._sy){for(this.NewSy();5==this._sy;)this._syData=Std.string(this._syData).toLowerCase(),this.ApplyBeatEffect(beat)||this.Error("beat-effects",5,!1);10!=this._sy&&this.Error("beat-effects",10,!0),this.NewSy()}},ApplyBeatEffect:function(beat){var syData=Std.string(this._syData).toLowerCase();if("f"==syData)return beat.FadeIn=!0,this.NewSy(),!0;if("v"==syData)return beat.Vibrato=1,this.NewSy(),!0;if("s"==syData)return beat.Slap=!0,this.NewSy(),!0;if("p"==syData)return beat.Pop=!0,this.NewSy(),!0;if("dd"==syData)return beat.Dots=2,this.NewSy(),!0;if("d"==syData)return beat.Dots=1,this.NewSy(),!0;if("su"==syData)return beat.PickStroke=1,this.NewSy(),!0;if("sd"==syData)return beat.PickStroke=2,this.NewSy(),!0;if("tu"==syData){if(this.NewSy(),2!=this._sy)return this.Error("tuplet",2,!0),!1;switch(this._syData){case 3:beat.TupletNumerator=3,beat.TupletDenominator=2;break;case 5:beat.TupletNumerator=5,beat.TupletDenominator=4;break;case 6:beat.TupletNumerator=6,beat.TupletDenominator=4;break;case 7:beat.TupletNumerator=7,beat.TupletDenominator=4;break;case 9:beat.TupletNumerator=9,beat.TupletDenominator=8;break;case 10:beat.TupletNumerator=10,beat.TupletDenominator=8;break;case 11:beat.TupletNumerator=11,beat.TupletDenominator=8;break;case 12:beat.TupletNumerator=12,beat.TupletNumerator=8,beat.TupletDenominator=8}return this.NewSy(),!0}if("tb"==syData||"tbe"==syData){var exact="tbe"==syData;if(this.NewSy(),7!=this._sy)return this.Error("tremolobar-effect",7,!0),!1;for(this._allowNegatives=!0,this.NewSy();8!=this._sy&&1!=this._sy;){var offset,value;if(exact){if(2!=this._sy)return this.Error("tremolobar-effect",2,!0),!1;if(offset=this._syData,this.NewSy(),2!=this._sy)return this.Error("tremolobar-effect",2,!0),!1;value=this._syData}else{if(2!=this._sy)return this.Error("tremolobar-effect",2,!0),!1;offset=0,value=this._syData}beat.AddWhammyBarPoint(new alphaTab_model_BendPoint(offset,value)),this.NewSy()}for(;beat.WhammyBarPoints.length>60;)beat.RemoveWhammyBarPoint(beat.WhammyBarPoints.length-1);if(exact){beat.WhammyBarPoints.sort(function(a1,b1){return b=b1,a1.Offset-b.Offset;var b})}else for(var count=beat.WhammyBarPoints.length,step=60/count|0,i=0;i<count;)beat.WhammyBarPoints[i].Offset=Math.min(60,i*step),++i;return this._allowNegatives=!1,8!=this._sy?(this.Error("tremolobar-effect",8,!0),!1):(this.NewSy(),!0)}if("gr"==syData)return this.NewSy(),"ob"==Std.string(this._syData).toLowerCase()?(beat.GraceType=1,this.NewSy()):beat.GraceType=2,!0;if("tp"==syData){this.NewSy();var duration=8;if(2==this._sy){switch(this._syData){case 8:duration=8;break;case 16:duration=16;break;case 32:duration=32;break;default:duration=8}this.NewSy()}return beat.TremoloSpeed=duration,!0}return!1},Note:function(beat){var isDead="x"==this._syData,isTie="-"==this._syData,fret=-1,octave=-1,tone=-1;switch(this._sy){case 2:fret=this._syData;break;case 5:isTie||isDead?fret=0:this.Error("note-fret",2,!0);break;case 6:var tuning=this._syData;octave=tuning.Octave,tone=tuning.NoteValue;break;default:this.Error("note-fret",2,!0)}this.NewSy();var isFretted=-1==octave&&this._track.Tuning.length>0,string=-1;isFretted&&(4!=this._sy&&this.Error("note",4,!0),this.NewSy(),2!=this._sy&&this.Error("note-string",2,!0),((string=this._syData)<1||string>this._track.Tuning.length)&&this.Error("note-string",2,!1),this.NewSy());var note=new alphaTab_model_Note;beat.AddNote(note),isFretted?(note.String=this._track.Tuning.length-(string-1),note.IsDead=isDead,note.IsTieDestination=isTie,isTie||(note.Fret=fret)):(note.Octave=octave,note.Tone=tone,note.IsTieDestination=isTie),this.NoteEffects(note)},NoteEffects:function(note){if(9==this._sy){for(this.NewSy();5==this._sy;){var syData=Std.string(this._syData).toLowerCase();if(this._syData=syData,"b"==syData||"be"==syData){var exact="be"==this._syData;for(this.NewSy(),7!=this._sy&&this.Error("bend-effect",7,!0),this.NewSy();8!=this._sy&&1!=this._sy;){var offset=0,value=0;exact?(2!=this._sy&&this.Error("bend-effect-value",2,!0),offset=this._syData,this.NewSy(),2!=this._sy&&this.Error("bend-effect-value",2,!0),value=this._syData):(2!=this._sy&&this.Error("bend-effect-value",2,!0),value=this._syData),note.AddBendPoint(new alphaTab_model_BendPoint(offset,value)),this.NewSy()}for(;note.BendPoints.length>60;){var index=note.BendPoints.length-1;-1!=index&&note.BendPoints.splice(index,1)}if(exact)note.BendPoints.sort(function(comparison){return function(a,b){return comparison[0](a,b)}}([function(a1,b1){return a1.Offset-b1.Offset}]));else for(var count=note.BendPoints.length,step=60/(count-1)|0,i=0;i<count;)note.BendPoints[i].Offset=Math.min(60,i*step),++i;8!=this._sy&&this.Error("bend-effect",8,!0),this.NewSy()}else if("nh"==syData)note.HarmonicType=1,this.NewSy();else if("ah"==syData)note.HarmonicType=2,this.NewSy();else if("th"==syData)note.HarmonicType=4,this.NewSy();else if("ph"==syData)note.HarmonicType=3,this.NewSy();else if("sh"==syData)note.HarmonicType=5,this.NewSy();else if("tr"==syData){this.NewSy(),2!=this._sy&&this.Error("trill-effect",2,!0);var fret=this._syData;this.NewSy();var duration=16;if(2==this._sy){switch(this._syData){case 16:duration=16;break;case 32:duration=32;break;case 64:duration=64;break;default:duration=16}this.NewSy()}note.TrillValue=fret+note.get_StringTuning(),note.TrillSpeed=duration}else if("v"==syData)this.NewSy(),note.Vibrato=1;else if("sl"==syData)this.NewSy(),note.SlideType=2;else if("ss"==syData)this.NewSy(),note.SlideType=1;else if("h"==syData)this.NewSy(),note.IsHammerPullOrigin=!0;else if("g"==syData)this.NewSy(),note.IsGhost=!0;else if("ac"==syData)this.NewSy(),note.Accentuated=1;else if("hac"==syData)this.NewSy(),note.Accentuated=2;else if("pm"==syData)this.NewSy(),note.IsPalmMute=!0;else if("st"==syData)this.NewSy(),note.IsStaccato=!0;else if("lr"==syData)this.NewSy(),note.IsLetRing=!0;else if("x"==syData)this.NewSy(),note.Fret=0,note.IsDead=!0;else if("lf"==syData){this.NewSy();var finger=0;2==this._sy&&(finger=this.ToFinger(this._syData),this.NewSy()),note.LeftHandFinger=finger}else if("rf"==syData){this.NewSy();var finger1=0;2==this._sy&&(finger1=this.ToFinger(this._syData),this.NewSy()),note.RightHandFinger=finger1}else this.ApplyBeatEffect(note.Beat)||this.Error(syData,5,!1)}10!=this._sy&&this.Error("note-effect",10,!1),this.NewSy()}},ToFinger:function(syData){switch(syData){case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4}return 0},ParseDuration:function(duration){switch(duration){case-4:return-4;case-2:return-2;case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;default:return 4}},BarMeta:function(bar){for(var master=bar.get_MasterBar();12==this._sy;){var syData=Std.string(this._syData).toLowerCase();if("ts"==syData)this.NewSy(),2!=this._sy&&this.Error("timesignature-numerator",2,!0),master.TimeSignatureNumerator=this._syData,this.NewSy(),2!=this._sy&&this.Error("timesignature-denominator",2,!0),master.TimeSignatureDenominator=this._syData;else if("ro"==syData)master.IsRepeatStart=!0;else if("rc"==syData)this.NewSy(),2!=this._sy&&this.Error("repeatclose",2,!0),master.RepeatCount=this._syData-1;else if("ks"==syData)this.NewSy(),5!=this._sy&&this.Error("keysignature",5,!0),master.KeySignature=this.ParseKeySignature(Std.string(this._syData).toLowerCase());else if("clef"==syData){this.NewSy();switch(this._sy){case 2:bar.Clef=this.ParseClefFromInt(this._syData);break;case 5:bar.Clef=this.ParseClefFromString(Std.string(this._syData).toLowerCase());break;case 6:bar.Clef=this.ParseClefFromInt(this._syData.RealValue);break;default:this.Error("clef",5,!0)}}else if("tempo"==syData){this.NewSy(),2!=this._sy&&this.Error("tempo",2,!0);var tempoAutomation=new alphaTab_model_Automation;tempoAutomation.IsLinear=!0,tempoAutomation.Type=0,tempoAutomation.Value=this._syData,master.TempoAutomation=tempoAutomation}else this.Error("measure-effects",5,!1);this.NewSy()}},__class__:alphaTab_importer_AlphaTexImporter});var alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$={};alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.__name__=!0,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.toString=function(this1){switch(this1){case 0:return"No";case 1:return"Eof";case 2:return"Number";case 3:return"DoubleDot";case 4:return"Dot";case 5:return"String";case 6:return"Tuning";case 7:return"LParensis";case 8:return"RParensis";case 9:return"LBrace";case 10:return"RBrace";case 11:return"Pipe";case 12:return"MetaCommand";case 13:return"Multiply"}return""};var alphaTab_importer_Gp3To5Importer=function(){alphaTab_importer_ScoreImporter.call(this)};alphaTab_importer_Gp3To5Importer.__name__=!0,alphaTab_importer_Gp3To5Importer.ToStrokeValue=function(value){switch(value){case 1:case 2:return 30;case 3:return 60;case 4:return 120;case 5:return 240;case 6:return 480;default:return 0}},alphaTab_importer_Gp3To5Importer.__super__=alphaTab_importer_ScoreImporter,alphaTab_importer_Gp3To5Importer.prototype=$extend(alphaTab_importer_ScoreImporter.prototype,{get_Name:function(){return"Guitar Pro 3-5"},ReadScore:function(){return this.ReadVersion(),this._score=new alphaTab_model_Score,this.ReadScoreInformation(),this._versionNumber<500&&(this._globalTripletFeel=this.ReadBool()?2:0),this._versionNumber>=400&&this.ReadLyrics(),this._versionNumber>=510&&this.Data.Skip(19),this._versionNumber>=500&&(this.ReadPageSetup(),this._score.TempoLabel=this.ReadStringIntByte()),this._score.Tempo=this.ReadInt32(),this._versionNumber>=510&&this.ReadBool(),this.ReadInt32(),this._versionNumber>=400&&this.Data.ReadByte(),this.ReadPlaybackInfos(),this._versionNumber>=500&&(this.Data.Skip(38),this.Data.Skip(4)),this._barCount=this.ReadInt32(),this._trackCount=this.ReadInt32(),this.ReadMasterBars(),this.ReadTracks(),this.ReadBars(),this._score.Finish(),null!=this._lyrics&&this._lyricsTrack>=0&&this._score.Tracks[this._lyricsTrack].ApplyLyrics(this._lyrics),this._score},ReadVersion:function(){var version=this.ReadStringByteLength(30);if(!StringTools.startsWith(version,"FICHIER GUITAR PRO "))throw new js__$Boot_HaxeError((new alphaTab_importer_UnsupportedFormatException).UnsupportedFormatException(""));version=HxOverrides.substr(version,"FICHIER GUITAR PRO ".length+1,null);var this1=system_Convert.ToUInt16(46),dot=version.indexOf(Std.string(this1));this._versionNumber=100*alphaTab_platform_Platform.ParseInt(HxOverrides.substr(version,0,dot))+alphaTab_platform_Platform.ParseInt(HxOverrides.substr(version,dot+1,null)),alphaTab_util_Logger.Info(this.get_Name(),"Guitar Pro version "+version+" detected",null)},ReadScoreInformation:function(){this._score.Title=this.ReadStringIntUnused(),this._score.SubTitle=this.ReadStringIntUnused(),this._score.Artist=this.ReadStringIntUnused(),this._score.Album=this.ReadStringIntUnused(),this._score.Words=this.ReadStringIntUnused();var tmp=this._versionNumber>=500?this.ReadStringIntUnused():this._score.Words;this._score.Music=tmp,this._score.Copyright=this.ReadStringIntUnused(),this._score.Tab=this.ReadStringIntUnused(),this._score.Instructions=this.ReadStringIntUnused();for(var noticeLines=this.ReadInt32(),notice="",i=0;i<noticeLines;)i>0&&(notice+="\r\n"),notice+=Std.string(this.ReadStringIntUnused()),++i;this._score.Notices=notice},ReadLyrics:function(){this._lyrics=[],this._lyricsTrack=this.ReadInt32()-1;for(var i=0;i<5;){var lyrics=new alphaTab_model_Lyrics;lyrics.StartBar=this.ReadInt32()-1,lyrics.Text=this.ReadStringInt(),this._lyrics.push(lyrics),++i}},ReadPageSetup:function(){this.Data.Skip(30);for(var i=0;i<10;)this.ReadStringIntByte(),++i},ReadPlaybackInfos:function(){this._playbackInfos=[];for(var i=0;i<64;){var info=new alphaTab_model_PlaybackInformation;info.PrimaryChannel=i,info.SecondaryChannel=i,info.Program=this.ReadInt32(),info.Volume=this.Data.ReadByte(),info.Balance=this.Data.ReadByte(),this.Data.Skip(6),this._playbackInfos.push(info),++i}},ReadMasterBars:function(){for(var i=0;i<this._barCount;)this.ReadMasterBar(),++i},ReadMasterBar:function(){var previousMasterBar=null;this._score.MasterBars.length>0&&(previousMasterBar=this._score.MasterBars[this._score.MasterBars.length-1]);var newMasterBar=new alphaTab_model_MasterBar,flags=this.Data.ReadByte();if(0!=(1&flags)?newMasterBar.TimeSignatureNumerator=this.Data.ReadByte():null!=previousMasterBar&&(newMasterBar.TimeSignatureNumerator=previousMasterBar.TimeSignatureNumerator),0!=(2&flags)?newMasterBar.TimeSignatureDenominator=this.Data.ReadByte():null!=previousMasterBar&&(newMasterBar.TimeSignatureDenominator=previousMasterBar.TimeSignatureDenominator),newMasterBar.IsRepeatStart=0!=(4&flags),0!=(8&flags)&&(newMasterBar.RepeatCount=this.Data.ReadByte()+(this._versionNumber>=500?0:1)),0!=(16&flags))if(this._versionNumber<500){for(var currentMasterBar=previousMasterBar,existentAlternatives=0;!(null==currentMasterBar||currentMasterBar.get_IsRepeatEnd()&&currentMasterBar!=previousMasterBar||currentMasterBar.IsRepeatStart);)existentAlternatives|=currentMasterBar.AlternateEndings,currentMasterBar=currentMasterBar.PreviousMasterBar;for(var repeatAlternative=0,repeatMask=this.Data.ReadByte(),i=0;i<8;){var repeating=1<<i;repeatMask>i&&0==(existentAlternatives&repeating)&&(repeatAlternative|=repeating),++i}newMasterBar.AlternateEndings=system_Convert.ToUInt8(repeatAlternative)}else newMasterBar.AlternateEndings=system_Convert.ToUInt8(this.Data.ReadByte());if(0!=(32&flags)){var section=new alphaTab_model_Section;section.Text=this.ReadStringIntByte(),section.Marker="",this.ReadColor(),newMasterBar.Section=section}if(0!=(64&flags)?(newMasterBar.KeySignature=alphaTab_platform_Platform.ReadSignedByte(this.Data),newMasterBar.KeySignatureType=js_Boot.__cast(this.Data.ReadByte(),Int)):null!=previousMasterBar&&(newMasterBar.KeySignature=previousMasterBar.KeySignature,newMasterBar.KeySignatureType=previousMasterBar.KeySignatureType),this._versionNumber>=500&&0!=(3&flags)&&this.Data.Skip(4),this._versionNumber>=500&&0==(16&flags)&&(newMasterBar.AlternateEndings=system_Convert.ToUInt8(this.Data.ReadByte())),this._versionNumber>=500){switch(this.Data.ReadByte()){case 1:newMasterBar.TripletFeel=2;break;case 2:newMasterBar.TripletFeel=1}this.Data.ReadByte()}else newMasterBar.TripletFeel=this._globalTripletFeel;newMasterBar.IsDoubleBar=0!=(128&flags),this._score.AddMasterBar(newMasterBar)},ReadTracks:function(){for(var i=0;i<this._trackCount;)this.ReadTrack(),++i},ReadTrack:function(){var newTrack=new alphaTab_model_Track(1);this._score.AddTrack(newTrack);var flags=this.Data.ReadByte();newTrack.Name=this.ReadStringByteLength(40),newTrack.IsPercussion=0!=(1&flags);for(var stringCount=this.ReadInt32(),tuning=[],i=0;i<7;){var stringTuning=this.ReadInt32();stringCount>i&&tuning.push(stringTuning),++i}newTrack.Tuning=tuning;var port=this.ReadInt32(),index=this.ReadInt32()-1,effectChannel=this.ReadInt32()-1;if(this.Data.Skip(4),index>=0&&index<this._playbackInfos.length){var info=this._playbackInfos[index];info.Port=port,info.IsSolo=0!=(16&flags),info.IsMute=0!=(32&flags),info.SecondaryChannel=effectChannel,alphaTab_audio_GeneralMidi.IsGuitar(info.Program)&&(newTrack.DisplayTranspositionPitch=-12),newTrack.PlaybackInfo=info}newTrack.Capo=this.ReadInt32(),newTrack.Color=this.ReadColor(),this._versionNumber>=500&&(this.Data.ReadByte(),this.Data.ReadByte(),this.Data.Skip(43)),this._versionNumber>=510&&(this.Data.Skip(4),this.ReadStringIntByte(),this.ReadStringIntByte())},ReadBars:function(){for(var i=0;i<this._barCount;){for(var t=0;t<this._trackCount;)this.ReadBar(this._score.Tracks[t]),++t;++i}},ReadBar:function(track){var newBar=new alphaTab_model_Bar;track.IsPercussion&&(newBar.Clef=0),track.AddBarToStaff(0,newBar);var voiceCount=1;this._versionNumber>=500&&(this.Data.ReadByte(),voiceCount=2);for(var v=0;v<voiceCount;)this.ReadVoice(track,newBar),++v},ReadVoice:function(track,bar){var beatCount=this.ReadInt32();if(0!=beatCount){var newVoice=new alphaTab_model_Voice;bar.AddVoice(newVoice);for(var i=0;i<beatCount;)this.ReadBeat(track,bar,newVoice),++i}},ReadBeat:function(track,bar,voice){var newBeat=new alphaTab_model_Beat,flags=this.Data.ReadByte();if(0!=(1&flags)&&(newBeat.Dots=1),0!=(64&flags)){var type=this.Data.ReadByte();newBeat.IsEmpty=0==(2&type)}voice.AddBeat(newBeat);switch(alphaTab_platform_Platform.ReadSignedByte(this.Data)){case-2:newBeat.Duration=1;break;case-1:newBeat.Duration=2;break;case 0:newBeat.Duration=4;break;case 1:newBeat.Duration=8;break;case 2:newBeat.Duration=16;break;case 3:newBeat.Duration=32;break;case 4:newBeat.Duration=64;break;default:newBeat.Duration=4}if(0!=(32&flags)){newBeat.TupletNumerator=this.ReadInt32();switch(newBeat.TupletNumerator){case 1:newBeat.TupletDenominator=1;break;case 3:newBeat.TupletDenominator=2;break;case 5:case 6:case 7:newBeat.TupletDenominator=4;break;case 2:case 4:case 8:break;case 9:case 10:case 11:case 12:case 13:newBeat.TupletDenominator=8;break;default:newBeat.TupletNumerator=1,newBeat.TupletDenominator=1}}0!=(2&flags)&&this.ReadChord(newBeat),0!=(4&flags)&&(newBeat.Text=this.ReadStringIntUnused()),0!=(8&flags)&&this.ReadBeatEffects(newBeat),0!=(16&flags)&&this.ReadMixTableChange(newBeat);for(var stringFlags=this.Data.ReadByte(),i=6;i>=0;)0!=(stringFlags&1<<i)&&6-i<track.Tuning.length&&this.ReadNote(track,bar,voice,newBeat,6-i),--i;if(this._versionNumber>=500){this.Data.ReadByte();0!=(8&this.Data.ReadByte())&&this.Data.ReadByte()}},ReadChord:function(beat){var chord=new alphaTab_model_Chord,chordId=alphaTab_platform_Platform.NewGuid();if(this._versionNumber>=500){this.Data.Skip(17),chord.Name=this.ReadStringByteLength(21),this.Data.Skip(4),chord.FirstFret=this.ReadInt32();for(var i=0;i<7;){var fret=this.ReadInt32();i<beat.Voice.Bar.Staff.Track.Tuning.length&&chord.Strings.push(fret),++i}var numberOfBarres=this.Data.ReadByte(),barreFrets=system__$FixedArray_FixedArray_$Impl_$._new(5);this.Data.Read(barreFrets,0,barreFrets.length);for(var i1=0;i1<numberOfBarres;){var this1=barreFrets[i1];chord.BarreFrets.push(this1),++i1}this.Data.Skip(26)}else if(0!=this.Data.ReadByte())if(this._versionNumber>=400){this.Data.Skip(16),chord.Name=this.ReadStringByteLength(21),this.Data.Skip(4),chord.FirstFret=this.ReadInt32();for(var i2=0;i2<7;){var fret1=this.ReadInt32();i2<beat.Voice.Bar.Staff.Track.Tuning.length&&chord.Strings.push(fret1),++i2}var numberOfBarres1=this.Data.ReadByte(),barreFrets1=system__$FixedArray_FixedArray_$Impl_$._new(5);this.Data.Read(barreFrets1,0,barreFrets1.length);for(var i3=0;i3<numberOfBarres1;){var this2=barreFrets1[i3];chord.BarreFrets.push(this2),++i3}this.Data.Skip(26)}else{this.Data.Skip(25),chord.Name=this.ReadStringByteLength(34),chord.FirstFret=this.ReadInt32();for(var i4=0;i4<6;){var fret2=this.ReadInt32();i4<beat.Voice.Bar.Staff.Track.Tuning.length&&chord.Strings.push(fret2),++i4}this.Data.Skip(36)}else{var strings=this._versionNumber>=406?7:6;if(chord.Name=this.ReadStringIntByte(),chord.FirstFret=this.ReadInt32(),chord.FirstFret>0)for(var i5=0;i5<strings;){var fret3=this.ReadInt32();i5<beat.Voice.Bar.Staff.Track.Tuning.length&&chord.Strings.push(fret3),++i5}}var s=chord.Name;null!=s&&0!=s.length&&(beat.ChordId=chordId,beat.Voice.Bar.Staff.Track.Chords[beat.ChordId]=chord)},ReadBeatEffects:function(beat){var flags=this.Data.ReadByte(),flags2=0;if(this._versionNumber>=400&&(flags2=this.Data.ReadByte()),beat.FadeIn=0!=(16&flags),(this._versionNumber<400&&0!=(1&flags)||0!=(2&flags))&&(beat.Vibrato=1),beat.HasRasgueado=0!=(1&flags2),0!=(32&flags)&&this._versionNumber>=400){switch(alphaTab_platform_Platform.ReadSignedByte(this.Data)){case 1:beat.Tap=!0;break;case 2:beat.Slap=!0;break;case 3:beat.Pop=!0}}else if(0!=(32&flags)){switch(alphaTab_platform_Platform.ReadSignedByte(this.Data)){case 1:beat.Tap=!0;break;case 2:beat.Slap=!0;break;case 3:beat.Pop=!0}this.Data.Skip(4)}if(0!=(4&flags2)&&this.ReadTremoloBarEffect(beat),0!=(64&flags)){var strokeUp,strokeDown;this._versionNumber<500?(strokeDown=this.Data.ReadByte(),strokeUp=this.Data.ReadByte()):(strokeUp=this.Data.ReadByte(),strokeDown=this.Data.ReadByte()),strokeUp>0?(beat.BrushType=1,beat.BrushDuration=alphaTab_importer_Gp3To5Importer.ToStrokeValue(strokeUp)):strokeDown>0&&(beat.BrushType=2,beat.BrushDuration=alphaTab_importer_Gp3To5Importer.ToStrokeValue(strokeDown))}if(0!=(2&flags2)){switch(alphaTab_platform_Platform.ReadSignedByte(this.Data)){case 0:beat.PickStroke=0;break;case 1:beat.PickStroke=1;break;case 2:beat.PickStroke=2}}},ReadTremoloBarEffect:function(beat){this.Data.ReadByte(),this.ReadInt32();var pointCount=this.ReadInt32();if(pointCount>0)for(var i=0;i<pointCount;){var point=new alphaTab_model_BendPoint(0,0);point.Offset=this.ReadInt32(),point.Value=this.ReadInt32()/25|0,this.ReadBool(),beat.AddWhammyBarPoint(point),++i}},ReadMixTableChange:function(beat){var tableChange=new alphaTab_importer_MixTableChange;tableChange.Instrument=alphaTab_platform_Platform.ReadSignedByte(this.Data),this._versionNumber>=500&&this.Data.Skip(16),tableChange.Volume=alphaTab_platform_Platform.ReadSignedByte(this.Data),tableChange.Balance=alphaTab_platform_Platform.ReadSignedByte(this.Data);var chorus=alphaTab_platform_Platform.ReadSignedByte(this.Data),reverb=alphaTab_platform_Platform.ReadSignedByte(this.Data),phaser=alphaTab_platform_Platform.ReadSignedByte(this.Data),tremolo=alphaTab_platform_Platform.ReadSignedByte(this.Data);if(this._versionNumber>=500&&(tableChange.TempoName=this.ReadStringIntByte()),tableChange.Tempo=this.ReadInt32(),tableChange.Volume>=0&&this.Data.ReadByte(),tableChange.Balance>=0&&this.Data.ReadByte(),chorus>=0&&this.Data.ReadByte(),reverb>=0&&this.Data.ReadByte(),phaser>=0&&this.Data.ReadByte(),tremolo>=0&&this.Data.ReadByte(),tableChange.Tempo>=0&&(tableChange.Duration=alphaTab_platform_Platform.ReadSignedByte(this.Data),this._versionNumber>=510&&this.Data.ReadByte()),this._versionNumber>=400&&this.Data.ReadByte(),this._versionNumber>=500&&this.Data.ReadByte(),this._versionNumber>=510&&(this.ReadStringIntByte(),this.ReadStringIntByte()),tableChange.Volume>=0){var volumeAutomation=new alphaTab_model_Automation;volumeAutomation.IsLinear=!0,volumeAutomation.Type=1;var this1=tableChange.Volume;volumeAutomation.Value=this1,beat.Automations.push(volumeAutomation)}if(tableChange.Balance>=0){var balanceAutomation=new alphaTab_model_Automation;balanceAutomation.IsLinear=!0,balanceAutomation.Type=3;var this2=tableChange.Balance;balanceAutomation.Value=this2,beat.Automations.push(balanceAutomation)}if(tableChange.Instrument>=0){var instrumentAutomation=new alphaTab_model_Automation;instrumentAutomation.IsLinear=!0,instrumentAutomation.Type=2;var this3=tableChange.Instrument;instrumentAutomation.Value=this3,beat.Automations.push(instrumentAutomation)}if(tableChange.Tempo>=0){var tempoAutomation=new alphaTab_model_Automation;tempoAutomation.IsLinear=!0,tempoAutomation.Type=0;var this4=tableChange.Tempo;tempoAutomation.Value=this4,beat.Automations.push(tempoAutomation),beat.Voice.Bar.get_MasterBar().TempoAutomation=tempoAutomation}},ReadNote:function(track,bar,voice,beat,stringIndex){var newNote=new alphaTab_model_Note;newNote.String=track.Tuning.length-stringIndex;var flags=this.Data.ReadByte();if(0!=(2&flags)?newNote.Accentuated=2:0!=(64&flags)&&(newNote.Accentuated=1),newNote.IsGhost=0!=(4&flags),0!=(32&flags)){var noteType=this.Data.ReadByte();3==noteType?newNote.IsDead=!0:2==noteType&&(newNote.IsTieDestination=!0)}if(0!=(1&flags)&&this._versionNumber<500&&(this.Data.ReadByte(),this.Data.ReadByte()),0!=(16&flags)){var dynamicNumber=alphaTab_platform_Platform.ReadSignedByte(this.Data);newNote.Dynamic=this.ToDynamicValue(dynamicNumber),beat.Dynamic=newNote.Dynamic}if(0!=(32&flags)&&(newNote.Fret=alphaTab_platform_Platform.ReadSignedByte(this.Data)),0!=(128&flags)&&(newNote.LeftHandFinger=js_Boot.__cast(alphaTab_platform_Platform.ReadSignedByte(this.Data),Int),newNote.RightHandFinger=js_Boot.__cast(alphaTab_platform_Platform.ReadSignedByte(this.Data),Int),newNote.IsFingering=!0),this._versionNumber>=500){0!=(1&flags)&&(newNote.DurationPercent=this.ReadDouble());var flags2=this.Data.ReadByte();newNote.AccidentalMode=0!=(2&flags2)?1:0}beat.AddNote(newNote),0!=(8&flags)&&this.ReadNoteEffects(track,voice,beat,newNote)},ToDynamicValue:function(value){switch(value){case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;default:return 5}},ReadNoteEffects:function(track,voice,beat,note){var flags=this.Data.ReadByte(),flags2=0;this._versionNumber>=400&&(flags2=this.Data.ReadByte()),0!=(1&flags)&&this.ReadBend(note),0!=(16&flags)&&this.ReadGrace(voice,note),0!=(4&flags2)&&this.ReadTremoloPicking(beat),0!=(8&flags2)?this.ReadSlide(note):this._versionNumber<400&&0!=(4&flags)&&(note.SlideType=1),0!=(16&flags2)?this.ReadArtificialHarmonic(note):this._versionNumber<400&&(0!=(4&flags)&&(note.HarmonicType=1,note.HarmonicValue=this.DeltaFretToHarmonicValue(note.Fret)),0!=(8&flags)&&(note.HarmonicType=2)),0!=(32&flags2)&&this.ReadTrill(note),note.IsLetRing=0!=(8&flags),note.IsHammerPullOrigin=0!=(2&flags),0!=(64&flags2)&&(note.Vibrato=1),note.IsPalmMute=0!=(2&flags2),note.IsStaccato=0!=(1&flags2)},ReadBend:function(note){this.Data.ReadByte(),this.ReadInt32();var pointCount=this.ReadInt32();if(pointCount>0)for(var i=0;i<pointCount;){var point=new alphaTab_model_BendPoint(0,0);point.Offset=this.ReadInt32(),point.Value=this.ReadInt32()/25|0,this.ReadBool(),note.AddBendPoint(point),++i}},ReadGrace:function(voice,note){var graceBeat=new alphaTab_model_Beat,graceNote=new alphaTab_model_Note;graceNote.String=note.String,graceNote.Fret=alphaTab_platform_Platform.ReadSignedByte(this.Data),graceBeat.Duration=32,graceBeat.Dynamic=this.ToDynamicValue(alphaTab_platform_Platform.ReadSignedByte(this.Data));switch(alphaTab_platform_Platform.ReadSignedByte(this.Data)){case 0:break;case 1:graceNote.SlideType=2,graceNote.SlideTarget=note;break;case 2:break;case 3:graceNote.IsHammerPullOrigin=!0}if(graceNote.Dynamic=graceBeat.Dynamic,this.Data.Skip(1),this._versionNumber<500)graceBeat.GraceType=2;else{var flags=this.Data.ReadByte();graceNote.IsDead=0!=(1&flags),graceBeat.GraceType=0!=(2&flags)?1:2}graceBeat.AddNote(graceNote),voice.AddGraceBeat(graceBeat)},ReadTremoloPicking:function(beat){switch(this.Data.ReadByte()){case 1:beat.TremoloSpeed=8;break;case 2:beat.TremoloSpeed=16;break;case 3:beat.TremoloSpeed=32}},ReadSlide:function(note){if(this._versionNumber>=500){switch(alphaTab_platform_Platform.ReadSignedByte(this.Data)){case 1:note.SlideType=1;break;case 2:note.SlideType=2;break;case 4:note.SlideType=6;break;case 8:note.SlideType=5;break;case 16:note.SlideType=3;break;case 32:note.SlideType=4;break;default:note.SlideType=0}}else{switch(alphaTab_platform_Platform.ReadSignedByte(this.Data)){case-2:note.SlideType=4;break;case-1:note.SlideType=3;break;case 1:note.SlideType=1;break;case 2:note.SlideType=2;break;case 3:note.SlideType=6;break;case 4:note.SlideType=5;break;default:note.SlideType=0}}},ReadArtificialHarmonic:function(note){var type=this.Data.ReadByte();if(this._versionNumber>=500)switch(type){case 1:note.HarmonicType=1,note.HarmonicValue=this.DeltaFretToHarmonicValue(note.Fret);break;case 2:this.Data.ReadByte(),this.Data.ReadByte(),this.Data.ReadByte();note.HarmonicType=2;break;case 3:note.HarmonicType=4,note.HarmonicValue=this.DeltaFretToHarmonicValue(this.Data.ReadByte());break;case 4:note.HarmonicType=3,note.HarmonicValue=12;break;case 5:note.HarmonicType=5,note.HarmonicValue=12}else if(this._versionNumber>=400)switch(type){case 1:note.HarmonicType=1;break;case 3:note.HarmonicType=4;break;case 4:note.HarmonicType=3;break;case 5:note.HarmonicType=5;break;case 15:case 17:case 22:note.HarmonicType=2}},DeltaFretToHarmonicValue:function(deltaFret){switch(deltaFret){case 2:return 2.4;case 3:return 3.2;case 8:return 8.2;case 10:return 9.6;case 14:case 15:return 14.7;case 21:case 22:return 21.7;case 4:case 5:case 7:case 9:case 12:case 16:case 17:case 19:case 24:return deltaFret;default:return 12}},ReadTrill:function(note){note.TrillValue=this.Data.ReadByte()+note.get_StringTuning();switch(this.Data.ReadByte()){case 1:note.TrillSpeed=16;break;case 2:note.TrillSpeed=32;break;case 3:note.TrillSpeed=64}},ReadDouble:function(){var bytes=system__$FixedArray_FixedArray_$Impl_$._new(8);this.Data.Read(bytes,0,bytes.length);var sign=1-(bytes[0]>>7<<1),exp=(bytes[0]<<4&2047|bytes[1]>>4)-1023,sig=this.GetDoubleSig(bytes);if(0==sig&&-1023==exp)return 0;var this1=exp;return sign*(1+Math.pow(2,-52)*sig)*Math.pow(2,this1)},GetDoubleSig:function(bytes){var this1=bytes[3],this2=bytes[7];return system_Convert.ToInt32_Double(4294967296*((15&bytes[1])<<16|bytes[2]<<8|this1)+2147483648*(bytes[4]>>7)+((127&bytes[4])<<24|bytes[5]<<16|bytes[6]<<8|this2))},ReadColor:function(){var r=system_Convert.ToUInt8(this.Data.ReadByte()),g=system_Convert.ToUInt8(this.Data.ReadByte()),b=system_Convert.ToUInt8(this.Data.ReadByte());return this.Data.Skip(1),new alphaTab_platform_model_Color(r,g,b,255)},ReadBool:function(){return 0!=this.Data.ReadByte()},ReadInt32:function(){var bytes=system__$FixedArray_FixedArray_$Impl_$._new(4);return this.Data.Read(bytes,0,4),bytes[0]|bytes[1]<<8|bytes[2]<<16|bytes[3]<<24},ReadStringIntUnused:function(){return this.Data.Skip(4),this.ReadString(this.Data.ReadByte())},ReadStringInt:function(){return this.ReadString(this.ReadInt32())},ReadStringIntByte:function(){var length=this.ReadInt32()-1;return this.Data.ReadByte(),this.ReadString(length)},ReadString:function(length){var b=system__$FixedArray_FixedArray_$Impl_$._new(length);return this.Data.Read(b,0,b.length),alphaTab_platform_Platform.ToString(b)},ReadStringByteLength:function(length){var stringLength=this.Data.ReadByte(),s=this.ReadString(stringLength);return stringLength<length&&this.Data.Skip(length-stringLength),s},__class__:alphaTab_importer_Gp3To5Importer});var alphaTab_importer_GpxFile=function(){};alphaTab_importer_GpxFile.__name__=!0,alphaTab_importer_GpxFile.prototype={__class__:alphaTab_importer_GpxFile};var alphaTab_importer_GpxFileSystem=function(){this.Files=[],this.FileFilter=function(s){return!0}};alphaTab_importer_GpxFileSystem.__name__=!0,alphaTab_importer_GpxFileSystem.prototype={Load:function(s){var src=new alphaTab_io_BitReader(s);this.ReadBlock(src)},ReadHeader:function(src){return this.GetString(src.ReadBytes(4),0,4)},Decompress:function(src,skipHeader){null==skipHeader&&(skipHeader=!1);var buffer,uncompressed=alphaTab_io_ByteBuffer.Empty(),expectedLength=this.GetInteger(src.ReadBytes(4),0);try{for(;uncompressed.get_Length()<expectedLength;){if(1==src.ReadBits(1)){var wordSize=src.ReadBits(4),offset=src.ReadBitsReversed(wordSize),size=src.ReadBitsReversed(wordSize),sourcePosition=uncompressed.get_Length()-offset,toRead=Math.min(offset,size);buffer=uncompressed.GetBuffer(),uncompressed.Write(buffer,system_Convert.ToInt32(sourcePosition),toRead)}else for(var size1=src.ReadBitsReversed(2),i=0;i<size1;)uncompressed.WriteByte(system_Convert.ToUInt8(src.ReadByte())),++i}}catch(__e){if(__e instanceof js__$Boot_HaxeError&&(__e=__e.val),!js_Boot.__instanceof(__e,alphaTab_io_EndOfReaderException))throw __e}buffer=uncompressed.GetBuffer();for(var resultOffset=skipHeader?4:0,resultSize=uncompressed.get_Length()-resultOffset,result=system__$FixedArray_FixedArray_$Impl_$._new(system_Convert.ToInt32(resultSize)),count=system_Convert.ToInt32(resultSize),i1=0;i1<count;)result[0+i1]=buffer[resultOffset+i1],++i1;return result},ReadBlock:function(data){var header=this.ReadHeader(data);if("BCFZ"==header)this.ReadUncompressedBlock(this.Decompress(data,!0));else{if("BCFS"!=header)throw new js__$Boot_HaxeError((new alphaTab_importer_UnsupportedFormatException).UnsupportedFormatException(""));this.ReadUncompressedBlock(data.ReadAll())}},ReadUncompressedBlock:function(data){for(var offset=4096;offset+3<data.length;){if(2==this.GetInteger(data,offset)){var file=new alphaTab_importer_GpxFile;file.FileName=this.GetString(data,offset+4,127),file.FileSize=this.GetInteger(data,offset+140);var storeFile=null==this.FileFilter||this.FileFilter(file.FileName);storeFile&&this.Files.push(file);for(var dataPointerOffset=offset+148,sector=0,sectorCount=0,fileData=storeFile?alphaTab_io_ByteBuffer.WithCapactiy(file.FileSize):null;0!=(sector=this.GetInteger(data,dataPointerOffset+4*sectorCount++));)offset=4096*sector,storeFile&&fileData.Write(data,offset,4096);if(storeFile){var a=file.FileSize,b=fileData.get_Length();file.Data=system__$FixedArray_FixedArray_$Impl_$._new(system_Convert.ToInt32(a<b?a:b));for(var raw=fileData.ToArray(),dst=file.Data,count=file.Data.length,i=0;i<count;)dst[0+i]=raw[0+i],++i}}offset+=4096}},GetString:function(data,offset,length){for(var buf="",i=0;i<length;){var code=255&data[offset+i];if(0==code)break;buf+=String.fromCharCode(code),++i}return buf},GetInteger:function(data,offset){var this1=data[offset];return data[offset+3]<<24|data[offset+2]<<16|data[offset+1]<<8|this1},__class__:alphaTab_importer_GpxFileSystem};var alphaTab_importer_GpxImporter=function(){alphaTab_importer_ScoreImporter.call(this)};alphaTab_importer_GpxImporter.__name__=!0,alphaTab_importer_GpxImporter.__super__=alphaTab_importer_ScoreImporter,alphaTab_importer_GpxImporter.prototype=$extend(alphaTab_importer_ScoreImporter.prototype,{get_Name:function(){return"Guitar Pro 6"},ReadScore:function(){alphaTab_util_Logger.Info(this.get_Name(),"Loading GPX filesystem",null);var fileSystem=new alphaTab_importer_GpxFileSystem;fileSystem.FileFilter=function(s){return"score.gpif"==s},fileSystem.Load(this.Data),alphaTab_util_Logger.Info(this.get_Name(),"GPX filesystem loaded",null);var data=fileSystem.Files[0].Data,xml=alphaTab_platform_Platform.ToString(data);fileSystem.Files=null,fileSystem=null,alphaTab_util_Logger.Info(this.get_Name(),"Start Parsing score.gpif",null);var parser=new alphaTab_importer_GpxParser;return parser.ParseXml(xml),alphaTab_util_Logger.Info(this.get_Name(),"score.gpif parsed",null),parser.Score},__class__:alphaTab_importer_GpxImporter});var alphaTab_importer_GpxParser=function(){};alphaTab_importer_GpxParser.__name__=!0,alphaTab_importer_GpxParser.prototype={ParseXml:function(xml){this._masterTrackAutomations={},this._tracksMapping=system__$FixedArray_FixedArray_$Impl_$._new(0);this._tracksById={};this._masterBars=[];this._barsOfMasterBar=[];this._voicesOfBar={};this._barsById={};this._voiceById={};this._beatsOfVoice={};this._beatById={};this._rhythmOfBeat={};this._rhythmById={};this._notesOfBeat={};this._noteById={};this._tappedNotes={};this._lyricsByTrack={};var dom;try{dom=new alphaTab_xml_XmlDocument(xml)}catch(__e){throw __e instanceof js__$Boot_HaxeError&&(__e=__e.val),js_Boot.__instanceof(__e,system_Exception)?new js__$Boot_HaxeError((new alphaTab_importer_UnsupportedFormatException).UnsupportedFormatException("")):__e}this.ParseDom(dom),this.BuildModel(),this.Score.Finish();var this16=this._lyricsByTrack;if(Object.keys(this16).length>0)for(var this17=this._lyricsByTrack,trackId=$iterator(Object.keys(this17))();trackId.hasNext();){var trackId1=trackId.next();this._tracksById[trackId1].ApplyLyrics(this._lyricsByTrack[trackId1])}},ParseDom:function(dom){var root=dom.DocumentElement;if(null!=root){if("GPIF"!=root.LocalName)throw new js__$Boot_HaxeError((new alphaTab_importer_UnsupportedFormatException).UnsupportedFormatException(""));this.Score=new alphaTab_model_Score;for(var n=$iterator(root.ChildNodes)();n.hasNext();){var n1=n.next();if(1==n1.NodeType){switch(n1.LocalName){case"Bars":this.ParseBars(n1);break;case"Beats":this.ParseBeats(n1);break;case"MasterBars":this.ParseMasterBarsNode(n1);break;case"MasterTrack":this.ParseMasterTrackNode(n1);break;case"Notes":this.ParseNotes(n1);break;case"Rhythms":this.ParseRhythms(n1);break;case"Score":this.ParseScoreNode(n1);break;case"Tracks":this.ParseTracksNode(n1);break;case"Voices":this.ParseVoices(n1)}}}}},ParseScoreNode:function(element){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"Album":this.Score.Album=c1.FirstChild.get_InnerText();break;case"Artist":this.Score.Artist=c1.FirstChild.get_InnerText();break;case"Copyright":this.Score.Copyright=c1.FirstChild.get_InnerText();break;case"Instructions":this.Score.Instructions=c1.FirstChild.get_InnerText();break;case"Music":this.Score.Music=c1.FirstChild.get_InnerText();break;case"Notices":this.Score.Notices=c1.FirstChild.get_InnerText();break;case"SubTitle":this.Score.SubTitle=c1.FirstChild.get_InnerText();break;case"Tabber":this.Score.Tab=c1.FirstChild.get_InnerText();break;case"Title":this.Score.Title=c1.FirstChild.get_InnerText();break;case"Words":this.Score.Words=c1.FirstChild.get_InnerText();break;case"WordsAndMusic":if(null!=c1.FirstChild&&""!=c1.FirstChild.get_InnerText()){var tmp,wordsAndMusic=c1.FirstChild.get_InnerText();if(null!=wordsAndMusic&&0!=wordsAndMusic.length){var s=this.Score.Words;tmp=null==s||0==s.length}else tmp=!1;tmp&&(this.Score.Words=wordsAndMusic);var tmp1;if(null!=wordsAndMusic&&0!=wordsAndMusic.length){var s1=this.Score.Music;tmp1=null==s1||0==s1.length}else tmp1=!1;tmp1&&(this.Score.Music=wordsAndMusic)}}}}},ParseMasterTrackNode:function(node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"Automations":this.ParseAutomations(c1,this._masterTrackAutomations);break;case"Tracks":var a=c1.get_InnerText(),this2=system_Convert.ToUInt16(32);this._tracksMapping=system__$CsString_CsString_$Impl_$.Split_CharArray(a,[this2])}}}},ParseAutomations:function(node,automations){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Automation"==c1.LocalName&&this.ParseAutomation(c1,automations)}}},ParseAutomation:function(node,automations){for(var type=null,isLinear=!1,barId=null,ratioPosition=0,value=0,reference=0,text=null,c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"Bar":barId=c1.get_InnerText();break;case"Linear":isLinear="true"==c1.get_InnerText().toLowerCase();break;case"Position":var s=c1.get_InnerText();ratioPosition=parseFloat(s);break;case"Text":text=c1.get_InnerText();break;case"Type":type=c1.get_InnerText();break;case"Value":var a=c1.get_InnerText(),this2=system_Convert.ToUInt16(32),parts=system__$CsString_CsString_$Impl_$.Split_CharArray(a,[this2]);value=parseFloat(parts[0]),reference=alphaTab_platform_Platform.ParseInt(parts[1])}}}if(null!=type){var automation=null;if("Tempo"==type&&(automation=alphaTab_model_Automation.BuildTempoAutomation(isLinear,ratioPosition,value,reference)),null!=automation&&(automation.Text=text),null!=barId){if(!automations.hasOwnProperty(barId)){automations[barId]=[]}automations[barId].push(automation)}}},ParseTracksNode:function(node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Track"==c1.LocalName&&this.ParseTrack(c1)}}},ParseTrack:function(node){for(var track=new alphaTab_model_Track(1),trackId=node.GetAttribute("id"),c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"Color":var a=c1.get_InnerText(),this2=system_Convert.ToUInt16(32),parts=system__$CsString_CsString_$Impl_$.Split_CharArray(a,[this2]);if(parts.length>=3){var r=alphaTab_platform_Platform.ParseInt(parts[0]),g=alphaTab_platform_Platform.ParseInt(parts[1]),b=alphaTab_platform_Platform.ParseInt(parts[2]);track.Color=new alphaTab_platform_model_Color(system_Convert.ToUInt8(r),system_Convert.ToUInt8(g),system_Convert.ToUInt8(b),255)}break;case"GeneralMidi":this.ParseGeneralMidi(track,c1);break;case"Instrument":var instrumentName=c1.GetAttribute("ref");(StringTools.endsWith(instrumentName,"-gs")||StringTools.endsWith(instrumentName,"GrandStaff"))&&track.EnsureStaveCount(2);break;case"Lyrics":this.ParseLyrics(trackId,c1);break;case"Name":track.Name=c1.get_InnerText();break;case"PartSounding":this.ParsePartSounding(track,c1);break;case"PlaybackState":var state=c1.get_InnerText();track.PlaybackInfo.IsSolo="Solo"==state,track.PlaybackInfo.IsMute="Mute"==state;break;case"Properties":this.ParseTrackProperties(track,c1);break;case"ShortName":track.ShortName=c1.get_InnerText()}}}this._tracksById[trackId]=track},ParseLyrics:function(trackId,node){for(var tracks=[],c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Line"==c1.LocalName&&tracks.push(this.ParseLyricsLine(c1))}}this._lyricsByTrack[trackId]=tracks},ParseLyricsLine:function(node){for(var lyrics=new alphaTab_model_Lyrics,c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"Offset":lyrics.StartBar=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"Text":lyrics.Text=c1.get_InnerText()}}}return lyrics},ParseDiagramCollection:function(track,node){for(var c=$iterator(node.FindChildElement("Items").ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Item"==c1.LocalName&&this.ParseDiagramItem(track,c1)}}},ParseDiagramItem:function(track,node){var chord=new alphaTab_model_Chord,chordId=node.GetAttribute("id");chord.Name=node.GetAttribute("name"),track.Chords[chordId]=chord;var diagram=node.FindChildElement("Diagram"),stringCount=alphaTab_platform_Platform.ParseInt(diagram.GetAttribute("stringCount")),baseFret=alphaTab_platform_Platform.ParseInt(diagram.GetAttribute("baseFret"));chord.FirstFret=baseFret+1;for(var i=0;i<stringCount;)chord.Strings.push(-1),++i;for(var c=$iterator(diagram.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"Fingering":for(var existingFingers={},p=$iterator(c1.ChildNodes)();p.hasNext();){var p1=p.next();if(1==p1.NodeType){if("Position"==p1.LocalName){var finger=-2,fret=baseFret+alphaTab_platform_Platform.ParseInt(p1.GetAttribute("fret"));switch(p1.GetAttribute("finger")){case"Index":finger=1;break;case"Middle":finger=2;break;case"None":break;case"Pinky":finger=4;break;case"Rank":finger=3;break;case"Thumb":finger=0}-2!=finger&&(existingFingers.hasOwnProperty(finger)?chord.BarreFrets.push(fret):existingFingers[finger]=!0)}}}break;case"Fret":var guitarString=alphaTab_platform_Platform.ParseInt(c1.GetAttribute("string"));chord.Strings[stringCount-guitarString-1]=baseFret+alphaTab_platform_Platform.ParseInt(c1.GetAttribute("fret"))}}}},ParseTrackProperties:function(track,node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Property"==c1.LocalName&&this.ParseTrackProperty(track,c1)}}},ParseTrackProperty:function(track,node){switch(node.GetAttribute("name")){case"CapoFret":track.Capo=alphaTab_platform_Platform.ParseInt(node.FindChildElement("Fret").get_InnerText());break;case"ChordCollection":case"DiagramCollection":this.ParseDiagramCollection(track,node);break;case"Tuning":for(var a=node.FindChildElement("Pitches").get_InnerText(),this2=system_Convert.ToUInt16(32),tuningParts=system__$CsString_CsString_$Impl_$.Split_CharArray(a,[this2]),tuning=system__$FixedArray_FixedArray_$Impl_$._new(tuningParts.length),i=0;i<tuning.length;)tuning[tuning.length-1-i]=alphaTab_platform_Platform.ParseInt(tuningParts[i]),++i;track.Tuning=tuning}},ParseGeneralMidi:function(track,node){var tmp=node.FindChildElement("Port").get_InnerText();track.PlaybackInfo.Port=alphaTab_platform_Platform.ParseInt(tmp);var tmp1=node.FindChildElement("Program").get_InnerText();track.PlaybackInfo.Program=alphaTab_platform_Platform.ParseInt(tmp1);var tmp2=node.FindChildElement("PrimaryChannel").get_InnerText();track.PlaybackInfo.PrimaryChannel=alphaTab_platform_Platform.ParseInt(tmp2);var tmp3=node.FindChildElement("SecondaryChannel").get_InnerText();track.PlaybackInfo.SecondaryChannel=alphaTab_platform_Platform.ParseInt(tmp3),track.IsPercussion="Percussion"==node.GetAttribute("table")},ParsePartSounding:function(track,node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"TranspositionPitch"==c1.LocalName&&(track.DisplayTranspositionPitch=alphaTab_platform_Platform.ParseInt(c1.get_InnerText()))}}},ParseMasterBarsNode:function(node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"MasterBar"==c1.LocalName&&this.ParseMasterBar(c1)}}},ParseMasterBar:function(node){for(var masterBar=new alphaTab_model_MasterBar,c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"AlternateEndings":for(var a=c1.get_InnerText(),this2=system_Convert.ToUInt16(32),alternateEndings=system__$CsString_CsString_$Impl_$.Split_CharArray(a,[this2]),i=0,k=0;k<alternateEndings.length;)i|=1<<-1+alphaTab_platform_Platform.ParseInt(alternateEndings[k]),++k;masterBar.AlternateEndings=system_Convert.ToUInt8(i);break;case"Bars":var this3=this._barsOfMasterBar,a1=c1.get_InnerText(),this5=system_Convert.ToUInt16(32);this3.push(system__$CsString_CsString_$Impl_$.Split_CharArray(a1,[this5]));break;case"DoubleBar":masterBar.IsDoubleBar=!0;break;case"Key":masterBar.KeySignature=alphaTab_platform_Platform.ParseInt(c1.FindChildElement("AccidentalCount").get_InnerText());var mode=c1.FindChildElement("Mode");if(null!=mode){switch(mode.get_InnerText().toLowerCase()){case"major":masterBar.KeySignatureType=0;break;case"minor":masterBar.KeySignatureType=1}}break;case"Repeat":"true"==c1.GetAttribute("start").toLowerCase()&&(masterBar.IsRepeatStart=!0),"true"==c1.GetAttribute("end").toLowerCase()&&null!=c1.GetAttribute("count")&&(masterBar.RepeatCount=alphaTab_platform_Platform.ParseInt(c1.GetAttribute("count")));break;case"Section":masterBar.Section=new alphaTab_model_Section,masterBar.Section.Marker=c1.FindChildElement("Letter").get_InnerText(),masterBar.Section.Text=c1.FindChildElement("Text").get_InnerText();break;case"Time":var a2=c1.get_InnerText(),this7=system_Convert.ToUInt16(47),timeParts=system__$CsString_CsString_$Impl_$.Split_CharArray(a2,[this7]);masterBar.TimeSignatureNumerator=alphaTab_platform_Platform.ParseInt(timeParts[0]),masterBar.TimeSignatureDenominator=alphaTab_platform_Platform.ParseInt(timeParts[1]);break;case"TripletFeel":switch(c1.get_InnerText()){case"Dotted16th":masterBar.TripletFeel=3;break;case"Dotted8th":masterBar.TripletFeel=4;break;case"NoTripletFeel":masterBar.TripletFeel=0;break;case"Scottish16th":masterBar.TripletFeel=5;break;case"Scottish8th":masterBar.TripletFeel=6;break;case"Triplet16th":masterBar.TripletFeel=1;break;case"Triplet8th":masterBar.TripletFeel=2}}}}this._masterBars.push(masterBar)},ParseBars:function(node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Bar"==c1.LocalName&&this.ParseBar(c1)}}},ParseBar:function(node){for(var bar=new alphaTab_model_Bar,barId=node.GetAttribute("id"),c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"Clef":switch(c1.get_InnerText()){case"C3":bar.Clef=1;break;case"C4":bar.Clef=2;break;case"F4":bar.Clef=3;break;case"G2":bar.Clef=4;break;case"Neutral":bar.Clef=0}break;case"Ottavia":switch(c1.get_InnerText()){case"15ma":bar.ClefOttavia=0;break;case"15mb":bar.ClefOttavia=4;break;case"8va":bar.ClefOttavia=1;break;case"8vb":bar.ClefOttavia=3}break;case"Voices":var this1=this._voicesOfBar,a=c1.get_InnerText(),this3=system_Convert.ToUInt16(32);this1[barId]=system__$CsString_CsString_$Impl_$.Split_CharArray(a,[this3])}}}this._barsById[barId]=bar},ParseVoices:function(node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Voice"==c1.LocalName&&this.ParseVoice(c1)}}},ParseVoice:function(node){for(var voice=new alphaTab_model_Voice,voiceId=node.GetAttribute("id"),c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){if("Beats"==c1.LocalName){var this1=this._beatsOfVoice,a=c1.get_InnerText(),this3=system_Convert.ToUInt16(32);this1[voiceId]=system__$CsString_CsString_$Impl_$.Split_CharArray(a,[this3])}}}this._voiceById[voiceId]=voice},ParseBeats:function(node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Beat"==c1.LocalName&&this.ParseBeat(c1)}}},ParseBeat:function(node){for(var beat=new alphaTab_model_Beat,beatId=node.GetAttribute("id"),c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"Arpeggio":"Up"==c1.get_InnerText()?beat.BrushType=3:beat.BrushType=4;break;case"Chord":beat.ChordId=c1.get_InnerText();break;case"Dynamic":switch(c1.get_InnerText()){case"F":beat.Dynamic=5;break;case"FF":beat.Dynamic=6;break;case"FFF":beat.Dynamic=7;break;case"MF":beat.Dynamic=4;break;case"MP":beat.Dynamic=3;break;case"P":beat.Dynamic=2;break;case"PP":beat.Dynamic=1;break;case"PPP":beat.Dynamic=0}break;case"Fadding":"FadeIn"==c1.get_InnerText()&&(beat.FadeIn=!0);break;case"FreeText":beat.Text=c1.get_InnerText();break;case"GraceNotes":switch(c1.get_InnerText()){case"BeforeBeat":beat.GraceType=2;break;case"OnBeat":beat.GraceType=1}break;case"Hairpin":switch(c1.get_InnerText()){case"Crescendo":beat.Crescendo=1;break;case"Decrescendo":beat.Crescendo=2}break;case"Legato":"true"==c1.GetAttribute("origin")&&(beat.IsLegatoOrigin=!0);break;case"Notes":var this1=this._notesOfBeat,a=c1.get_InnerText(),this3=system_Convert.ToUInt16(32);this1[beatId]=system__$CsString_CsString_$Impl_$.Split_CharArray(a,[this3]);break;case"Properties":this.ParseBeatProperties(c1,beat);break;case"Rhythm":this._rhythmOfBeat[beatId]=c1.GetAttribute("ref");break;case"Tremolo":switch(c1.get_InnerText()){case"1/2":beat.TremoloSpeed=8;break;case"1/4":beat.TremoloSpeed=16;break;case"1/8":beat.TremoloSpeed=32}break;case"XProperties":this.ParseBeatXProperties(c1,beat)}}}this._beatById[beatId]=beat},ParseBeatXProperties:function(node,beat){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){if("XProperty"==c1.LocalName){if("1124204545"==c1.GetAttribute("id")){var val=alphaTab_platform_Platform.ParseInt(c1.FindChildElement("Int").get_InnerText());beat.InvertBeamDirection=1==val}}}}},ParseBeatProperties:function(node,beat){for(var isWhammy=!1,whammyOrigin=null,whammyMiddleValue=null,whammyMiddleOffset1=null,whammyMiddleOffset2=null,whammyDestination=null,c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){if("Property"==c1.LocalName){switch(c1.GetAttribute("name")){case"Brush":"Up"==c1.FindChildElement("Direction").get_InnerText()?beat.BrushType=1:beat.BrushType=2;break;case"PickStroke":"Up"==c1.FindChildElement("Direction").get_InnerText()?beat.PickStroke=1:beat.PickStroke=2;break;case"Popped":null!=c1.FindChildElement("Enable")&&(beat.Pop=!0);break;case"Slapped":null!=c1.FindChildElement("Enable")&&(beat.Slap=!0);break;case"VibratoWTremBar":switch(c1.FindChildElement("Strength").get_InnerText()){case"Slight":beat.Vibrato=1;break;case"Wide":beat.Vibrato=2}break;case"WhammyBar":isWhammy=!0;break;case"WhammyBarDestinationOffset":null==whammyDestination&&(whammyDestination=new alphaTab_model_BendPoint(0,0));var s=c1.FindChildElement("Float").get_InnerText();whammyDestination.Offset=this.ToBendOffset(parseFloat(s));break;case"WhammyBarDestinationValue":null==whammyDestination&&(whammyDestination=new alphaTab_model_BendPoint(60,0));var s1=c1.FindChildElement("Float").get_InnerText();whammyDestination.Value=this.ToBendValue(parseFloat(s1));break;case"WhammyBarExtend":break;case"WhammyBarMiddleOffset1":var s2=c1.FindChildElement("Float").get_InnerText();whammyMiddleOffset1=this.ToBendOffset(parseFloat(s2));break;case"WhammyBarMiddleOffset2":var s3=c1.FindChildElement("Float").get_InnerText();whammyMiddleOffset2=this.ToBendOffset(parseFloat(s3));break;case"WhammyBarMiddleValue":var s4=c1.FindChildElement("Float").get_InnerText();whammyMiddleValue=this.ToBendValue(parseFloat(s4));break;case"WhammyBarOriginOffset":null==whammyOrigin&&(whammyOrigin=new alphaTab_model_BendPoint(0,0));var s5=c1.FindChildElement("Float").get_InnerText();whammyOrigin.Offset=this.ToBendOffset(parseFloat(s5));break;case"WhammyBarOriginValue":null==whammyOrigin&&(whammyOrigin=new alphaTab_model_BendPoint(0,0));var s6=c1.FindChildElement("Float").get_InnerText();whammyOrigin.Value=this.ToBendValue(parseFloat(s6))}}}}if(isWhammy){null==whammyOrigin&&(whammyOrigin=new alphaTab_model_BendPoint(0,0)),null==whammyDestination&&(whammyDestination=new alphaTab_model_BendPoint(60,0));var whammy=[];whammy.push(whammyOrigin),null!=whammyMiddleOffset1&&null!=whammyMiddleValue&&whammy.push(new alphaTab_model_BendPoint(whammyMiddleOffset1,whammyMiddleValue)),null!=whammyMiddleOffset2&&null!=whammyMiddleValue&&whammy.push(new alphaTab_model_BendPoint(whammyMiddleOffset2,whammyMiddleValue)),null==whammyMiddleOffset1&&null==whammyMiddleOffset2&&null!=whammyMiddleValue&&whammy.push(new alphaTab_model_BendPoint(30,whammyMiddleValue)),whammy.push(whammyDestination),beat.WhammyBarPoints=whammy}},ParseNotes:function(node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Note"==c1.LocalName&&this.ParseNote(c1)}}},ParseNote:function(node){for(var note=new alphaTab_model_Note,noteId=node.GetAttribute("id"),c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"Accent":var accentFlags=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());0!=(1&accentFlags)&&(note.IsStaccato=!0),0!=(4&accentFlags)&&(note.Accentuated=2),0!=(8&accentFlags)&&(note.Accentuated=1);break;case"AntiAccent":"normal"==c1.get_InnerText().toLowerCase()&&(note.IsGhost=!0);break;case"LeftFingering":note.IsFingering=!0;switch(c1.get_InnerText()){case"A":note.LeftHandFinger=3;break;case"C":note.LeftHandFinger=4;break;case"I":note.LeftHandFinger=1;break;case"M":note.LeftHandFinger=2;break;case"P":note.LeftHandFinger=0}break;case"LetRing":note.IsLetRing=!0;break;case"Properties":this.ParseNoteProperties(c1,note,noteId);break;case"RightFingering":note.IsFingering=!0;switch(c1.get_InnerText()){case"A":note.RightHandFinger=3;break;case"C":note.RightHandFinger=4;break;case"I":note.RightHandFinger=1;break;case"M":note.RightHandFinger=2;break;case"P":note.RightHandFinger=0}break;case"Tie":"true"==c1.GetAttribute("origin").toLowerCase()&&(note.IsTieOrigin=!0),"true"==c1.GetAttribute("destination").toLowerCase()&&(note.IsTieDestination=!0);break;case"Trill":note.TrillValue=alphaTab_platform_Platform.ParseInt(c1.get_InnerText()),note.TrillSpeed=16;break;case"Vibrato":switch(c1.get_InnerText()){case"Slight":note.Vibrato=1;break;case"Wide":note.Vibrato=2}}}}this._noteById[noteId]=note},ParseNoteProperties:function(node,note,noteId){for(var isBended=!1,bendOrigin=null,bendMiddleValue=null,bendMiddleOffset1=null,bendMiddleOffset2=null,bendDestination=null,c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){if("Property"==c1.LocalName){switch(c1.GetAttribute("name")){case"BendDestinationOffset":null==bendDestination&&(bendDestination=new alphaTab_model_BendPoint(0,0));var s=c1.FindChildElement("Float").get_InnerText();bendDestination.Offset=this.ToBendOffset(parseFloat(s));break;case"BendDestinationValue":null==bendDestination&&(bendDestination=new alphaTab_model_BendPoint(60,0));var s1=c1.FindChildElement("Float").get_InnerText();bendDestination.Value=this.ToBendValue(parseFloat(s1));break;case"BendMiddleOffset1":var s2=c1.FindChildElement("Float").get_InnerText();bendMiddleOffset1=this.ToBendOffset(parseFloat(s2));break;case"BendMiddleOffset2":var s3=c1.FindChildElement("Float").get_InnerText();bendMiddleOffset2=this.ToBendOffset(parseFloat(s3));break;case"BendMiddleValue":var s4=c1.FindChildElement("Float").get_InnerText();bendMiddleValue=this.ToBendValue(parseFloat(s4));break;case"BendOriginOffset":null==bendOrigin&&(bendOrigin=new alphaTab_model_BendPoint(0,0));var s5=c1.FindChildElement("Float").get_InnerText();bendOrigin.Offset=this.ToBendOffset(parseFloat(s5));break;case"BendOriginValue":null==bendOrigin&&(bendOrigin=new alphaTab_model_BendPoint(0,0));var s6=c1.FindChildElement("Float").get_InnerText();bendOrigin.Value=this.ToBendValue(parseFloat(s6));break;case"Bended":isBended=!0;break;case"Element":note.Element=alphaTab_platform_Platform.ParseInt(c1.FindChildElement("Element").get_InnerText());break;case"Fret":note.Fret=alphaTab_platform_Platform.ParseInt(c1.FindChildElement("Fret").get_InnerText());break;case"HarmonicFret":var hfret=c1.FindChildElement("HFret");if(null!=hfret){var s7=hfret.get_InnerText();note.HarmonicValue=parseFloat(s7)}break;case"HarmonicType":var htype=c1.FindChildElement("HType");if(null!=htype){switch(htype.get_InnerText()){case"Artificial":note.HarmonicType=2;break;case"Feedback":note.HarmonicType=6;break;case"Natural":note.HarmonicType=1;break;case"NoHarmonic":note.HarmonicType=0;break;case"Pinch":note.HarmonicType=3;break;case"Semi":note.HarmonicType=5;break;case"Tap":note.HarmonicType=4}}break;case"HopoDestination":break;case"HopoOrigin":null!=c1.FindChildElement("Enable")&&(note.IsHammerPullOrigin=!0);break;case"Muted":null!=c1.FindChildElement("Enable")&&(note.IsDead=!0);break;case"Octave":note.Octave=alphaTab_platform_Platform.ParseInt(c1.FindChildElement("Number").get_InnerText());break;case"PalmMuted":null!=c1.FindChildElement("Enable")&&(note.IsPalmMute=!0);break;case"Slide":var slideFlags=alphaTab_platform_Platform.ParseInt(c1.FindChildElement("Flags").get_InnerText());0!=(1&slideFlags)&&(note.SlideType=1),0!=(2&slideFlags)&&(note.SlideType=2),0!=(4&slideFlags)&&(note.SlideType=6),0!=(8&slideFlags)&&(note.SlideType=5),0!=(16&slideFlags)&&(note.SlideType=3),0!=(32&slideFlags)&&(note.SlideType=4);break;case"String":note.String=alphaTab_platform_Platform.ParseInt(c1.FindChildElement("String").get_InnerText())+1;break;case"Tapped":this._tappedNotes[noteId]=!0;break;case"Tone":note.Tone=alphaTab_platform_Platform.ParseInt(c1.FindChildElement("Step").get_InnerText());break;case"Variation":note.Variation=alphaTab_platform_Platform.ParseInt(c1.FindChildElement("Variation").get_InnerText())}}}}isBended&&(null==bendOrigin&&(bendOrigin=new alphaTab_model_BendPoint(0,0)),null==bendDestination&&(bendDestination=new alphaTab_model_BendPoint(60,0)),note.AddBendPoint(bendOrigin),null!=bendMiddleOffset1&&null!=bendMiddleValue&&note.AddBendPoint(new alphaTab_model_BendPoint(bendMiddleOffset1,bendMiddleValue)),null!=bendMiddleOffset2&&null!=bendMiddleValue&&note.AddBendPoint(new alphaTab_model_BendPoint(bendMiddleOffset2,bendMiddleValue)),null==bendMiddleOffset1&&null==bendMiddleOffset2&&null!=bendMiddleValue&&note.AddBendPoint(new alphaTab_model_BendPoint(30,bendMiddleValue)),note.AddBendPoint(bendDestination))},ToBendValue:function(gpxValue){var converted=.04*gpxValue;return system_Convert.ToInt32_Single(converted)},ToBendOffset:function(gpxOffset){var converted=.6*gpxOffset;return system_Convert.ToInt32_Single(converted)},ParseRhythms:function(node){for(var c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"Rhythm"==c1.LocalName&&this.ParseRhythm(c1)}}},ParseRhythm:function(node){for(var rhythm=new alphaTab_importer_GpxRhythm,rhythmId=node.GetAttribute("id"),c=$iterator(node.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"AugmentationDot":rhythm.Dots=alphaTab_platform_Platform.ParseInt(c1.GetAttribute("count"));break;case"NoteValue":switch(c1.get_InnerText()){case"128th":rhythm.Value=128;break;case"16th":rhythm.Value=16;break;case"256th":rhythm.Value=256;break;case"32nd":rhythm.Value=32;break;case"64th":rhythm.Value=64;break;case"DoubleWhole":rhythm.Value=-2;break;case"Eighth":rhythm.Value=8;break;case"Half":rhythm.Value=2;break;case"Long":rhythm.Value=-4;break;case"Quarter":rhythm.Value=4;break;case"Whole":rhythm.Value=1}break;case"PrimaryTuplet":rhythm.TupletNumerator=alphaTab_platform_Platform.ParseInt(c1.GetAttribute("num")),rhythm.TupletDenominator=alphaTab_platform_Platform.ParseInt(c1.GetAttribute("den"))}}}this._rhythmById[rhythmId]=rhythm},BuildModel:function(){for(var i=0,j=this._masterBars.length;i<j;){var masterBar=this._masterBars[i];this.Score.AddMasterBar(masterBar),++i}for(var trackId=HxOverrides.iter(this._tracksMapping);trackId.hasNext();){var trackId1=trackId.next();if(null!=trackId1&&0!=trackId1.length){var track=this._tracksById[trackId1];this.Score.AddTrack(track)}}for(var masterBarIndex=0;masterBarIndex<this._barsOfMasterBar.length;){for(var barIds=this._barsOfMasterBar[masterBarIndex],staveIndex=0,barIndex=0,trackIndex=0;barIndex<barIds.length&&trackIndex<this.Score.Tracks.length;){var barId=barIds[barIndex];if("-1"!=barId){var bar=this._barsById[barId],track1=this.Score.Tracks[trackIndex];track1.AddBarToStaff(staveIndex,bar),staveIndex==track1.Staves.length-1?(++trackIndex,staveIndex=0):++staveIndex}else++trackIndex;++barIndex}++masterBarIndex}for(var this1=this._barsById,barId1=$iterator(Object.keys(this1))();barId1.hasNext();){var barId2=barId1.next(),bar1=this._barsById[barId2];if(this._voicesOfBar.hasOwnProperty(barId2))for(var voiceId=HxOverrides.iter(this._voicesOfBar[barId2]);voiceId.hasNext();){var voiceId1=voiceId.next();if("-1"!=voiceId1)bar1.AddVoice(this._voiceById[voiceId1]);else{var voice=new alphaTab_model_Voice;bar1.AddVoice(voice);var beat=new alphaTab_model_Beat;beat.IsEmpty=!0,beat.Duration=4,voice.AddBeat(beat)}}}for(var this2=this._beatById,beatId=$iterator(Object.keys(this2))();beatId.hasNext();){var beatId1=beatId.next(),beat1=this._beatById[beatId1],rhythmId=this._rhythmOfBeat[beatId1],rhythm=this._rhythmById[rhythmId];if(beat1.Duration=rhythm.Value,beat1.Dots=rhythm.Dots,beat1.TupletNumerator=rhythm.TupletNumerator,beat1.TupletDenominator=rhythm.TupletDenominator,this._notesOfBeat.hasOwnProperty(beatId1))for(var noteId=HxOverrides.iter(this._notesOfBeat[beatId1]);noteId.hasNext();){var noteId1=noteId.next();"-1"!=noteId1&&(beat1.AddNote(this._noteById[noteId1]),this._tappedNotes.hasOwnProperty(noteId1)&&(beat1.Tap=!0))}}for(var this3=this._voiceById,voiceId2=$iterator(Object.keys(this3))();voiceId2.hasNext();){var voiceId3=voiceId2.next(),voice1=this._voiceById[voiceId3];if(this._beatsOfVoice.hasOwnProperty(voiceId3))for(var beatId2=HxOverrides.iter(this._beatsOfVoice[voiceId3]);beatId2.hasNext();){var beatId3=beatId2.next();"-1"!=beatId3&&voice1.AddBeat(this._beatById[beatId3].Clone())}}for(var this4=this._masterTrackAutomations,barIndex1=$iterator(Object.keys(this4))();barIndex1.hasNext();)for(var barIndex2=barIndex1.next(),automations=this._masterTrackAutomations[barIndex2],masterBar1=this.Score.MasterBars[alphaTab_platform_Platform.ParseInt(barIndex2)],i1=0,j1=automations.length;i1<j1;){var automation=automations[i1];if(0==automation.Type){if("0"==barIndex2){var tmp=system_Convert.ToInt32_Single(automation.Value);this.Score.Tempo=tmp,null!=automation.Text&&(this.Score.TempoLabel=automation.Text)}masterBar1.TempoAutomation=automation}++i1}},__class__:alphaTab_importer_GpxParser};var alphaTab_importer_GpxRhythm=function(){this.TupletDenominator=-1,this.TupletNumerator=-1,this.Value=4};alphaTab_importer_GpxRhythm.__name__=!0,alphaTab_importer_GpxRhythm.prototype={__class__:alphaTab_importer_GpxRhythm};var alphaTab_importer_MixTableChange=function(){this.Volume=-1,this.Balance=-1,this.Instrument=-1,this.TempoName=null,this.Tempo=-1,this.Duration=0};alphaTab_importer_MixTableChange.__name__=!0,alphaTab_importer_MixTableChange.prototype={__class__:alphaTab_importer_MixTableChange};var alphaTab_importer_MusicXmlImporter=function(){this._voiceOfStaff={},alphaTab_importer_ScoreImporter.call(this)};alphaTab_importer_MusicXmlImporter.__name__=!0,alphaTab_importer_MusicXmlImporter.ParseTied=function(element,note){0==note.Beat.GraceType&&("start"==element.GetAttribute("type")?note.IsTieOrigin=!0:note.IsTieDestination=!0)},alphaTab_importer_MusicXmlImporter.__super__=alphaTab_importer_ScoreImporter,alphaTab_importer_MusicXmlImporter.prototype=$extend(alphaTab_importer_ScoreImporter.prototype,{get_Name:function(){return"MusicXML"},ReadScore:function(){this._trackById={};var dom,xml=alphaTab_platform_Platform.ToString(this.Data.ReadAll());try{dom=new alphaTab_xml_XmlDocument(xml)}catch(__e){throw __e instanceof js__$Boot_HaxeError&&(__e=__e.val),js_Boot.__instanceof(__e,system_Exception)?new js__$Boot_HaxeError((new alphaTab_importer_UnsupportedFormatException).UnsupportedFormatException("")):__e}return this._score=new alphaTab_model_Score,this._score.Tempo=120,this.ParseDom(dom),this._score.Finish(),this._score},ParseDom:function(dom){var root=dom.DocumentElement;if(null==root)throw new js__$Boot_HaxeError((new alphaTab_importer_UnsupportedFormatException).UnsupportedFormatException(""));switch(root.LocalName){case"score-partwise":this.ParsePartwise(root);break;case"score-timewise":break;default:throw new js__$Boot_HaxeError((new alphaTab_importer_UnsupportedFormatException).UnsupportedFormatException(""))}},ParsePartwise:function(element){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"identification":this.ParseIdentification(c1);break;case"movement-title":this._score.Title=c1.FirstChild.get_InnerText();break;case"part":this.ParsePart(c1);break;case"part-list":this.ParsePartList(c1)}}}},ParsePart:function(element){var id=element.GetAttribute("id");if(this._trackById.hasOwnProperty(id))for(var track=this._trackById[id],isFirstMeasure=!0,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"measure"==c1.LocalName&&this.ParseMeasure(c1,track,isFirstMeasure)&&(isFirstMeasure=!1)}}},ParseMeasure:function(element,track,isFirstMeasure){if("yes"==element.GetAttribute("implicit")&&0==element.GetElementsByTagName("note").length)return!1;var barIndex=0;if(isFirstMeasure)this._divisionsPerQuarterNote=0,this._trackFirstMeasureNumber=alphaTab_platform_Platform.ParseInt(element.GetAttribute("number")),-2147483648==this._trackFirstMeasureNumber&&(this._trackFirstMeasureNumber=0),barIndex=0;else{if(-2147483648==(barIndex=alphaTab_platform_Platform.ParseInt(element.GetAttribute("number"))))return!1;barIndex-=this._trackFirstMeasureNumber}if(isFirstMeasure){var attributes=element.GetElementsByTagName("attributes");if(attributes.length>0){var stavesElements=attributes[0].GetElementsByTagName("staves");if(stavesElements.length>0){var staves=alphaTab_platform_Platform.ParseInt(stavesElements[0].get_InnerText());track.EnsureStaveCount(staves)}}}for(var bars=system__$FixedArray_FixedArray_$Impl_$._new(track.Staves.length),masterBar=null,b=track.Staves[0].Bars.length;b<=barIndex;){for(var s=0;s<track.Staves.length;){var bar=bars[s]=new alphaTab_model_Bar;if(track.Staves[s].Bars.length>0){var previousBar=track.Staves[s].Bars[track.Staves[s].Bars.length-1];bar.Clef=previousBar.Clef}masterBar=this.GetOrCreateMasterBar(barIndex),track.AddBarToStaff(s,bar);for(var v=0;v<this._maxVoices;){var emptyVoice=new alphaTab_model_Voice;bar.AddVoice(emptyVoice);var emptyBeat=new alphaTab_model_Beat;emptyVoice.AddBeat(emptyBeat),++v}++s}++b}for(var attributesParsed=!1,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"attributes":attributesParsed||(this.ParseAttributes(c1,bars,masterBar),attributesParsed=!0);break;case"barline":this.ParseBarline(c1,masterBar);break;case"direction":this.ParseDirection(c1,masterBar);break;case"forward":this.ParseForward(c1,bars);break;case"harmony":this.ParseHarmony(c1,track);break;case"note":this.ParseNoteBeat(c1,bars)}}}return!0},GetOrCreateBeat:function(element,bars,chord){var voiceIndex=0,voiceNodes=element.GetElementsByTagName("voice");voiceNodes.length>0&&(voiceIndex=alphaTab_platform_Platform.ParseInt(voiceNodes[0].get_InnerText())-1);var previousBeatWasPulled=this._previousBeatWasPulled;this._previousBeatWasPulled=!1;var staffElement=element.GetElementsByTagName("staff"),staff=1;if(staffElement.length>0){staff=alphaTab_platform_Platform.ParseInt(staffElement[0].get_InnerText()),(this._isBeamContinue||previousBeatWasPulled)&&this._previousBeat.Voice.Bar.Staff.Index!=staff-1&&(staff=this._previousBeat.Voice.Bar.Staff.Index+1,this._previousBeatWasPulled=!0);var staffId=Std.string(bars[0].Staff.Track.Index)+"-"+Std.string(staff);this._voiceOfStaff.hasOwnProperty(staffId)||(this._voiceOfStaff[staffId]=voiceIndex),voiceIndex-=this._voiceOfStaff[staffId]}var beat,bar=bars[staff-1],voice=this.GetOrCreateVoice(bar,voiceIndex);return chord||1==voice.Beats.length&&voice.IsEmpty?beat=voice.Beats[voice.Beats.length-1]:((beat=new alphaTab_model_Beat).IsEmpty=!1,voice.AddBeat(beat)),this._isBeamContinue=!1,this._previousBeat=beat,beat},ParseForward:function(element,bars){for(var beat=this.GetOrCreateBeat(element,bars,!1),duration=4*alphaTab_platform_Platform.ParseInt(element.FindChildElement("duration").get_InnerText())/js_Boot.__cast(this._divisionsPerQuarterNote,Float),d=HxOverrides.iter([64,32,16,8,4,2,1]);d.hasNext();){var d1=d.next();if(duration>=d1){beat.Duration=js_Boot.__cast(d1,Int),duration-=d1;break}}beat.IsEmpty=!1},ParseStaffDetails:function(element,track){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"staff-lines":track.Tuning=system__$FixedArray_FixedArray_$Impl_$._new(alphaTab_platform_Platform.ParseInt(c1.get_InnerText()));break;case"staff-tuning":this.ParseStaffTuning(c1,track)}}}this.IsEmptyTuning(track.Tuning)&&(track.Tuning=system__$FixedArray_FixedArray_$Impl_$._new(0))},ParseStaffTuning:function(element,track){for(var line=alphaTab_platform_Platform.ParseInt(element.GetAttribute("line")),tuningStep="C",tuningOctave="",tuningAlter=0,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"tuning-alter":tuningAlter=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"tuning-octave":tuningOctave=c1.get_InnerText();break;case"tuning-step":tuningStep=c1.get_InnerText()}}}track.Tuning[track.Tuning.length-line]=alphaTab_model_TuningParser.GetTuningForText(tuningStep+tuningOctave)+tuningAlter},ParseHarmony:function(element,track){var rootStep=element.FindChildElement("root").FindChildElement("root-step").get_InnerText(),chord=(element.FindChildElement("kind").get_InnerText(),new alphaTab_model_Chord);chord.Name=rootStep,this._currentChord=alphaTab_platform_Platform.NewGuid(),track.Chords[this._currentChord]=chord},ParseBarline:function(element,masterBar){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"ending":this.ParseEnding(c1,masterBar);break;case"repeat":this.ParseRepeat(c1,masterBar)}}}},ParseEnding:function(element,masterBar){var number=alphaTab_platform_Platform.ParseInt(element.GetAttribute("number"));number>0&&(--number,masterBar.AlternateEndings=system_Convert.ToUInt8(masterBar.AlternateEndings|system_Convert.ToUInt8(1<<number)))},ParseRepeat:function(element,masterBar){var direction=element.GetAttribute("direction"),times=alphaTab_platform_Platform.ParseInt(element.GetAttribute("times"));times<0&&(times=2),"backward"==direction?masterBar.RepeatCount=times:"forward"==direction&&(masterBar.IsRepeatStart=!0)},ParseNoteBeat:function(element,bars){var chord=element.GetElementsByTagName("chord").length>0,beat=this.GetOrCreateBeat(element,bars,chord);beat.ChordId=this._currentChord,this._currentChord=null;var note=new alphaTab_model_Note;beat.Voice.IsEmpty=!1,beat.IsEmpty=!1,beat.AddNote(note),beat.Dots=0;for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"accidental":this.ParseAccidental(c1,note);break;case"beam":"continue"==c1.get_InnerText()&&(this._isBeamContinue=!0);break;case"cue":break;case"dot":beat.Dots++;break;case"duration":if(beat.get_IsRest()){switch(alphaTab_platform_Platform.ParseInt(c1.get_InnerText())){case 1:beat.Duration=1;break;case 2:beat.Duration=2;break;case 4:beat.Duration=4;break;case 8:beat.Duration=8;break;case 16:beat.Duration=16;break;case 32:beat.Duration=32;break;case 64:beat.Duration=64;break;default:beat.Duration=4}}break;case"grace":beat.GraceType=2,beat.Duration=32;break;case"instrument":break;case"lyric":this.ParseLyric(c1,beat);break;case"notations":this.ParseNotations(c1,beat,note);break;case"notehead":"yes"==c1.GetAttribute("parentheses")&&(note.IsGhost=!0);break;case"pitch":this.ParsePitch(c1,note);break;case"rest":beat.IsEmpty=!1;beat.Notes=[];break;case"stem":break;case"tie":alphaTab_importer_MusicXmlImporter.ParseTied(c1,note);break;case"time-modification":this.ParseTimeModification(c1,beat);break;case"type":beat.Duration=this.GetDuration(c1.get_InnerText()),0!=beat.GraceType&&beat.Duration<16&&(beat.Duration=8);break;case"unpitched":this.ParseUnpitched(c1,note)}}}if(note.get_IsStringed())for(var i=0;i<beat.Notes.length;){if(beat.Notes[i].String==note.String&&beat.Notes[i]!=note){beat.RemoveNote(note);break}++i}},GetDuration:function(text){switch(text){case"128th":case"256th":case"64th":return 64;case"16th":return 16;case"32nd":return 32;case"breve":case"long":case"whole":return 1;case"eighth":return 8;case"half":return 2;case"quarter":return 4}return 4},ParseLyric:function(element,beat){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){if("text"==c1.LocalName){var s=beat.Text;null!=s&&0!=s.length?beat.Text=beat.Text+" "+c1.get_InnerText():beat.Text=c1.get_InnerText()}}}},ParseAccidental:function(element,note){switch(element.get_InnerText()){case"double-sharp":break;case"flat":note.AccidentalMode=4;break;case"flat-flat":break;case"natural":note.AccidentalMode=2;break;case"natural-flat":case"natural-sharp":case"quarter-flat":case"quarter-sharp":break;case"sharp":note.AccidentalMode=3}},ParseNotations:function(element,beat,note){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"articulations":this.ParseArticulations(c1,note);break;case"dynamics":this.ParseDynamics(c1,beat);break;case"glissando":case"slide":"start"==c1.GetAttribute("type")&&(note.SlideType=1);break;case"ornaments":this.ParseOrnaments(c1,note);break;case"slur":"start"==c1.GetAttribute("type")&&(beat.IsLegatoOrigin=!0);break;case"technical":this.ParseTechnical(c1,note);break;case"tied":alphaTab_importer_MusicXmlImporter.ParseTied(c1,note)}}}},ParseOrnaments:function(element,note){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){if("tremolo"==c1.LocalName){switch(alphaTab_platform_Platform.ParseInt(c1.get_InnerText())){case 1:note.Beat.TremoloSpeed=8;break;case 2:note.Beat.TremoloSpeed=16;break;case 3:note.Beat.TremoloSpeed=32}}}}},ParseTechnical:function(element,note){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"fret":note.Fret=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"string":note.String=alphaTab_platform_Platform.ParseInt(c1.get_InnerText()),-2147483648!=note.String&&(note.String=note.Beat.Voice.Bar.Staff.Track.Tuning.length-note.String+1)}}}-2147483648!=note.String&&-2147483648!=note.Fret||(note.String=-1,note.Fret=-1)},ParseArticulations:function(element,note){for(var c=$iterator(element.ChildNodes)();c.hasNext();){switch(c.next().LocalName){case"accent":note.Accentuated=1;break;case"detached-legato":case"staccato":note.IsStaccato=!0;break;case"strong-accent":note.Accentuated=2}}},ParseDynamics:function(element,beat){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"f":beat.Dynamic=5;break;case"ff":beat.Dynamic=6;break;case"fff":beat.Dynamic=7;break;case"mf":beat.Dynamic=4;break;case"mp":beat.Dynamic=3;break;case"p":beat.Dynamic=2;break;case"pp":beat.Dynamic=1;break;case"ppp":beat.Dynamic=0}}}},ParseTimeModification:function(element,beat){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"actual-notes":beat.TupletNumerator=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"normal-notes":beat.TupletDenominator=alphaTab_platform_Platform.ParseInt(c1.get_InnerText())}}}},ParseUnpitched:function(element,note){for(var step=null,semitones=0,octave=0,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"display-alter":semitones=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"display-octave":octave=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"display-step":step=c1.get_InnerText()}}}var value=12*octave+alphaTab_model_TuningParser.GetToneForText(step)+semitones;note.Octave=value/12|0,note.Tone=value-12*note.Octave},ParsePitch:function(element,note){for(var step=null,semitones=0,octave=0,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"alter":var s=c1.get_InnerText();semitones=parseFloat(s),isNaN(semitones)&&(semitones=0);break;case"octave":octave=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"step":step=c1.get_InnerText()}}}var value=12*octave+alphaTab_model_TuningParser.GetToneForText(step)+system_Convert.ToInt32_Single(semitones);note.Octave=value/12|0,note.Tone=value-12*note.Octave},GetOrCreateVoice:function(bar,index){if(index<bar.Voices.length)return bar.Voices[index];for(var i=bar.Voices.length;i<=index;)bar.AddVoice(new alphaTab_model_Voice),++i;return this._maxVoices=Math.max(this._maxVoices,bar.Voices.length),bar.Voices[index]},ParseDirection:function(element,masterBar){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"direction-type":var directionType=c1.FirstElement;switch(directionType.LocalName){case"metronome":this.ParseMetronome(c1.FirstElement,masterBar);break;case"words":masterBar.Section=new alphaTab_model_Section,masterBar.Section.Text=directionType.get_InnerText()}break;case"sound":var tempo=c1.GetAttribute("tempo");if(null!=tempo&&0!=tempo.length){var tempoAutomation=new alphaTab_model_Automation;tempoAutomation.IsLinear=!0,tempoAutomation.Type=0;var this1=alphaTab_platform_Platform.ParseInt(tempo);tempoAutomation.Value=this1,masterBar.TempoAutomation=tempoAutomation}}}}},ParseMetronome:function(element,masterBar){for(var unit=4,perMinute=120,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"beat-unit":unit=this.GetDuration(c1.get_InnerText());break;case"per-minute":perMinute=alphaTab_platform_Platform.ParseInt(c1.get_InnerText())}}}var tempoAutomation=masterBar.TempoAutomation=new alphaTab_model_Automation;tempoAutomation.Type=0;var this1=perMinute*(unit/4|0);tempoAutomation.Value=this1},ParseAttributes:function(element,bars,masterBar){for(var number,hasTime=!1,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"clef":-2147483648==(number=alphaTab_platform_Platform.ParseInt(c1.GetAttribute("number")))&&(number=1),this.ParseClef(c1,bars[number-1]);break;case"divisions":this._divisionsPerQuarterNote=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"key":this.ParseKey(c1,masterBar);break;case"staff-details":-2147483648==(number=alphaTab_platform_Platform.ParseInt(c1.GetAttribute("number")))&&(number=1),this.ParseStaffDetails(c1,bars[number-1].Staff.Track);break;case"time":this.ParseTime(c1,masterBar),hasTime=!0}}}hasTime||(masterBar.TimeSignatureCommon=!0)},ParseClef:function(element,bar){for(var sign=null,line=0,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"clef-octave-change":switch(alphaTab_platform_Platform.ParseInt(c1.get_InnerText())){case-2:bar.ClefOttavia=4;break;case-1:bar.ClefOttavia=3;break;case 1:bar.ClefOttavia=1;break;case 2:bar.ClefOttavia=4}break;case"line":line=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"sign":sign=c1.get_InnerText()}}}switch(sign){case"C":bar.Clef=3==line?1:2;break;case"F":bar.Clef=3;break;case"G":bar.Clef=4;break;case"percussion":bar.Clef=0;break;default:bar.Clef=4}},ParseTime:function(element,masterBar){"common"==element.GetAttribute("symbol")&&(masterBar.TimeSignatureCommon=!0);for(var beatsParsed=!1,beatTypeParsed=!1,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){var v=c1.get_InnerText();switch(c1.LocalName){case"beat-type":beatTypeParsed||(-1==v.indexOf("+")?masterBar.TimeSignatureDenominator=alphaTab_platform_Platform.ParseInt(v):masterBar.TimeSignatureDenominator=4,beatTypeParsed=!0);break;case"beats":beatsParsed||(-1==v.indexOf("+")?masterBar.TimeSignatureNumerator=alphaTab_platform_Platform.ParseInt(v):masterBar.TimeSignatureNumerator=4,beatsParsed=!0)}}}},ParseKey:function(element,masterBar){for(var fifths=-2147483648,mode=null,c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"fifths":fifths=alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"key-alter":alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"key-step":alphaTab_platform_Platform.ParseInt(c1.get_InnerText());break;case"mode":mode=c1.get_InnerText()}}}masterBar.KeySignature=-7<=fifths&&fifths<=7?fifths:0,masterBar.KeySignatureType="minor"==mode?1:0},GetOrCreateMasterBar:function(index){if(index<this._score.MasterBars.length)return this._score.MasterBars[index];for(var i=this._score.MasterBars.length;i<=index;){var mb=new alphaTab_model_MasterBar;if(this._score.MasterBars.length>0){var prev=this._score.MasterBars[this._score.MasterBars.length-1];mb.TimeSignatureDenominator=prev.TimeSignatureDenominator,mb.TimeSignatureNumerator=prev.TimeSignatureNumerator,mb.KeySignature=prev.KeySignature,mb.KeySignatureType=prev.KeySignatureType}this._score.AddMasterBar(mb),++i}return this._score.MasterBars[index]},ParseIdentification:function(element){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"creator":"composer"==c1.GetAttribute("type")&&(this._score.Words=c1.get_InnerText());break;case"rights":var s=this._score.Copyright;null!=s&&0!=s.length&&(this._score.Copyright=this._score.Copyright+"\n");var tmp=this._score.Copyright+c1.get_InnerText();this._score.Copyright=tmp}}}},ParsePartList:function(element){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){"score-part"==c1.LocalName&&this.ParseScorePart(c1)}}},ParseScorePart:function(element){var id=element.GetAttribute("id"),track=new alphaTab_model_Track(1);this._trackById[id]=track,this._score.AddTrack(track);for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"midi-instrument":this.ParseMidiInstrument(c1,track);break;case"part-abbreviation":track.ShortName=c1.get_InnerText();break;case"part-name":track.Name=c1.get_InnerText()}}}this.IsEmptyTuning(track.Tuning)&&(track.Tuning=system__$FixedArray_FixedArray_$Impl_$._new(0))},IsEmptyTuning:function(tuning){if(null==tuning)return!0;for(var i=0;i<tuning.length;){if(0!=tuning[i])return!1;++i}return!0},ParseMidiInstrument:function(element,track){for(var c=$iterator(element.ChildNodes)();c.hasNext();){var c1=c.next();if(1==c1.NodeType){switch(c1.LocalName){case"midi-channel":var tmp=c1.get_InnerText();track.PlaybackInfo.PrimaryChannel=alphaTab_platform_Platform.ParseInt(tmp);break;case"midi-program":var tmp1=c1.get_InnerText();track.PlaybackInfo.Program=alphaTab_platform_Platform.ParseInt(tmp1);break;case"midi-volume":var tmp2=c1.get_InnerText();track.PlaybackInfo.Volume=alphaTab_platform_Platform.ParseInt(tmp2)}}}},__class__:alphaTab_importer_MusicXmlImporter});var alphaTab_importer_UnsupportedFormatException=function(){alphaTab_AlphaTabException.call(this)};alphaTab_importer_UnsupportedFormatException.__name__=!0,alphaTab_importer_UnsupportedFormatException.__super__=alphaTab_AlphaTabException,alphaTab_importer_UnsupportedFormatException.prototype=$extend(alphaTab_AlphaTabException.prototype,{UnsupportedFormatException:function(message){return null==message&&(message=""),this.AlphaTabException(message),this},__class__:alphaTab_importer_UnsupportedFormatException});var alphaTab_io_BitReader=function(source){this._source=source,this._position=8};alphaTab_io_BitReader.__name__=!0,alphaTab_io_BitReader.prototype={ReadByte:function(){return this.ReadBits(8)},ReadBytes:function(count){for(var bytes=system__$FixedArray_FixedArray_$Impl_$._new(count),i=0;i<count;)bytes[i]=system_Convert.ToUInt8(this.ReadByte()),++i;return bytes},ReadBits:function(count){for(var bits=0,i=count-1;i>=0;)bits|=this.ReadBit()<<i,--i;return bits},ReadBitsReversed:function(count){for(var bits=0,i=0;i<count;)bits|=this.ReadBit()<<i,++i;return bits},ReadBit:function(){if(this._position>=8){if(this._currentByte=this._source.ReadByte(),-1==this._currentByte)throw new js__$Boot_HaxeError((new alphaTab_io_EndOfReaderException).EndOfReaderException());this._position=0}var value=this._currentByte>>8-this._position-1&1;return this._position++,value},ReadAll:function(){var all=alphaTab_io_ByteBuffer.Empty();try{for(;;)all.WriteByte(system_Convert.ToUInt8(this.ReadByte()))}catch(__e){if(__e instanceof js__$Boot_HaxeError&&(__e=__e.val),!js_Boot.__instanceof(__e,alphaTab_io_EndOfReaderException))throw __e}return all.ToArray()},__class__:alphaTab_io_BitReader};var alphaTab_io_IReadable=function(){};alphaTab_io_IReadable.__name__=!0,alphaTab_io_IReadable.prototype={__class__:alphaTab_io_IReadable};var alphaTab_io_IWriteable=function(){};alphaTab_io_IWriteable.__name__=!0,alphaTab_io_IWriteable.prototype={__class__:alphaTab_io_IWriteable};var alphaTab_io_ByteBuffer=function(){};alphaTab_io_ByteBuffer.__name__=!0,alphaTab_io_ByteBuffer.__interfaces__=[alphaTab_io_IReadable,alphaTab_io_IWriteable],alphaTab_io_ByteBuffer.Empty=function(){return alphaTab_io_ByteBuffer.WithCapactiy(0)},alphaTab_io_ByteBuffer.WithCapactiy=function(capacity){var buffer=new alphaTab_io_ByteBuffer;return buffer._buffer=system__$FixedArray_FixedArray_$Impl_$._new(capacity),buffer._capacity=capacity,buffer},alphaTab_io_ByteBuffer.FromBuffer=function(data){var buffer=new alphaTab_io_ByteBuffer;return buffer._buffer=data,buffer._capacity=buffer._length=data.length,buffer},alphaTab_io_ByteBuffer.prototype={get_Length:function(){return this._length},GetBuffer:function(){return this._buffer},Reset:function(){this._position=0},Skip:function(offset){this._position=this._position+offset},SetCapacity:function(value){if(value!=this._capacity){if(value>0){var newBuffer=system__$FixedArray_FixedArray_$Impl_$._new(value);if(this._length>0)for(var src=this._buffer,count=this._length,i=0;i<count;)newBuffer[0+i]=src[0+i],++i;this._buffer=newBuffer}else this._buffer=null;this._capacity=value}},ReadByte:function(){if(this._length-this._position<=0)return-1;return this._buffer[this._position++]},Read:function(buffer,offset,count){var n=this._length-this._position;if(n>count&&(n=count),n<=0)return 0;if(n<=8)for(var byteCount=n;--byteCount>=0;)buffer[offset+byteCount]=this._buffer[this._position+byteCount];else for(var src=this._buffer,srcOffset=this._position,i=0;i<n;)buffer[offset+i]=src[srcOffset+i],++i;return this._position=this._position+n,n},WriteByte:function(value){var buffer=system__$FixedArray_FixedArray_$Impl_$._new(1);buffer[0]=value,this.Write(buffer,0,1)},Write:function(buffer,offset,count){var i=this._position+count;if(i>this._length&&(i>this._capacity&&this.EnsureCapacity(i),this._length=i),count<=8&&buffer!=this._buffer)for(var byteCount=count;--byteCount>=0;)this._buffer[this._position+byteCount]=buffer[offset+byteCount];else for(var dst=this._buffer,dstOffset=this._position,count1=Math.min(count,buffer.length-offset),i1=0;i1<count1;)dst[dstOffset+i1]=buffer[offset+i1],++i1;this._position=i},EnsureCapacity:function(value){if(value>this._capacity){var newCapacity=value;newCapacity<256&&(newCapacity=256),newCapacity<2*this._capacity&&(newCapacity=2*this._capacity),this.SetCapacity(newCapacity)}},ReadAll:function(){return this.ToArray()},ToArray:function(){for(var copy=system__$FixedArray_FixedArray_$Impl_$._new(this._length),src=this._buffer,count=this._length,i=0;i<count;)copy[0+i]=src[0+i],++i;return copy},__class__:alphaTab_io_ByteBuffer};var alphaTab_io_EndOfReaderException=function(){alphaTab_AlphaTabException.call(this)};alphaTab_io_EndOfReaderException.__name__=!0,alphaTab_io_EndOfReaderException.__super__=alphaTab_AlphaTabException,alphaTab_io_EndOfReaderException.prototype=$extend(alphaTab_AlphaTabException.prototype,{EndOfReaderException:function(){return this.AlphaTabException(""),this},__class__:alphaTab_io_EndOfReaderException});var alphaTab_model__$AccentuationType_AccentuationType_$Impl_$={};alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.__name__=!0,alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Normal";case 2:return"Heavy"}return""};var alphaTab_model__$AccidentalType_AccidentalType_$Impl_$={};alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.__name__=!0,alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Natural";case 2:return"Sharp";case 3:return"Flat"}return""};var alphaTab_model_Automation=function(){};alphaTab_model_Automation.__name__=!0,alphaTab_model_Automation.BuildTempoAutomation=function(isLinear,ratioPosition,value,reference){(reference<1||reference>5)&&(reference=2);var automation=new alphaTab_model_Automation;return automation.Type=0,automation.IsLinear=isLinear,automation.RatioPosition=ratioPosition,automation.Value=value*[1,.5,1,1.5,2,3][reference],automation},alphaTab_model_Automation.CopyTo=function(src,dst){dst.IsLinear=src.IsLinear,dst.RatioPosition=src.RatioPosition,dst.Text=src.Text,dst.Type=src.Type,dst.Value=src.Value},alphaTab_model_Automation.prototype={Clone:function(){var a=new alphaTab_model_Automation;return alphaTab_model_Automation.CopyTo(this,a),a},__class__:alphaTab_model_Automation};var alphaTab_model__$AutomationType_AutomationType_$Impl_$={};alphaTab_model__$AutomationType_AutomationType_$Impl_$.__name__=!0,alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AutomationType_AutomationType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$AutomationType_AutomationType_$Impl_$.toString=function(this1){switch(this1){case 0:return"Tempo";case 1:return"Volume";case 2:return"Instrument";case 3:return"Balance"}return""};var alphaTab_model_Bar=function(){this.Id=alphaTab_model_Bar.GlobalBarId++;this.Voices=[],this.Clef=4,this.ClefOttavia=2};alphaTab_model_Bar.__name__=!0,alphaTab_model_Bar.CopyTo=function(src,dst){dst.Id=src.Id,dst.Index=src.Index,dst.Clef=src.Clef,dst.ClefOttavia=src.ClefOttavia},alphaTab_model_Bar.prototype={AddVoice:function(voice){voice.Bar=this,voice.Index=this.Voices.length,this.Voices.push(voice)},get_MasterBar:function(){return this.Staff.Track.Score.MasterBars[this.Index]},get_IsEmpty:function(){for(var i=0,j=this.Voices.length;i<j;){if(!this.Voices[i].IsEmpty)return!1;++i}return!0},Finish:function(){for(var i=0,j=this.Voices.length;i<j;){this.Voices[i].Finish(),++i}},__class__:alphaTab_model_Bar};var alphaTab_model_Beat=function(){this.Id=alphaTab_model_Beat.GlobalBeatId++;this.WhammyBarPoints=[];this.Notes=[],this.BrushType=0,this.Vibrato=0,this.GraceType=0,this.PickStroke=0,this.Duration=4,this.TremoloSpeed=null;this.Automations=[],this.Dots=0,this.Start=0,this.TupletDenominator=-1,this.TupletNumerator=-1,this.Dynamic=5,this.Crescendo=0,this.InvertBeamDirection=!1};alphaTab_model_Beat.__name__=!0,alphaTab_model_Beat.CopyTo=function(src,dst){if(dst.Id=src.Id,dst.Index=src.Index,dst.IsEmpty=src.IsEmpty,dst.Duration=src.Duration,dst.Dots=src.Dots,dst.FadeIn=src.FadeIn,null!=src.Lyrics){dst.Lyrics=system__$FixedArray_FixedArray_$Impl_$._new(src.Lyrics.length);for(var i=0;i<src.Lyrics.length;)dst.Lyrics[i]=src.Lyrics[i],++i}dst.Pop=src.Pop,dst.HasRasgueado=src.HasRasgueado,dst.Slap=src.Slap,dst.Tap=src.Tap,dst.Text=src.Text,dst.BrushType=src.BrushType,dst.BrushDuration=src.BrushDuration,dst.TupletDenominator=src.TupletDenominator,dst.TupletNumerator=src.TupletNumerator,dst.Vibrato=src.Vibrato,dst.ChordId=src.ChordId,dst.GraceType=src.GraceType,dst.PickStroke=src.PickStroke,dst.TremoloSpeed=src.TremoloSpeed,dst.Crescendo=src.Crescendo,dst.Start=src.Start,dst.Dynamic=src.Dynamic,dst.IsLegatoOrigin=src.IsLegatoOrigin,dst.InvertBeamDirection=src.InvertBeamDirection},alphaTab_model_Beat.prototype={get_IsLegatoDestination:function(){return null!=this.PreviousBeat&&this.PreviousBeat.IsLegatoOrigin},get_MinNote:function(){return null==this._minNote&&this.RefreshNotes(),this._minNote},get_MaxNote:function(){return null==this._maxNote&&this.RefreshNotes(),this._maxNote},get_MaxStringNote:function(){return null==this._maxStringNote&&this.RefreshNotes(),this._maxStringNote},get_MinStringNote:function(){return null==this._minStringNote&&this.RefreshNotes(),this._minStringNote},get_IsRest:function(){return 0==this.Notes.length},get_HasTuplet:function(){return(-1!=this.TupletDenominator||-1!=this.TupletNumerator)&&!(1==this.TupletDenominator&&1==this.TupletNumerator)},get_HasWhammyBar:function(){return this.WhammyBarPoints.length>0},get_HasChord:function(){return null!=this.ChordId},get_Chord:function(){return this.Voice.Bar.Staff.Track.Chords[this.ChordId]},get_IsTremolo:function(){return null!=this.TremoloSpeed},get_AbsoluteStart:function(){return this.Voice.Bar.get_MasterBar().Start+this.Start},Clone:function(){for(var beat=new alphaTab_model_Beat,id=beat.Id,i=0,j=this.WhammyBarPoints.length;i<j;)beat.AddWhammyBarPoint(this.WhammyBarPoints[i].Clone()),++i;for(var i1=0,j1=this.Notes.length;i1<j1;)beat.AddNote(this.Notes[i1].Clone()),++i1;alphaTab_model_Beat.CopyTo(this,beat);for(var i2=0,j2=this.Automations.length;i2<j2;)beat.Automations.push(this.Automations[i2].Clone()),++i2;return beat.Id=id,beat},AddWhammyBarPoint:function(point){this.WhammyBarPoints.push(point),(null==this.MaxWhammyPoint||point.Value>this.MaxWhammyPoint.Value)&&(this.MaxWhammyPoint=point)},RemoveWhammyBarPoint:function(index){if(!(index<0||index>=this.WhammyBarPoints.length)){-1!=index&&this.WhammyBarPoints.splice(index,1);if(this.WhammyBarPoints[index]==this.MaxWhammyPoint){this.MaxWhammyPoint=null;for(var currentPoint=$iterator(this.WhammyBarPoints)();currentPoint.hasNext();){var currentPoint1=currentPoint.next();(null==this.MaxWhammyPoint||currentPoint1.Value>this.MaxWhammyPoint.Value)&&(this.MaxWhammyPoint=currentPoint1)}}}},CalculateDuration:function(){var ticks=alphaTab_audio_MidiUtils.ToTicks(this.Duration);return 2==this.Dots?ticks=alphaTab_audio_MidiUtils.ApplyDot(ticks,!0):1==this.Dots&&(ticks=alphaTab_audio_MidiUtils.ApplyDot(ticks,!1)),this.TupletDenominator>0&&this.TupletNumerator>=0&&(ticks=alphaTab_audio_MidiUtils.ApplyTuplet(ticks,this.TupletNumerator,this.TupletDenominator)),ticks},AddNote:function(note){note.Beat=this,note.Index=this.Notes.length,this.Notes.push(note)},RemoveNote:function(note){var index=this.Notes.indexOf(note);index>=0&&-1!=index&&this.Notes.splice(index,1),note!=this._minNote&&note!=this._maxNote&&note!=this._minStringNote&&note!=this._maxStringNote||this.RefreshNotes()},RefreshNotes:function(){for(var i=0,j=this.Notes.length;i<j;){var note=this.Notes[i];(null==this._minNote||note.get_RealValue()<this._minNote.get_RealValue())&&(this._minNote=note),(null==this._maxNote||note.get_RealValue()>this._maxNote.get_RealValue())&&(this._maxNote=note),(null==this._minStringNote||note.String<this._minStringNote.String)&&(this._minStringNote=note),(null==this._maxStringNote||note.String>this._maxStringNote.String)&&(this._maxStringNote=note),++i}},GetAutomation:function(type){for(var i=0,j=this.Automations.length;i<j;){var automation=this.Automations[i];if(automation.Type==type)return automation;++i}return null},GetNoteOnString:function(string){for(var i=0,j=this.Notes.length;i<j;){var note=this.Notes[i];if(note.String==string)return note;++i}return null},Finish:function(){0==this.Index?this.Start=0:this.Start=this.PreviousBeat.Start+this.PreviousBeat.CalculateDuration();for(var i=0,j=this.Notes.length;i<j;)this.Notes[i].Finish(),++i},__class__:alphaTab_model_Beat};var alphaTab_model_BendPoint=function(offset,value){null==value&&(value=0),null==offset&&(offset=0),this.Offset=offset,this.Value=value};alphaTab_model_BendPoint.__name__=!0,alphaTab_model_BendPoint.CopyTo=function(src,dst){dst.Offset=src.Offset,dst.Value=src.Value},alphaTab_model_BendPoint.prototype={Clone:function(){var point=new alphaTab_model_BendPoint(0,0);return alphaTab_model_BendPoint.CopyTo(this,point),point},__class__:alphaTab_model_BendPoint};var alphaTab_model__$BrushType_BrushType_$Impl_$={};alphaTab_model__$BrushType_BrushType_$Impl_$.__name__=!0,alphaTab_model__$BrushType_BrushType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$BrushType_BrushType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$BrushType_BrushType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$BrushType_BrushType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$BrushType_BrushType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$BrushType_BrushType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$BrushType_BrushType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$BrushType_BrushType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$BrushType_BrushType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$BrushType_BrushType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$BrushType_BrushType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$BrushType_BrushType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$BrushType_BrushType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"BrushUp";case 2:return"BrushDown";case 3:return"ArpeggioUp";case 4:return"ArpeggioDown"}return""};var alphaTab_model_Chord=function(){this.Strings=[];this.BarreFrets=[]};alphaTab_model_Chord.__name__=!0,alphaTab_model_Chord.CopyTo=function(src,dst){dst.FirstFret=src.FirstFret,dst.Name=src.Name,dst.Strings=src.Strings.slice(0)},alphaTab_model_Chord.prototype={__class__:alphaTab_model_Chord};var alphaTab_model__$Clef_Clef_$Impl_$={};alphaTab_model__$Clef_Clef_$Impl_$.__name__=!0,alphaTab_model__$Clef_Clef_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$Clef_Clef_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$Clef_Clef_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$Clef_Clef_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$Clef_Clef_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$Clef_Clef_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$Clef_Clef_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Clef_Clef_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$Clef_Clef_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Clef_Clef_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$Clef_Clef_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Clef_Clef_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Clef_Clef_$Impl_$.toString=function(this1){switch(this1){case 0:return"Neutral";case 1:return"C3";case 2:return"C4";case 3:return"F4";case 4:return"G2"}return""};var alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$={};alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.__name__=!0,alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.toString=function(this1){switch(this1){case 0:return"_15ma";case 1:return"_8va";case 2:return"Regular";case 3:return"_8vb";case 4:return"_15mb"}return""};var alphaTab_model__$CrescendoType_CrescendoType_$Impl_$={};alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.__name__=!0,alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Crescendo";case 2:return"Decrescendo"}return""};var alphaTab_model__$Duration_Duration_$Impl_$={};alphaTab_model__$Duration_Duration_$Impl_$.__name__=!0,alphaTab_model__$Duration_Duration_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$Duration_Duration_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$Duration_Duration_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$Duration_Duration_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$Duration_Duration_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$Duration_Duration_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$Duration_Duration_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Duration_Duration_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$Duration_Duration_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Duration_Duration_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$Duration_Duration_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Duration_Duration_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Duration_Duration_$Impl_$.toString=function(this1){switch(this1){case-4:return"QuadrupleWhole";case-2:return"DoubleWhole";case 1:return"Whole";case 2:return"Half";case 4:return"Quarter";case 8:return"Eighth";case 16:return"Sixteenth";case 32:return"ThirtySecond";case 64:return"SixtyFourth";case 128:return"OneHundredTwentyEighth";case 256:return"TwoHundredFiftySixth"}return""};var alphaTab_model__$DynamicValue_DynamicValue_$Impl_$={};alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.__name__=!0,alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.toString=function(this1){switch(this1){case 0:return"PPP";case 1:return"PP";case 2:return"P";case 3:return"MP";case 4:return"MF";case 5:return"F";case 6:return"FF";case 7:return"FFF"}return""};var alphaTab_model__$Fingers_Fingers_$Impl_$={};alphaTab_model__$Fingers_Fingers_$Impl_$.__name__=!0,alphaTab_model__$Fingers_Fingers_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$Fingers_Fingers_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$Fingers_Fingers_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$Fingers_Fingers_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$Fingers_Fingers_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$Fingers_Fingers_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$Fingers_Fingers_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Fingers_Fingers_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$Fingers_Fingers_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Fingers_Fingers_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$Fingers_Fingers_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Fingers_Fingers_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$Fingers_Fingers_$Impl_$.toString=function(this1){switch(this1){case-2:return"Unknown";case-1:return"NoOrDead";case 0:return"Thumb";case 1:return"IndexFinger";case 2:return"MiddleFinger";case 3:return"AnnularFinger";case 4:return"LittleFinger"}return""};var alphaTab_model__$GraceType_GraceType_$Impl_$={};alphaTab_model__$GraceType_GraceType_$Impl_$.__name__=!0,alphaTab_model__$GraceType_GraceType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$GraceType_GraceType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$GraceType_GraceType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$GraceType_GraceType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$GraceType_GraceType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$GraceType_GraceType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$GraceType_GraceType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$GraceType_GraceType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$GraceType_GraceType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$GraceType_GraceType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$GraceType_GraceType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$GraceType_GraceType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$GraceType_GraceType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"OnBeat";case 2:return"BeforeBeat"}return""};var alphaTab_model__$HarmonicType_HarmonicType_$Impl_$={};alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.__name__=!0,alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Natural";case 2:return"Artificial";case 3:return"Pinch";case 4:return"Tap";case 5:return"Semi";case 6:return"Feedback"}return""};var alphaTab_model_JsonConverter=function(){};alphaTab_model_JsonConverter.__name__=!0,alphaTab_model_JsonConverter.prototype={ScoreToJsObject:function(score){var score2={};alphaTab_model_Score.CopyTo(score,score2);score2.MasterBars=[];score2.Tracks=[];for(var i=0;i<score.MasterBars.length;){var masterBar=score.MasterBars[i],masterBar2={};alphaTab_model_MasterBar.CopyTo(masterBar,masterBar2),null!=masterBar.TempoAutomation&&(masterBar2.TempoAutomation={},alphaTab_model_Automation.CopyTo(masterBar.TempoAutomation,masterBar2.TempoAutomation)),null!=masterBar.VolumeAutomation&&(masterBar2.VolumeAutomation={},alphaTab_model_Automation.CopyTo(masterBar.VolumeAutomation,masterBar2.VolumeAutomation)),null!=masterBar.Section&&(masterBar2.Section={},alphaTab_model_Section.CopyTo(masterBar.Section,masterBar2.Section)),score2.MasterBars.push(masterBar2),++i}for(var t=0;t<score.Tracks.length;){var track=score.Tracks[t],track2={};track2.Color={},alphaTab_model_Track.CopyTo(track,track2),track2.PlaybackInfo={},alphaTab_model_PlaybackInformation.CopyTo(track.PlaybackInfo,track2.PlaybackInfo);track2.Chords={};for(var this4=track.Chords,key=$iterator(Object.keys(this4))();key.hasNext();){var key1=key.next(),chord=track.Chords[key1];alphaTab_model_Chord.CopyTo(chord,{}),track2.Chords[key1]=chord}track2.Staves=[];for(var s=0;s<track.Staves.length;){var staff=track.Staves[s],staff2={};staff2.Bars=[];for(var b=0;b<staff.Bars.length;){var bar=staff.Bars[b],bar2={};alphaTab_model_Bar.CopyTo(bar,bar2);bar2.Voices=[];for(var v=0;v<bar.Voices.length;){var voice=bar.Voices[v],voice2={};alphaTab_model_Voice.CopyTo(voice,voice2);voice2.Beats=[];for(var bb=0;bb<voice.Beats.length;){var beat=voice.Beats[bb],beat2={};alphaTab_model_Beat.CopyTo(beat,beat2);beat2.Automations=[];for(var a=0;a<beat.Automations.length;){var automation={};alphaTab_model_Automation.CopyTo(beat.Automations[a],automation),beat2.Automations.push(automation),++a}beat2.WhammyBarPoints=[];for(var i1=0;i1<beat.WhammyBarPoints.length;){var point={};alphaTab_model_BendPoint.CopyTo(beat.WhammyBarPoints[i1],point),beat2.WhammyBarPoints.push(point),++i1}beat2.Notes=[];for(var n=0;n<beat.Notes.length;){var note=beat.Notes[n],note2={};alphaTab_model_Note.CopyTo(note,note2);note2.BendPoints=[];for(var i2=0;i2<note.BendPoints.length;){var point1={};alphaTab_model_BendPoint.CopyTo(note.BendPoints[i2],point1),note2.BendPoints.push(point1),++i2}beat2.Notes.push(note2),++n}voice2.Beats.push(beat2),++bb}bar2.Voices.push(voice2),++v}staff2.Bars.push(bar2),++b}track2.Staves.push(staff2),++s}score2.Tracks.push(track2),++t}return score2},JsObjectToScore:function(score){var score2=new alphaTab_model_Score;alphaTab_model_Score.CopyTo(score,score2);for(var i=0;i<score.MasterBars.length;){var masterBar=score.MasterBars[i],masterBar2=new alphaTab_model_MasterBar;alphaTab_model_MasterBar.CopyTo(masterBar,masterBar2),null!=masterBar.TempoAutomation&&(masterBar2.TempoAutomation=new alphaTab_model_Automation,alphaTab_model_Automation.CopyTo(masterBar.TempoAutomation,masterBar2.TempoAutomation)),null!=masterBar.VolumeAutomation&&(masterBar2.VolumeAutomation=new alphaTab_model_Automation,alphaTab_model_Automation.CopyTo(masterBar.VolumeAutomation,masterBar2.VolumeAutomation)),null!=masterBar.Section&&(masterBar2.Section=new alphaTab_model_Section,alphaTab_model_Section.CopyTo(masterBar.Section,masterBar2.Section)),score2.AddMasterBar(masterBar2),++i}for(var t=0;t<score.Tracks.length;){var track=score.Tracks[t],track2=new alphaTab_model_Track(track.Staves.length);alphaTab_model_Track.CopyTo(track,track2),score2.AddTrack(track2),alphaTab_model_PlaybackInformation.CopyTo(track.PlaybackInfo,track2.PlaybackInfo);for(var this1=track.Chords,key=$iterator(Object.keys(this1))();key.hasNext();){var key1=key.next(),chord=track.Chords[key1],chord2=new alphaTab_model_Chord;alphaTab_model_Chord.CopyTo(chord,chord2),track2.Chords[key1]=chord2}for(var s=0;s<track.Staves.length;){for(var staff=track.Staves[s],b=0;b<staff.Bars.length;){var bar=staff.Bars[b],bar2=new alphaTab_model_Bar;alphaTab_model_Bar.CopyTo(bar,bar2),track2.AddBarToStaff(s,bar2);for(var v=0;v<bar.Voices.length;){var voice=bar.Voices[v],voice2=new alphaTab_model_Voice;alphaTab_model_Voice.CopyTo(voice,voice2),bar2.AddVoice(voice2);for(var bb=0;bb<voice.Beats.length;){var beat=voice.Beats[bb],beat2=new alphaTab_model_Beat;alphaTab_model_Beat.CopyTo(beat,beat2),voice2.AddBeat(beat2);for(var a=0;a<beat.Automations.length;){var automation=new alphaTab_model_Automation;alphaTab_model_Automation.CopyTo(beat.Automations[a],automation),beat2.Automations.push(automation),++a}for(var i1=0;i1<beat.WhammyBarPoints.length;){var point=new alphaTab_model_BendPoint(0,0);alphaTab_model_BendPoint.CopyTo(beat.WhammyBarPoints[i1],point),beat2.WhammyBarPoints.push(point),++i1}for(var n=0;n<beat.Notes.length;){var note=beat.Notes[n],note2=new alphaTab_model_Note;alphaTab_model_Note.CopyTo(note,note2),beat2.AddNote(note2);for(var i2=0;i2<note.BendPoints.length;){var point1=new alphaTab_model_BendPoint(0,0);alphaTab_model_BendPoint.CopyTo(note.BendPoints[i2],point1),note2.AddBendPoint(point1),++i2}++n}++bb}++v}++b}++s}++t}return score2.Finish(),score2},__class__:alphaTab_model_JsonConverter};var alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$={};alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.__name__=!0,alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.toString=function(this1){switch(this1){case 0:return"Major";case 1:return"Minor"}return""};var alphaTab_model_Lyrics=function(){};alphaTab_model_Lyrics.__name__=!0,alphaTab_model_Lyrics.prototype={Finish:function(){var chunks=[];this.Parse(this.Text,0,chunks),this.Chunks=chunks},Parse:function(str,p,chunks){if(null!=str&&0!=str.length){for(var state=1,next=1,skipSpace=!1,start=0;p<str.length;){var c=system_Convert.ToUInt16(HxOverrides.cca(str,p));switch(state){case 0:switch(c){case 9:case 10:case 13:break;case 32:if(!skipSpace){state=next;continue}break;default:skipSpace=!1,state=next;continue}break;case 1:if(91!=c){start=p,state=2;continue}state=3;break;case 2:switch(c){case 10:case 13:case 32:var txt=HxOverrides.substr(str,start,p-start);chunks.push(this.PrepareChunk(txt)),state=0,next=1;break;case 45:state=4}break;case 3:93==c&&(state=1);break;case 4:if(45!=c){var txt1=HxOverrides.substr(str,start,p-start);chunks.push(this.PrepareChunk(txt1)),skipSpace=!0,state=0,next=1;continue}}++p}2==state&&p!=start&&chunks.push(HxOverrides.substr(str,start,p-start))}},PrepareChunk:function(txt){return StringTools.replace(txt,"+"," ")},__class__:alphaTab_model_Lyrics};var alphaTab_model_Lyrics_$LyricsState=function(){};alphaTab_model_Lyrics_$LyricsState.__name__=!0,alphaTab_model_Lyrics_$LyricsState.prototype={__class__:alphaTab_model_Lyrics_$LyricsState};var alphaTab_model_MasterBar=function(){this.TimeSignatureDenominator=4,this.TimeSignatureNumerator=4,this.TripletFeel=0,this.KeySignatureType=0,this.TimeSignatureCommon=!1};alphaTab_model_MasterBar.__name__=!0,alphaTab_model_MasterBar.CopyTo=function(src,dst){dst.AlternateEndings=src.AlternateEndings,dst.Index=src.Index,dst.KeySignature=src.KeySignature,dst.KeySignatureType=src.KeySignatureType,dst.IsDoubleBar=src.IsDoubleBar,dst.IsRepeatStart=src.IsRepeatStart,dst.RepeatCount=src.RepeatCount,dst.TimeSignatureNumerator=src.TimeSignatureNumerator,dst.TimeSignatureDenominator=src.TimeSignatureDenominator,dst.TimeSignatureCommon=src.TimeSignatureCommon,dst.TripletFeel=src.TripletFeel,dst.Start=src.Start},alphaTab_model_MasterBar.prototype={get_IsRepeatEnd:function(){return this.RepeatCount>0},get_IsSectionStart:function(){return null!=this.Section},CalculateDuration:function(){return this.TimeSignatureNumerator*alphaTab_audio_MidiUtils.ValueToTicks(this.TimeSignatureDenominator)},__class__:alphaTab_model_MasterBar};var alphaTab_model_ModelUtils=function(){};alphaTab_model_ModelUtils.__name__=!0,alphaTab_model_ModelUtils.GetIndex=function(duration){if(duration<0)return 0;var this1=duration;return system_Convert.ToInt32_Single(Math.log2(this1))},alphaTab_model_ModelUtils.KeySignatureIsFlat=function(ks){return ks<0},alphaTab_model_ModelUtils.KeySignatureIsNatural=function(ks){return 0==ks},alphaTab_model_ModelUtils.KeySignatureIsSharp=function(ks){return ks>0},alphaTab_model_ModelUtils.ApplyPitchOffsets=function(settings,score){for(var i=0;i<score.Tracks.length;)i<settings.DisplayTranspositionPitches.length&&(score.Tracks[i].DisplayTranspositionPitch=-settings.DisplayTranspositionPitches[i]),i<settings.TranspositionPitches.length&&(score.Tracks[i].TranspositionPitch=-settings.TranspositionPitches[i]),++i};var alphaTab_model_Note=function(){this.Id=alphaTab_model_Note.GlobalNoteId++;this.BendPoints=[],this.Dynamic=5,this.Accentuated=0,this.Fret=-2147483648,this.HarmonicType=0,this.SlideType=0,this.Vibrato=0,this.LeftHandFinger=-2,this.RightHandFinger=-2,this.TrillValue=-1,this.TrillSpeed=32;this.DurationPercent=1,this.Octave=-1,this.Tone=-1,this.Fret=-1,this.String=-1,this.Element=-1,this.Variation=-1};alphaTab_model_Note.__name__=!0,alphaTab_model_Note.GetStringTuning=function(track,noteString){return track.Tuning.length>0?track.Tuning[track.Tuning.length-(noteString-1)-1]:0},alphaTab_model_Note.CopyTo=function(src,dst){dst.Id=src.Id,dst.Accentuated=src.Accentuated,dst.Fret=src.Fret,dst.String=src.String,dst.IsHammerPullOrigin=src.IsHammerPullOrigin,dst.HarmonicValue=src.HarmonicValue,dst.HarmonicType=src.HarmonicType,dst.IsGhost=src.IsGhost,dst.IsLetRing=src.IsLetRing,dst.IsPalmMute=src.IsPalmMute,dst.IsDead=src.IsDead,dst.IsStaccato=src.IsStaccato,dst.SlideType=src.SlideType,dst.Vibrato=src.Vibrato,dst.IsTieDestination=src.IsTieDestination,dst.LeftHandFinger=src.LeftHandFinger,dst.RightHandFinger=src.RightHandFinger,dst.IsFingering=src.IsFingering,dst.TrillValue=src.TrillValue,dst.TrillSpeed=src.TrillSpeed,dst.DurationPercent=src.DurationPercent,dst.AccidentalMode=src.AccidentalMode,dst.Dynamic=src.Dynamic,dst.Octave=src.Octave,dst.Tone=src.Tone,dst.Element=src.Element,dst.Variation=src.Variation},alphaTab_model_Note.NextNoteOnSameLine=function(note){for(var nextBeat=note.Beat.NextBeat;null!=nextBeat&&nextBeat.Voice.Bar.Index<=note.Beat.Voice.Bar.Index+3;){var noteOnString=nextBeat.GetNoteOnString(note.String);if(null!=noteOnString)return noteOnString;nextBeat=nextBeat.NextBeat}return null},alphaTab_model_Note.PreviousNoteOnSameLine=function(note){for(var previousBeat=note.Beat.PreviousBeat;null!=previousBeat&&previousBeat.Voice.Bar.Index>=note.Beat.Voice.Bar.Index-3;){var noteOnString=previousBeat.GetNoteOnString(note.String);if(null!=noteOnString)return noteOnString;previousBeat=previousBeat.PreviousBeat}return null},alphaTab_model_Note.prototype={get_HasBend:function(){return this.BendPoints.length>0},get_IsStringed:function(){return this.Fret>=0&&this.String>=0},get_IsPiano:function(){return!this.get_IsStringed()&&(this.Octave>=0&&this.Tone>=0)},get_IsPercussion:function(){return!this.get_IsStringed()&&(this.Element>=0&&this.Variation>=0)},get_IsHammerPullDestination:function(){return null!=this.HammerPullOrigin},get_IsHarmonic:function(){return 0!=this.HarmonicType},get_TrillFret:function(){return this.TrillValue-this.get_StringTuning()},get_IsTrill:function(){return this.TrillValue>=0},get_StringTuning:function(){return this.Beat.Voice.Bar.Staff.Track.Capo+alphaTab_model_Note.GetStringTuning(this.Beat.Voice.Bar.Staff.Track,this.String)},get_RealValue:function(){return this.get_IsPercussion()?alphaTab_rendering_utils_PercussionMapper.MidiFromElementVariation(this):this.get_IsStringed()?this.Fret+this.get_StringTuning()-this.Beat.Voice.Bar.Staff.Track.TranspositionPitch:this.get_IsPiano()?12*this.Octave+this.Tone-this.Beat.Voice.Bar.Staff.Track.TranspositionPitch:0},Clone:function(){var n=new alphaTab_model_Note;alphaTab_model_Note.CopyTo(this,n);for(var i=0,j=this.BendPoints.length;i<j;)n.AddBendPoint(this.BendPoints[i].Clone()),++i;return n},AddBendPoint:function(point){this.BendPoints.push(point),(null==this.MaxBendPoint||point.Value>this.MaxBendPoint.Value)&&(this.MaxBendPoint=point)},Finish:function(){var _gthis=this,nextNoteOnLine=new alphaTab_util_Lazy(function(){return alphaTab_model_Note.NextNoteOnSameLine(_gthis)}),prevNoteOnLine=new alphaTab_util_Lazy(function(){return alphaTab_model_Note.PreviousNoteOnSameLine(_gthis)});this.IsTieDestination&&(null==prevNoteOnLine.get_Value()?this.IsTieDestination=!1:(this.TieOrigin=prevNoteOnLine.get_Value(),this.TieOrigin.IsTieOrigin=!0,this.TieOrigin.TieDestination=this,this.Fret=this.TieOrigin.Fret,this.Octave=this.TieOrigin.Octave,this.Tone=this.TieOrigin.Tone)),this.IsHammerPullOrigin&&(null==nextNoteOnLine.get_Value()?this.IsHammerPullOrigin=!1:(this.HammerPullDestination=nextNoteOnLine.get_Value(),this.HammerPullDestination.HammerPullOrigin=this)),0!=this.SlideType&&(this.SlideTarget=nextNoteOnLine.get_Value())},__class__:alphaTab_model_Note};var alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$={};alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.__name__=!0,alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.toString=function(this1){switch(this1){case 0:return"Default";case 1:return"SwapAccidentals";case 2:return"ForceNatural";case 3:return"ForceSharp";case 4:return"ForceFlat"}return""};var alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$={};alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.__name__=!0,alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Up";case 2:return"Down"}return""};var alphaTab_model_PlaybackInformation=function(){this.Volume=15,this.Balance=8,this.Port=1};alphaTab_model_PlaybackInformation.__name__=!0,alphaTab_model_PlaybackInformation.CopyTo=function(src,dst){dst.Volume=src.Volume,dst.Balance=src.Balance,dst.Port=src.Port,dst.Program=src.Program,dst.PrimaryChannel=src.PrimaryChannel,dst.SecondaryChannel=src.SecondaryChannel,dst.IsMute=src.IsMute,dst.IsSolo=src.IsSolo},alphaTab_model_PlaybackInformation.prototype={__class__:alphaTab_model_PlaybackInformation};var alphaTab_model_RepeatGroup=function(){this.MasterBars=[];this.Openings=[];this.Closings=[],this.IsClosed=!1};alphaTab_model_RepeatGroup.__name__=!0,alphaTab_model_RepeatGroup.prototype={AddMasterBar:function(masterBar){0==this.Openings.length&&this.Openings.push(masterBar),this.MasterBars.push(masterBar),masterBar.RepeatGroup=this,masterBar.get_IsRepeatEnd()?(this.Closings.push(masterBar),this.IsClosed=!0):this.IsClosed&&(this.IsClosed=!1,this.Openings.push(masterBar))},__class__:alphaTab_model_RepeatGroup};var alphaTab_model_Score=function(){this.MasterBars=[];this.Tracks=[],this._currentRepeatGroup=new alphaTab_model_RepeatGroup,this.Album=this.Artist=this.Copyright=this.Instructions=this.Music=this.Notices=this.SubTitle=this.Title=this.Words=this.Tab=this.TempoLabel="",this.Tempo=120};alphaTab_model_Score.__name__=!0,alphaTab_model_Score.CopyTo=function(src,dst){dst.Album=src.Album,dst.Artist=src.Artist,dst.Copyright=src.Copyright,dst.Instructions=src.Instructions,dst.Music=src.Music,dst.Notices=src.Notices,dst.SubTitle=src.SubTitle,dst.Title=src.Title,dst.Words=src.Words,dst.Tab=src.Tab,dst.Tempo=src.Tempo,dst.TempoLabel=src.TempoLabel},alphaTab_model_Score.prototype={AddMasterBar:function(bar){bar.Score=this,bar.Index=this.MasterBars.length,0!=this.MasterBars.length&&(bar.PreviousMasterBar=this.MasterBars[this.MasterBars.length-1],bar.PreviousMasterBar.NextMasterBar=bar,bar.Start=bar.PreviousMasterBar.Start+bar.PreviousMasterBar.CalculateDuration()),(bar.IsRepeatStart||this._currentRepeatGroup.IsClosed&&bar.AlternateEndings<=0)&&(this._currentRepeatGroup=new alphaTab_model_RepeatGroup),this._currentRepeatGroup.AddMasterBar(bar),this.MasterBars.push(bar)},AddTrack:function(track){track.Score=this,track.Index=this.Tracks.length,this.Tracks.push(track)},Finish:function(){for(var i=0,j=this.Tracks.length;i<j;)this.Tracks[i].Finish(),++i},__class__:alphaTab_model_Score};var alphaTab_model_Section=function(){this.Text=this.Marker=""};alphaTab_model_Section.__name__=!0,alphaTab_model_Section.CopyTo=function(src,dst){dst.Marker=src.Marker,dst.Text=src.Text},alphaTab_model_Section.prototype={__class__:alphaTab_model_Section};var alphaTab_model__$SlideType_SlideType_$Impl_$={};alphaTab_model__$SlideType_SlideType_$Impl_$.__name__=!0,alphaTab_model__$SlideType_SlideType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$SlideType_SlideType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$SlideType_SlideType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$SlideType_SlideType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$SlideType_SlideType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$SlideType_SlideType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$SlideType_SlideType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$SlideType_SlideType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$SlideType_SlideType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$SlideType_SlideType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$SlideType_SlideType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$SlideType_SlideType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$SlideType_SlideType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Shift";case 2:return"Legato";case 3:return"IntoFromBelow";case 4:return"IntoFromAbove";case 5:return"OutUp";case 6:return"OutDown"}return""};var alphaTab_model_Staff=function(){this.Bars=[]};alphaTab_model_Staff.__name__=!0,alphaTab_model_Staff.prototype={Finish:function(){for(var i=0,j=this.Bars.length;i<j;)this.Bars[i].Finish(),++i},__class__:alphaTab_model_Staff};var alphaTab_model_Track=function(staveCount){this.Name="",this.ShortName="",this.Tuning=system__$FixedArray_FixedArray_$Impl_$._new(0);this.Chords={},this.PlaybackInfo=new alphaTab_model_PlaybackInformation,this.Color=new alphaTab_platform_model_Color(200,0,0,255);this.Staves=[],this.EnsureStaveCount(staveCount)};alphaTab_model_Track.__name__=!0,alphaTab_model_Track.CopyTo=function(src,dst){dst.Name=src.Name,dst.Capo=src.Capo,dst.Index=src.Index,dst.ShortName=src.ShortName;var array=src.Tuning;dst.Tuning=new Int32Array(array),dst.Color.Raw=src.Color.Raw,dst.Color.RGBA=src.Color.RGBA,dst.IsPercussion=src.IsPercussion,dst.TranspositionPitch=src.TranspositionPitch,dst.DisplayTranspositionPitch=src.DisplayTranspositionPitch},alphaTab_model_Track.prototype={get_IsStringed:function(){return this.Tuning.length>0},EnsureStaveCount:function(staveCount){for(;this.Staves.length<staveCount;){var staff=new alphaTab_model_Staff;staff.Index=this.Staves.length,staff.Track=this,this.Staves.push(staff)}},AddBarToStaff:function(staffIndex,bar){var staff=this.Staves[staffIndex],bars=staff.Bars;bar.Staff=staff,bar.Index=bars.length,bars.length>0&&(bar.PreviousBar=bars[bars.length-1],bar.PreviousBar.NextBar=bar),bars.push(bar)},Finish:function(){var s=this.ShortName;null!=s&&0!=s.length||(this.ShortName=this.Name,this.ShortName.length>10&&(this.ShortName=HxOverrides.substr(this.ShortName,0,10)));for(var i=0,j=this.Staves.length;i<j;)this.Staves[i].Finish(),++i},ApplyLyrics:function(lyrics){for(var lyric=$iterator(lyrics)();lyric.hasNext();){lyric.next().Finish()}for(var staff=this.Staves[0],li=0;li<lyrics.length;){var lyric2=lyrics[li];if(lyric2.StartBar>=0)for(var beat=staff.Bars[lyric2.StartBar].Voices[0].Beats[0],ci=0;ci<lyric2.Chunks.length&&null!=beat;){for(;null!=beat&&(beat.IsEmpty||beat.get_IsRest());)beat=beat.NextBeat;null!=beat&&(null==beat.Lyrics&&(beat.Lyrics=system__$FixedArray_FixedArray_$Impl_$._new(lyrics.length)),beat.Lyrics[li]=lyric2.Chunks[ci],beat=beat.NextBeat),++ci}++li}},__class__:alphaTab_model_Track};var alphaTab_model__$TripletFeel_TripletFeel_$Impl_$={};alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.__name__=!0,alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.toString=function(this1){switch(this1){case 0:return"NoTripletFeel";case 1:return"Triplet16th";case 2:return"Triplet8th";case 3:return"Dotted16th";case 4:return"Dotted8th";case 5:return"Scottish16th";case 6:return"Scottish8th"}return""};var alphaTab_model_Tuning=function(name,tuning,isStandard){this.IsStandard=isStandard,this.Name=name,this.Tunings=tuning};alphaTab_model_Tuning.__name__=!0,alphaTab_model_Tuning.GetTextForTuning=function(tuning,includeOctave){var result=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"][tuning%12];return includeOctave&&(result+=Std.string((tuning/12|0)-1)),result},alphaTab_model_Tuning.GetDefaultTuningFor=function(stringCount){return alphaTab_model_Tuning._defaultTunings.hasOwnProperty(stringCount)?alphaTab_model_Tuning._defaultTunings[stringCount]:null},alphaTab_model_Tuning.GetPresetsFor=function(stringCount){switch(stringCount){case 4:return alphaTab_model_Tuning._fourStrings;case 5:return alphaTab_model_Tuning._fiveStrings;case 6:return alphaTab_model_Tuning._sixStrings;case 7:return alphaTab_model_Tuning._sevenStrings}return[]},alphaTab_model_Tuning.Initialize=function(){alphaTab_model_Tuning._sevenStrings=[];alphaTab_model_Tuning._sixStrings=[];alphaTab_model_Tuning._fiveStrings=[];alphaTab_model_Tuning._fourStrings=[];alphaTab_model_Tuning._defaultTunings={},alphaTab_model_Tuning._defaultTunings[7]=new alphaTab_model_Tuning("Guitar 7 strings",[64,59,55,50,45,40,35],!0),alphaTab_model_Tuning._sevenStrings.push(alphaTab_model_Tuning._defaultTunings[7]),alphaTab_model_Tuning._defaultTunings[6]=new alphaTab_model_Tuning("Guitar Standard Tuning",[64,59,55,50,45,40],!0),alphaTab_model_Tuning._sixStrings.push(alphaTab_model_Tuning._defaultTunings[6]),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Tune down � step",[63,58,54,49,44,39],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Tune down 1 step",[62,57,53,48,43,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Tune down 2 step",[60,55,51,46,41,36],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Dropped D Tuning",[64,59,55,50,45,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Dropped D Tuning variant",[64,57,55,50,45,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Double Dropped D Tuning",[62,59,55,50,45,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Dropped E Tuning",[66,61,57,52,47,40],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Dropped C Tuning",[62,57,53,48,43,36],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open C Tuning",[64,60,55,48,43,36],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open Cm Tuning",[63,60,55,48,43,36],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open C6 Tuning",[64,57,55,48,43,36],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open Cmaj7 Tuning",[64,59,55,52,43,36],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open D Tuning",[62,57,54,50,45,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open Dm Tuning",[62,57,53,50,45,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open D5 Tuning",[62,57,50,50,45,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open D6 Tuning",[62,59,54,50,45,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open Dsus4 Tuning",[62,57,55,50,45,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open E Tuning",[64,59,56,52,47,40],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open Em Tuning",[64,59,55,52,47,40],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open Esus11 Tuning",[64,59,55,52,45,40],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open F Tuning",[65,60,53,48,45,41],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open G Tuning",[62,59,55,50,43,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open Gm Tuning",[62,58,55,50,43,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open G6 Tuning",[64,59,55,50,43,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open Gsus4 Tuning",[62,60,55,50,43,38],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open A Tuning",[64,61,57,52,45,40],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Open Am Tuning",[64,60,57,52,45,40],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Guitar Nashville Tuning",[64,59,67,62,57,52],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Bass 6 Strings Tuning",[48,43,38,33,28,23],!1)),alphaTab_model_Tuning._sixStrings.push(new alphaTab_model_Tuning("Lute or Vihuela Tuning",[64,59,54,50,45,40],!1)),alphaTab_model_Tuning._defaultTunings[5]=new alphaTab_model_Tuning("Bass 5 Strings Tuning",[43,38,33,28,23],!0),alphaTab_model_Tuning._fiveStrings.push(alphaTab_model_Tuning._defaultTunings[5]),alphaTab_model_Tuning._fiveStrings.push(new alphaTab_model_Tuning("Banjo Dropped C Tuning",[62,59,55,48,67],!1)),alphaTab_model_Tuning._fiveStrings.push(new alphaTab_model_Tuning("Banjo Open D Tuning",[62,57,54,50,69],!1)),alphaTab_model_Tuning._fiveStrings.push(new alphaTab_model_Tuning("Banjo Open G Tuning",[62,59,55,50,67],!1)),alphaTab_model_Tuning._fiveStrings.push(new alphaTab_model_Tuning("Banjo G Minor Tuning",[62,58,55,50,67],!1)),alphaTab_model_Tuning._fiveStrings.push(new alphaTab_model_Tuning("Banjo G Modal Tuning",[62,57,55,50,67],!1)),alphaTab_model_Tuning._defaultTunings[4]=new alphaTab_model_Tuning("Bass Standard Tuning",[43,38,33,28],!0),alphaTab_model_Tuning._fourStrings.push(alphaTab_model_Tuning._defaultTunings[4]),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Bass Tune down � step",[42,37,32,27],!1)),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Bass Tune down 1 step",[41,36,31,26],!1)),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Bass Tune down 2 step",[39,34,29,24],!1)),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Bass Dropped D Tuning",[43,38,33,26],!1)),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Ukulele C Tuning",[45,40,36,43],!1)),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Ukulele G Tuning",[52,47,43,38],!1)),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Mandolin Standard Tuning",[64,57,50,43],!1)),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Mandolin or Violin Tuning",[76,69,62,55],!1)),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Viola Tuning",[69,62,55,48],!1)),alphaTab_model_Tuning._fourStrings.push(new alphaTab_model_Tuning("Cello Tuning",[57,50,43,36],!1))},alphaTab_model_Tuning.FindTuning=function(strings){for(var tunings=alphaTab_model_Tuning.GetPresetsFor(strings.length),t=0,tc=tunings.length;t<tc;){for(var tuning=tunings[t],equals=!0,i=0,j=strings.length;i<j;){if(strings[i]!=tuning.Tunings[i]){equals=!1;break}++i}if(equals)return tuning;++t}return null},alphaTab_model_Tuning.prototype={__class__:alphaTab_model_Tuning};var alphaTab_model_TuningParseResult=function(){};alphaTab_model_TuningParseResult.__name__=!0,alphaTab_model_TuningParseResult.prototype={get_RealValue:function(){return 12*this.Octave+this.NoteValue},__class__:alphaTab_model_TuningParseResult};var alphaTab_model_TuningParser=function(){};alphaTab_model_TuningParser.__name__=!0,alphaTab_model_TuningParser.IsTuning=function(name){return null!=alphaTab_model_TuningParser.Parse(name)},alphaTab_model_TuningParser.Parse=function(name){for(var note="",octave="",i=0;i<name.length;){var c=system_Convert.ToUInt16(HxOverrides.cca(name,i));if(alphaTab_platform_Platform.IsCharNumber(c,!1)){if(null==note||0==note.length)return null;octave+=String.fromCharCode(c)}else{if(!(c>=65&&c<=90||c>=97&&c<=122||35==c))return null;note+=String.fromCharCode(c)}++i}if(null==octave||0==octave.length||null==note||0==note.length)return null;var result=new alphaTab_model_TuningParseResult;return result.Octave=alphaTab_platform_Platform.ParseInt(octave)+1,result.Note=note.toLowerCase(),result.NoteValue=alphaTab_model_TuningParser.GetToneForText(result.Note),result},alphaTab_model_TuningParser.GetTuningForText=function(str){var result=alphaTab_model_TuningParser.Parse(str);return null==result?-1:result.get_RealValue()},alphaTab_model_TuningParser.GetToneForText=function(note){var b;switch(note.toLowerCase()){case"a":b=9;break;case"a#":case"bb":b=10;break;case"ab":case"g#":b=8;break;case"b":b=11;break;case"c":b=0;break;case"c#":case"db":b=1;break;case"d":b=2;break;case"e":b=4;break;case"d#":case"eb":b=3;break;case"f":b=5;break;case"g":b=7;break;case"f#":case"gb":b=6;break;default:return 0}return b};var alphaTab_model__$VibratoType_VibratoType_$Impl_$={};alphaTab_model__$VibratoType_VibratoType_$Impl_$.__name__=!0,alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$VibratoType_VibratoType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_model__$VibratoType_VibratoType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Slight";case 2:return"Wide"}return""};var alphaTab_model_Voice=function(){this.Beats=[],this.IsEmpty=!0};alphaTab_model_Voice.__name__=!0,alphaTab_model_Voice.CopyTo=function(src,dst){dst.Index=src.Index,dst.IsEmpty=src.IsEmpty},alphaTab_model_Voice.prototype={AddBeat:function(beat){beat.Voice=this,beat.Index=this.Beats.length,this.Beats.push(beat),beat.IsEmpty||(this.IsEmpty=!1)},Chain:function(beat){if(null!=this.Bar)if(beat.Index<this.Beats.length-1)beat.NextBeat=this.Beats[beat.Index+1],beat.NextBeat.PreviousBeat=beat;else if(beat.Index==beat.Voice.Beats.length-1&&null!=beat.Voice.Bar.NextBar){var nextVoice=this.Bar.NextBar.Voices[this.Index];nextVoice.Beats.length>0?(beat.NextBeat=nextVoice.Beats[0],beat.NextBeat.PreviousBeat=beat):beat.NextBeat.PreviousBeat=beat}},AddGraceBeat:function(beat){if(0!=this.Beats.length){var lastBeat=this.Beats[this.Beats.length-1],index=this.Beats.length-1;-1!=index&&this.Beats.splice(index,1),this.AddBeat(beat),this.AddBeat(lastBeat),this.IsEmpty=!1}else this.AddBeat(beat)},Finish:function(){for(var i=0,j=this.Beats.length;i<j;){var beat=this.Beats[i];this.Chain(beat),++i}for(var i1=0,j1=this.Beats.length;i1<j1;){this.Beats[i1].Finish(),++i1}},__class__:alphaTab_model_Voice};var alphaTab_platform_javaScript_JsWorker=function(main){this._main=main,this._main.addEventListener("message",$bind(this,this.HandleMessage),!1)};alphaTab_platform_javaScript_JsWorker.__name__=!0,alphaTab_platform_javaScript_JsWorker.Init=function(){$global.document||new alphaTab_platform_javaScript_JsWorker($global)},alphaTab_platform_javaScript_JsWorker.prototype={HandleMessage:function(e){var _gthis=this,data=js_Boot.__cast(e,MessageEvent).data;switch(data?data.cmd:""){case"alphaTab.initialize":var settings=alphaTab_Settings.FromJson(data.settings,null);this._renderer=new alphaTab_rendering_ScoreRenderer(settings),this._renderer.PartialRenderFinished=system__$EventAction1_EventAction1_$Impl_$.add(this._renderer.PartialRenderFinished,function(result){_gthis._main.postMessage({cmd:"alphaTab.partialRenderFinished",result:result})}),this._renderer.RenderFinished=system__$EventAction1_EventAction1_$Impl_$.add(this._renderer.RenderFinished,function(result1){_gthis._main.postMessage({cmd:"alphaTab.renderFinished",result:result1})}),this._renderer.PostRenderFinished=system__$EventAction_EventAction_$Impl_$.add(this._renderer.PostRenderFinished,function(){_gthis._main.postMessage({cmd:"alphaTab.postRenderFinished",boundsLookup:_gthis._renderer.get_BoundsLookup().ToJson()})}),this._renderer.PreRender=system__$EventAction1_EventAction1_$Impl_$.add(this._renderer.PreRender,function(result2){_gthis._main.postMessage({cmd:"alphaTab.preRender",result:result2})}),this._renderer.Error=system__$EventAction2_EventAction2_$Impl_$.add(this._renderer.Error,$bind(this,this.Error));break;case"alphaTab.invalidate":this._renderer.Invalidate();break;case"alphaTab.render":var score=(new alphaTab_model_JsonConverter).JsObjectToScore(data.score);this.RenderMultiple(score,data.trackIndexes);break;case"alphaTab.resize":this._renderer.Resize(data.width);break;case"alphaTab.updateSettings":this.UpdateSettings(data.settings)}},UpdateSettings:function(settings){this._renderer.UpdateSettings(alphaTab_Settings.FromJson(settings,null))},RenderMultiple:function(score,trackIndexes){try{this._renderer.Render(score,trackIndexes)}catch(e){if(e instanceof js__$Boot_HaxeError&&(e=e.val),!js_Boot.__instanceof(e,system_Exception))throw e;this.Error("render",e)}},Error:function(type,e){alphaTab_util_Logger.Error(type,"An unexpected error occurred in worker",e);var error=JSON.parse(JSON.stringify(e)),e2=e;e2.message&&(error.message=e2.message),e2.stack&&(error.stack=e2.stack),e2.constructor&&e2.constructor.name&&(error.type=e2.constructor.name),this._main.postMessage({cmd:"alphaTab.error",error:{type:type,detail:error}})},__class__:alphaTab_platform_javaScript_JsWorker};var alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$={};alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.__name__=!0,alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.toString=function(this1){switch(this1){case 0:return"Plain";case 1:return"Bold";case 2:return"Italic"}return""};var alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$={};alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.__name__=!0,alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.toString=function(this1){switch(this1){case 0:return"Left";case 1:return"Center";case 2:return"Right"}return""};var alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$={};alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.__name__=!0,alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.toString=function(this1){switch(this1){case 0:return"Top";case 1:return"Middle";case 2:return"Bottom"}return""};var alphaTab_platform_svg_FontSizes=function(){};alphaTab_platform_svg_FontSizes.__name__=!0,alphaTab_platform_svg_FontSizes.MeasureString=function(s,f,size,style){var data,dataSize,factor=1;0!=(2&style)&&(factor*=1.2),0!=(1&style)&&(factor*=1.2),0==f?(data=alphaTab_platform_svg_FontSizes.TimesNewRoman,dataSize=11):1==f?(data=alphaTab_platform_svg_FontSizes.Arial11Pt,dataSize=11):(data=[8],dataSize=11);for(var stringSize=0,i=0;i<s.length;){var a=data.length-1,this1=system_Convert.ToUInt16(HxOverrides.cca(s,i)),code=Math.min(a,this1-32);code>=0&&(stringSize+=data[code]*size/dataSize),++i}return stringSize*factor},alphaTab_platform_svg_FontSizes.prototype={__class__:alphaTab_platform_svg_FontSizes};var alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$={};alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.__name__=!0,alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.toString=function(this1){switch(this1){case 0:return"TimesNewRoman";case 1:return"Arial"}return""};var alphaTab_rendering_BarRendererBase=function(renderer,bar){this.Bar=bar,this.ScoreRenderer=renderer,this.Helpers=new alphaTab_rendering_utils_BarHelpers(bar)};alphaTab_rendering_BarRendererBase.__name__=!0,alphaTab_rendering_BarRendererBase.prototype={get_NextRenderer:function(){return null==this.Bar.NextBar?null:this.ScoreRenderer.Layout.GetRendererForBar(this.Staff.get_StaveId(),this.Bar.NextBar)},get_PreviousRenderer:function(){return null==this.Bar.PreviousBar?null:this.ScoreRenderer.Layout.GetRendererForBar(this.Staff.get_StaveId(),this.Bar.PreviousBar)},RegisterOverflowTop:function(topOverflow){topOverflow>this.TopOverflow&&(this.TopOverflow=topOverflow)},RegisterOverflowBottom:function(bottomOverflow){bottomOverflow>this.BottomOverflow&&(this.BottomOverflow=bottomOverflow)},ScaleToWidth:function(width){for(var containerWidth=width-this._preBeatGlyphs.Width-this._postBeatGlyphs.Width,this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next();this._voiceContainers[voice1].ScaleToWidth(containerWidth)}this._postBeatGlyphs.X=this._preBeatGlyphs.X+this._preBeatGlyphs.Width+containerWidth,this.Width=width},get_Resources:function(){return this.ScoreRenderer.RenderingResources},get_Settings:function(){return this.ScoreRenderer.Settings},get_Scale:function(){return this.get_Settings().Scale},get_IsFirstOfLine:function(){return 0==this.Index},get_IsLast:function(){return!!this.Staff.StaveGroup.IsLast&&this.Index==this.Staff.BarRenderers.length-1},RegisterLayoutingInfo:function(){var info=this.LayoutingInfo,preSize=this._preBeatGlyphs.Width;info.PreBeatSize<preSize&&(info.PreBeatSize=preSize);for(var this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next();this._voiceContainers[voice1].RegisterLayoutingInfo(info)}var postSize=this._postBeatGlyphs.Width;info.PostBeatSize<postSize&&(info.PostBeatSize=postSize)},ApplyLayoutingInfo:function(){if(this._appliedLayoutingInfo>=this.LayoutingInfo.Version)return!1;this._appliedLayoutingInfo=this.LayoutingInfo.Version,this._preBeatGlyphs.Width=this.LayoutingInfo.PreBeatSize;for(var voiceEnd=this._preBeatGlyphs.X+this._preBeatGlyphs.Width,this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next(),c=this._voiceContainers[voice1];c.X=this._preBeatGlyphs.X+this._preBeatGlyphs.Width,c.ApplyLayoutingInfo(this.LayoutingInfo);var newEnd=c.X+c.Width;voiceEnd<newEnd&&(voiceEnd=newEnd)}return this._postBeatGlyphs.X=voiceEnd,this._postBeatGlyphs.Width=this.LayoutingInfo.PostBeatSize,this.Width=this._postBeatGlyphs.X+this._postBeatGlyphs.Width,!0},FinalizeRenderer:function(){this.IsFinalized=!0},DoLayout:function(){this._preBeatGlyphs=new alphaTab_rendering_glyphs_LeftToRightLayoutingGlyphGroup,this._preBeatGlyphs.Renderer=this;this._voiceContainers={},this._postBeatGlyphs=new alphaTab_rendering_glyphs_LeftToRightLayoutingGlyphGroup,this._postBeatGlyphs.Renderer=this;for(var i=0;i<this.Bar.Voices.length;){var voice=this.Bar.Voices[i];if(this.HasVoiceContainer(voice)){var c=new alphaTab_rendering_glyphs_VoiceContainerGlyph(0,0,voice);c.Renderer=this,this._voiceContainers[this.Bar.Voices[i].Index]=c}++i}this.CreatePreBeatGlyphs(),this.CreateBeatGlyphs(),this.CreatePostBeatGlyphs(),this.UpdateSizes()},HasVoiceContainer:function(voice){return!voice.IsEmpty||0==voice.Index},UpdateSizes:function(){this.Staff.RegisterStaffTop(this.TopPadding),this.Staff.RegisterStaffBottom(this.Height-this.BottomPadding);for(var voiceContainers=this._voiceContainers,beatGlyphsStart=this.get_BeatGlyphsStart(),postBeatStart=beatGlyphsStart,voice=$iterator(Object.keys(voiceContainers))();voice.hasNext();){var c=voiceContainers[voice.next()];c.X=beatGlyphsStart,c.DoLayout();var x=c.X+c.Width;postBeatStart<x&&(postBeatStart=x)}this._postBeatGlyphs.X=postBeatStart,this.Width=this._postBeatGlyphs.X+this._postBeatGlyphs.Width},AddPreBeatGlyph:function(g){this._preBeatGlyphs.AddGlyph(g)},AddBeatGlyph:function(g){g.Renderer=this,g.PreNotes.Renderer=this,g.OnNotes.Renderer=this,g.OnNotes.BeamingHelper=this.Helpers.BeamHelperLookup[g.Beat.Voice.Index][g.Beat.Index],this.GetOrCreateVoiceContainer(g.Beat.Voice).AddGlyph(g)},GetOrCreateVoiceContainer:function(voice){return this._voiceContainers[voice.Index]},GetBeatContainer:function(beat){return this.GetOrCreateVoiceContainer(beat.Voice).BeatGlyphs[beat.Index]},GetPreNotesGlyphForBeat:function(beat){return this.GetBeatContainer(beat).PreNotes},GetOnNotesGlyphForBeat:function(beat){return this.GetBeatContainer(beat).OnNotes},Paint:function(cx,cy,canvas){this.PaintBackground(cx,cy,canvas),canvas.set_Color(this.get_Resources().MainGlyphColor),this._preBeatGlyphs.Paint(cx+this.X,cy+this.Y,canvas);for(var this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next(),c=this._voiceContainers[voice1];canvas.set_Color(0==c.Voice.Index?this.get_Resources().MainGlyphColor:this.get_Resources().SecondaryGlyphColor),c.Paint(cx+this.X,cy+this.Y,canvas)}canvas.set_Color(this.get_Resources().MainGlyphColor),this._postBeatGlyphs.Paint(cx+this.X,cy+this.Y,canvas)},PaintBackground:function(cx,cy,canvas){},BuildBoundingsLookup:function(masterBarBounds,cx,cy){var barBounds=new alphaTab_rendering_utils_BarBounds;barBounds.Bar=this.Bar,barBounds.VisualBounds=new alphaTab_rendering_utils_Bounds,barBounds.RealBounds=new alphaTab_rendering_utils_Bounds,masterBarBounds.AddBar(barBounds);for(var this1=this._voiceContainers,voice=$iterator(Object.keys(this1))();voice.hasNext();){var voice1=voice.next(),c=this._voiceContainers[voice1];if(!c.Voice.IsEmpty||this.Bar.get_IsEmpty()&&0==voice1)for(var i=0,j=c.BeatGlyphs.length;i<j;){var bc=c.BeatGlyphs[i],beatBoundings=new alphaTab_rendering_utils_BeatBounds;beatBoundings.Beat=bc.Beat,beatBoundings.VisualBounds=new alphaTab_rendering_utils_Bounds,beatBoundings.RealBounds=new alphaTab_rendering_utils_Bounds,barBounds.AddBeat(beatBoundings),++i}}},AddPostBeatGlyph:function(g){this._postBeatGlyphs.AddGlyph(g)},CreatePreBeatGlyphs:function(){this._wasFirstOfLine=this.get_IsFirstOfLine()},CreateBeatGlyphs:function(){},CreatePostBeatGlyphs:function(){this.AddPostBeatGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,5*this.get_Scale()))},get_BeatGlyphsStart:function(){return this._preBeatGlyphs.X+this._preBeatGlyphs.Width},GetNoteX:function(note,onEnd){return null==onEnd&&(onEnd=!0),0},GetBeatX:function(beat,requestedPosition){null==requestedPosition&&(requestedPosition=0);var container=this.GetBeatContainer(beat);if(null!=container)switch(requestedPosition){case 0:return container.VoiceContainer.X+container.X+container.PreNotes.X;case 1:return container.VoiceContainer.X+container.X+container.OnNotes.X;case 2:return container.VoiceContainer.X+container.X+container.OnNotes.X+container.OnNotes.Width;case 3:return container.VoiceContainer.X+container.X+container.Width}return 0},GetNoteY:function(note){return 0},ReLayout:function(){(this._wasFirstOfLine&&!this.get_IsFirstOfLine()||!this._wasFirstOfLine&&this.get_IsFirstOfLine())&&(this._preBeatGlyphs=new alphaTab_rendering_glyphs_LeftToRightLayoutingGlyphGroup,this._preBeatGlyphs.Renderer=this,this.CreatePreBeatGlyphs()),this.UpdateSizes(),this.RegisterLayoutingInfo()},__class__:alphaTab_rendering_BarRendererBase};var alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$={};alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.__name__=!0,alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.toString=function(this1){switch(this1){case 0:return"PreNotes";case 1:return"OnNotes";case 2:return"PostNotes";case 3:return"EndBeat"}return""};var alphaTab_rendering_glyphs_Glyph=function(x,y){this.X=x,this.Y=y};alphaTab_rendering_glyphs_Glyph.__name__=!0,alphaTab_rendering_glyphs_Glyph.prototype={get_Scale:function(){return this.Renderer.get_Scale()},DoLayout:function(){},Paint:function(cx,cy,canvas){},__class__:alphaTab_rendering_glyphs_Glyph};var alphaTab_rendering_EffectBand=function(info){alphaTab_rendering_glyphs_Glyph.call(this,0,0),this.Info=info;this._uniqueEffectGlyphs=[];this._effectGlyphs=[],this.IsEmpty=!0};alphaTab_rendering_EffectBand.__name__=!0,alphaTab_rendering_EffectBand.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_EffectBand.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_Glyph.prototype.DoLayout.call(this);for(var i=0;i<this.Renderer.Bar.Voices.length;){this._effectGlyphs.push({});this._uniqueEffectGlyphs.push([]),++i}},CreateGlyph:function(beat){if(this.Info.ShouldCreateGlyph(beat)&&(!this.Info.get_HideOnMultiTrack()||0==this.Renderer.Staff.TrackIndex)){this.IsEmpty=!1,(null==this.FirstBeat||this.FirstBeat.Index>beat.Index)&&(this.FirstBeat=beat),(null==this.LastBeat||this.LastBeat.Index<beat.Index)&&(this.LastBeat=beat);var glyph=this.CreateOrResizeGlyph(this.Info.get_SizingMode(),beat);glyph.Height>this.Height&&(this.Height=glyph.Height)}},CreateOrResizeGlyph:function(sizing,b){var g;switch(sizing){case 0:case 1:return(g=this.Info.CreateNewGlyph(this.Renderer,b)).Renderer=this.Renderer,g.Beat=b,g.DoLayout(),this._effectGlyphs[b.Voice.Index][b.Index]=g,this._uniqueEffectGlyphs[b.Voice.Index].push(g),g;case 3:if(b.Index>0||this.Renderer.Index>0){var prevBeat=b.PreviousBeat;if(this.Info.ShouldCreateGlyph(prevBeat)){var prevEffect=null;if(b.Index>0&&this._effectGlyphs[b.Voice.Index].hasOwnProperty(prevBeat.Index))prevEffect=this._effectGlyphs[b.Voice.Index][prevBeat.Index];else if(this.Renderer.Index>0){var voiceGlyphs=js_Boot.__cast(this.Renderer.get_PreviousRenderer(),alphaTab_rendering_EffectBarRenderer).BandLookup[this.Info.get_EffectId()]._effectGlyphs[b.Voice.Index];voiceGlyphs.hasOwnProperty(prevBeat.Index)&&(prevEffect=voiceGlyphs[prevBeat.Index])}var newGlyph=this.CreateOrResizeGlyph(1,b);return null!=prevEffect&&this.Info.CanExpand(prevBeat,b)&&(prevEffect.NextGlyph=newGlyph,newGlyph.PreviousGlyph=prevEffect,this.IsLinkedToPrevious=!0),newGlyph}return this.CreateOrResizeGlyph(1,b)}return this.CreateOrResizeGlyph(1,b);case 4:return(g=this.Info.CreateNewGlyph(this.Renderer,b)).Renderer=this.Renderer,g.Beat=b,g.DoLayout(),this._effectGlyphs[b.Voice.Index][b.Index]=g,this._uniqueEffectGlyphs[b.Voice.Index].push(g),g}return null},Paint:function(cx,cy,canvas){alphaTab_rendering_glyphs_Glyph.prototype.Paint.call(this,cx,cy,canvas);for(var i=0,j=this._uniqueEffectGlyphs.length;i<j;){for(var v=this._uniqueEffectGlyphs[i],k=0,l=v.length;k<l;){v[k].Paint(cx+this.X,cy+this.Y,canvas),++k}++i}},AlignGlyphs:function(){for(var v=0;v<this._effectGlyphs.length;){for(var this1=this._effectGlyphs[v],key=$iterator(Object.keys(this1))();key.hasNext();){var key1=key.next();this.AlignGlyph(this.Info.get_SizingMode(),this.Renderer.Bar.Voices[v].Beats[key1])}++v}},AlignGlyph:function(sizing,beat){var pos,g=this._effectGlyphs[beat.Voice.Index][beat.Index],container=this.Renderer.GetBeatContainer(beat);switch(sizing){case 0:pos=container.PreNotes,g.X=this.Renderer.get_BeatGlyphsStart()+pos.X+container.X,g.Width=pos.Width;break;case 1:case 3:pos=container.OnNotes,g.X=this.Renderer.get_BeatGlyphsStart()+pos.X+container.X,g.Width=pos.Width;break;case 4:g.Width=this.Renderer.Width}},__class__:alphaTab_rendering_EffectBand});var alphaTab_rendering_EffectBandSizingInfo=function(){this.Slots=[];this._effectSlot={}};alphaTab_rendering_EffectBandSizingInfo.__name__=!0,alphaTab_rendering_EffectBandSizingInfo.prototype={GetOrCreateSlot:function(band){var this1=this._effectSlot,key=band.Info.get_EffectId();if(this1.hasOwnProperty(key)){var slot=this._effectSlot[band.Info.get_EffectId()];if(slot.CanBeUsed(band))return slot}for(var slot1=$iterator(this.Slots)();slot1.hasNext();){var slot2=slot1.next();if(slot2.CanBeUsed(band))return slot2}var newSlot=new alphaTab_rendering_EffectBandSlot;return this.Slots.push(newSlot),newSlot},CopySlots:function(sizingInfo){for(var slot=$iterator(sizingInfo.Slots)();slot.hasNext();){var slot1=slot.next(),copy=new alphaTab_rendering_EffectBandSlot;copy.Y=slot1.Y,copy.Height=slot1.Height,copy.UniqueEffectId=slot1.UniqueEffectId,this.Slots.push(copy);for(var band=$iterator(slot1.Bands)();band.hasNext();){var band1=band.next();this._effectSlot[band1.Info.get_EffectId()]=copy}}},Register:function(effectBand){var freeSlot=this.GetOrCreateSlot(effectBand);freeSlot.Update(effectBand),this._effectSlot[effectBand.Info.get_EffectId()]=freeSlot},__class__:alphaTab_rendering_EffectBandSizingInfo};var alphaTab_rendering_EffectBandSlot=function(){this.Bands=[]};alphaTab_rendering_EffectBandSlot.__name__=!0,alphaTab_rendering_EffectBandSlot.prototype={Update:function(effectBand){effectBand.Info.get_CanShareBand()||(this.UniqueEffectId=effectBand.Info.get_EffectId()),this.Bands.push(effectBand),effectBand.Height>this.Height&&(this.Height=effectBand.Height),(null==this.FirstBeat||this.FirstBeat.Index>effectBand.FirstBeat.Index)&&(this.FirstBeat=effectBand.FirstBeat),(null==this.LastBeat||this.LastBeat.Index<effectBand.LastBeat.Index)&&(this.LastBeat=effectBand.LastBeat)},CanBeUsed:function(band){return!!(null==this.UniqueEffectId&&band.Info.get_CanShareBand()||band.Info.get_EffectId()==this.UniqueEffectId)&&(null==this.FirstBeat||this.LastBeat.Index<band.FirstBeat.Index||band.LastBeat.Index<this.FirstBeat.Index)},__class__:alphaTab_rendering_EffectBandSlot};var alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$={};alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.__name__=!0,alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.toString=function(this1){switch(this1){case 0:return"SinglePreBeat";case 1:return"SingleOnBeat";case 2:return"GroupedBeforeBeat";case 3:return"GroupedOnBeat";case 4:return"FullBar"}return""};var alphaTab_rendering_EffectBarRenderer=function(renderer,bar,infos){alphaTab_rendering_BarRendererBase.call(this,renderer,bar),this._infos=infos};alphaTab_rendering_EffectBarRenderer.__name__=!0,alphaTab_rendering_EffectBarRenderer.__super__=alphaTab_rendering_BarRendererBase,alphaTab_rendering_EffectBarRenderer.prototype=$extend(alphaTab_rendering_BarRendererBase.prototype,{UpdateSizes:function(){this.TopOverflow=0,this.BottomOverflow=0,this.TopPadding=0,this.BottomPadding=0,this.UpdateHeight(),alphaTab_rendering_BarRendererBase.prototype.UpdateSizes.call(this)},UpdateHeight:function(){if(null!=this.SizingInfo){for(var y=0,slot=$iterator(this.SizingInfo.Slots)();slot.hasNext();){var slot1=slot.next();slot1.Y=y;for(var band=$iterator(slot1.Bands)();band.hasNext();){var band1=band.next();band1.Y=y,band1.Height=slot1.Height}y+=slot1.Height}this.Height=y}},ApplyLayoutingInfo:function(){if(!alphaTab_rendering_BarRendererBase.prototype.ApplyLayoutingInfo.call(this))return!1;if(this.SizingInfo=new alphaTab_rendering_EffectBandSizingInfo,this.Index>0){var previousRenderer=js_Boot.__cast(this.get_PreviousRenderer(),alphaTab_rendering_EffectBarRenderer);this.SizingInfo.CopySlots(previousRenderer.SizingInfo)}for(var effectBand=HxOverrides.iter(this._bands);effectBand.hasNext();){var effectBand1=effectBand.next();effectBand1.AlignGlyphs(),effectBand1.IsEmpty||this.SizingInfo.Register(effectBand1)}return this.UpdateHeight(),!0},ScaleToWidth:function(width){alphaTab_rendering_BarRendererBase.prototype.ScaleToWidth.call(this,width);for(var effectBand=HxOverrides.iter(this._bands);effectBand.hasNext();){effectBand.next().AlignGlyphs()}},CreateBeatGlyphs:function(){this._bands=system__$FixedArray_FixedArray_$Impl_$._new(this._infos.length);this.BandLookup={};for(var i=0;i<this._infos.length;)this._bands[i]=new alphaTab_rendering_EffectBand(this._infos[i]),this._bands[i].Renderer=this,this._bands[i].DoLayout(),this.BandLookup[this._infos[i].get_EffectId()]=this._bands[i],++i;for(var voice=$iterator(this.Bar.Voices)();voice.hasNext();){var voice1=voice.next();this.HasVoiceContainer(voice1)&&this.CreateVoiceGlyphs(voice1)}for(var effectBand=HxOverrides.iter(this._bands);effectBand.hasNext();){effectBand.next().IsLinkedToPrevious&&(this.IsLinkedToPrevious=!0)}},CreateVoiceGlyphs:function(v){for(var b=$iterator(v.Beats)();b.hasNext();){var b1=b.next(),container=new alphaTab_rendering_glyphs_BeatContainerGlyph(b1,this.GetOrCreateVoiceContainer(v));container.PreNotes=new alphaTab_rendering_glyphs_BeatGlyphBase,container.OnNotes=new alphaTab_rendering_glyphs_BeatOnNoteGlyphBase,this.AddBeatGlyph(container);for(var effectBand=HxOverrides.iter(this._bands);effectBand.hasNext();){effectBand.next().CreateGlyph(b1)}}},Paint:function(cx,cy,canvas){this.PaintBackground(cx,cy,canvas),canvas.set_Color(this.get_Resources().MainGlyphColor);for(var effectBand=HxOverrides.iter(this._bands);effectBand.hasNext();){effectBand.next().Paint(cx+this.X,cy+this.Y,canvas)}},__class__:alphaTab_rendering_EffectBarRenderer});var alphaTab_rendering_IScoreRenderer=function(){};alphaTab_rendering_IScoreRenderer.__name__=!0,alphaTab_rendering_IScoreRenderer.prototype={__class__:alphaTab_rendering_IScoreRenderer};var alphaTab_rendering_RenderFinishedEventArgs=function(){};alphaTab_rendering_RenderFinishedEventArgs.__name__=!0,alphaTab_rendering_RenderFinishedEventArgs.prototype={__class__:alphaTab_rendering_RenderFinishedEventArgs};var alphaTab_rendering_RenderingResources=function(scale){this.Init(scale)};alphaTab_rendering_RenderingResources.__name__=!0,alphaTab_rendering_RenderingResources.prototype={Init:function(scale){this.Scale=scale;this.EffectFont=new alphaTab_platform_model_Font("Georgia",12*scale,2),this.CopyrightFont=new alphaTab_platform_model_Font("Arial",12*scale,1),this.TitleFont=new alphaTab_platform_model_Font("Georgia",32*scale,0),this.SubTitleFont=new alphaTab_platform_model_Font("Georgia",20*scale,0),this.WordsFont=new alphaTab_platform_model_Font("Georgia",15*scale,0),this.TablatureFont=new alphaTab_platform_model_Font("Arial",13*scale,0),this.GraceFont=new alphaTab_platform_model_Font("Arial",11*scale,0),this.StaveLineColor=new alphaTab_platform_model_Color(0,0,0,255),this.BarSeperatorColor=new alphaTab_platform_model_Color(34,34,17,255),this.BarNumberFont=new alphaTab_platform_model_Font("Arial",11*scale,0),this.BarNumberColor=new alphaTab_platform_model_Color(200,0,0,255),this.MarkerFont=new alphaTab_platform_model_Font("Georgia",14*scale,1),this.TabClefFont=new alphaTab_platform_model_Font("Arial",18*scale,1),this.ScoreInfoColor=new alphaTab_platform_model_Color(0,0,0,255),this.MainGlyphColor=new alphaTab_platform_model_Color(0,0,0,255),this.SecondaryGlyphColor=new alphaTab_platform_model_Color(0,0,0,100)},__class__:alphaTab_rendering_RenderingResources};var alphaTab_rendering_utils_IBeamYCalculator=function(){};alphaTab_rendering_utils_IBeamYCalculator.__name__=!0,alphaTab_rendering_utils_IBeamYCalculator.prototype={__class__:alphaTab_rendering_utils_IBeamYCalculator};var alphaTab_rendering_ScoreBarRenderer=function(renderer,bar){alphaTab_rendering_BarRendererBase.call(this,renderer,bar),this.AccidentalHelper=new alphaTab_rendering_utils_AccidentalHelper};alphaTab_rendering_ScoreBarRenderer.__name__=!0,alphaTab_rendering_ScoreBarRenderer.__interfaces__=[alphaTab_rendering_utils_IBeamYCalculator],alphaTab_rendering_ScoreBarRenderer.PaintSingleBar=function(canvas,x1,y1,x2,y2,size){canvas.BeginPath(),canvas.MoveTo(x1,y1),canvas.LineTo(x2,y2),canvas.LineTo(x2,y2+size),canvas.LineTo(x1,y1+size),canvas.ClosePath(),canvas.Fill()},alphaTab_rendering_ScoreBarRenderer.__super__=alphaTab_rendering_BarRendererBase,alphaTab_rendering_ScoreBarRenderer.prototype=$extend(alphaTab_rendering_BarRendererBase.prototype,{GetBeatDirection:function(beat){var g=js_Boot.__cast(this.GetOnNotesGlyphForBeat(beat),alphaTab_rendering_glyphs_ScoreBeatGlyph);return null!=g?g.NoteHeads.get_Direction():0},GetNoteX:function(note,onEnd){null==onEnd&&(onEnd=!0);var g=js_Boot.__cast(this.GetOnNotesGlyphForBeat(note.Beat),alphaTab_rendering_glyphs_ScoreBeatGlyph);if(null!=g){var x=g.Container.VoiceContainer.X+g.Container.X+g.X;return onEnd&&(x+=g.Width),x}return 0},GetNoteY:function(note){var beat=js_Boot.__cast(this.GetOnNotesGlyphForBeat(note.Beat),alphaTab_rendering_glyphs_ScoreBeatGlyph);return null!=beat?beat.NoteHeads.GetNoteY(note):0},get_LineOffset:function(){return 9*this.get_Scale()},UpdateSizes:function(){var res=this.get_Resources(),glyphOverflow=res.TablatureFont.Size/2+.2*res.TablatureFont.Size;this.TopPadding=glyphOverflow,this.BottomPadding=glyphOverflow,this.Height=4*this.get_LineOffset()+this.TopPadding+this.BottomPadding,alphaTab_rendering_BarRendererBase.prototype.UpdateSizes.call(this)},DoLayout:function(){alphaTab_rendering_BarRendererBase.prototype.DoLayout.call(this);for(var top=this.GetScoreY(0,0),bottom=this.GetScoreY(8,0),i=0,j=this.Helpers.BeamHelpers.length;i<j;){for(var v=this.Helpers.BeamHelpers[i],k=0,l=v.length;k<l;){var h=v[k],this1=this.GetNoteLine(h.MaxNote),maxNoteY=this.GetScoreY(this1,0);if(0==h.Direction&&(maxNoteY-=this.GetStemSize(h),maxNoteY-=h.FingeringCount*this.get_Resources().GraceFont.Size,h.HasTuplet&&(maxNoteY-=2*this.get_Resources().EffectFont.Size)),h.HasTuplet){maxNoteY-=1.5*this.get_Resources().EffectFont.Size}maxNoteY<top&&this.RegisterOverflowTop(Math.abs(maxNoteY));var this3=this.GetNoteLine(h.MinNote),minNoteY=this.GetScoreY(this3,0);1==h.Direction&&(minNoteY+=this.GetStemSize(h),minNoteY+=h.FingeringCount*this.get_Resources().GraceFont.Size),minNoteY>bottom&&this.RegisterOverflowBottom(Math.abs(minNoteY)-bottom),++k}++i}},Paint:function(cx,cy,canvas){alphaTab_rendering_BarRendererBase.prototype.Paint.call(this,cx,cy,canvas),this.PaintBeams(cx,cy,canvas),this.PaintTuplets(cx,cy,canvas)},PaintTuplets:function(cx,cy,canvas){for(var i=0,j=this.Helpers.TupletHelpers.length;i<j;){for(var v=this.Helpers.TupletHelpers[i],k=0,l=v.length;k<l;){var h=v[k];this.PaintTupletHelper(cx+this.get_BeatGlyphsStart(),cy,canvas,h),++k}++i}},PaintBeams:function(cx,cy,canvas){for(var i=0,j=this.Helpers.BeamHelpers.length;i<j;){for(var v=this.Helpers.BeamHelpers[i],k=0,l=v.length;k<l;){var h=v[k];this.PaintBeamHelper(cx+this.get_BeatGlyphsStart(),cy,canvas,h),++k}++i}},PaintBeamHelper:function(cx,cy,canvas,h){canvas.set_Color(0==h.Voice.Index?this.get_Resources().MainGlyphColor:this.get_Resources().SecondaryGlyphColor),1==h.Beats.length?this.PaintFooter(cx,cy,canvas,h):this.PaintBar(cx,cy,canvas,h)},PaintTupletHelper:function(cx,cy,canvas,h){var res=this.get_Resources(),oldAlign=canvas.get_TextAlign();if(canvas.set_TextAlign(1),1!=h.Beats.length&&h.get_IsFull()){var firstBeat=h.Beats[0],lastBeat=h.Beats[h.Beats.length-1],firstBeamingHelper=this.Helpers.BeamHelperLookup[h.VoiceIndex][firstBeat.Index],lastBeamingHelper=this.Helpers.BeamHelperLookup[h.VoiceIndex][lastBeat.Index];if(null!=firstBeamingHelper&&null!=lastBeamingHelper){var direction1=firstBeamingHelper.Direction,startX=firstBeamingHelper.GetBeatLineX(firstBeat)+this.get_Scale(),endX=lastBeamingHelper.GetBeatLineX(lastBeat)+this.get_Scale();canvas.set_Font(res.EffectFont);var s=Std.string(h.Tuplet),sw=canvas.MeasureText(s),sp=3*this.get_Scale(),middleX=(startX+endX)/2,offset1X=middleX-sw/2-sp,offset2X=middleX+sw/2+sp,startY=this.CalculateBeamYWithDirection(firstBeamingHelper,startX,firstBeamingHelper.Direction),endY=this.CalculateBeamYWithDirection(lastBeamingHelper,endX,firstBeamingHelper.Direction),k=(endY-startY)/(endX-startX),d=startY-k*startX,offset1Y=k*offset1X+d,middleY=k*middleX+d,offset2Y=k*offset2X+d,offset1=10*this.get_Scale(),size=5*this.get_Scale();1==direction1&&(offset1*=-1,size*=-1),canvas.BeginPath();var tmp=cx+this.X+startX,this2=system_Convert.ToInt32_Single(cy+this.Y+startY-offset1);canvas.MoveTo(tmp,this2);var tmp1=cx+this.X+startX,this3=system_Convert.ToInt32_Single(cy+this.Y+startY-offset1-size);canvas.LineTo(tmp1,this3);var tmp2=cx+this.X+offset1X,this4=system_Convert.ToInt32_Single(cy+this.Y+offset1Y-offset1-size);canvas.LineTo(tmp2,this4),canvas.Stroke(),canvas.BeginPath();var tmp3=cx+this.X+offset2X,this5=system_Convert.ToInt32_Single(cy+this.Y+offset2Y-offset1-size);canvas.MoveTo(tmp3,this5);var tmp4=cx+this.X+endX,this6=system_Convert.ToInt32_Single(cy+this.Y+endY-offset1-size);canvas.LineTo(tmp4,this6);var tmp5=cx+this.X+endX,this7=system_Convert.ToInt32_Single(cy+this.Y+endY-offset1);canvas.LineTo(tmp5,this7),canvas.Stroke(),canvas.FillText(s,cx+this.X+middleX,cy+this.Y+middleY-offset1-size-res.EffectFont.Size)}}else for(var i=0,j=h.Beats.length;i<j;){var beat=h.Beats[i],beamingHelper=this.Helpers.BeamHelperLookup[h.VoiceIndex][beat.Index];if(null!=beamingHelper){var offset,direction=beamingHelper.Direction,tupletX=beamingHelper.GetBeatLineX(beat)+this.get_Scale(),tupletY=cy+this.Y+this.CalculateBeamY(beamingHelper,tupletX);if(0==direction){offset=1.8*res.EffectFont.Size}else offset=-3*this.get_Scale();canvas.set_Font(res.EffectFont),canvas.FillText(Std.string(h.Tuplet),cx+this.X+tupletX,tupletY-offset),++i}}canvas.set_TextAlign(oldAlign)},GetStemSize:function(helper){return 1==helper.Beats.length?this.GetFooterStemSize(helper.ShortestDuration):this.GetBarStemSize(helper.ShortestDuration)},GetBarStemSize:function(duration){var size;switch(duration){case-4:case 2:case 4:case 8:case 16:size=6;break;case 32:case 64:size=7;break;case 128:size=9;break;case 256:size=10;break;default:size=0}var this1=size;return this.GetScoreY(this1,0)},GetFooterStemSize:function(duration){var size;switch(duration){case-4:case 2:case 4:case 8:case 16:case 32:case 64:case 128:case 256:size=6;break;default:size=0}var this1=size;return this.GetScoreY(this1,0)},GetYPositionForNote:function(note){var this1=this.GetNoteLine(note);return this.GetScoreY(this1,0)},CalculateBeamY:function(h,x){var stemSize=this.GetStemSize(h);return h.CalculateBeamY(stemSize,this.get_Scale(),x,this.get_Scale(),this)},CalculateBeamYWithDirection:function(h,x,direction){var stemSize=this.GetStemSize(h);return h.CalculateBeamYWithDirection(stemSize,this.get_Scale(),x,this.get_Scale(),this,direction)},PaintBar:function(cx,cy,canvas,h){for(var i=0,j=h.Beats.length;i<j;){var y11,beat=h.Beats[i],scaleMod=0!=beat.GraceType?.75:1,beatLineX=h.GetBeatLineX(beat)+this.get_Scale(),direction=h.Direction,y1=cy+this.Y;if(0==direction){var this1=this.GetNoteLine(beat.get_MinNote());y11=this.GetScoreY(this1,0)}else{var this2=this.GetNoteLine(beat.get_MaxNote());y11=this.GetScoreY(this2,0)}y1+=y11;var y2=cy+this.Y;y2+=scaleMod*this.CalculateBeamY(h,beatLineX);canvas.set_LineWidth(1.5*this.get_Scale()),canvas.BeginPath(),canvas.MoveTo(cx+this.X+beatLineX,y1),canvas.LineTo(cx+this.X+beatLineX,y2),canvas.Stroke(),canvas.set_LineWidth(this.get_Scale());var fingeringY=y2;if(1==direction){fingeringY+=2*canvas.get_Font().Size}else if(0!=i){fingeringY-=1.5*canvas.get_Font().Size}this.PaintFingering(canvas,beat,cx+this.X+beatLineX,direction,fingeringY);var brokenBarOffset=6*this.get_Scale()*scaleMod,barSpacing=7*this.get_Scale()*scaleMod,barSize=4*this.get_Scale()*scaleMod,barCount=alphaTab_model_ModelUtils.GetIndex(beat.Duration)-2,barStart=cy+this.Y;1==direction&&(barSpacing=-barSpacing,barSize=-barSize);for(var barIndex=0;barIndex<barCount;){var barStartX,barEndX,barStartY,barEndY,barY=barStart+barIndex*barSpacing;if(i<h.Beats.length-1){if(alphaTab_rendering_utils_BeamingHelper.IsFullBarJoin(beat,h.Beats[i+1],barIndex))barStartX=beatLineX,barEndX=h.GetBeatLineX(h.Beats[i+1])+this.get_Scale();else{if(0!=i&&alphaTab_rendering_utils_BeamingHelper.IsFullBarJoin(h.Beats[i-1],beat,barIndex))continue;barEndX=(barStartX=beatLineX)+brokenBarOffset}barStartY=barY+this.CalculateBeamY(h,barStartX)*scaleMod,barEndY=barY+this.CalculateBeamY(h,barEndX)*scaleMod,alphaTab_rendering_ScoreBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize)}else i>0&&!alphaTab_rendering_utils_BeamingHelper.IsFullBarJoin(beat,h.Beats[i-1],barIndex)&&(barStartX=beatLineX-brokenBarOffset,barEndX=beatLineX,barStartY=barY+this.CalculateBeamY(h,barStartX)*scaleMod,barEndY=barY+this.CalculateBeamY(h,barEndX)*scaleMod,alphaTab_rendering_ScoreBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize));++barIndex}++i}},PaintFooter:function(cx,cy,canvas,h){var beamY,fingeringY,beat=h.Beats[0],isGrace=0!=beat.GraceType,scaleMod=isGrace?.75:1,stemSize=this.GetFooterStemSize(h.ShortestDuration),beatLineX=h.GetBeatLineX(beat)+this.get_Scale(),direction=h.Direction,this1=this.GetNoteLine(beat.get_MaxNote()),topY=this.GetScoreY(this1,0),this2=this.GetNoteLine(beat.get_MinNote()),bottomY=this.GetScoreY(this2,0);if(1==direction?(beamY=bottomY+=stemSize*scaleMod,fingeringY=cy+this.Y+bottomY):(beamY=topY-=stemSize*scaleMod,fingeringY=cy+this.Y+topY),this.PaintFingering(canvas,beat,cx+this.X+beatLineX,direction,fingeringY),1!=beat.Duration&&-2!=beat.Duration&&-4!=beat.Duration){if(canvas.set_LineWidth(1.5*this.get_Scale()),canvas.BeginPath(),canvas.MoveTo(cx+this.X+beatLineX,cy+this.Y+topY),canvas.LineTo(cx+this.X+beatLineX,cy+this.Y+bottomY),canvas.Stroke(),canvas.set_LineWidth(this.get_Scale()),isGrace){var graceSizeY=15*this.get_Scale(),graceSizeX=12*this.get_Scale();canvas.BeginPath(),1==direction?(canvas.MoveTo(cx+this.X+beatLineX-graceSizeX/2,cy+this.Y+bottomY-graceSizeY),canvas.LineTo(cx+this.X+beatLineX+graceSizeX/2,cy+this.Y+bottomY)):(canvas.MoveTo(cx+this.X+beatLineX-graceSizeX/2,cy+this.Y+topY+graceSizeY),canvas.LineTo(cx+this.X+beatLineX+graceSizeX/2,cy+this.Y+topY)),canvas.Stroke()}if(beat.Duration>4){var glyph=new alphaTab_rendering_glyphs_BeamGlyph(beatLineX-this.get_Scale()/2,beamY,beat.Duration,direction,isGrace);glyph.Renderer=this,glyph.DoLayout(),glyph.Paint(cx+this.X,cy+this.Y,canvas)}}},PaintFingering:function(canvas,beat,beatLineX,direction,topY){0==direction?beatLineX-=10*this.get_Scale():beatLineX+=3*this.get_Scale();var noteList=beat.Notes.slice(0);noteList.sort(function(a1,b1){return b=b1,a1.get_RealValue()-b.get_RealValue();var b});for(var n=0;n<noteList.length;){var note=noteList[n],text=null;-2!=note.LeftHandFinger?text=this.FingerToString(beat,note.LeftHandFinger,!0):-2!=note.RightHandFinger&&(text=this.FingerToString(beat,note.RightHandFinger,!1)),null!=text&&(canvas.FillText(text,beatLineX,topY),topY-=system_Convert.ToInt32_Single(canvas.get_Font().Size),++n)}},FingerToString:function(beat,finger,leftHand){if(this.get_Settings().ForcePianoFingering||alphaTab_audio_GeneralMidi.IsPiano(beat.Voice.Bar.Staff.Track.PlaybackInfo.Program))switch(finger){case-2:case-1:return null;case 0:return"1";case 1:return"2";case 2:return"3";case 3:return"4";case 4:return"5";default:return null}else if(leftHand)switch(finger){case-2:case-1:return"0";case 0:return"T";case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";default:return null}else switch(finger){case-2:case-1:return null;case 0:return"p";case 1:return"i";case 2:return"m";case 3:return"a";case 4:return"c";default:return null}},CreatePreBeatGlyphs:function(){if(alphaTab_rendering_BarRendererBase.prototype.CreatePreBeatGlyphs.call(this),this.Bar.get_MasterBar().IsRepeatStart&&this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_RepeatOpenGlyph(0,0,1.5,3)),this.get_IsFirstOfLine()||this.Bar.Clef!=this.Bar.PreviousBar.Clef||this.Bar.ClefOttavia!=this.Bar.PreviousBar.ClefOttavia){var offset=0,correction=0;switch(this.Bar.Clef){case 0:case 1:offset=6;break;case 2:offset=4;break;case 3:offset=4,correction=-1;break;case 4:offset=8}this.CreateStartSpacing();var this1=offset,this2=correction;this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_ClefGlyph(0,this.GetScoreY(this1,this2),this.Bar.Clef,this.Bar.ClefOttavia))}(0==this.Index&&0!=this.Bar.get_MasterBar().KeySignature||null!=this.Bar.PreviousBar&&this.Bar.get_MasterBar().KeySignature!=this.Bar.PreviousBar.get_MasterBar().KeySignature)&&(this.CreateStartSpacing(),this.CreateKeySignatureGlyphs()),(null==this.Bar.PreviousBar||null!=this.Bar.PreviousBar&&this.Bar.get_MasterBar().TimeSignatureNumerator!=this.Bar.PreviousBar.get_MasterBar().TimeSignatureNumerator||null!=this.Bar.PreviousBar&&this.Bar.get_MasterBar().TimeSignatureDenominator!=this.Bar.PreviousBar.get_MasterBar().TimeSignatureDenominator)&&(this.CreateStartSpacing(),this.CreateTimeSignatureGlyphs()),this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_BarNumberGlyph(0,this.GetScoreY(-.5,0),this.Bar.Index+1)),this.Bar.get_IsEmpty()&&this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,30*this.get_Scale()))},CreateBeatGlyphs:function(){for(var v=0;v<this.Bar.Voices.length;){var voice=this.Bar.Voices[v];this.HasVoiceContainer(voice)&&this.CreateVoiceGlyphs(voice),++v}},CreatePostBeatGlyphs:function(){alphaTab_rendering_BarRendererBase.prototype.CreatePostBeatGlyphs.call(this),this.Bar.get_MasterBar().get_IsRepeatEnd()?(this.AddPostBeatGlyph(new alphaTab_rendering_glyphs_RepeatCloseGlyph(this.X,0)),this.Bar.get_MasterBar().RepeatCount>2&&this.AddPostBeatGlyph(new alphaTab_rendering_glyphs_RepeatCountGlyph(0,this.GetScoreY(-1,-3),this.Bar.get_MasterBar().RepeatCount))):null!=this.Bar.NextBar&&this.Bar.NextBar.get_MasterBar().IsRepeatStart||this.AddPostBeatGlyph(new alphaTab_rendering_glyphs_BarSeperatorGlyph(0,0))},CreateStartSpacing:function(){this._startSpacing||(this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,2*this.get_Scale())),this._startSpacing=!0)},CreateKeySignatureGlyphs:function(){var offsetClef=0,currentKey=this.Bar.get_MasterBar().KeySignature,previousKey=null==this.Bar.PreviousBar?0:this.Bar.PreviousBar.get_MasterBar().KeySignature;switch(this.Bar.Clef){case 0:offsetClef=0;break;case 1:offsetClef=-1;break;case 2:offsetClef=1;break;case 3:offsetClef=2;break;case 4:offsetClef=1}var newLines={},newGlyphs=[];if(alphaTab_model_ModelUtils.KeySignatureIsSharp(currentKey))for(var i=0;i<Math.abs(currentKey);){var step=alphaTab_rendering_ScoreBarRenderer.SharpKsSteps[i]+offsetClef,this3=step;newGlyphs.push(new alphaTab_rendering_glyphs_SharpGlyph(0,this.GetScoreY(this3,0),!1)),newLines[step]=!0,++i}else for(var i1=0;i1<Math.abs(currentKey);){var step1=alphaTab_rendering_ScoreBarRenderer.FlatKsSteps[i1]+offsetClef,this4=step1;newGlyphs.push(new alphaTab_rendering_glyphs_FlatGlyph(0,this.GetScoreY(this4,0),!1)),newLines[step1]=!0,++i1}for(var naturalizeSymbols=Math.abs(previousKey),previousKeyPositions=alphaTab_model_ModelUtils.KeySignatureIsSharp(previousKey)?alphaTab_rendering_ScoreBarRenderer.SharpKsSteps:alphaTab_rendering_ScoreBarRenderer.FlatKsSteps,i2=0;i2<naturalizeSymbols;){var step2=previousKeyPositions[i2]+offsetClef;if(!newLines.hasOwnProperty(step2)){var this5=previousKeyPositions[i2]+offsetClef;this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_NaturalizeGlyph(0,this.GetScoreY(this5,0),!1))}++i2}for(var newGlyph=$iterator(newGlyphs)();newGlyph.hasNext();){var newGlyph1=newGlyph.next();this.AddPreBeatGlyph(newGlyph1)}},CreateTimeSignatureGlyphs:function(){this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,5*this.get_Scale())),this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_ScoreTimeSignatureGlyph(0,this.GetScoreY(2,0),this.Bar.get_MasterBar().TimeSignatureNumerator,this.Bar.get_MasterBar().TimeSignatureDenominator,this.Bar.get_MasterBar().TimeSignatureCommon))},CreateVoiceGlyphs:function(v){for(var i=0,j=v.Beats.length;i<j;){var b=v.Beats[i],container=new alphaTab_rendering_ScoreBeatContainerGlyph(b,this.GetOrCreateVoiceContainer(v));container.PreNotes=new alphaTab_rendering_glyphs_ScoreBeatPreNotesGlyph,container.OnNotes=new alphaTab_rendering_glyphs_ScoreBeatGlyph,this.AddBeatGlyph(container),++i}},GetNoteLine:function(n){return this.AccidentalHelper.GetNoteLine(n)},GetScoreY:function(steps,correction){return null==correction&&(correction=0),this.get_LineOffset()/2*steps+correction*this.get_Scale()},PaintBackground:function(cx,cy,canvas){alphaTab_rendering_BarRendererBase.prototype.PaintBackground.call(this,cx,cy,canvas);var res=this.get_Resources();canvas.set_Color(res.StaveLineColor);for(var lineY=cy+this.Y+this.TopPadding,lineOffset=this.get_LineOffset(),i=0;i<5;){i>0&&(lineY+=lineOffset);var tmp=cx+this.X,this1=system_Convert.ToInt32_Single(lineY);canvas.FillRect(tmp,this1,this.Width,this.get_Scale()),++i}canvas.set_Color(res.MainGlyphColor)},__class__:alphaTab_rendering_ScoreBarRenderer});var alphaTab_rendering_glyphs_BeatContainerGlyph=function(beat,voiceContainer){alphaTab_rendering_glyphs_Glyph.call(this,0,0),this.Beat=beat;this.Ties=[],this.VoiceContainer=voiceContainer};alphaTab_rendering_glyphs_BeatContainerGlyph.__name__=!0,alphaTab_rendering_glyphs_BeatContainerGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_BeatContainerGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{RegisterLayoutingInfo:function(layoutings){var preBeatStretch=this.PreNotes.Width+this.OnNotes.Width/2;layoutings.AddBeatSpring(this.Beat,this.MinWidth,preBeatStretch),layoutings.SetPreBeatSize(this.Beat,this.PreNotes.Width),layoutings.SetOnBeatSize(this.Beat,this.OnNotes.Width)},ApplyLayoutingInfo:function(info){this.PreNotes.Width=info.GetPreBeatSize(this.Beat),this.OnNotes.Width=info.GetOnBeatSize(this.Beat),this.OnNotes.X=this.PreNotes.X+this.PreNotes.Width,this.OnTimeX=this.OnNotes.X+this.OnNotes.Width/2,this.OnNotes.UpdateBeamingHelper()},DoLayout:function(){this.PreNotes.X=0,this.PreNotes.Renderer=this.Renderer,this.PreNotes.Container=this,this.PreNotes.DoLayout(),this.OnNotes.X=this.PreNotes.X+this.PreNotes.Width,this.OnNotes.Renderer=this.Renderer,this.OnNotes.Container=this,this.OnNotes.DoLayout();for(var i=this.Beat.Notes.length-1;i>=0;)this.CreateTies(this.Beat.Notes[i--]);if(this.MinWidth=this.PreNotes.Width+this.OnNotes.Width,!this.Beat.get_IsRest())if(1==this.OnNotes.BeamingHelper.Beats.length)this.Beat.Duration>=8&&(this.MinWidth=this.MinWidth+20*this.get_Scale());else{switch(this.Beat.Duration){case 128:case 256:this.MinWidth=this.MinWidth+10*this.get_Scale()}}this.Width=this.MinWidth,this.OnTimeX=this.OnNotes.X+this.OnNotes.Width/2},ScaleToWidth:function(beatWidth){this.OnNotes.UpdateBeamingHelper(),this.Width=beatWidth},CreateTies:function(n){},Paint:function(cx,cy,canvas){if(!this.Beat.Voice.IsEmpty){if(!(this.PreNotes.get_IsEmpty()&&this.OnNotes.get_IsEmpty()&&0==this.Ties.length)){canvas.BeginGroup("b"+this.Beat.Id);canvas.get_Color();this.PreNotes.Paint(cx+this.X,cy+this.Y,canvas),this.OnNotes.Paint(cx+this.X,cy+this.Y,canvas);for(var staffX=cx-this.VoiceContainer.X-this.Renderer.X,staffY=cy-this.VoiceContainer.Y-this.Renderer.Y,i=0,j=this.Ties.length;i<j;){var t=this.Ties[i];t.Renderer=this.Renderer,t.Paint(staffX,staffY,canvas),++i}canvas.EndGroup()}}},__class__:alphaTab_rendering_glyphs_BeatContainerGlyph});var alphaTab_rendering_ScoreBeatContainerGlyph=function(beat,voiceContainer){alphaTab_rendering_glyphs_BeatContainerGlyph.call(this,beat,voiceContainer)};alphaTab_rendering_ScoreBeatContainerGlyph.__name__=!0,alphaTab_rendering_ScoreBeatContainerGlyph.__super__=alphaTab_rendering_glyphs_BeatContainerGlyph,alphaTab_rendering_ScoreBeatContainerGlyph.prototype=$extend(alphaTab_rendering_glyphs_BeatContainerGlyph.prototype,{DoLayout:function(){if(alphaTab_rendering_glyphs_BeatContainerGlyph.prototype.DoLayout.call(this),this.Beat.IsLegatoOrigin){if(null==this.Beat.PreviousBeat||!this.Beat.PreviousBeat.IsLegatoOrigin){for(var destination=this.Beat.NextBeat;null!=destination.NextBeat&&destination.NextBeat.get_IsLegatoDestination();)destination=destination.NextBeat;this.Ties.push(new alphaTab_rendering_glyphs_ScoreLegatoGlyph(this.Beat,destination,!1))}}else if(this.Beat.get_IsLegatoDestination()&&!this.Beat.IsLegatoOrigin){for(var origin=this.Beat.PreviousBeat;null!=origin.PreviousBeat&&origin.PreviousBeat.IsLegatoOrigin;)origin=origin.PreviousBeat;this.Ties.push(new alphaTab_rendering_glyphs_ScoreLegatoGlyph(origin,this.Beat,!0))}},CreateTies:function(n){if(n.IsTieOrigin){var tie=new alphaTab_rendering_glyphs_ScoreTieGlyph(n,n.TieDestination,!1);this.Ties.push(tie)}if(n.IsTieDestination){var tie1=new alphaTab_rendering_glyphs_ScoreTieGlyph(n.TieOrigin,n,!0);this.Ties.push(tie1)}else if(n.IsHammerPullOrigin){if(null==n.HammerPullOrigin){for(var destination=n.HammerPullDestination;null!=destination.HammerPullDestination;)destination=destination.HammerPullDestination;var tie2=new alphaTab_rendering_glyphs_ScoreTieGlyph(n,destination,!1);this.Ties.push(tie2)}}else if(n.get_IsHammerPullDestination()){if(null==n.HammerPullDestination){for(var origin=n.HammerPullOrigin;null!=origin.HammerPullOrigin;)origin=origin.HammerPullOrigin;var tie3=new alphaTab_rendering_glyphs_ScoreTieGlyph(origin,n,!0);this.Ties.push(tie3)}}else if(2==n.SlideType){var tie4=new alphaTab_rendering_glyphs_ScoreTieGlyph(n,n.SlideTarget,!1);this.Ties.push(tie4)}if(0!=n.SlideType){var l=new alphaTab_rendering_glyphs_ScoreSlideLineGlyph(n.SlideType,n,this);this.Ties.push(l)}},__class__:alphaTab_rendering_ScoreBeatContainerGlyph});var alphaTab_rendering_ScoreRenderer=function(settings){this.Settings=settings,this.RenderingResources=new alphaTab_rendering_RenderingResources(1),this.RecreateCanvas(),this.RecreateLayout()};alphaTab_rendering_ScoreRenderer.__name__=!0,alphaTab_rendering_ScoreRenderer.__interfaces__=[alphaTab_rendering_IScoreRenderer],alphaTab_rendering_ScoreRenderer.prototype={get_BoundsLookup:function(){return this.__BoundsLookup},set_BoundsLookup:function(value){return this.__BoundsLookup=value},Destroy:function(){this.Score=null,this.Canvas=null,this.Layout=null,this.RenderingResources=null,this.Settings=null,this.set_BoundsLookup(null),this.Tracks=null},RecreateCanvas:function(){return this._currentRenderEngine!=this.Settings.Engine&&(null!=this.Settings.Engine&&alphaTab_Environment.RenderEngines.hasOwnProperty(this.Settings.Engine)?this.Canvas=alphaTab_Environment.RenderEngines[this.Settings.Engine]():this.Canvas=alphaTab_Environment.RenderEngines.default(),this._currentRenderEngine=this.Settings.Engine,!0)},RecreateLayout:function(){return this._currentLayoutMode!=this.Settings.Layout.Mode&&(null!=this.Settings.Layout&&alphaTab_Environment.LayoutEngines.hasOwnProperty(this.Settings.Layout.Mode)?this.Layout=alphaTab_Environment.LayoutEngines[this.Settings.Layout.Mode](this):this.Layout=alphaTab_Environment.LayoutEngines.default(this),this._currentLayoutMode=this.Settings.Layout.Mode,!0)},Render:function(score,trackIndexes){try{this.Score=score;for(var tracks=[],track=HxOverrides.iter(trackIndexes);track.hasNext();){var track1=track.next();track1>=0&&track1<score.Tracks.length&&tracks.push(score.Tracks[track1])}0==tracks.length&&score.Tracks.length>0&&tracks.push(score.Tracks[0]),this.Tracks=tracks,this.Invalidate()}catch(e){if(e instanceof js__$Boot_HaxeError&&(e=e.val),!js_Boot.__instanceof(e,system_Exception))throw e;this.OnError("render",e)}},RenderTracks:function(tracks){0==tracks.length?this.Score=null:this.Score=tracks[0].Score,this.Tracks=tracks,this.Invalidate()},UpdateSettings:function(settings){this.Settings=settings},Invalidate:function(){if(0!=this.Settings.Width){if(this.set_BoundsLookup(new alphaTab_rendering_utils_BoundsLookup),0!=this.Tracks.length){this.RecreateCanvas(),this.RenderingResources.Scale!=this.Settings.Scale&&(this.RenderingResources.Init(this.Settings.Scale),this.Canvas.set_LineWidth(this.Settings.Scale)),this.Canvas.set_Resources(this.RenderingResources),alphaTab_util_Logger.Info("Rendering","Rendering "+this.Tracks.length+" tracks",null);for(var i=0;i<this.Tracks.length;){var track=this.Tracks[i];alphaTab_util_Logger.Info("Rendering","Track "+i+": "+track.Name,null),++i}this.OnPreRender(),this.RecreateLayout(),this.LayoutAndRender(),this._renderedTracks=this.Tracks,alphaTab_util_Logger.Info("Rendering","Rendering finished",null)}}else alphaTab_util_Logger.Warning("Rendering","AlphaTab skipped rendering because of width=0 (element invisible)",null)},Resize:function(width){this.RecreateLayout()||this.RecreateCanvas()||this._renderedTracks!=this.Tracks||null==this.Tracks?(alphaTab_util_Logger.Info("Rendering","Starting full rerendering due to layout or canvas change",null),this.Invalidate()):this.Layout.get_SupportsResize()?(alphaTab_util_Logger.Info("Rendering","Starting optimized rerendering for resize",null),this.set_BoundsLookup(new alphaTab_rendering_utils_BoundsLookup),this.OnPreRender(),this.Settings.Width=width,this.Layout.Resize(),this.Layout.RenderAnnotation(),this.OnRenderFinished(),this.OnPostRender()):alphaTab_util_Logger.Warning("Rendering","Current layout does not support dynamic resizing, nothing was done",null),alphaTab_util_Logger.Info("Rendering","Resize finished",null)},LayoutAndRender:function(){alphaTab_util_Logger.Info("Rendering","Rendering at scale "+this.Settings.Scale+" with layout "+this.Layout.get_Name(),null),this.Layout.LayoutAndRender(),this.Layout.RenderAnnotation(),this.OnRenderFinished(),this.OnPostRender()},add_PreRender:function(value){return this.PreRender=system__$EventAction1_EventAction1_$Impl_$.add(this.PreRender,value)},remove_PreRender:function(value){return this.PreRender=system__$EventAction1_EventAction1_$Impl_$.sub(this.PreRender,value)},OnPreRender:function(){var result=this.Canvas.OnPreRender(),_e=this.PreRender,handler=function(p){system__$EventAction1_EventAction1_$Impl_$.Invoke(_e,p)},args=new alphaTab_rendering_RenderFinishedEventArgs;args.TotalWidth=0,args.TotalHeight=0,args.Width=0,args.Height=0,args.RenderResult=result,null!=handler&&handler(args)},add_PartialRenderFinished:function(value){return this.PartialRenderFinished=system__$EventAction1_EventAction1_$Impl_$.add(this.PartialRenderFinished,value)},remove_PartialRenderFinished:function(value){return this.PartialRenderFinished=system__$EventAction1_EventAction1_$Impl_$.sub(this.PartialRenderFinished,value)},OnPartialRenderFinished:function(e){var _e=this.PartialRenderFinished,handler=function(p){system__$EventAction1_EventAction1_$Impl_$.Invoke(_e,p)};null!=handler&&handler(e)},add_RenderFinished:function(value){return this.RenderFinished=system__$EventAction1_EventAction1_$Impl_$.add(this.RenderFinished,value)},remove_RenderFinished:function(value){return this.RenderFinished=system__$EventAction1_EventAction1_$Impl_$.sub(this.RenderFinished,value)},OnRenderFinished:function(){this.Canvas.OnRenderFinished();var _e=this.RenderFinished,handler=function(p){system__$EventAction1_EventAction1_$Impl_$.Invoke(_e,p)};null!=handler&&handler(new alphaTab_rendering_RenderFinishedEventArgs)},add_Error:function(value){return this.Error=system__$EventAction2_EventAction2_$Impl_$.add(this.Error,value)},remove_Error:function(value){return this.Error=system__$EventAction2_EventAction2_$Impl_$.sub(this.Error,value)},OnError:function(type,details){var _e=this.Error,handler=function(p1,p2){system__$EventAction2_EventAction2_$Impl_$.Invoke(_e,p1,p2)};null!=handler&&handler(type,details)},add_PostRenderFinished:function(value){return this.PostRenderFinished=system__$EventAction_EventAction_$Impl_$.add(this.PostRenderFinished,value)},remove_PostRenderFinished:function(value){return this.PostRenderFinished=system__$EventAction_EventAction_$Impl_$.sub(this.PostRenderFinished,value)},OnPostRender:function(){var _e=this.PostRenderFinished,handler=function(){system__$EventAction_EventAction_$Impl_$.Invoke(_e)};null!=handler&&handler()},__class__:alphaTab_rendering_ScoreRenderer};var alphaTab_rendering_TabBarRenderer=function(renderer,bar){alphaTab_rendering_BarRendererBase.call(this,renderer,bar),this.RhythmHeight=15*renderer.Layout.get_Scale(),this.RhythmBeams=!0};alphaTab_rendering_TabBarRenderer.__name__=!0,alphaTab_rendering_TabBarRenderer.PaintSingleBar=function(canvas,x1,y1,x2,y2,size){canvas.BeginPath(),canvas.MoveTo(x1,y1),canvas.LineTo(x2,y2),canvas.LineTo(x2,y2-size),canvas.LineTo(x1,y1-size),canvas.ClosePath(),canvas.Fill()},alphaTab_rendering_TabBarRenderer.__super__=alphaTab_rendering_BarRendererBase,alphaTab_rendering_TabBarRenderer.prototype=$extend(alphaTab_rendering_BarRendererBase.prototype,{get_LineOffset:function(){return 11*this.get_Scale()},GetNoteX:function(note,onEnd){null==onEnd&&(onEnd=!0);var beat=js_Boot.__cast(this.GetOnNotesGlyphForBeat(note.Beat),alphaTab_rendering_glyphs_TabBeatGlyph);return null!=beat?beat.Container.X+beat.Container.VoiceContainer.X+beat.X+beat.NoteNumbers.GetNoteX(note,onEnd):0},GetNoteY:function(note){var beat=js_Boot.__cast(this.GetOnNotesGlyphForBeat(note.Beat),alphaTab_rendering_glyphs_TabBeatGlyph);return null!=beat?beat.NoteNumbers.GetNoteY(note):0},UpdateSizes:function(){var res=this.get_Resources(),numberOverflow=res.TablatureFont.Size/2+.2*res.TablatureFont.Size;this.TopPadding=numberOverflow,this.BottomPadding=numberOverflow,this.Height=this.get_LineOffset()*(this.Bar.Staff.Track.Tuning.length-1)+2*numberOverflow,this.RenderRhythm&&(this.Height=this.Height+this.RhythmHeight,this.BottomPadding=this.BottomPadding+this.RhythmHeight),alphaTab_rendering_BarRendererBase.prototype.UpdateSizes.call(this)},CreatePreBeatGlyphs:function(){if(alphaTab_rendering_BarRendererBase.prototype.CreatePreBeatGlyphs.call(this),this.Bar.get_MasterBar().IsRepeatStart&&this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_RepeatOpenGlyph(0,0,1.5,3)),this.get_IsFirstOfLine()){var center=(this.Bar.Staff.Track.Tuning.length+1)/2;this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_TabClefGlyph(5*this.get_Scale(),this.GetTabY(center,0)))}this.ShowTimeSignature&&(null==this.Bar.PreviousBar||null!=this.Bar.PreviousBar&&this.Bar.get_MasterBar().TimeSignatureNumerator!=this.Bar.PreviousBar.get_MasterBar().TimeSignatureNumerator||null!=this.Bar.PreviousBar&&this.Bar.get_MasterBar().TimeSignatureDenominator!=this.Bar.PreviousBar.get_MasterBar().TimeSignatureDenominator)&&(this.CreateStartSpacing(),this.CreateTimeSignatureGlyphs()),this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_BarNumberGlyph(0,this.GetTabY(-.5,0),this.Bar.Index+1)),this.Bar.get_IsEmpty()&&this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,30*this.get_Scale()))},CreateStartSpacing:function(){this._startSpacing||(this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,2*this.get_Scale())),this._startSpacing=!0)},CreateTimeSignatureGlyphs:function(){this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,5*this.get_Scale())),this.AddPreBeatGlyph(new alphaTab_rendering_glyphs_TabTimeSignatureGlyph(0,this.GetTabY(0,0),this.Bar.get_MasterBar().TimeSignatureNumerator,this.Bar.get_MasterBar().TimeSignatureDenominator,this.Bar.get_MasterBar().TimeSignatureCommon))},CreateBeatGlyphs:function(){for(var v=0;v<this.Bar.Voices.length;){var voice=this.Bar.Voices[v];this.HasVoiceContainer(voice)&&this.CreateVoiceGlyphs(this.Bar.Voices[v]),++v}},CreateVoiceGlyphs:function(v){for(var i=0,j=v.Beats.length;i<j;){var b=v.Beats[i],container=new alphaTab_rendering_glyphs_TabBeatContainerGlyph(b,this.GetOrCreateVoiceContainer(v));container.PreNotes=new alphaTab_rendering_glyphs_TabBeatPreNotesGlyph,container.OnNotes=new alphaTab_rendering_glyphs_TabBeatGlyph,this.AddBeatGlyph(container),++i}},CreatePostBeatGlyphs:function(){alphaTab_rendering_BarRendererBase.prototype.CreatePostBeatGlyphs.call(this),this.Bar.get_MasterBar().get_IsRepeatEnd()?(this.AddPostBeatGlyph(new alphaTab_rendering_glyphs_RepeatCloseGlyph(this.X,0)),this.Bar.get_MasterBar().RepeatCount>2&&this.AddPostBeatGlyph(new alphaTab_rendering_glyphs_RepeatCountGlyph(0,this.GetTabY(-.5,-3),this.Bar.get_MasterBar().RepeatCount))):null!=this.Bar.NextBar&&this.Bar.NextBar.get_MasterBar().IsRepeatStart||this.AddPostBeatGlyph(new alphaTab_rendering_glyphs_BarSeperatorGlyph(0,0))},GetTabY:function(line,correction){return null==correction&&(correction=0),this.get_LineOffset()*line+correction*this.get_Scale()},PaintBackground:function(cx,cy,canvas){alphaTab_rendering_BarRendererBase.prototype.PaintBackground.call(this,cx,cy,canvas);var res=this.get_Resources();canvas.set_Color(res.StaveLineColor);for(var lineY=cy+this.Y+this.TopPadding,padding=this.get_Scale(),tabNotes=[],i=0,j=this.Bar.Staff.Track.Tuning.length;i<j;){tabNotes.push([]),++i}for(var voice=$iterator(this.Bar.Voices)();voice.hasNext();){var voice1=voice.next();if(this.HasVoiceContainer(voice1))for(var vc=this.GetOrCreateVoiceContainer(voice1),bg=$iterator(vc.BeatGlyphs)();bg.hasNext();){var bg1=bg.next(),notes=js_Boot.__cast(bg1.OnNotes,alphaTab_rendering_glyphs_TabBeatGlyph),noteNumbers=notes.NoteNumbers;if(null!=noteNumbers)for(var this3=noteNumbers.NotesPerString,s=$iterator(Object.keys(this3))();s.hasNext();){var s1=s.next();noteNumbers.NotesPerString[s1].IsEmpty||tabNotes[this.Bar.Staff.Track.Tuning.length-s1].push([vc.X+bg1.X+notes.X+noteNumbers.X,noteNumbers.Width+padding])}}}for(var line=$iterator(tabNotes)();line.hasNext();){line.next().sort(function(comparison){return function(a,b){return comparison[0](a,b)}}([function(a1,b1){return a1[0]>b1[0]?1:a1[0]<b1[0]?-1:0}]))}for(var lineOffset=this.get_LineOffset(),i1=0,j1=this.Bar.Staff.Track.Tuning.length;i1<j1;){i1>0&&(lineY+=lineOffset);for(var lineX=0,line2=$iterator(tabNotes[i1])();line2.hasNext();){var line3=line2.next(),tmp=cx+this.X+lineX,this4=system_Convert.ToInt32_Single(lineY),tmp1=this.get_Scale();canvas.FillRect(tmp,this4,line3[0]-lineX,tmp1),lineX=line3[0]+line3[1]}var tmp2=cx+this.X+lineX,this5=system_Convert.ToInt32_Single(lineY);canvas.FillRect(tmp2,this5,this.Width-lineX,this.get_Scale()),++i1}canvas.set_Color(res.MainGlyphColor)},Paint:function(cx,cy,canvas){alphaTab_rendering_BarRendererBase.prototype.Paint.call(this,cx,cy,canvas),this.RenderRhythm&&this.PaintBeams(cx,cy,canvas)},PaintBeams:function(cx,cy,canvas){for(var i=0,j=this.Helpers.BeamHelpers.length;i<j;){for(var v=this.Helpers.BeamHelpers[i],k=0,l=v.length;k<l;){var h=v[k];this.PaintBeamHelper(cx+this.get_BeatGlyphsStart(),cy,canvas,h),++k}++i}},PaintBeamHelper:function(cx,cy,canvas,h){canvas.set_Color(0==h.Voice.Index?this.get_Resources().MainGlyphColor:this.get_Resources().SecondaryGlyphColor),1!=h.Beats.length&&this.RhythmBeams?this.PaintBar(cx,cy,canvas,h):this.PaintFooter(cx,cy,canvas,h)},PaintBar:function(cx,cy,canvas,h){for(var i=0,j=h.Beats.length;i<j;){var beat=h.Beats[i];if(h.HasBeatLineX(beat)){var beatLineX=h.GetBeatLineX(beat),y1=cy+this.Y,y2=cy+this.Y+this.Height,startGlyph=js_Boot.__cast(this.GetOnNotesGlyphForBeat(beat),alphaTab_rendering_glyphs_TabBeatGlyph);if(y1=null==startGlyph.NoteNumbers?y1+this.Height-this.RhythmHeight:y1+startGlyph.NoteNumbers.GetNoteY(startGlyph.NoteNumbers.MinStringNote)+this.get_LineOffset()/2,0==h.Direction){beatLineX-=startGlyph.Width/2}else{beatLineX+=startGlyph.Width/2}canvas.BeginPath(),canvas.MoveTo(cx+this.X+beatLineX,y1),canvas.LineTo(cx+this.X+beatLineX,y2),canvas.Stroke();var brokenBarOffset=6*this.get_Scale(),barSpacing=6*this.get_Scale(),barSize=3*this.get_Scale(),barCount=alphaTab_model_ModelUtils.GetIndex(beat.Duration)-2,barStart=cy+this.Y;barSpacing=-barSpacing,barStart+=this.Height;for(var barIndex=0;barIndex<barCount;){var barStartX,barEndX,barStartY,barEndY,barY=barStart+barIndex*barSpacing;if(1==h.Beats.length)barStartX=beatLineX,barEndX=beatLineX+brokenBarOffset,barStartY=barY,barEndY=barY,alphaTab_rendering_TabBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize);else if(i<h.Beats.length-1){if(alphaTab_rendering_utils_BeamingHelper.IsFullBarJoin(beat,h.Beats[i+1],barIndex)){barStartX=beatLineX,barEndX=h.GetBeatLineX(h.Beats[i+1])+this.get_Scale();var endGlyph=this.GetOnNotesGlyphForBeat(h.Beats[i+1]);if(0==h.Direction){barEndX-=endGlyph.Width/2}else{barEndX+=endGlyph.Width/2}}else{if(0!=i&&alphaTab_rendering_utils_BeamingHelper.IsFullBarJoin(h.Beats[i-1],beat,barIndex))continue;barEndX=(barStartX=beatLineX)+brokenBarOffset}barStartY=barY,barEndY=barY,alphaTab_rendering_TabBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize)}else i>0&&!alphaTab_rendering_utils_BeamingHelper.IsFullBarJoin(beat,h.Beats[i-1],barIndex)&&(barStartX=beatLineX-brokenBarOffset,barEndX=beatLineX,barStartY=barY,barEndY=barY,alphaTab_rendering_TabBarRenderer.PaintSingleBar(canvas,cx+this.X+barStartX,barStartY,cx+this.X+barEndX,barEndY,barSize));++barIndex}}++i}},PaintFooter:function(cx,cy,canvas,h){for(var beat=$iterator(h.Beats)();beat.hasNext();){var beat1=beat.next();if(1==beat1.Duration||-2==beat1.Duration||-4==beat1.Duration)return;var beatLineX=h.GetBeatLineX(beat1),y1=cy+this.Y,y2=cy+this.Y+this.Height,startGlyph=js_Boot.__cast(this.GetOnNotesGlyphForBeat(beat1),alphaTab_rendering_glyphs_TabBeatGlyph);if(y1=null==startGlyph.NoteNumbers?y1+this.Height-this.RhythmHeight:y1+startGlyph.NoteNumbers.GetNoteY(startGlyph.NoteNumbers.MinStringNote)+this.get_LineOffset()/2,0==h.Direction){beatLineX-=startGlyph.Width/2}else{beatLineX+=startGlyph.Width/2}if(canvas.BeginPath(),canvas.MoveTo(cx+this.X+beatLineX,y1),canvas.LineTo(cx+this.X+beatLineX,y2),canvas.Stroke(),beat1.Duration>4){var glyph=new alphaTab_rendering_glyphs_BeamGlyph(0,0,beat1.Duration,1,!1);glyph.Renderer=this,glyph.DoLayout(),glyph.Paint(cx+this.X+beatLineX,y2,canvas)}}},__class__:alphaTab_rendering_TabBarRenderer});var alphaTab_rendering_glyphs_EffectGlyph=function(x,y){alphaTab_rendering_glyphs_Glyph.call(this,x,y)};alphaTab_rendering_glyphs_EffectGlyph.__name__=!0,alphaTab_rendering_glyphs_EffectGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_EffectGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{__class__:alphaTab_rendering_glyphs_EffectGlyph});var alphaTab_rendering_glyphs_MusicFontGlyph=function(x,y,glyphScale,symbol){alphaTab_rendering_glyphs_EffectGlyph.call(this,x,y),this.GlyphScale=glyphScale,this._symbol=symbol};alphaTab_rendering_glyphs_MusicFontGlyph.__name__=!0,alphaTab_rendering_glyphs_MusicFontGlyph.__super__=alphaTab_rendering_glyphs_EffectGlyph,alphaTab_rendering_glyphs_MusicFontGlyph.prototype=$extend(alphaTab_rendering_glyphs_EffectGlyph.prototype,{Paint:function(cx,cy,canvas){canvas.FillMusicFontSymbol(cx+this.X,cy+this.Y,this.GlyphScale*this.get_Scale(),this._symbol)},__class__:alphaTab_rendering_glyphs_MusicFontGlyph});var alphaTab_rendering_glyphs_AccentuationGlyph=function(x,y,accentuation){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,1,alphaTab_rendering_glyphs_AccentuationGlyph.GetSymbol(accentuation))};alphaTab_rendering_glyphs_AccentuationGlyph.__name__=!0,alphaTab_rendering_glyphs_AccentuationGlyph.GetSymbol=function(accentuation){switch(accentuation){case 0:return-1;case 1:return 58528;case 2:return 58540;default:return-1}},alphaTab_rendering_glyphs_AccentuationGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_AccentuationGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=9*this.get_Scale()},__class__:alphaTab_rendering_glyphs_AccentuationGlyph});var alphaTab_rendering_glyphs_GlyphGroup=function(x,y){alphaTab_rendering_glyphs_Glyph.call(this,x,y)};alphaTab_rendering_glyphs_GlyphGroup.__name__=!0,alphaTab_rendering_glyphs_GlyphGroup.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_GlyphGroup.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{get_IsEmpty:function(){return null==this.Glyphs||0==this.Glyphs.length},DoLayout:function(){if(null!=this.Glyphs&&0!=this.Glyphs.length){for(var w=0,i=0,j=this.Glyphs.length;i<j;){var g=this.Glyphs[i];g.Renderer=this.Renderer,g.DoLayout(),w=Math.max(w,g.Width),++i}this.Width=w}else this.Width=0},AddGlyph:function(g){if(null==this.Glyphs){this.Glyphs=[]}this.Glyphs.push(g)},Paint:function(cx,cy,canvas){var glyphs=this.Glyphs;if(null!=glyphs&&0!=glyphs.length)for(var g=$iterator(glyphs)();g.hasNext();){g.next().Paint(cx+this.X,cy+this.Y,canvas)}},__class__:alphaTab_rendering_glyphs_GlyphGroup});var alphaTab_rendering_glyphs_AccidentalGroupGlyph=function(){alphaTab_rendering_glyphs_GlyphGroup.call(this,0,0)};alphaTab_rendering_glyphs_AccidentalGroupGlyph.__name__=!0,alphaTab_rendering_glyphs_AccidentalGroupGlyph.__super__=alphaTab_rendering_glyphs_GlyphGroup,alphaTab_rendering_glyphs_AccidentalGroupGlyph.prototype=$extend(alphaTab_rendering_glyphs_GlyphGroup.prototype,{DoLayout:function(){if(null!=this.Glyphs){this.Glyphs.sort(function(a1,b1){return b=b1,(a=a1).Y<b.Y?-1:a.Y>b.Y?1:0;var a,b});var columns=[];columns.push(-3e3);for(var accidentalSize=21*this.get_Scale(),i=0,j=this.Glyphs.length;i<j;){var g=this.Glyphs[i];g.Renderer=this.Renderer,g.DoLayout();for(var gColumn=0;columns[gColumn]>g.Y;)if(++gColumn==columns.length){columns.push(-3e3)}var this4=gColumn;g.X=this4,columns[gColumn]=g.Y+accidentalSize,++i}var columnWidth=8*this.get_Scale(),padding=2*this.get_Scale();0==this.Glyphs.length?this.Width=0:this.Width=padding+columnWidth*columns.length;for(var i1=0,j1=this.Glyphs.length;i1<j1;){var g1=this.Glyphs[i1];g1.X=padding+(this.Width-(g1.X+1)*columnWidth),++i1}}else this.Width=0},__class__:alphaTab_rendering_glyphs_AccidentalGroupGlyph});var alphaTab_rendering_glyphs_AlternateEndingsGlyph=function(x,y,alternateEndings){alphaTab_rendering_glyphs_EffectGlyph.call(this,x,y);this._endings=[];for(var i=0;i<8;)0!=(alternateEndings&1<<i)&&this._endings.push(i),++i};alphaTab_rendering_glyphs_AlternateEndingsGlyph.__name__=!0,alphaTab_rendering_glyphs_AlternateEndingsGlyph.__super__=alphaTab_rendering_glyphs_EffectGlyph,alphaTab_rendering_glyphs_AlternateEndingsGlyph.prototype=$extend(alphaTab_rendering_glyphs_EffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_EffectGlyph.prototype.DoLayout.call(this),this.Height=this.Renderer.get_Resources().WordsFont.Size+(3*this.get_Scale()+2);for(var endingsStrings="",i=0,j=this._endings.length;i<j;)endingsStrings+=Std.string(this._endings[i]+1),endingsStrings+=Std.string(". "),++i;this._endingsString=endingsStrings},Paint:function(cx,cy,canvas){if(alphaTab_rendering_glyphs_EffectGlyph.prototype.Paint.call(this,cx,cy,canvas),this._endings.length>0){var res=this.Renderer.get_Resources();canvas.set_Font(res.WordsFont),canvas.MoveTo(cx+this.X,cy+this.Y+this.Height),canvas.LineTo(cx+this.X,cy+this.Y),canvas.LineTo(cx+this.X+this.Width,cy+this.Y),canvas.Stroke(),canvas.FillText(this._endingsString,cx+this.X+3*this.get_Scale(),cy+this.Y*this.get_Scale())}},__class__:alphaTab_rendering_glyphs_AlternateEndingsGlyph});var alphaTab_rendering_glyphs_BarNumberGlyph=function(x,y,number){alphaTab_rendering_glyphs_Glyph.call(this,x,y),this._number=number};alphaTab_rendering_glyphs_BarNumberGlyph.__name__=!0,alphaTab_rendering_glyphs_BarNumberGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_BarNumberGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Renderer.ScoreRenderer.Canvas.set_Font(this.Renderer.get_Resources().BarNumberFont),this.Width=this.Renderer.ScoreRenderer.Canvas.MeasureText(Std.string(this._number))+5*this.get_Scale()},Paint:function(cx,cy,canvas){if(this.Renderer.Staff.IsFirstInAccolade){var res=this.Renderer.get_Resources();canvas.set_Color(res.BarNumberColor),canvas.set_Font(res.BarNumberFont),canvas.FillText(Std.string(this._number),cx+this.X,cy+this.Y),canvas.set_Color(res.MainGlyphColor)}},__class__:alphaTab_rendering_glyphs_BarNumberGlyph});var alphaTab_rendering_glyphs_BarSeperatorGlyph=function(x,y){alphaTab_rendering_glyphs_Glyph.call(this,x,y)};alphaTab_rendering_glyphs_BarSeperatorGlyph.__name__=!0,alphaTab_rendering_glyphs_BarSeperatorGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_BarSeperatorGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=8*this.get_Scale()},Paint:function(cx,cy,canvas){var blockWidth=4*this.get_Scale(),top=cy+this.Y+this.Renderer.TopPadding,bottom=cy+this.Y+this.Renderer.Height-this.Renderer.BottomPadding,left=system_Convert.ToInt32_Single(cx+this.X),h=bottom-top;if(this.Renderer.get_IsLast()){var this1=left;canvas.FillRect(this1,top,this.get_Scale(),h),canvas.FillRect(left+this.Width-blockWidth,top,blockWidth,h)}else canvas.FillRect(left+this.Width,top,this.get_Scale(),h),this.Renderer.Bar.get_MasterBar().IsDoubleBar&&canvas.FillRect(left+this.Width-5*this.get_Scale(),top,this.get_Scale(),h)},__class__:alphaTab_rendering_glyphs_BarSeperatorGlyph});var alphaTab_rendering_glyphs_BeamGlyph=function(x,y,duration,direction,isGrace){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,alphaTab_rendering_glyphs_BeamGlyph.GetSymbol(duration,direction,isGrace))};alphaTab_rendering_glyphs_BeamGlyph.__name__=!0,alphaTab_rendering_glyphs_BeamGlyph.GetSymbol=function(duration,direction,isGrace){if(0==direction)switch(duration){case 8:return 57920;case 16:return 57922;case 32:return 57924;case 64:return 57926;case 128:return 57928;case 256:return 57930;default:return 57920}else switch(duration){case 8:return 57921;case 16:return 57923;case 32:return 57925;case 64:return 57927;case 128:case 256:return 57929;default:return 57921}},alphaTab_rendering_glyphs_BeamGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_BeamGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=0},__class__:alphaTab_rendering_glyphs_BeamGlyph});var alphaTab_rendering_glyphs_BeatGlyphBase=function(){alphaTab_rendering_glyphs_GlyphGroup.call(this,0,0)};alphaTab_rendering_glyphs_BeatGlyphBase.__name__=!0,alphaTab_rendering_glyphs_BeatGlyphBase.__super__=alphaTab_rendering_glyphs_GlyphGroup,alphaTab_rendering_glyphs_BeatGlyphBase.prototype=$extend(alphaTab_rendering_glyphs_GlyphGroup.prototype,{DoLayout:function(){var w=0;if(null!=this.Glyphs)for(var i=0,j=this.Glyphs.length;i<j;){var g=this.Glyphs[i];g.X=w,g.Renderer=this.Renderer,g.DoLayout(),w+=g.Width,++i}this.Width=w},NoteLoop:function(action){for(var i=this.Container.Beat.Notes.length-1;i>=0;)action(this.Container.Beat.Notes[i]),--i},__class__:alphaTab_rendering_glyphs_BeatGlyphBase});var alphaTab_rendering_glyphs_BeatOnNoteGlyphBase=function(){alphaTab_rendering_glyphs_BeatGlyphBase.call(this)};alphaTab_rendering_glyphs_BeatOnNoteGlyphBase.__name__=!0,alphaTab_rendering_glyphs_BeatOnNoteGlyphBase.__super__=alphaTab_rendering_glyphs_BeatGlyphBase,alphaTab_rendering_glyphs_BeatOnNoteGlyphBase.prototype=$extend(alphaTab_rendering_glyphs_BeatGlyphBase.prototype,{UpdateBeamingHelper:function(){},__class__:alphaTab_rendering_glyphs_BeatOnNoteGlyphBase});var alphaTab_rendering_glyphs_BendGlyph=function(n,bendValueHeight){alphaTab_rendering_glyphs_Glyph.call(this,0,0),this._note=n,this._bendValueHeight=bendValueHeight};alphaTab_rendering_glyphs_BendGlyph.__name__=!0,alphaTab_rendering_glyphs_BendGlyph.GetFractionSign=function(steps){switch(steps){case 1:return"¼";case 2:return"½";case 3:return"¾";default:return Std.string(steps)+"/ 4"}},alphaTab_rendering_glyphs_BendGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_BendGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{Paint:function(cx,cy,canvas){for(var dX=this.Width/60,maxValue=0,i=0,j=this._note.BendPoints.length;i<j;)this._note.BendPoints[i].Value>maxValue&&(maxValue=this._note.BendPoints[i].Value),++i;cx+=this.X,cy+=this.Y,canvas.BeginPath();for(var i1=0,j1=this._note.BendPoints.length-1;i1<j1;){var firstPt=this._note.BendPoints[i1],secondPt=this._note.BendPoints[i1+1];0!=i1||0==firstPt.Value||this._note.IsTieDestination||this.PaintBend(new alphaTab_model_BendPoint(0,0),firstPt,cx,cy,dX,canvas),firstPt.Value==secondPt.Value&&i1==this._note.BendPoints.length-2||(this.PaintBend(firstPt,secondPt,cx,cy,dX,canvas),++i1)}},PaintBend:function(firstPt,secondPt,cx,cy,dX,canvas){var r=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer),res=this.Renderer.get_Resources(),overflowOffset=r.get_LineOffset()/2,x1=cx+dX*firstPt.Offset,y1=cy-this._bendValueHeight*firstPt.Value;0==firstPt.Value?y1+=r.GetNoteY(this._note):y1+=overflowOffset;var x2=cx+dX*secondPt.Offset,y2=cy-this._bendValueHeight*secondPt.Value;0==secondPt.Value?y2+=r.GetNoteY(this._note):y2+=overflowOffset;var arrowOffset=0,arrowSize=6*this.get_Scale();if(secondPt.Value>firstPt.Value){canvas.BeginPath(),canvas.MoveTo(x2,y2);canvas.LineTo(x2-.5*arrowSize,y2+arrowSize);canvas.LineTo(x2+.5*arrowSize,y2+arrowSize),canvas.ClosePath(),canvas.Fill(),arrowOffset=arrowSize}else if(secondPt.Value!=firstPt.Value){canvas.BeginPath(),canvas.MoveTo(x2,y2);canvas.LineTo(x2-.5*arrowSize,y2-arrowSize);canvas.LineTo(x2+.5*arrowSize,y2-arrowSize),canvas.ClosePath(),canvas.Fill(),arrowOffset=-arrowSize}if(canvas.Stroke(),firstPt.Value==secondPt.Value?(canvas.MoveTo(x1,y1),canvas.LineTo(x2,y2),canvas.Stroke()):x2>x1?(canvas.MoveTo(x1,y1),canvas.BezierCurveTo(x2,y1,x2,y2+arrowOffset,x2,y2+arrowOffset),canvas.Stroke()):(canvas.MoveTo(x1,y1),canvas.LineTo(x2,y2),canvas.Stroke()),0!=secondPt.Value){var dV=secondPt.Value,up=secondPt.Value>firstPt.Value,s="";if(4==(dV=Math.abs(dV))&&up)s="full",dV-=4;else if(dV>=4||dV<=-4){var steps=dV/4|0;s+=Std.string(steps),dV-=4*steps}if(dV>0&&(s+=alphaTab_rendering_glyphs_BendGlyph.GetFractionSign(dV)),""!=s){up||(s="-"+s),canvas.set_Font(res.TablatureFont);var size=canvas.MeasureText(s),y=up?y2-res.TablatureFont.Size-2*this.get_Scale():y2+2*this.get_Scale(),x=x2-size/2;canvas.FillText(s,x,y)}}},__class__:alphaTab_rendering_glyphs_BendGlyph});var alphaTab_rendering_glyphs_ChineseCymbalGlyph=function(x,y,isGrace){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,57564),this._isGrace=isGrace};alphaTab_rendering_glyphs_ChineseCymbalGlyph.__name__=!0,alphaTab_rendering_glyphs_ChineseCymbalGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_ChineseCymbalGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=9*(this._isGrace?.75:1)*this.get_Scale()},__class__:alphaTab_rendering_glyphs_ChineseCymbalGlyph});var alphaTab_rendering_glyphs_CircleGlyph=function(x,y,size){alphaTab_rendering_glyphs_Glyph.call(this,x,y),this._size=size};alphaTab_rendering_glyphs_CircleGlyph.__name__=!0,alphaTab_rendering_glyphs_CircleGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_CircleGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=this._size+3*this.get_Scale()},Paint:function(cx,cy,canvas){canvas.FillCircle(cx+this.X,cy+this.Y,this._size)},__class__:alphaTab_rendering_glyphs_CircleGlyph});var alphaTab_rendering_glyphs_ClefGlyph=function(x,y,clef,clefOttavia){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,1,alphaTab_rendering_glyphs_ClefGlyph.GetSymbol(clef)),this._clef=clef,this._clefOttavia=clefOttavia};alphaTab_rendering_glyphs_ClefGlyph.__name__=!0,alphaTab_rendering_glyphs_ClefGlyph.GetSymbol=function(clef){switch(clef){case 0:return 57449;case 1:case 2:return 57436;case 3:return 57442;case 4:return 57424;default:return-1}},alphaTab_rendering_glyphs_ClefGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_ClefGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){switch(this._clef){case 0:this.Width=15*this.get_Scale();break;case 1:case 2:case 3:case 4:this.Width=28*this.get_Scale()}},Paint:function(cx,cy,canvas){alphaTab_rendering_glyphs_MusicFontGlyph.prototype.Paint.call(this,cx,cy,canvas);var numberGlyph,top=!1;switch(this._clefOttavia){case 0:numberGlyph=new alphaTab_rendering_glyphs_NumberGlyph(this.Width/2,0,15,.5),top=!0;break;case 1:numberGlyph=new alphaTab_rendering_glyphs_NumberGlyph(0,0,8,.5),top=!0;break;case 3:numberGlyph=new alphaTab_rendering_glyphs_NumberGlyph(0,0,8,.5);break;case 4:numberGlyph=new alphaTab_rendering_glyphs_NumberGlyph(0,0,15,.5);break;default:return}var offset;switch(this._clef){case 0:offset=top?-25:10;break;case 1:case 2:offset=top?-30:20;break;case 3:offset=top?-25:20;break;case 4:offset=top?-50:25;break;default:return}numberGlyph.Renderer=this.Renderer,numberGlyph.DoLayout();var x=(this.Width-numberGlyph.Width)/2;numberGlyph.Paint(cx+this.X+x,cy+this.Y+offset*this.get_Scale(),canvas)},__class__:alphaTab_rendering_glyphs_ClefGlyph});var alphaTab_rendering_glyphs_GroupedEffectGlyph=function(endPosition){alphaTab_rendering_glyphs_EffectGlyph.call(this,0,0),this._endPosition=endPosition};alphaTab_rendering_glyphs_GroupedEffectGlyph.__name__=!0,alphaTab_rendering_glyphs_GroupedEffectGlyph.__super__=alphaTab_rendering_glyphs_EffectGlyph,alphaTab_rendering_glyphs_GroupedEffectGlyph.prototype=$extend(alphaTab_rendering_glyphs_EffectGlyph.prototype,{get_IsLinkedWithPrevious:function(){return null!=this.PreviousGlyph&&this.PreviousGlyph.Renderer.Staff.StaveGroup==this.Renderer.Staff.StaveGroup},get_IsLinkedWithNext:function(){return!(null==this.NextGlyph||!this.NextGlyph.Renderer.IsFinalized)&&this.NextGlyph.Renderer.Staff.StaveGroup==this.Renderer.Staff.StaveGroup},Paint:function(cx,cy,canvas){if(!this.get_IsLinkedWithPrevious())if(this.get_IsLinkedWithNext()){for(var lastLinkedGlyph=js_Boot.__cast(this.NextGlyph,alphaTab_rendering_glyphs_GroupedEffectGlyph);lastLinkedGlyph.get_IsLinkedWithNext();)lastLinkedGlyph=js_Boot.__cast(lastLinkedGlyph.NextGlyph,alphaTab_rendering_glyphs_GroupedEffectGlyph);var cxRenderer=cx-this.Renderer.X,endRenderer=lastLinkedGlyph.Renderer,endBeatX=endRenderer.GetBeatX(lastLinkedGlyph.Beat,this._endPosition),endX=cxRenderer+endRenderer.X+endBeatX;this.PaintGrouped(cx,cy,endX,canvas)}else this.PaintNonGrouped(cx,cy,canvas)},PaintNonGrouped:function(cx,cy,canvas){var endX=cx+this.Renderer.GetBeatX(this.Beat,3);this.PaintGrouped(cx,cy,endX,canvas)},PaintGrouped:function(cx,cy,endX,canvas){throw new js__$Boot_HaxeError("abstract")},__class__:alphaTab_rendering_glyphs_GroupedEffectGlyph});var alphaTab_rendering_glyphs_CrescendoGlyph=function(x,y,crescendo){alphaTab_rendering_glyphs_GroupedEffectGlyph.call(this,3),this._crescendo=crescendo,this.X=x,this.Y=y};alphaTab_rendering_glyphs_CrescendoGlyph.__name__=!0,alphaTab_rendering_glyphs_CrescendoGlyph.__super__=alphaTab_rendering_glyphs_GroupedEffectGlyph,alphaTab_rendering_glyphs_CrescendoGlyph.prototype=$extend(alphaTab_rendering_glyphs_GroupedEffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_GroupedEffectGlyph.prototype.DoLayout.call(this),this.Height=17*this.get_Scale()},PaintGrouped:function(cx,cy,endX,canvas){var startX=cx+this.X,height=this.Height*this.get_Scale();canvas.BeginPath(),1==this._crescendo?(canvas.MoveTo(endX,cy+this.Y),canvas.LineTo(startX,cy+this.Y+height/2),canvas.LineTo(endX,cy+this.Y+height)):(canvas.MoveTo(cx+this.X,cy+this.Y),canvas.LineTo(endX,cy+this.Y+height/2),canvas.LineTo(cx+this.X,cy+this.Y+height)),canvas.Stroke()},__class__:alphaTab_rendering_glyphs_CrescendoGlyph});var alphaTab_rendering_glyphs_DeadNoteHeadGlyph=function(x,y,isGrace){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,57514),this._isGrace=isGrace};alphaTab_rendering_glyphs_DeadNoteHeadGlyph.__name__=!0,alphaTab_rendering_glyphs_DeadNoteHeadGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_DeadNoteHeadGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=9*(this._isGrace?.75:1)*this.get_Scale()},__class__:alphaTab_rendering_glyphs_DeadNoteHeadGlyph});var alphaTab_rendering_glyphs_DiamondNoteHeadGlyph=function(x,y,isGrace){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,57564),this._isGrace=isGrace};alphaTab_rendering_glyphs_DiamondNoteHeadGlyph.__name__=!0,alphaTab_rendering_glyphs_DiamondNoteHeadGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_DiamondNoteHeadGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=9*(this._isGrace?.75:1)*this.get_Scale()},__class__:alphaTab_rendering_glyphs_DiamondNoteHeadGlyph});var alphaTab_rendering_glyphs_DigitGlyph=function(x,y,digit,scale){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,scale,alphaTab_rendering_glyphs_DigitGlyph.GetSymbol(digit)),this._digit=digit,this._scale=scale};alphaTab_rendering_glyphs_DigitGlyph.__name__=!0,alphaTab_rendering_glyphs_DigitGlyph.GetSymbol=function(digit){switch(digit){case 0:return 57472;case 1:return 57473;case 2:return 57474;case 3:return 57475;case 4:return 57476;case 5:return 57477;case 6:return 57478;case 7:return 57479;case 8:return 57480;case 9:return 57481;default:return-1}},alphaTab_rendering_glyphs_DigitGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_DigitGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Y=this.Y+7*this.get_Scale(),this.Width=this.GetDigitWidth(this._digit)*this.get_Scale()*this._scale},GetDigitWidth:function(digit){switch(digit){case 1:return 10;case 0:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:return 14;default:return 0}},__class__:alphaTab_rendering_glyphs_DigitGlyph});var alphaTab_rendering_glyphs_DrumSticksGlyph=function(x,y,isGrace){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,57513),this._isGrace=isGrace};alphaTab_rendering_glyphs_DrumSticksGlyph.__name__=!0,alphaTab_rendering_glyphs_DrumSticksGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_DrumSticksGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=9*(this._isGrace?.75:1)*this.get_Scale()},__class__:alphaTab_rendering_glyphs_DrumSticksGlyph});var alphaTab_rendering_glyphs_DynamicsGlyph=function(x,y,dynamics){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,.6,alphaTab_rendering_glyphs_DynamicsGlyph.GetSymbol(dynamics))};alphaTab_rendering_glyphs_DynamicsGlyph.__name__=!0,alphaTab_rendering_glyphs_DynamicsGlyph.GetSymbol=function(dynamics){switch(dynamics){case 0:return 58666;case 1:return 58667;case 2:return 58656;case 3:return 58668;case 4:return 58669;case 5:return 58658;case 6:case 7:return 58672;default:return-1}},alphaTab_rendering_glyphs_DynamicsGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_DynamicsGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_MusicFontGlyph.prototype.DoLayout.call(this),this.Height=17*this.get_Scale(),this.Y=this.Y+this.Height/2},__class__:alphaTab_rendering_glyphs_DynamicsGlyph});var alphaTab_rendering_glyphs_FadeInGlyph=function(x,y){alphaTab_rendering_glyphs_EffectGlyph.call(this,x,y)};alphaTab_rendering_glyphs_FadeInGlyph.__name__=!0,alphaTab_rendering_glyphs_FadeInGlyph.__super__=alphaTab_rendering_glyphs_EffectGlyph,alphaTab_rendering_glyphs_FadeInGlyph.prototype=$extend(alphaTab_rendering_glyphs_EffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_EffectGlyph.prototype.DoLayout.call(this),this.Height=17*this.get_Scale()},Paint:function(cx,cy,canvas){var size=6*this.get_Scale(),width=Math.max(this.Width,14*this.get_Scale()),offset=this.Height/2;canvas.BeginPath(),canvas.MoveTo(cx+this.X,cy+this.Y+offset),canvas.QuadraticCurveTo(cx+this.X+width/2,cy+this.Y+offset,cx+this.X+width,cy+this.Y+offset-size),canvas.MoveTo(cx+this.X,cy+this.Y+offset),canvas.QuadraticCurveTo(cx+this.X+width/2,cy+this.Y+offset,cx+this.X+width,cy+this.Y+offset+size),canvas.Stroke()},__class__:alphaTab_rendering_glyphs_FadeInGlyph});var alphaTab_rendering_glyphs_FlatGlyph=function(x,y,isGrace){null==isGrace&&(isGrace=!1),alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,57952),this._isGrace=isGrace};alphaTab_rendering_glyphs_FlatGlyph.__name__=!0,alphaTab_rendering_glyphs_FlatGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_FlatGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=8*(this._isGrace?.75:1)*this.get_Scale()},__class__:alphaTab_rendering_glyphs_FlatGlyph});var alphaTab_rendering_glyphs_HiHatGlyph=function(x,y,isGrace){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,57523),this._isGrace=isGrace};alphaTab_rendering_glyphs_HiHatGlyph.__name__=!0,alphaTab_rendering_glyphs_HiHatGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_HiHatGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=9*(this._isGrace?.75:1)*this.get_Scale()},__class__:alphaTab_rendering_glyphs_HiHatGlyph});var alphaTab_rendering_glyphs_LeftToRightLayoutingGlyphGroup=function(){alphaTab_rendering_glyphs_GlyphGroup.call(this,0,0);this.Glyphs=[]};alphaTab_rendering_glyphs_LeftToRightLayoutingGlyphGroup.__name__=!0,alphaTab_rendering_glyphs_LeftToRightLayoutingGlyphGroup.__super__=alphaTab_rendering_glyphs_GlyphGroup,alphaTab_rendering_glyphs_LeftToRightLayoutingGlyphGroup.prototype=$extend(alphaTab_rendering_glyphs_GlyphGroup.prototype,{AddGlyph:function(g){g.X=0==this.Glyphs.length?0:this.Glyphs[this.Glyphs.length-1].X+this.Glyphs[this.Glyphs.length-1].Width,g.Renderer=this.Renderer,g.DoLayout(),this.Width=g.X+g.Width,alphaTab_rendering_glyphs_GlyphGroup.prototype.AddGlyph.call(this,g)},__class__:alphaTab_rendering_glyphs_LeftToRightLayoutingGlyphGroup});var alphaTab_rendering_glyphs_LineRangedGlyph=function(label){alphaTab_rendering_glyphs_GroupedEffectGlyph.call(this,2),this._label=label};alphaTab_rendering_glyphs_LineRangedGlyph.__name__=!0,alphaTab_rendering_glyphs_LineRangedGlyph.__super__=alphaTab_rendering_glyphs_GroupedEffectGlyph,alphaTab_rendering_glyphs_LineRangedGlyph.prototype=$extend(alphaTab_rendering_glyphs_GroupedEffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_GroupedEffectGlyph.prototype.DoLayout.call(this),this.Height=this.Renderer.get_Resources().EffectFont.Size},PaintNonGrouped:function(cx,cy,canvas){var res=this.Renderer.get_Resources();canvas.set_Font(res.EffectFont),canvas.set_TextAlign(0),canvas.FillText(this._label,cx+this.X,cy+this.Y)},PaintGrouped:function(cx,cy,endX,canvas){this.PaintNonGrouped(cx,cy,canvas);var lineSpacing=3*this.get_Scale(),textWidth=canvas.MeasureText(this._label),startX=cx+this.X+textWidth+lineSpacing,lineY=cy+this.Y+8*this.get_Scale(),lineSize=8*this.get_Scale();if(endX>startX){for(var lineX=startX;lineX<endX;){canvas.BeginPath();var this1=system_Convert.ToInt32_Single(lineY);canvas.MoveTo(lineX,this1);var tmp=Math.min(lineX+lineSize,endX),this2=system_Convert.ToInt32_Single(lineY);canvas.LineTo(tmp,this2),lineX=lineX+lineSize+lineSpacing,canvas.Stroke()}canvas.BeginPath();var this3=system_Convert.ToInt32_Single(lineY-6*this.get_Scale());canvas.MoveTo(endX,this3);var this4=system_Convert.ToInt32_Single(lineY+6*this.get_Scale());canvas.LineTo(endX,this4),canvas.Stroke()}},__class__:alphaTab_rendering_glyphs_LineRangedGlyph});var alphaTab_rendering_glyphs_LyricsGlyph=function(x,y,lines,font,textAlign){null==textAlign&&(textAlign=1),alphaTab_rendering_glyphs_EffectGlyph.call(this,x,y),this._lines=lines,this.Font=font,this.TextAlign=textAlign};alphaTab_rendering_glyphs_LyricsGlyph.__name__=!0,alphaTab_rendering_glyphs_LyricsGlyph.__super__=alphaTab_rendering_glyphs_EffectGlyph,alphaTab_rendering_glyphs_LyricsGlyph.prototype=$extend(alphaTab_rendering_glyphs_EffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_EffectGlyph.prototype.DoLayout.call(this),this.Height=this.Font.Size*this._lines.length},Paint:function(cx,cy,canvas){canvas.set_Font(this.Font);var old=canvas.get_TextAlign();canvas.set_TextAlign(this.TextAlign);for(var i=0;i<this._lines.length;)null!=this._lines[i]&&canvas.FillText(this._lines[i],cx+this.X,cy+this.Y+i*this.Font.Size),++i;canvas.set_TextAlign(old)},__class__:alphaTab_rendering_glyphs_LyricsGlyph});var alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$={};alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.__name__=!0,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.toString=function(this1){switch(this1){case-1:return"None";case 57424:return"ClefG";case 57436:return"ClefC";case 57442:return"ClefF";case 57449:return"ClefNeutral";case 57453:return"ClefTab";case 57454:return"ClefTabSmall";case 57472:return"Num0";case 57473:return"Num1";case 57474:return"Num2";case 57475:return"Num3";case 57476:return"Num4";case 57477:return"Num5";case 57478:return"Num6";case 57479:return"Num7";case 57480:return"Num8";case 57481:return"Num9";case 57482:return"TimeSignatureCommon";case 57483:return"TimeSignatureCutCommon";case 57504:return"NoteDoubleWhole";case 57505:return"NoteQuadrupleWhole";case 57506:return"NoteWhole";case 57507:return"NoteHalf";case 57508:return"NoteQuarter";case 57513:return"NoteSideStick";case 57514:return"NoteDead";case 57523:return"NoteHiHat";case 57564:return"NoteHarmonic";case 57566:return"NoteRideCymbal";case 57591:return"NoteHiHatHalf";case 57593:return"NoteChineseCymbal";case 57813:return"Tempo";case 57815:return"GraceUp";case 57816:return"GraceDown";case 57888:return"TremoloPickingEighth";case 57889:return"TremoloPickingSixteenth";case 57890:return"TremoloPickingThirtySecond";case 57920:return"FooterUpEighth";case 57921:return"FooterDownEighth";case 57922:return"FooterUpSixteenth";case 57923:return"FooterDownSixteenth";case 57924:return"FooterUpThirtySecond";case 57925:return"FooterDownThirtySecond";case 57926:return"FooterUpSixtyFourth";case 57927:return"FooterDownSixtyFourth";case 57928:return"FooterUpOneHundredTwentyEighth";case 57929:return"FooterDownOneHundredTwentyEighth";case 57930:return"FooterUpTwoHundredFiftySixth";case 57931:return"FooterDownTwoHundredFiftySixth";case 57952:return"AccidentalFlat";case 57953:return"AccidentalNatural";case 57954:return"AccidentalSharp";case 58528:return"Accentuation";case 58540:return"HeavyAccentuation";case 58593:return"RestQuadrupleWhole";case 58594:return"RestDoubleWhole";case 58595:return"RestWhole";case 58596:return"RestHalf";case 58597:return"RestQuarter";case 58598:return"RestEighth";case 58599:return"RestSixteenth";case 58600:return"RestThirtySecond";case 58601:return"RestSixtyFourth";case 58602:return"RestOneHundredTwentyEighth";case 58603:return"RestTwoHundredFiftySixth";case 58656:return"DynamicP";case 58658:return"DynamicF";case 58666:return"DynamicPPP";case 58667:return"DynamicPP";case 58668:return"DynamicMP";case 58669:return"DynamicMF";case 58671:return"DynamicFF";case 58672:return"DynamicFFF";case 58726:return"Trill";case 58896:return"PickStrokeDown";case 58898:return"PickStrokeUp";case 60068:return"WaveHorizontal"}return""};var alphaTab_rendering_glyphs_NaturalizeGlyph=function(x,y,isGrace){null==isGrace&&(isGrace=!1),alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,57953),this._isGrace=isGrace};alphaTab_rendering_glyphs_NaturalizeGlyph.__name__=!0,alphaTab_rendering_glyphs_NaturalizeGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_NaturalizeGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=8*(this._isGrace?.75:1)*this.get_Scale()},__class__:alphaTab_rendering_glyphs_NaturalizeGlyph});var alphaTab_rendering_glyphs_NoteHeadGlyph=function(x,y,duration,isGrace){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,alphaTab_rendering_glyphs_NoteHeadGlyph.GetSymbol(duration)),this._isGrace=isGrace,this._duration=duration};alphaTab_rendering_glyphs_NoteHeadGlyph.__name__=!0,alphaTab_rendering_glyphs_NoteHeadGlyph.GetSymbol=function(duration){switch(duration){case-4:return 57505;case-2:return 57504;case 1:return 57506;case 2:return 57507;default:return 57508}},alphaTab_rendering_glyphs_NoteHeadGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_NoteHeadGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){switch(this._duration){case-4:case-2:case 1:this.Width=14*(this._isGrace?.75:1)*this.get_Scale();break;default:this.Width=9*(this._isGrace?.75:1)*this.get_Scale()}},__class__:alphaTab_rendering_glyphs_NoteHeadGlyph});var alphaTab_rendering_glyphs_NoteNumberGlyph=function(x,y,n){alphaTab_rendering_glyphs_Glyph.call(this,x,y),n.IsTieDestination?0==n.Beat.Index||n.get_HasBend()?this._noteString="("+(n.TieOrigin.Fret-n.Beat.Voice.Bar.Staff.Track.TranspositionPitch)+")":this._noteString="":(this._noteString=n.IsDead?"x":Std.string(n.Fret-n.Beat.Voice.Bar.Staff.Track.TranspositionPitch),n.IsGhost&&(this._noteString="("+this._noteString+")")),n.get_IsTrill()?this._trillNoteString="("+(n.get_TrillFret()-n.Beat.Voice.Bar.Staff.Track.TranspositionPitch)+")":this._trillNoteString=""};alphaTab_rendering_glyphs_NoteNumberGlyph.__name__=!0,alphaTab_rendering_glyphs_NoteNumberGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_NoteNumberGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){var tmp,s=this._noteString;if(null==s||0==s.length){var s1=this._trillNoteString;tmp=null==s1||0==s1.length}else tmp=!1;this.IsEmpty=tmp,this.IsEmpty||(this.Renderer.ScoreRenderer.Canvas.set_Font(this.Renderer.get_Resources().TablatureFont),this._noteStringWidth=this.Renderer.ScoreRenderer.Canvas.MeasureText(this._noteString),this._trillNoteStringWidth=this.Renderer.ScoreRenderer.Canvas.MeasureText(this._trillNoteString),this.Width=this._noteStringWidth+this._trillNoteStringWidth)},Paint:function(cx,cy,canvas){if(!this.IsEmpty){var textWidth=this._noteStringWidth+this._trillNoteStringWidth,x=cx+this.X+(this.Width-textWidth)/2;canvas.FillText(this._noteString,x,cy+this.Y),canvas.FillText(this._trillNoteString,x+this._noteStringWidth,cy+this.Y)}},__class__:alphaTab_rendering_glyphs_NoteNumberGlyph});var alphaTab_rendering_glyphs_NumberGlyph=function(x,y,number,scale){null==scale&&(scale=1),alphaTab_rendering_glyphs_GlyphGroup.call(this,x,y),this._number=number,this._scale=scale};alphaTab_rendering_glyphs_NumberGlyph.__name__=!0,alphaTab_rendering_glyphs_NumberGlyph.__super__=alphaTab_rendering_glyphs_GlyphGroup,alphaTab_rendering_glyphs_NumberGlyph.prototype=$extend(alphaTab_rendering_glyphs_GlyphGroup.prototype,{DoLayout:function(){for(var i=this._number;i>0;){var gl=new alphaTab_rendering_glyphs_DigitGlyph(0,0,i%10,this._scale);this.AddGlyph(gl),i=i/10|0}this.Glyphs.reverse();for(var cx=0,j=0,k=this.Glyphs.length;j<k;){var g=this.Glyphs[j];g.X=cx,g.Y=0,g.Renderer=this.Renderer,g.DoLayout(),cx+=g.Width,++j}this.Width=cx},__class__:alphaTab_rendering_glyphs_NumberGlyph});var alphaTab_rendering_glyphs_PickStrokeGlyph=function(x,y,pickStroke){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,.75,alphaTab_rendering_glyphs_PickStrokeGlyph.GetSymbol(pickStroke))};alphaTab_rendering_glyphs_PickStrokeGlyph.__name__=!0,alphaTab_rendering_glyphs_PickStrokeGlyph.GetSymbol=function(pickStroke){switch(pickStroke){case 1:return 58898;case 2:return 58896;default:return-1}},alphaTab_rendering_glyphs_PickStrokeGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_PickStrokeGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=9*this.get_Scale(),this.Height=10*this.get_Scale()},Paint:function(cx,cy,canvas){alphaTab_rendering_glyphs_MusicFontGlyph.prototype.Paint.call(this,cx,cy+this.Height,canvas)},__class__:alphaTab_rendering_glyphs_PickStrokeGlyph});var alphaTab_rendering_glyphs_RepeatCloseGlyph=function(x,y){alphaTab_rendering_glyphs_Glyph.call(this,x,y)};alphaTab_rendering_glyphs_RepeatCloseGlyph.__name__=!0,alphaTab_rendering_glyphs_RepeatCloseGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_RepeatCloseGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=11*this.get_Scale()},Paint:function(cx,cy,canvas){var blockWidth=4*this.get_Scale(),top=cy+this.Y+this.Renderer.TopPadding,bottom=cy+this.Y+this.Renderer.Height-this.Renderer.BottomPadding,left=cx+this.X,h=bottom-top,circleSize=1.5*this.get_Scale(),middle=(top+bottom)/2;canvas.FillCircle(left,middle-3*circleSize,circleSize),canvas.FillCircle(left,middle+3*circleSize,circleSize),left+=4*this.get_Scale(),canvas.BeginPath(),canvas.MoveTo(left,top),canvas.LineTo(left,bottom),canvas.Stroke();left=left+3*this.get_Scale()+.5,canvas.FillRect(left,top,blockWidth,h)},__class__:alphaTab_rendering_glyphs_RepeatCloseGlyph});var alphaTab_rendering_glyphs_RepeatCountGlyph=function(x,y,count){alphaTab_rendering_glyphs_Glyph.call(this,x,y),this._count=count};alphaTab_rendering_glyphs_RepeatCountGlyph.__name__=!0,alphaTab_rendering_glyphs_RepeatCountGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_RepeatCountGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=0},Paint:function(cx,cy,canvas){var res=this.Renderer.get_Resources(),oldAlign=canvas.get_TextAlign();canvas.set_Font(res.BarNumberFont),canvas.set_TextAlign(2);var s="x"+this._count,w=canvas.MeasureText(s)/1.5;canvas.FillText(s,cx+this.X-w,cy+this.Y),canvas.set_TextAlign(oldAlign)},__class__:alphaTab_rendering_glyphs_RepeatCountGlyph});var alphaTab_rendering_glyphs_RepeatOpenGlyph=function(x,y,circleSize,dotOffset){alphaTab_rendering_glyphs_Glyph.call(this,x,y),this._dotOffset=dotOffset,this._circleSize=circleSize};alphaTab_rendering_glyphs_RepeatOpenGlyph.__name__=!0,alphaTab_rendering_glyphs_RepeatOpenGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_RepeatOpenGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=13*this.get_Scale()},Paint:function(cx,cy,canvas){var blockWidth=4*this.get_Scale(),top=cy+this.Y+this.Renderer.TopPadding,bottom=cy+this.Y+this.Renderer.Height-this.Renderer.BottomPadding,left=cx+this.X+.5,h=bottom-top;canvas.FillRect(left,top,blockWidth,h);left=left+2*blockWidth-.5,canvas.BeginPath(),canvas.MoveTo(left,top),canvas.LineTo(left,bottom),canvas.Stroke(),left+=3*this.get_Scale();var circleSize=this._circleSize*this.get_Scale(),middle=(top+bottom)/2;canvas.FillCircle(left,middle-circleSize*this._dotOffset,circleSize),canvas.FillCircle(left,middle+circleSize*this._dotOffset,circleSize)},__class__:alphaTab_rendering_glyphs_RepeatOpenGlyph});var alphaTab_rendering_glyphs_RideCymbalGlyph=function(x,y,isGrace){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,57566),this._isGrace=isGrace};alphaTab_rendering_glyphs_RideCymbalGlyph.__name__=!0,alphaTab_rendering_glyphs_RideCymbalGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_RideCymbalGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=9*(this._isGrace?.75:1)*this.get_Scale()},__class__:alphaTab_rendering_glyphs_RideCymbalGlyph});var alphaTab_rendering_glyphs_ScoreBeatGlyph=function(){alphaTab_rendering_glyphs_BeatOnNoteGlyphBase.call(this)};alphaTab_rendering_glyphs_ScoreBeatGlyph.__name__=!0,alphaTab_rendering_glyphs_ScoreBeatGlyph.__super__=alphaTab_rendering_glyphs_BeatOnNoteGlyphBase,alphaTab_rendering_glyphs_ScoreBeatGlyph.prototype=$extend(alphaTab_rendering_glyphs_BeatOnNoteGlyphBase.prototype,{UpdateBeamingHelper:function(){null!=this.NoteHeads?this.NoteHeads.UpdateBeamingHelper(this.Container.X+this.X):null!=this.RestGlyph&&this.RestGlyph.UpdateBeamingHelper(this.Container.X+this.X)},DoLayout:function(){var sr=js_Boot.__cast(this.Renderer,alphaTab_rendering_ScoreBarRenderer);if(!this.Container.Beat.IsEmpty)if(this.Container.Beat.get_IsRest()){var dotLine=0,line=0,offset=0;switch(this.Container.Beat.Duration){case-4:case-2:line=6,dotLine=5;break;case 1:line=4,dotLine=5;break;case 2:line=6,dotLine=5;break;case 4:line=6,offset=-2,dotLine=5;break;case 8:case 16:line=6,dotLine=5;break;case 32:case 64:case 128:case 256:line=6,dotLine=3}var this1=line,this2=offset,y=sr.GetScoreY(this1,this2);if(this.RestGlyph=new alphaTab_rendering_glyphs_ScoreRestGlyph(0,y,this.Container.Beat.Duration),this.RestGlyph.Beat=this.Container.Beat,this.RestGlyph.BeamingHelper=this.BeamingHelper,this.AddGlyph(this.RestGlyph),this.Container.Beat.Dots>0){this.AddGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,5*this.get_Scale()));for(var i1=0;i1<this.Container.Beat.Dots;){var group1=new alphaTab_rendering_glyphs_GlyphGroup(0,0);this.CreateBeatDot(dotLine,group1),this.AddGlyph(group1),++i1}}}else{this.NoteHeads=new alphaTab_rendering_glyphs_ScoreNoteChordGlyph,this.NoteHeads.Beat=this.Container.Beat,this.NoteHeads.BeamingHelper=this.BeamingHelper;for(var note=$iterator(this.Container.Beat.Notes)();note.hasNext();){var note1=note.next();this.CreateNoteGlyph(note1)}if(this.AddGlyph(this.NoteHeads),this.Container.Beat.Dots>0){this.AddGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,5*this.get_Scale()));for(var i=0;i<this.Container.Beat.Dots;){for(var group=new alphaTab_rendering_glyphs_GlyphGroup(0,0),note2=$iterator(this.Container.Beat.Notes)();note2.hasNext();){var note3=note2.next();this.CreateBeatDot(sr.GetNoteLine(note3),group)}this.AddGlyph(group),++i}}}alphaTab_rendering_glyphs_BeatOnNoteGlyphBase.prototype.DoLayout.call(this)},CreateBeatDot:function(line,group){var sr=js_Boot.__cast(this.Renderer,alphaTab_rendering_ScoreBarRenderer),this1=line;group.AddGlyph(new alphaTab_rendering_glyphs_CircleGlyph(0,sr.GetScoreY(this1,0),1.5*this.get_Scale()))},CreateNoteHeadGlyph:function(n){var isGrace=0!=this.Container.Beat.GraceType;if(n.Beat.Voice.Bar.Staff.Track.IsPercussion){var value=n.get_RealValue();return value<=30||value>=67||alphaTab_rendering_glyphs_ScoreBeatGlyph.NormalKeys.hasOwnProperty(value)?new alphaTab_rendering_glyphs_NoteHeadGlyph(0,0,4,isGrace):alphaTab_rendering_glyphs_ScoreBeatGlyph.XKeys.hasOwnProperty(value)?new alphaTab_rendering_glyphs_DrumSticksGlyph(0,0,isGrace):46==value?new alphaTab_rendering_glyphs_HiHatGlyph(0,0,isGrace):49==value||57==value?new alphaTab_rendering_glyphs_DiamondNoteHeadGlyph(0,0,isGrace):52==value?new alphaTab_rendering_glyphs_ChineseCymbalGlyph(0,0,isGrace):51==value||53==value||59==value?new alphaTab_rendering_glyphs_RideCymbalGlyph(0,0,isGrace):new alphaTab_rendering_glyphs_NoteHeadGlyph(0,0,4,isGrace)}return n.IsDead?new alphaTab_rendering_glyphs_DeadNoteHeadGlyph(0,0,isGrace):0==n.HarmonicType?new alphaTab_rendering_glyphs_NoteHeadGlyph(0,0,n.Beat.Duration,isGrace):new alphaTab_rendering_glyphs_DiamondNoteHeadGlyph(0,0,isGrace)},CreateNoteGlyph:function(n){var sr=js_Boot.__cast(this.Renderer,alphaTab_rendering_ScoreBarRenderer),noteHeadGlyph=this.CreateNoteHeadGlyph(n),line=sr.GetNoteLine(n),this1=line;noteHeadGlyph.Y=sr.GetScoreY(this1,0),this.NoteHeads.AddNoteGlyph(noteHeadGlyph,n,line),n.IsStaccato&&!this.NoteHeads.BeatEffects.hasOwnProperty("Staccato")&&(this.NoteHeads.BeatEffects.Staccato=new alphaTab_rendering_glyphs_CircleGlyph(0,0,1.5)),1!=n.Accentuated||this.NoteHeads.BeatEffects.hasOwnProperty("Accent")||(this.NoteHeads.BeatEffects.Accent=new alphaTab_rendering_glyphs_AccentuationGlyph(0,0,1)),2!=n.Accentuated||this.NoteHeads.BeatEffects.hasOwnProperty("HAccent")||(this.NoteHeads.BeatEffects.HAccent=new alphaTab_rendering_glyphs_AccentuationGlyph(0,0,2))},__class__:alphaTab_rendering_glyphs_ScoreBeatGlyph});var alphaTab_rendering_glyphs_ScoreBeatPreNotesGlyph=function(){alphaTab_rendering_glyphs_BeatGlyphBase.call(this)};alphaTab_rendering_glyphs_ScoreBeatPreNotesGlyph.__name__=!0,alphaTab_rendering_glyphs_ScoreBeatPreNotesGlyph.__super__=alphaTab_rendering_glyphs_BeatGlyphBase,alphaTab_rendering_glyphs_ScoreBeatPreNotesGlyph.prototype=$extend(alphaTab_rendering_glyphs_BeatGlyphBase.prototype,{DoLayout:function(){if(!this.Container.Beat.get_IsRest()){0!=this.Container.Beat.BrushType&&(this.AddGlyph(new alphaTab_rendering_glyphs_ScoreBrushGlyph(this.Container.Beat)),this.AddGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,4*this.get_Scale())));for(var accidentals=new alphaTab_rendering_glyphs_AccidentalGroupGlyph,note=$iterator(this.Container.Beat.Notes)();note.hasNext();){var note1=note.next();this.CreateAccidentalGlyph(note1,accidentals)}accidentals.get_IsEmpty()||(this.AddGlyph(accidentals),this.AddGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,4*(0!=this.Container.Beat.GraceType?.75:1)*this.get_Scale())))}alphaTab_rendering_glyphs_BeatGlyphBase.prototype.DoLayout.call(this)},CreateAccidentalGlyph:function(n,accidentals){var sr=js_Boot.__cast(this.Renderer,alphaTab_rendering_ScoreBarRenderer),accidental=sr.AccidentalHelper.ApplyAccidental(n),noteLine=sr.GetNoteLine(n),isGrace=0!=this.Container.Beat.GraceType;switch(accidental){case 1:var this1=noteLine;accidentals.AddGlyph(new alphaTab_rendering_glyphs_NaturalizeGlyph(0,sr.GetScoreY(this1,0),isGrace));break;case 2:var this2=noteLine;accidentals.AddGlyph(new alphaTab_rendering_glyphs_SharpGlyph(0,sr.GetScoreY(this2,0),isGrace));break;case 3:var this3=noteLine;accidentals.AddGlyph(new alphaTab_rendering_glyphs_FlatGlyph(0,sr.GetScoreY(this3,0),isGrace))}},__class__:alphaTab_rendering_glyphs_ScoreBeatPreNotesGlyph});var alphaTab_rendering_glyphs_ScoreBrushGlyph=function(beat){alphaTab_rendering_glyphs_Glyph.call(this,0,0),this._beat=beat};alphaTab_rendering_glyphs_ScoreBrushGlyph.__name__=!0,alphaTab_rendering_glyphs_ScoreBrushGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_ScoreBrushGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=10*this.get_Scale()},Paint:function(cx,cy,canvas){var scoreBarRenderer=js_Boot.__cast(this.Renderer,alphaTab_rendering_ScoreBarRenderer),lineSize=scoreBarRenderer.get_LineOffset(),startY=cy+this.Y+(scoreBarRenderer.GetNoteY(this._beat.get_MaxNote())-lineSize/2),endY=cy+this.Y+scoreBarRenderer.GetNoteY(this._beat.get_MinNote())+lineSize,arrowX=cx+this.X+this.Width/2,arrowSize=8*this.get_Scale();0!=this._beat.BrushType&&(3==this._beat.BrushType?(canvas.BeginPath(),canvas.MoveTo(arrowX,endY),canvas.LineTo(arrowX+arrowSize/2,endY-arrowSize),canvas.LineTo(arrowX-arrowSize/2,endY-arrowSize),canvas.ClosePath(),canvas.Fill()):4==this._beat.BrushType&&(canvas.BeginPath(),canvas.MoveTo(arrowX,startY),canvas.LineTo(arrowX+arrowSize/2,startY+arrowSize),canvas.LineTo(arrowX-arrowSize/2,startY+arrowSize),canvas.ClosePath(),canvas.Fill()))},__class__:alphaTab_rendering_glyphs_ScoreBrushGlyph});var alphaTab_rendering_glyphs_TieGlyph=function(startBeat,endBeat,forEnd){alphaTab_rendering_glyphs_Glyph.call(this,0,0),this.StartBeat=startBeat,this.EndBeat=endBeat,this._forEnd=forEnd};alphaTab_rendering_glyphs_TieGlyph.__name__=!0,alphaTab_rendering_glyphs_TieGlyph.PaintTie=function(canvas,scale,x1,y1,x2,y2,down){if(null==down&&(down=!1),x1!=x2||y1!=y2){if(x2<x1){var t=x1;x1=x2,x2=t,t=y1,y1=y2,y2=t}var offset=22*scale,size=4*scale,normalVectorX=y2-y1,normalVectorY=x2-x1,length=js_Boot.__cast(Math.sqrt(normalVectorX*normalVectorX+normalVectorY*normalVectorY),Float);down?normalVectorX*=-1:normalVectorY*=-1;var centerX=(x2+x1)/2,centerY=(y2+y1)/2,cp1X=centerX+offset*(normalVectorX/=length),cp1Y=centerY+offset*(normalVectorY/=length),cp2X=centerX+(offset-size)*normalVectorX,cp2Y=centerY+(offset-size)*normalVectorY;canvas.BeginPath(),canvas.MoveTo(x1,y1),canvas.QuadraticCurveTo(cp1X,cp1Y,x2,y2),canvas.QuadraticCurveTo(cp2X,cp2Y,x1,y1),canvas.ClosePath()}},alphaTab_rendering_glyphs_TieGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_TieGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=0},Paint:function(cx,cy,canvas){if(null!=this.EndBeat){var startNoteRenderer=this.Renderer.ScoreRenderer.Layout.GetRendererForBar(this.Renderer.Staff.get_StaveId(),this.StartBeat.Voice.Bar),endNoteRenderer=this.Renderer.ScoreRenderer.Layout.GetRendererForBar(this.Renderer.Staff.get_StaveId(),this.EndBeat.Voice.Bar),startX=0,endX=0,startY=0,endY=0,shouldDraw=!1,direction=this.GetBeamDirection(this.StartBeat,startNoteRenderer);this._forEnd?startNoteRenderer.Staff!=endNoteRenderer.Staff&&(startX=cx+endNoteRenderer.X,endX=cx+endNoteRenderer.X+this.GetEndX(endNoteRenderer),endY=startY=cy+endNoteRenderer.Y+this.GetEndY(endNoteRenderer,direction)+this.YOffset,shouldDraw=!0):(startNoteRenderer!=endNoteRenderer?(startX=cx+startNoteRenderer.X+this.GetStartX(startNoteRenderer),startY=cy+startNoteRenderer.Y+this.GetStartY(startNoteRenderer,direction)+this.YOffset,null==endNoteRenderer||startNoteRenderer.Staff!=endNoteRenderer.Staff?(endX=cx+startNoteRenderer.X+startNoteRenderer.Width,endY=startY):(endX=cx+endNoteRenderer.X+this.GetEndX(endNoteRenderer),endY=cy+endNoteRenderer.Y+this.GetEndY(endNoteRenderer,direction)+this.YOffset)):(startX=cx+startNoteRenderer.X+this.GetStartX(startNoteRenderer),endX=cx+endNoteRenderer.X+this.GetEndX(endNoteRenderer),startY=cy+startNoteRenderer.Y+this.GetStartY(startNoteRenderer,direction)+this.YOffset,endY=cy+endNoteRenderer.Y+this.GetEndY(endNoteRenderer,direction)+this.YOffset),shouldDraw=!0),shouldDraw&&(alphaTab_rendering_glyphs_TieGlyph.PaintTie(canvas,this.get_Scale(),startX,startY,endX,endY,1==direction),canvas.Fill())}},GetBeamDirection:function(beat,noteRenderer){return 1},GetStartY:function(noteRenderer,direction){return 0},GetEndY:function(noteRenderer,direction){return 0},GetStartX:function(noteRenderer){return 0},GetEndX:function(noteRenderer){return 0},__class__:alphaTab_rendering_glyphs_TieGlyph});var alphaTab_rendering_glyphs_ScoreLegatoGlyph=function(startBeat,endBeat,forEnd){null==forEnd&&(forEnd=!1),alphaTab_rendering_glyphs_TieGlyph.call(this,startBeat,endBeat,forEnd)};alphaTab_rendering_glyphs_ScoreLegatoGlyph.__name__=!0,alphaTab_rendering_glyphs_ScoreLegatoGlyph.__super__=alphaTab_rendering_glyphs_TieGlyph,alphaTab_rendering_glyphs_ScoreLegatoGlyph.prototype=$extend(alphaTab_rendering_glyphs_TieGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_TieGlyph.prototype.DoLayout.call(this),this.YOffset=4.5},GetBeamDirection:function(beat,noteRenderer){if(beat.get_IsRest())return 0;return 0==js_Boot.__cast(noteRenderer,alphaTab_rendering_ScoreBarRenderer).GetBeatDirection(beat)?1:0},GetStartY:function(noteRenderer,direction){return this.StartBeat.get_IsRest()?js_Boot.__cast(noteRenderer,alphaTab_rendering_ScoreBarRenderer).GetScoreY(9,0):0==direction?noteRenderer.GetNoteY(this.StartBeat.get_MinNote()):noteRenderer.GetNoteY(this.StartBeat.get_MaxNote())},GetEndY:function(noteRenderer,direction){return this.EndBeat.get_IsRest()?0==direction?js_Boot.__cast(noteRenderer,alphaTab_rendering_ScoreBarRenderer).GetScoreY(9,0):js_Boot.__cast(noteRenderer,alphaTab_rendering_ScoreBarRenderer).GetScoreY(0,0):0==direction?js_Boot.__cast(noteRenderer,alphaTab_rendering_ScoreBarRenderer).GetNoteY(this.EndBeat.get_MinNote()):js_Boot.__cast(noteRenderer,alphaTab_rendering_ScoreBarRenderer).GetNoteY(this.EndBeat.get_MaxNote())},GetStartX:function(noteRenderer){return this.StartBeat.get_IsRest()?noteRenderer.GetBeatX(this.StartBeat,0):noteRenderer.GetNoteX(this.StartBeat.get_MinNote(),!0)},GetEndX:function(noteRenderer){return this.EndBeat.get_IsRest()?noteRenderer.GetBeatX(this.EndBeat,0):noteRenderer.GetNoteX(this.EndBeat.get_MinNote(),!1)},__class__:alphaTab_rendering_glyphs_ScoreLegatoGlyph});var alphaTab_rendering_glyphs_ScoreNoteChordGlyph=function(){alphaTab_rendering_glyphs_Glyph.call(this,0,0);this._infos=[];this.BeatEffects={};this._noteLookup={}};alphaTab_rendering_glyphs_ScoreNoteChordGlyph.__name__=!0,alphaTab_rendering_glyphs_ScoreNoteChordGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_ScoreNoteChordGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{get_Direction:function(){return this.BeamingHelper.Direction},GetNoteX:function(note,onEnd){if(null==onEnd&&(onEnd=!0),this._noteLookup.hasOwnProperty(note.String)){var n=this._noteLookup[note.String],pos=this.X+n.X;return onEnd&&(pos+=n.Width),pos}return 0},GetNoteY:function(note){return this._noteLookup.hasOwnProperty(note.String)?this.Y+this._noteLookup[note.String].Y:0},AddNoteGlyph:function(noteGlyph,note,noteLine){var info=new alphaTab_rendering_glyphs_ScoreNoteGlyphInfo(noteGlyph,noteLine,note);this._infos.push(info),this._noteLookup[note.String]=noteGlyph,(null==this.MinNote||this.MinNote.Line>info.Line)&&(this.MinNote=info),(null==this.MaxNote||this.MaxNote.Line<info.Line)&&(this.MaxNote=info)},UpdateBeamingHelper:function(cx){null!=this.BeamingHelper&&this.BeamingHelper.RegisterBeatLineX("score",this.Beat,cx+this.X+this.UpLineX,cx+this.X+this.DownLineX)},get_HasTopOverflow:function(){return null!=this.MinNote&&this.MinNote.Line<0},get_HasBottomOverflow:function(){return null!=this.MaxNote&&this.MaxNote.Line>8},DoLayout:function(){this._infos.sort(function(a1,b1){return a=a1,b=b1,system__$Int32_Int32_$Impl_$.CompareTo_Int32(a.Line,b.Line);var a,b});for(var displacedX=0,lastDisplaced=!1,lastLine=0,anyDisplaced=!1,direction=this.get_Direction(),w=0,i=0,j=this._infos.length;i<j;){var g=this._infos[i].Glyph;g.Renderer=this.Renderer,g.DoLayout();var displace=!1;if(0==i?displacedX=g.Width+0:Math.abs(lastLine-this._infos[i].Line)<=1?lastDisplaced?lastDisplaced=!1:(displace=!0,g.X=displacedX-this.get_Scale(),anyDisplaced=!0,lastDisplaced=!0):lastDisplaced=!1,1==direction){var tmp;if(displace){tmp=0}else tmp=displacedX;g.X=tmp}else{var tmp1;if(displace)tmp1=displacedX;else{tmp1=0}g.X=tmp1}lastLine=this._infos[i].Line,w=Math.max(w,g.X+g.Width),++i}if(anyDisplaced)this._noteHeadPadding=0,this.UpLineX=displacedX,this.DownLineX=displacedX;else{this._noteHeadPadding=1==direction?-displacedX:0,w+=this._noteHeadPadding,this.UpLineX=w;this.DownLineX=0}for(var this4=this.BeatEffects,effectKey=$iterator(Object.keys(this4))();effectKey.hasNext();){var effectKey1=effectKey.next(),effect=this.BeatEffects[effectKey1];effect.Renderer=this.Renderer,effect.DoLayout()}if(this.Beat.get_IsTremolo()){var offset,baseNote=0==direction?this.MinNote:this.MaxNote,tremoloX=0==direction?displacedX:0;switch(this.Beat.TremoloSpeed){case 8:offset=0==direction?-10:10;break;case 16:offset=0==direction?-12:15;break;case 32:offset=0==direction?-15:15;break;default:offset=0==direction?-10:15}this._tremoloPicking=new alphaTab_rendering_glyphs_TremoloPickingGlyph(tremoloX,baseNote.Glyph.Y+offset*this.get_Scale(),this.Beat.TremoloSpeed),this._tremoloPicking.Renderer=this.Renderer,this._tremoloPicking.DoLayout()}this.Width=w+0},Paint:function(cx,cy,canvas){cx+=this.X,cy+=this.Y;var effectY,scoreRenderer=js_Boot.__cast(this.Renderer,alphaTab_rendering_ScoreBarRenderer);if(0==this.BeamingHelper.Direction){var this1=this.MaxNote.Line;effectY=scoreRenderer.GetScoreY(this1,13.5)}else{var this3=this.MinNote.Line;effectY=scoreRenderer.GetScoreY(this3,-9)}for(var effectSpacing=0==this.BeamingHelper.Direction?7*this.get_Scale():-7*this.get_Scale(),this4=this.BeatEffects,effectKey=$iterator(Object.keys(this4))();effectKey.hasNext();){var effectKey1=effectKey.next(),g=this.BeatEffects[effectKey1];g.Y=effectY,g.X=this.Width/2,g.Paint(cx,cy,canvas),effectY+=effectSpacing}var linePadding=3*this.get_Scale(),lineWidth=this.Width+2*linePadding;if(this.get_HasTopOverflow()){var color=canvas.get_Color();canvas.set_Color(this.Renderer.ScoreRenderer.RenderingResources.StaveLineColor);for(var l=-1;l>=this.MinNote.Line;){var this5=l,lY=cy+scoreRenderer.GetScoreY(this5,0);canvas.FillRect(cx-linePadding,lY,lineWidth,this.get_Scale()),l-=2}canvas.set_Color(color)}if(this.get_HasBottomOverflow()){var color1=canvas.get_Color();canvas.set_Color(this.Renderer.ScoreRenderer.RenderingResources.StaveLineColor);for(var l1=12;l1<=this.MaxNote.Line;){var this6=l1,lY1=cy+scoreRenderer.GetScoreY(this6,0);canvas.FillRect(cx-linePadding,lY1,lineWidth,this.get_Scale()),l1+=2}canvas.set_Color(color1)}null!=this._tremoloPicking&&this._tremoloPicking.Paint(cx,cy,canvas);for(var infos=this._infos,x=cx+this._noteHeadPadding,g1=$iterator(infos)();g1.hasNext();){var g2=g1.next();g2.Glyph.Renderer=this.Renderer,g2.Glyph.Paint(x,cy,canvas)}},__class__:alphaTab_rendering_glyphs_ScoreNoteChordGlyph});var alphaTab_rendering_glyphs_ScoreNoteGlyphInfo=function(glyph,line,note){this.Glyph=glyph,this.Line=line};alphaTab_rendering_glyphs_ScoreNoteGlyphInfo.__name__=!0,alphaTab_rendering_glyphs_ScoreNoteGlyphInfo.prototype={__class__:alphaTab_rendering_glyphs_ScoreNoteGlyphInfo};var alphaTab_rendering_glyphs_ScoreRestGlyph=function(x,y,duration){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,1,alphaTab_rendering_glyphs_ScoreRestGlyph.GetSymbol(duration)),this._duration=duration};alphaTab_rendering_glyphs_ScoreRestGlyph.__name__=!0,alphaTab_rendering_glyphs_ScoreRestGlyph.GetSymbol=function(duration){switch(duration){case-4:return 58593;case-2:return 58594;case 1:return 58595;case 2:return 58596;case 4:return 58597;case 8:return 58598;case 16:return 58599;case 32:return 58600;case 64:return 58601;case 128:return 58602;case 256:return 58603;default:return-1}},alphaTab_rendering_glyphs_ScoreRestGlyph.GetSize=function(duration){switch(duration){case-4:case-2:case 1:case 2:case 4:case 8:case 16:return 9;case 32:return 12;case 64:return 14;case 128:case 256:return 20}return 10},alphaTab_rendering_glyphs_ScoreRestGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_ScoreRestGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=alphaTab_rendering_glyphs_ScoreRestGlyph.GetSize(this._duration)*this.get_Scale()},UpdateBeamingHelper:function(cx){null!=this.BeamingHelper&&this.BeamingHelper.RegisterBeatLineX("score",this.Beat,cx+this.X+this.Width/2,cx+this.X+this.Width/2)},__class__:alphaTab_rendering_glyphs_ScoreRestGlyph});var alphaTab_rendering_glyphs_ScoreSlideLineGlyph=function(type,startNote,parent){alphaTab_rendering_glyphs_Glyph.call(this,0,0),this._type=type,this._startNote=startNote,this._parent=parent};alphaTab_rendering_glyphs_ScoreSlideLineGlyph.__name__=!0,alphaTab_rendering_glyphs_ScoreSlideLineGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_ScoreSlideLineGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=0},Paint:function(cx,cy,canvas){var r=js_Boot.__cast(this.Renderer,alphaTab_rendering_ScoreBarRenderer);cx+=r.X,cy+=r.Y;var startX,startY,endX,endY,sizeX=12*this.get_Scale(),offsetX=this.get_Scale();switch(this._type){case 1:case 2:startX=cx+r.GetNoteX(this._startNote,!0)+offsetX,startY=cy+r.GetNoteY(this._startNote)+4.5,null!=this._startNote.SlideTarget?(endX=cx+r.GetNoteX(this._startNote.SlideTarget,!1)-offsetX,endY=cy+r.GetNoteY(this._startNote.SlideTarget)+4.5):(endX=cx+this._parent.X,endY=startY);break;case 3:endX=cx+r.GetNoteX(this._startNote,!1)-offsetX,endY=cy+r.GetNoteY(this._startNote)+4.5,startX=endX-sizeX,startY=cy+r.GetNoteY(this._startNote)+9;break;case 4:endX=cx+r.GetNoteX(this._startNote,!1)-offsetX,endY=cy+r.GetNoteY(this._startNote)+4.5,startX=endX-sizeX,startY=cy+r.GetNoteY(this._startNote);break;case 5:startX=cx+r.GetNoteX(this._startNote,!0)+offsetX,startY=cy+r.GetNoteY(this._startNote)+4.5,endX=startX+sizeX,endY=cy+r.GetNoteY(this._startNote);break;case 6:startX=cx+r.GetNoteX(this._startNote,!0)+offsetX,startY=cy+r.GetNoteY(this._startNote)+4.5,endX=startX+sizeX,endY=cy+r.GetNoteY(this._startNote)+9;break;default:return}canvas.BeginPath(),canvas.MoveTo(startX,startY),canvas.LineTo(endX,endY),canvas.Stroke()},__class__:alphaTab_rendering_glyphs_ScoreSlideLineGlyph});var alphaTab_rendering_glyphs_ScoreTieGlyph=function(startNote,endNote,forEnd){null==forEnd&&(forEnd=!1),alphaTab_rendering_glyphs_TieGlyph.call(this,null==startNote?null:startNote.Beat,null==endNote?null:endNote.Beat,forEnd),this._startNote=startNote,this._endNote=endNote};alphaTab_rendering_glyphs_ScoreTieGlyph.__name__=!0,alphaTab_rendering_glyphs_ScoreTieGlyph.__super__=alphaTab_rendering_glyphs_TieGlyph,alphaTab_rendering_glyphs_ScoreTieGlyph.prototype=$extend(alphaTab_rendering_glyphs_TieGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_TieGlyph.prototype.DoLayout.call(this),this.YOffset=4.5},GetBeamDirection:function(beat,noteRenderer){return 0==js_Boot.__cast(noteRenderer,alphaTab_rendering_ScoreBarRenderer).GetBeatDirection(beat)?1:0},GetStartY:function(noteRenderer,direction){return noteRenderer.GetNoteY(this._startNote)},GetEndY:function(noteRenderer,direction){return noteRenderer.GetNoteY(this._endNote)},GetStartX:function(noteRenderer){return noteRenderer.GetNoteX(this._startNote,!0)},GetEndX:function(noteRenderer){return noteRenderer.GetNoteX(this._endNote,!1)},__class__:alphaTab_rendering_glyphs_ScoreTieGlyph});var alphaTab_rendering_glyphs_TimeSignatureGlyph=function(x,y,numerator,denominator,isCommon){alphaTab_rendering_glyphs_GlyphGroup.call(this,x,y),this._numerator=numerator,this._denominator=denominator,this._isCommon=isCommon};alphaTab_rendering_glyphs_TimeSignatureGlyph.__name__=!0,alphaTab_rendering_glyphs_TimeSignatureGlyph.__super__=alphaTab_rendering_glyphs_GlyphGroup,alphaTab_rendering_glyphs_TimeSignatureGlyph.prototype=$extend(alphaTab_rendering_glyphs_GlyphGroup.prototype,{get_CommonY:function(){throw new js__$Boot_HaxeError("abstract")},get_NumeratorY:function(){throw new js__$Boot_HaxeError("abstract")},get_DenominatorY:function(){throw new js__$Boot_HaxeError("abstract")},get_CommonScale:function(){throw new js__$Boot_HaxeError("abstract")},get_NumberScale:function(){throw new js__$Boot_HaxeError("abstract")},DoLayout:function(){if(this._isCommon&&2==this._numerator&&2==this._denominator){var common=new alphaTab_rendering_glyphs_MusicFontGlyph(0,this.get_CommonY(),this.get_CommonScale(),57483);common.Width=14*this.get_Scale(),this.AddGlyph(common),alphaTab_rendering_glyphs_GlyphGroup.prototype.DoLayout.call(this)}else if(this._isCommon&&4==this._numerator&&4==this._denominator){var common1=new alphaTab_rendering_glyphs_MusicFontGlyph(0,this.get_CommonY(),this.get_CommonScale(),57482);common1.Width=14*this.get_Scale(),this.AddGlyph(common1),alphaTab_rendering_glyphs_GlyphGroup.prototype.DoLayout.call(this)}else{var numerator=new alphaTab_rendering_glyphs_NumberGlyph(0,this.get_NumeratorY(),this._numerator,this.get_NumberScale()),denominator=new alphaTab_rendering_glyphs_NumberGlyph(0,this.get_DenominatorY(),this._denominator,this.get_NumberScale());this.AddGlyph(numerator),this.AddGlyph(denominator),alphaTab_rendering_glyphs_GlyphGroup.prototype.DoLayout.call(this);for(var i=0,j=this.Glyphs.length;i<j;){var g=this.Glyphs[i];g.X=(this.Width-g.Width)/2,++i}}},__class__:alphaTab_rendering_glyphs_TimeSignatureGlyph});var alphaTab_rendering_glyphs_ScoreTimeSignatureGlyph=function(x,y,numerator,denominator,isCommon){alphaTab_rendering_glyphs_TimeSignatureGlyph.call(this,x,y,numerator,denominator,isCommon)};alphaTab_rendering_glyphs_ScoreTimeSignatureGlyph.__name__=!0,alphaTab_rendering_glyphs_ScoreTimeSignatureGlyph.__super__=alphaTab_rendering_glyphs_TimeSignatureGlyph,alphaTab_rendering_glyphs_ScoreTimeSignatureGlyph.prototype=$extend(alphaTab_rendering_glyphs_TimeSignatureGlyph.prototype,{get_CommonY:function(){return js_Boot.__cast(this.Renderer,alphaTab_rendering_ScoreBarRenderer).GetScoreY(4,0)},get_NumeratorY:function(){return 2*this.get_Scale()},get_DenominatorY:function(){return 20*this.get_Scale()},get_CommonScale:function(){return 1},get_NumberScale:function(){return 1},__class__:alphaTab_rendering_glyphs_ScoreTimeSignatureGlyph});var alphaTab_rendering_glyphs_SharpGlyph=function(x,y,isGrace){null==isGrace&&(isGrace=!1),alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,isGrace?.75:1,57954),this._isGrace=isGrace};alphaTab_rendering_glyphs_SharpGlyph.__name__=!0,alphaTab_rendering_glyphs_SharpGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_SharpGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=8*(this._isGrace?.75:1)*this.get_Scale()},__class__:alphaTab_rendering_glyphs_SharpGlyph});var alphaTab_rendering_glyphs_SpacingGlyph=function(x,y,width){alphaTab_rendering_glyphs_Glyph.call(this,x,y),this.Width=width};alphaTab_rendering_glyphs_SpacingGlyph.__name__=!0,alphaTab_rendering_glyphs_SpacingGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_SpacingGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{__class__:alphaTab_rendering_glyphs_SpacingGlyph});var alphaTab_rendering_glyphs_TabBeatContainerGlyph=function(beat,voiceContainer){alphaTab_rendering_glyphs_BeatContainerGlyph.call(this,beat,voiceContainer)};alphaTab_rendering_glyphs_TabBeatContainerGlyph.__name__=!0,alphaTab_rendering_glyphs_TabBeatContainerGlyph.__super__=alphaTab_rendering_glyphs_BeatContainerGlyph,alphaTab_rendering_glyphs_TabBeatContainerGlyph.prototype=$extend(alphaTab_rendering_glyphs_BeatContainerGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_BeatContainerGlyph.prototype.DoLayout.call(this);this._bendGlyphs=[];for(var i=0;i<this.Beat.Notes.length;){var n=this.Beat.Notes[i];if(n.get_HasBend()){var this2=6*n.MaxBendPoint.Value;this.Renderer.RegisterOverflowTop(this2);var bend=new alphaTab_rendering_glyphs_BendGlyph(n,6);bend.X=this.OnNotes.X+this.OnNotes.Width,bend.Renderer=this.Renderer,this._bendGlyphs.push(bend)}++i}},ScaleToWidth:function(beatWidth){alphaTab_rendering_glyphs_BeatContainerGlyph.prototype.ScaleToWidth.call(this,beatWidth);for(var i=0;i<this._bendGlyphs.length;){var g=this._bendGlyphs[i];g.Width=beatWidth-g.X,++i}},CreateTies:function(n){var renderer=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer);if(n.IsTieOrigin&&renderer.ShowTiedNotes){var tie=new alphaTab_rendering_glyphs_TabTieGlyph(n,n.TieDestination,!1,!1);this.Ties.push(tie)}if(n.IsTieDestination&&renderer.ShowTiedNotes){var tie1=new alphaTab_rendering_glyphs_TabTieGlyph(n.TieOrigin,n,!1,!0);this.Ties.push(tie1)}else if(n.IsHammerPullOrigin){if(null==n.HammerPullOrigin){for(var destination=n.HammerPullDestination;null!=destination.HammerPullDestination;)destination=destination.HammerPullDestination;var tie2=new alphaTab_rendering_glyphs_TabTieGlyph(n,destination,!1,!1);this.Ties.push(tie2)}}else if(n.get_IsHammerPullDestination()){if(null==n.HammerPullDestination){for(var origin=n.HammerPullOrigin;null!=origin.HammerPullOrigin;)origin=origin.HammerPullOrigin;var tie3=new alphaTab_rendering_glyphs_TabTieGlyph(origin,n,!1,!0);this.Ties.push(tie3)}}else if(2==n.SlideType){var tie4=new alphaTab_rendering_glyphs_TabTieGlyph(n,n.SlideTarget,!0,!1);this.Ties.push(tie4)}if(0!=n.SlideType){var l=new alphaTab_rendering_glyphs_TabSlideLineGlyph(n.SlideType,n,this);this.Ties.push(l)}},Paint:function(cx,cy,canvas){alphaTab_rendering_glyphs_BeatContainerGlyph.prototype.Paint.call(this,cx,cy,canvas);for(var i=0;i<this._bendGlyphs.length;){this._bendGlyphs[i].Paint(cx+this.X,cy+this.Y,canvas),++i}},__class__:alphaTab_rendering_glyphs_TabBeatContainerGlyph});var alphaTab_rendering_glyphs_TabBeatGlyph=function(){alphaTab_rendering_glyphs_BeatOnNoteGlyphBase.call(this)};alphaTab_rendering_glyphs_TabBeatGlyph.__name__=!0,alphaTab_rendering_glyphs_TabBeatGlyph.__super__=alphaTab_rendering_glyphs_BeatOnNoteGlyphBase,alphaTab_rendering_glyphs_TabBeatGlyph.prototype=$extend(alphaTab_rendering_glyphs_BeatOnNoteGlyphBase.prototype,{DoLayout:function(){var tabRenderer=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer);if(this.Container.Beat.get_IsRest()){var line=0,offset1=0;switch(this.Container.Beat.Duration){case-4:case-2:line=3;break;case 1:line=2;break;case 2:case 4:line=3;break;case 8:case 16:line=2,offset1=5;break;case 32:case 64:case 128:case 256:line=3}var this2=offset1,y=tabRenderer.GetTabY(line,this2);if(this.RestGlyph=new alphaTab_rendering_glyphs_TabRestGlyph(0,y,tabRenderer.ShowRests,this.Container.Beat.Duration),this.RestGlyph.Beat=this.Container.Beat,this.RestGlyph.BeamingHelper=this.BeamingHelper,this.AddGlyph(this.RestGlyph),this.Container.Beat.Dots>0&&tabRenderer.ShowRests){this.AddGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,5*this.get_Scale()));for(var i1=0;i1<this.Container.Beat.Dots;){this.AddGlyph(new alphaTab_rendering_glyphs_CircleGlyph(0,y,1.5*this.get_Scale())),++i1}}}else{this.NoteNumbers=new alphaTab_rendering_glyphs_TabNoteChordGlyph(0,0,0!=this.Container.Beat.GraceType),this.NoteNumbers.Beat=this.Container.Beat,this.NoteNumbers.BeamingHelper=this.BeamingHelper;for(var note=$iterator(this.Container.Beat.Notes)();note.hasNext();){var note1=note.next();this.CreateNoteGlyph(note1)}if(this.AddGlyph(this.NoteNumbers),this.Container.Beat.get_HasWhammyBar()&&!this.NoteNumbers.BeatEffects.hasOwnProperty("Whammy")){this.NoteNumbers.BeatEffects.Whammy=new alphaTab_rendering_glyphs_WhammyBarGlyph(this.Container.Beat,this.Container);var whammyValueHeight=60*this.get_Scale()/24,whammyHeight=this.Container.Beat.MaxWhammyPoint.Value*whammyValueHeight;this.Renderer.RegisterOverflowTop(whammyHeight)}if(this.Container.Beat.get_IsTremolo()&&!this.NoteNumbers.BeatEffects.hasOwnProperty("Tremolo")){var offset=0;switch(this.Container.Beat.TremoloSpeed){case 8:offset=0;break;case 16:offset=5;break;case 32:offset=10}this.NoteNumbers.BeatEffects.Tremolo=new alphaTab_rendering_glyphs_TremoloPickingGlyph(5*this.get_Scale(),offset*this.get_Scale(),this.Container.Beat.TremoloSpeed)}if(this.Container.Beat.Dots>0&&tabRenderer.RenderRhythm){this.AddGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,5*this.get_Scale()));for(var i=0;i<this.Container.Beat.Dots;){this.AddGlyph(new alphaTab_rendering_glyphs_CircleGlyph(0,tabRenderer.get_LineOffset()*tabRenderer.Bar.Staff.Track.Tuning.length+tabRenderer.RhythmHeight,1.5*this.get_Scale())),++i}}}if(null!=this.Glyphs){for(var w=0,i2=0,j=this.Glyphs.length;i2<j;){var g=this.Glyphs[i2];g.X=w,g.Renderer=this.Renderer,g.DoLayout(),w+=g.Width,++i2}this.Width=w}},UpdateBeamingHelper:function(){this.Container.Beat.get_IsRest()?this.RestGlyph.UpdateBeamingHelper(this.Container.X+this.X):this.NoteNumbers.UpdateBeamingHelper(this.Container.X+this.X)},CreateNoteGlyph:function(n){var tr=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer),noteNumberGlyph=new alphaTab_rendering_glyphs_NoteNumberGlyph(0,0,n),this1=n.Beat.Voice.Bar.Staff.Track.Tuning.length-n.String+1;noteNumberGlyph.Y=tr.GetTabY(this1,-2),noteNumberGlyph.Renderer=this.Renderer,noteNumberGlyph.DoLayout(),this.NoteNumbers.AddNoteGlyph(noteNumberGlyph,n)},__class__:alphaTab_rendering_glyphs_TabBeatGlyph});var alphaTab_rendering_glyphs_TabBeatPreNotesGlyph=function(){alphaTab_rendering_glyphs_BeatGlyphBase.call(this)};alphaTab_rendering_glyphs_TabBeatPreNotesGlyph.__name__=!0,alphaTab_rendering_glyphs_TabBeatPreNotesGlyph.__super__=alphaTab_rendering_glyphs_BeatGlyphBase,alphaTab_rendering_glyphs_TabBeatPreNotesGlyph.prototype=$extend(alphaTab_rendering_glyphs_BeatGlyphBase.prototype,{DoLayout:function(){0==this.Container.Beat.BrushType||this.Container.Beat.get_IsRest()||(this.AddGlyph(new alphaTab_rendering_glyphs_TabBrushGlyph(this.Container.Beat)),this.AddGlyph(new alphaTab_rendering_glyphs_SpacingGlyph(0,0,4*this.get_Scale()))),alphaTab_rendering_glyphs_BeatGlyphBase.prototype.DoLayout.call(this)},__class__:alphaTab_rendering_glyphs_TabBeatPreNotesGlyph});var alphaTab_rendering_glyphs_TabBrushGlyph=function(beat){alphaTab_rendering_glyphs_Glyph.call(this,0,0),this._beat=beat};alphaTab_rendering_glyphs_TabBrushGlyph.__name__=!0,alphaTab_rendering_glyphs_TabBrushGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_TabBrushGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=10*this.get_Scale()},Paint:function(cx,cy,canvas){var tabBarRenderer=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer),res=this.Renderer.get_Resources(),startY=cy+this.X+(tabBarRenderer.GetNoteY(this._beat.get_MaxNote())-res.TablatureFont.Size/2),endY=cy+this.Y+tabBarRenderer.GetNoteY(this._beat.get_MinNote())+res.TablatureFont.Size/2,arrowX=system_Convert.ToInt32_Single(cx+this.X+this.Width/2),arrowSize=8*this.get_Scale();if(0!=this._beat.BrushType){if(1==this._beat.BrushType||2==this._beat.BrushType){canvas.BeginPath();var this1=arrowX;canvas.MoveTo(this1,startY);var this2=arrowX;canvas.LineTo(this2,endY),canvas.Stroke()}if(1==this._beat.BrushType||3==this._beat.BrushType){canvas.BeginPath();var this3=arrowX;canvas.MoveTo(this3,endY),canvas.LineTo(arrowX+arrowSize/2,endY-arrowSize),canvas.LineTo(arrowX-arrowSize/2,endY-arrowSize),canvas.ClosePath(),canvas.Fill()}else{canvas.BeginPath();var this4=arrowX;canvas.MoveTo(this4,startY),canvas.LineTo(arrowX+arrowSize/2,startY+arrowSize),canvas.LineTo(arrowX-arrowSize/2,startY+arrowSize),canvas.ClosePath(),canvas.Fill()}}},__class__:alphaTab_rendering_glyphs_TabBrushGlyph});var alphaTab_rendering_glyphs_TabClefGlyph=function(x,y){alphaTab_rendering_glyphs_Glyph.call(this,x,y)};alphaTab_rendering_glyphs_TabClefGlyph.__name__=!0,alphaTab_rendering_glyphs_TabClefGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_TabClefGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=28*this.get_Scale()},Paint:function(cx,cy,canvas){var scale,strings=this.Renderer.Bar.Staff.Track.Tuning.length,correction=strings*this.get_Scale()*.5,symbol=strings<=4?57454:57453;if(strings<=4){scale=strings/4.5}else{scale=strings/6.5}canvas.FillMusicFontSymbol(cx+this.X+5*this.get_Scale(),cy+this.Y-correction,scale*this.get_Scale(),symbol)},__class__:alphaTab_rendering_glyphs_TabClefGlyph});var alphaTab_rendering_glyphs_TabNoteChordGlyph=function(x,y,isGrace){alphaTab_rendering_glyphs_Glyph.call(this,x,y),this._isGrace=isGrace;this._notes=[];this.BeatEffects={};this.NotesPerString={}};alphaTab_rendering_glyphs_TabNoteChordGlyph.__name__=!0,alphaTab_rendering_glyphs_TabNoteChordGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_TabNoteChordGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{GetNoteX:function(note,onEnd){if(null==onEnd&&(onEnd=!0),this.NotesPerString.hasOwnProperty(note.String)){var n=this.NotesPerString[note.String],pos=this.X+n.X;return onEnd&&(pos+=n.Width),pos}return 0},GetNoteY:function(note){return this.NotesPerString.hasOwnProperty(note.String)?this.Y+this.NotesPerString[note.String].Y:0},DoLayout:function(){for(var w=0,i=0,j=this._notes.length;i<j;){var g=this._notes[i];g.Renderer=this.Renderer,g.DoLayout(),g.Width>w&&(w=g.Width),++i}for(var tabHeight=this.Renderer.get_Resources().TablatureFont.Size,effectY=this.GetNoteY(this.MinStringNote)+tabHeight/2,effectSpacing=7*this.get_Scale(),this1=this.BeatEffects,beatEffectKey=$iterator(Object.keys(this1))();beatEffectKey.hasNext();){var beatEffectKey1=beatEffectKey.next(),g1=this.BeatEffects[beatEffectKey1];g1.Y=g1.Y+effectY,g1.X=g1.X+this.Width/2,g1.Renderer=this.Renderer,effectY+=effectSpacing,g1.DoLayout()}this.Width=w},AddNoteGlyph:function(noteGlyph,note){this._notes.push(noteGlyph),this.NotesPerString[note.String]=noteGlyph,(null==this.MinStringNote||note.String<this.MinStringNote.String)&&(this.MinStringNote=note)},Paint:function(cx,cy,canvas){cx+=this.X,cy+=this.Y;var res=this.Renderer.get_Resources(),oldBaseLine=canvas.get_TextBaseline();canvas.set_TextBaseline(1),canvas.set_Font(this._isGrace?res.GraceFont:res.TablatureFont);for(var notes=this._notes,w=this.Width,g=$iterator(notes)();g.hasNext();){var g1=g.next();g1.Renderer=this.Renderer,g1.Width=w,g1.Paint(cx,cy,canvas)}canvas.set_TextBaseline(oldBaseLine);for(var this1=this.BeatEffects,beatEffectKey=$iterator(Object.keys(this1))();beatEffectKey.hasNext();){var beatEffectKey1=beatEffectKey.next();this.BeatEffects[beatEffectKey1].Paint(cx,cy,canvas)}},UpdateBeamingHelper:function(cx){null!=this.BeamingHelper&&this.BeamingHelper.IsPositionFrom("tab",this.Beat)&&this.BeamingHelper.RegisterBeatLineX("tab",this.Beat,cx+this.X+this.Width,cx+this.X)},__class__:alphaTab_rendering_glyphs_TabNoteChordGlyph});var alphaTab_rendering_glyphs_TabRestGlyph=function(x,y,isVisibleRest,duration){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,1,alphaTab_rendering_glyphs_ScoreRestGlyph.GetSymbol(duration)),this._isVisibleRest=isVisibleRest,this._duration=duration};alphaTab_rendering_glyphs_TabRestGlyph.__name__=!0,alphaTab_rendering_glyphs_TabRestGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_TabRestGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this._isVisibleRest?this.Width=alphaTab_rendering_glyphs_ScoreRestGlyph.GetSize(this._duration)*this.get_Scale():this.Width=10*this.get_Scale()},UpdateBeamingHelper:function(cx){null!=this.BeamingHelper&&this.BeamingHelper.IsPositionFrom("tab",this.Beat)&&this.BeamingHelper.RegisterBeatLineX("tab",this.Beat,cx+this.X+this.Width,cx+this.X)},Paint:function(cx,cy,canvas){this._isVisibleRest&&alphaTab_rendering_glyphs_MusicFontGlyph.prototype.Paint.call(this,cx,cy,canvas)},__class__:alphaTab_rendering_glyphs_TabRestGlyph});var alphaTab_rendering_glyphs_TabSlideLineGlyph=function(type,startNote,parent){alphaTab_rendering_glyphs_Glyph.call(this,0,0),this._type=type,this._startNote=startNote,this._parent=parent};alphaTab_rendering_glyphs_TabSlideLineGlyph.__name__=!0,alphaTab_rendering_glyphs_TabSlideLineGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_TabSlideLineGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){this.Width=0},Paint:function(cx,cy,canvas){var r=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer);cx+=r.X,cy+=r.Y;var startX,startY,endX,endY,sizeX=12*this.get_Scale(),sizeY=3*this.get_Scale();switch(this._type){case 1:case 2:var startOffsetY,endOffsetY;null==this._startNote.SlideTarget?(startOffsetY=0,endOffsetY=0):this._startNote.SlideTarget.Fret>this._startNote.Fret?(startOffsetY=sizeY,endOffsetY=-1*sizeY):(startOffsetY=-1*sizeY,endOffsetY=sizeY),startX=cx+r.GetNoteX(this._startNote,!0),startY=cy+r.GetNoteY(this._startNote)+startOffsetY,null!=this._startNote.SlideTarget?(endX=cx+r.GetNoteX(this._startNote.SlideTarget,!1),endY=cy+r.GetNoteY(this._startNote.SlideTarget)+endOffsetY):(endX=cx+this._parent.X,endY=startY);break;case 3:endX=cx+r.GetNoteX(this._startNote,!1),endY=cy+r.GetNoteY(this._startNote),startX=endX-sizeX,startY=cy+r.GetNoteY(this._startNote)+sizeY;break;case 4:endX=cx+r.GetNoteX(this._startNote,!1),endY=cy+r.GetNoteY(this._startNote),startX=endX-sizeX,startY=cy+r.GetNoteY(this._startNote)-sizeY;break;case 5:startX=cx+r.GetNoteX(this._startNote,!0),startY=cy+r.GetNoteY(this._startNote),endX=startX+sizeX,endY=cy+r.GetNoteY(this._startNote)-sizeY;break;case 6:startX=cx+r.GetNoteX(this._startNote,!0),startY=cy+r.GetNoteY(this._startNote),endX=startX+sizeX,endY=cy+r.GetNoteY(this._startNote)+sizeY;break;default:return}canvas.BeginPath(),canvas.MoveTo(startX,startY),canvas.LineTo(endX,endY),canvas.Stroke()},__class__:alphaTab_rendering_glyphs_TabSlideLineGlyph});var alphaTab_rendering_glyphs_TabTieGlyph=function(startNote,endNote,forSlide,forEnd){null==forEnd&&(forEnd=!1),alphaTab_rendering_glyphs_TieGlyph.call(this,startNote.Beat,endNote.Beat,forEnd),this._startNote=startNote,this._endNote=endNote,this._forSlide=forSlide};alphaTab_rendering_glyphs_TabTieGlyph.__name__=!0,alphaTab_rendering_glyphs_TabTieGlyph.__super__=alphaTab_rendering_glyphs_TieGlyph,alphaTab_rendering_glyphs_TabTieGlyph.prototype=$extend(alphaTab_rendering_glyphs_TieGlyph.prototype,{get_Offset:function(){return this._forSlide?5*this.get_Scale():0},GetBeamDirection:function(beat,noteRenderer){return this._startNote.String>3?1:0},GetStartY:function(noteRenderer,direction){return noteRenderer.GetNoteY(this._startNote)-this.get_Offset()},GetEndY:function(noteRenderer,direction){return noteRenderer.GetNoteY(this._endNote)-this.get_Offset()},GetStartX:function(noteRenderer){return noteRenderer.GetNoteX(this._startNote,!0)},GetEndX:function(noteRenderer){return noteRenderer.GetNoteX(this._endNote,!1)},__class__:alphaTab_rendering_glyphs_TabTieGlyph});var alphaTab_rendering_glyphs_TabTimeSignatureGlyph=function(x,y,numerator,denominator,isCommon){alphaTab_rendering_glyphs_TimeSignatureGlyph.call(this,x,y,numerator,denominator,isCommon)};alphaTab_rendering_glyphs_TabTimeSignatureGlyph.__name__=!0,alphaTab_rendering_glyphs_TabTimeSignatureGlyph.__super__=alphaTab_rendering_glyphs_TimeSignatureGlyph,alphaTab_rendering_glyphs_TabTimeSignatureGlyph.prototype=$extend(alphaTab_rendering_glyphs_TimeSignatureGlyph.prototype,{get_CommonY:function(){return js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer).GetTabY(0,0)},get_NumeratorY:function(){var offset,renderer=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer);if(renderer.Bar.Staff.Track.Tuning.length<=4){offset=.25}else{offset=1/3}return renderer.get_LineOffset()*renderer.Bar.Staff.Track.Tuning.length*offset*this.get_Scale()},get_DenominatorY:function(){var offset,renderer=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer);if(renderer.Bar.Staff.Track.Tuning.length<=4){offset=.6}else{offset=.6}return renderer.get_LineOffset()*renderer.Bar.Staff.Track.Tuning.length*offset*this.get_Scale()},get_CommonScale:function(){return 1},get_NumberScale:function(){return js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer).Bar.Staff.Track.Tuning.length<=4?.75:1},__class__:alphaTab_rendering_glyphs_TabTimeSignatureGlyph});var alphaTab_rendering_glyphs_TempoGlyph=function(x,y,tempo){alphaTab_rendering_glyphs_EffectGlyph.call(this,x,y),this._tempo=tempo};alphaTab_rendering_glyphs_TempoGlyph.__name__=!0,alphaTab_rendering_glyphs_TempoGlyph.__super__=alphaTab_rendering_glyphs_EffectGlyph,alphaTab_rendering_glyphs_TempoGlyph.prototype=$extend(alphaTab_rendering_glyphs_EffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_EffectGlyph.prototype.DoLayout.call(this),this.Height=25*this.get_Scale()},Paint:function(cx,cy,canvas){var res=this.Renderer.get_Resources();canvas.set_Font(res.MarkerFont);canvas.FillMusicFontSymbol(cx+this.X,cy+this.Y+.8*this.Height,.75,57813),canvas.FillText("= "+this._tempo,cx+this.X+this.Height/2,cy+this.Y+canvas.get_Font().Size/2)},__class__:alphaTab_rendering_glyphs_TempoGlyph});var alphaTab_rendering_glyphs_TextGlyph=function(x,y,text,font,textAlign){null==textAlign&&(textAlign=0),alphaTab_rendering_glyphs_EffectGlyph.call(this,x,y),this._text=text,this.Font=font,this.TextAlign=textAlign};alphaTab_rendering_glyphs_TextGlyph.__name__=!0,alphaTab_rendering_glyphs_TextGlyph.__super__=alphaTab_rendering_glyphs_EffectGlyph,alphaTab_rendering_glyphs_TextGlyph.prototype=$extend(alphaTab_rendering_glyphs_EffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_EffectGlyph.prototype.DoLayout.call(this),this.Height=this.Font.Size},Paint:function(cx,cy,canvas){canvas.set_Font(this.Font);var old=canvas.get_TextAlign();canvas.set_TextAlign(this.TextAlign),canvas.FillText(this._text,cx+this.X,cy+this.Y),canvas.set_TextAlign(old)},__class__:alphaTab_rendering_glyphs_TextGlyph});var alphaTab_rendering_glyphs_TremoloPickingGlyph=function(x,y,duration){alphaTab_rendering_glyphs_MusicFontGlyph.call(this,x,y,1,alphaTab_rendering_glyphs_TremoloPickingGlyph.GetSymbol(duration))};alphaTab_rendering_glyphs_TremoloPickingGlyph.__name__=!0,alphaTab_rendering_glyphs_TremoloPickingGlyph.GetSymbol=function(duration){switch(duration){case 8:return 57888;case 16:return 57889;case 32:return 57890;default:return-1}},alphaTab_rendering_glyphs_TremoloPickingGlyph.__super__=alphaTab_rendering_glyphs_MusicFontGlyph,alphaTab_rendering_glyphs_TremoloPickingGlyph.prototype=$extend(alphaTab_rendering_glyphs_MusicFontGlyph.prototype,{DoLayout:function(){this.Width=12*this.get_Scale()},__class__:alphaTab_rendering_glyphs_TremoloPickingGlyph});var alphaTab_rendering_glyphs_TrillGlyph=function(x,y){alphaTab_rendering_glyphs_EffectGlyph.call(this,x,y)};alphaTab_rendering_glyphs_TrillGlyph.__name__=!0,alphaTab_rendering_glyphs_TrillGlyph.__super__=alphaTab_rendering_glyphs_EffectGlyph,alphaTab_rendering_glyphs_TrillGlyph.prototype=$extend(alphaTab_rendering_glyphs_EffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_EffectGlyph.prototype.DoLayout.call(this),this.Height=20*this.get_Scale()},Paint:function(cx,cy,canvas){var res=this.Renderer.get_Resources();canvas.set_Font(res.MarkerFont);var textw=canvas.MeasureText("tr");canvas.FillText("tr",cx+this.X,cy+this.Y+canvas.get_Font().Size/2);for(var startX=textw+3*this.get_Scale(),endX=this.Width-startX,step=11*this.get_Scale()*1.2,loops=Math.max(1,(endX-startX)/step),loopX=startX,loopY=cy+this.Y+this.Height,i=0;i<loops;)canvas.FillMusicFontSymbol(cx+this.X+loopX,loopY,1.2,60068),loopX+=step,++i},__class__:alphaTab_rendering_glyphs_TrillGlyph});var alphaTab_rendering_glyphs_TripletFeelGlyph=function(tripletFeel){alphaTab_rendering_glyphs_EffectGlyph.call(this,0,0),this._tripletFeel=tripletFeel};alphaTab_rendering_glyphs_TripletFeelGlyph.__name__=!0,alphaTab_rendering_glyphs_TripletFeelGlyph.__super__=alphaTab_rendering_glyphs_EffectGlyph,alphaTab_rendering_glyphs_TripletFeelGlyph.prototype=$extend(alphaTab_rendering_glyphs_EffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_EffectGlyph.prototype.DoLayout.call(this),this.Height=25*this.get_Scale()},Paint:function(cx,cy,canvas){cx+=this.X;var noteY=(cy+=this.Y)+.75*this.Height;canvas.set_Font(this.Renderer.get_Resources().EffectFont);canvas.FillText("(",cx,cy+.3*this.Height);var leftNoteX=cx+10*this.get_Scale(),rightNoteX=cx+40*this.get_Scale();switch(this._tripletFeel){case 0:this.RenderBarNote(leftNoteX,noteY,.4,canvas,[0]),this.RenderBarNote(rightNoteX,noteY,.4,canvas,[0]);break;case 1:this.RenderBarNote(leftNoteX,noteY,.4,canvas,[0,0]),this.RenderBarNote(rightNoteX,noteY,.4,canvas,[0,2]),this.RenderTriplet(rightNoteX,cy,canvas);break;case 2:this.RenderBarNote(leftNoteX,noteY,.4,canvas,[0]),canvas.FillMusicFontSymbol(rightNoteX,noteY,.4,57813),canvas.FillMusicFontSymbol(rightNoteX+12*this.get_Scale(),noteY,.4,57815),this.RenderTriplet(rightNoteX,cy,canvas);break;case 3:this.RenderBarNote(leftNoteX,noteY,.4,canvas,[0,0]),this.RenderBarNote(rightNoteX,noteY,.4,canvas,[0,0,2]),canvas.FillCircle(rightNoteX+9*this.get_Scale(),noteY,this.get_Scale());break;case 4:this.RenderBarNote(leftNoteX,noteY,.4,canvas,[0]),this.RenderBarNote(rightNoteX,noteY,.4,canvas,[0,2]),canvas.FillCircle(rightNoteX+9*this.get_Scale(),noteY,this.get_Scale());break;case 5:this.RenderBarNote(leftNoteX,noteY,.4,canvas,[0,0]),this.RenderBarNote(rightNoteX,noteY,.4,canvas,[0,0,1]),canvas.FillCircle(rightNoteX+12*this.get_Scale()+8*this.get_Scale(),noteY,this.get_Scale());break;case 6:this.RenderBarNote(leftNoteX,noteY,.4,canvas,[0]),this.RenderBarNote(rightNoteX,noteY,.4,canvas,[0,1]),canvas.FillCircle(rightNoteX+12*this.get_Scale()+8*this.get_Scale(),noteY,this.get_Scale())}canvas.FillText("=",cx+30*this.get_Scale(),cy+5*this.get_Scale());canvas.FillText(")",cx+65*this.get_Scale(),cy+.3*this.Height)},RenderBarNote:function(cx,noteY,noteScale,canvas,bars){canvas.FillMusicFontSymbol(cx,noteY,noteScale,57813);for(var partialBarWidth=6*this.get_Scale(),i=0;i<bars.length;){switch(bars[i]){case 0:canvas.FillRect(cx+4*this.get_Scale(),noteY-12*this.get_Scale()+3*this.get_Scale()*i,12*this.get_Scale(),2*this.get_Scale());break;case 1:canvas.FillRect(cx+4*this.get_Scale(),noteY-12*this.get_Scale()+3*this.get_Scale()*i,partialBarWidth,2*this.get_Scale());break;case 2:canvas.FillRect(cx+4*this.get_Scale()+partialBarWidth,noteY-12*this.get_Scale()+3*this.get_Scale()*i,partialBarWidth,2*this.get_Scale())}++i}canvas.FillMusicFontSymbol(cx+12*this.get_Scale(),noteY,noteScale,57813)},RenderTriplet:function(cx,cy,canvas){cy+=2*this.get_Scale();var font=this.Renderer.get_Resources().EffectFont;canvas.set_Font(new alphaTab_platform_model_Font(font.Family,.8*font.Size,font.Style));var rightX=cx+12*this.get_Scale()+3*this.get_Scale();canvas.BeginPath(),canvas.MoveTo(cx,cy+3*this.get_Scale()),canvas.LineTo(cx,cy),canvas.LineTo(cx+5*this.get_Scale(),cy),canvas.MoveTo(rightX+5*this.get_Scale(),cy+3*this.get_Scale()),canvas.LineTo(rightX+5*this.get_Scale(),cy),canvas.LineTo(rightX,cy),canvas.Stroke(),canvas.FillText("3",cx+7*this.get_Scale(),cy-10*this.get_Scale()),canvas.set_Font(font)},__class__:alphaTab_rendering_glyphs_TripletFeelGlyph});var alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$={};alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.__name__=!0,alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.toString=function(this1){switch(this1){case 0:return"Full";case 1:return"PartialLeft";case 2:return"PartialRight"}return""};var alphaTab_rendering_glyphs_TuningGlyph=function(x,y,scale,resources,tuning){alphaTab_rendering_glyphs_GlyphGroup.call(this,x,y),this._scale=scale,this._resources=resources,this.CreateGlyphs(tuning)};alphaTab_rendering_glyphs_TuningGlyph.__name__=!0,alphaTab_rendering_glyphs_TuningGlyph.__super__=alphaTab_rendering_glyphs_GlyphGroup,alphaTab_rendering_glyphs_TuningGlyph.prototype=$extend(alphaTab_rendering_glyphs_GlyphGroup.prototype,{CreateGlyphs:function(tuning){if(this.AddGlyph(new alphaTab_rendering_glyphs_TextGlyph(0,0,tuning.Name,this._resources.EffectFont,0)),this.Height=this.Height+15*this._scale,!tuning.IsStandard){for(var this1=Math.ceil(tuning.Tunings.length/2),stringsPerColumn=system_Convert.ToInt32_Double(this1),currentX=0,currentY=this.Height,i=0,j=tuning.Tunings.length;i<j;){var str="("+(i+1)+") = "+alphaTab_model_Tuning.GetTextForTuning(tuning.Tunings[i],!1);this.AddGlyph(new alphaTab_rendering_glyphs_TextGlyph(currentX,currentY,str,this._resources.EffectFont,0)),currentY+=this.Height,i==stringsPerColumn-1&&(currentY=this.Height,currentX+=43*this._scale),++i}this.Height=this.Height+stringsPerColumn*(15*this._scale)}},__class__:alphaTab_rendering_glyphs_TuningGlyph});var alphaTab_rendering_glyphs_VibratoGlyph=function(x,y,scale){null==scale&&(scale=1.2),alphaTab_rendering_glyphs_GroupedEffectGlyph.call(this,3),this._scale=scale,this.X=x,this.Y=y};alphaTab_rendering_glyphs_VibratoGlyph.__name__=!0,alphaTab_rendering_glyphs_VibratoGlyph.__super__=alphaTab_rendering_glyphs_GroupedEffectGlyph,alphaTab_rendering_glyphs_VibratoGlyph.prototype=$extend(alphaTab_rendering_glyphs_GroupedEffectGlyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_GroupedEffectGlyph.prototype.DoLayout.call(this),this.Height=10*this.get_Scale()*this._scale},PaintGrouped:function(cx,cy,endX,canvas){for(var width=endX-(cx+this.X),step=9*this.get_Scale()*this._scale,loops=system_Convert.ToInt32_Single(Math.max(1,width/step)),h=this.Height,loopX=0,i=0;i<loops;)canvas.FillMusicFontSymbol(cx+this.X+loopX,cy+this.Y+h,this._scale,60068),loopX+=step,++i},__class__:alphaTab_rendering_glyphs_VibratoGlyph});var alphaTab_rendering_glyphs_VoiceContainerGlyph=function(x,y,voice){alphaTab_rendering_glyphs_GlyphGroup.call(this,x,y),this.Voice=voice;this.BeatGlyphs=[]};alphaTab_rendering_glyphs_VoiceContainerGlyph.__name__=!0,alphaTab_rendering_glyphs_VoiceContainerGlyph.__super__=alphaTab_rendering_glyphs_GlyphGroup,alphaTab_rendering_glyphs_VoiceContainerGlyph.prototype=$extend(alphaTab_rendering_glyphs_GlyphGroup.prototype,{ScaleToWidth:function(width){var force=this.Renderer.LayoutingInfo.SpaceToForce(width);this.ScaleToForce(force)},ScaleToForce:function(force){this.Width=this.Renderer.LayoutingInfo.CalculateVoiceWidth(force);for(var positions=this.Renderer.LayoutingInfo.BuildOnTimePositions(force),beatGlyphs=this.BeatGlyphs,i=0,j=beatGlyphs.length;i<j;){var currentBeatGlyph=beatGlyphs[i],time=currentBeatGlyph.Beat.get_AbsoluteStart();if(currentBeatGlyph.X=positions[time]-currentBeatGlyph.OnTimeX,i>0){var beatWidth=currentBeatGlyph.X-beatGlyphs[i-1].X;beatGlyphs[i-1].ScaleToWidth(beatWidth)}if(i==j-1){var beatWidth1=this.Width-beatGlyphs[beatGlyphs.length-1].X;currentBeatGlyph.ScaleToWidth(beatWidth1)}++i}},RegisterLayoutingInfo:function(info){info.UpdateVoiceSize(this.Width);for(var b=$iterator(this.BeatGlyphs)();b.hasNext();){b.next().RegisterLayoutingInfo(info)}},ApplyLayoutingInfo:function(info){for(var b=$iterator(this.BeatGlyphs)();b.hasNext();){b.next().ApplyLayoutingInfo(info)}this.ScaleToForce(Math.max(this.Renderer.get_Settings().StretchForce,info.MinStretchForce))},AddGlyph:function(g){g.X=0==this.BeatGlyphs.length?0:this.BeatGlyphs[this.BeatGlyphs.length-1].X+this.BeatGlyphs[this.BeatGlyphs.length-1].Width,g.Renderer=this.Renderer,g.DoLayout(),this.BeatGlyphs.push(js_Boot.__cast(g,alphaTab_rendering_glyphs_BeatContainerGlyph)),this.Width=g.X+g.Width},DoLayout:function(){this.MinWidth=this.Width},Paint:function(cx,cy,canvas){canvas.set_Color(0==this.Voice.Index?this.Renderer.ScoreRenderer.RenderingResources.MainGlyphColor:this.Renderer.ScoreRenderer.RenderingResources.SecondaryGlyphColor);for(var i=0,j=this.BeatGlyphs.length;i<j;)this.BeatGlyphs[i].Paint(cx+this.X,cy+this.Y,canvas),++i},__class__:alphaTab_rendering_glyphs_VoiceContainerGlyph});var alphaTab_rendering_glyphs_WhammyBarGlyph=function(beat,parent){alphaTab_rendering_glyphs_Glyph.call(this,0,0),this._beat=beat,this._parent=parent};alphaTab_rendering_glyphs_WhammyBarGlyph.__name__=!0,alphaTab_rendering_glyphs_WhammyBarGlyph.__super__=alphaTab_rendering_glyphs_Glyph,alphaTab_rendering_glyphs_WhammyBarGlyph.prototype=$extend(alphaTab_rendering_glyphs_Glyph.prototype,{DoLayout:function(){alphaTab_rendering_glyphs_Glyph.prototype.DoLayout.call(this);var minY=0,maxY=0,sizeY=60*this.get_Scale();if(this._beat.WhammyBarPoints.length>=2)for(var dy=sizeY/24,i=0,j=this._beat.WhammyBarPoints.length;i<j;){var ptY=0-dy*this._beat.WhammyBarPoints[i].Value;ptY>maxY&&(maxY=ptY),ptY<minY&&(minY=ptY),++i}var tabBarRenderer=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer),track=this.Renderer.Bar.Staff.Track,tabTop=tabBarRenderer.GetTabY(0,-2),this1=track.Tuning.length,absMinY=minY+tabTop,absMaxY=maxY-tabBarRenderer.GetTabY(this1,-2);absMinY<0&&tabBarRenderer.RegisterOverflowTop(Math.abs(absMinY)),absMaxY>0&&tabBarRenderer.RegisterOverflowBottom(Math.abs(absMaxY))},Paint:function(cx,cy,canvas){var tabBarRenderer=js_Boot.__cast(this.Renderer,alphaTab_rendering_TabBarRenderer),res=this.Renderer.get_Resources(),startX=cx+this.X+this._parent.OnNotes.Width/2,endX=null==this._beat.NextBeat||this._beat.Voice!=this._beat.NextBeat.Voice?cx+this.X+this._parent.Width:cx+tabBarRenderer.GetBeatX(this._beat.NextBeat,0),startY=cy,sizeY=60*this.get_Scale(),old=canvas.get_TextAlign();if(canvas.set_TextAlign(1),this._beat.WhammyBarPoints.length>=2){var dx=(endX-startX)/60,dy=sizeY/24;canvas.BeginPath();for(var i=0,j=this._beat.WhammyBarPoints.length-1;i<j;){var pt1=this._beat.WhammyBarPoints[i],pt2=this._beat.WhammyBarPoints[i+1];if(pt1.Value!=pt2.Value||i!=this._beat.WhammyBarPoints.length-2){var pt1X=startX+dx*pt1.Offset,pt1Y=startY-dy*pt1.Value,pt2X=startX+dx*pt2.Offset,pt2Y=startY-dy*pt2.Value;if(canvas.MoveTo(pt1X,pt1Y),canvas.LineTo(pt2X,pt2Y),0!=pt2.Value){var dv=pt2.Value,s="";if(dv>=4||dv<=-4){var steps=dv/4|0;s+=Std.string(steps),dv-=4*steps}if(dv>0&&(s+=alphaTab_rendering_glyphs_BendGlyph.GetFractionSign(dv)),""!=s){canvas.set_Font(res.GraceFont);var sy=pt2Y;pt2Y<pt1Y?sy-=canvas.get_Font().Size:sy+=3*this.get_Scale();var sx=pt2X;canvas.FillText(s,sx,sy)}}++i}}canvas.Stroke()}canvas.set_TextAlign(old)},__class__:alphaTab_rendering_glyphs_WhammyBarGlyph});var alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$={};alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.__name__=!0,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Title";case 2:return"SubTitle";case 4:return"Artist";case 8:return"Album";case 16:return"Words";case 32:return"Music";case 64:return"WordsAndMusic";case 128:return"Copyright";case 256:return"PageNumber";case 511:return"All"}return""};var alphaTab_rendering_layout_HorizontalScreenLayoutPartialInfo=function(){this.MasterBars=[]};alphaTab_rendering_layout_HorizontalScreenLayoutPartialInfo.__name__=!0,alphaTab_rendering_layout_HorizontalScreenLayoutPartialInfo.prototype={__class__:alphaTab_rendering_layout_HorizontalScreenLayoutPartialInfo};var alphaTab_rendering_staves_BarLayoutingInfo=function(){this.PreBeatSizes={};this.OnBeatSizes={},this.VoiceSize=0;this.Springs={},this.Version=0};alphaTab_rendering_staves_BarLayoutingInfo.__name__=!0,alphaTab_rendering_staves_BarLayoutingInfo.prototype={UpdateVoiceSize:function(size){size>this.VoiceSize&&(this.VoiceSize=size,this.Version++)},SetPreBeatSize:function(beat,size){(!this.PreBeatSizes.hasOwnProperty(beat.Index)||this.PreBeatSizes[beat.Index]<size)&&(this.PreBeatSizes[beat.Index]=size,this.Version++)},GetPreBeatSize:function(beat){return this.PreBeatSizes.hasOwnProperty(beat.Index)?this.PreBeatSizes[beat.Index]:0},SetOnBeatSize:function(beat,size){(!this.OnBeatSizes.hasOwnProperty(beat.Index)||this.OnBeatSizes[beat.Index]<size)&&(this.OnBeatSizes[beat.Index]=size,this.Version++)},GetOnBeatSize:function(beat){return this.OnBeatSizes.hasOwnProperty(beat.Index)?this.OnBeatSizes[beat.Index]:0},UpdateMinStretchForce:function(force){this.MinStretchForce<force&&(this.MinStretchForce=force,this.Version++)},AddSpring:function(start,duration,springSize,preSpringSize){this.Version++;var spring;return this.Springs.hasOwnProperty(start)?((spring=this.Springs[start]).SpringWidth<springSize&&(spring.SpringWidth=springSize),spring.PreSpringWidth<preSpringSize&&(spring.PreSpringWidth=preSpringSize),duration<spring.SmallestDuration&&(spring.SmallestDuration=duration),duration>spring.LongestDuration&&(spring.LongestDuration=duration)):((spring=new alphaTab_rendering_staves_Spring).TimePosition=start,spring.SmallestDuration=duration,spring.LongestDuration=duration,spring.SpringWidth=springSize,spring.PreSpringWidth=preSpringSize,this.Springs[start]=spring),duration<this.SmallestDuration&&(this.SmallestDuration=duration),spring},AddBeatSpring:function(beat,beatSize,preBeatSize){return this.AddSpring(beat.get_AbsoluteStart(),beat.CalculateDuration(),beatSize,preBeatSize)},Finish:function(){this.CalculateSpringConstants(),this.Version++},CalculateSpringConstants:function(){var sortedSprings=this._timeSortedSprings=[];this._xMin=0;for(var springs=this.Springs,time=$iterator(Object.keys(springs))();time.hasNext();){var spring=springs[time.next()];sortedSprings.push(spring),spring.SpringWidth<this._xMin&&(this._xMin=spring.SpringWidth)}sortedSprings.sort(function(a1,b1){return b=b1,(a=a1).TimePosition<b.TimePosition?-1:a.TimePosition>b.TimePosition?1:0;var a,b});for(var totalSpringConstant=0,i=0;i<sortedSprings.length;){var duration,currentSpring=sortedSprings[i];if(i==sortedSprings.length-1)duration=currentSpring.LongestDuration;else{duration=sortedSprings[i+1].TimePosition-currentSpring.TimePosition}var this2=duration;currentSpring.SpringConstant=this.CalculateSpringConstant(currentSpring,this2),totalSpringConstant+=1/currentSpring.SpringConstant,++i}this.TotalSpringConstant=1/totalSpringConstant;for(var i1=0;i1<sortedSprings.length;){var force=sortedSprings[i1].SpringWidth*sortedSprings[i1].SpringConstant;this.UpdateMinStretchForce(force),++i1}},CalculateSpringConstant:function(spring,duration){var minDuration=spring.SmallestDuration;0==spring.SmallestDuration&&(minDuration=duration);return minDuration/duration/(10*(1+.6*Math.log2(duration/js_Boot.__cast(30,Float))))},SpaceToForce:function(space){return space*this.TotalSpringConstant},CalculateVoiceWidth:function(force){return this.CalculateWidth(force,this.TotalSpringConstant)},CalculateWidth:function(force,springConstant){return force/springConstant},BuildOnTimePositions:function(force){if(Math.abs(this._onTimePositionsForce-force)<1e-5&&null!=this._onTimePositions)return this._onTimePositions;this._onTimePositionsForce=force;var positions=this._onTimePositions={},sortedSprings=this._timeSortedSprings;if(0==sortedSprings.length)return positions;for(var springX=sortedSprings[0].PreSpringWidth,i=0;i<sortedSprings.length;)positions[sortedSprings[i].TimePosition]=springX,springX+=this.CalculateWidth(force,sortedSprings[i].SpringConstant),++i;return positions},__class__:alphaTab_rendering_staves_BarLayoutingInfo};var alphaTab_rendering_staves_MasterBarsRenderers=function(){this.Renderers=[]};alphaTab_rendering_staves_MasterBarsRenderers.__name__=!0,alphaTab_rendering_staves_MasterBarsRenderers.prototype={__class__:alphaTab_rendering_staves_MasterBarsRenderers};var alphaTab_rendering_staves_Spring=function(){};alphaTab_rendering_staves_Spring.__name__=!0,alphaTab_rendering_staves_Spring.prototype={__class__:alphaTab_rendering_staves_Spring};var alphaTab_rendering_staves_Staff=function(trackIndex,staff,factory){this.BarRenderers=[],this.TrackIndex=trackIndex,this.ModelStaff=staff,this._factory=factory,this.TopSpacing=15,this.BottomSpacing=5,this.StaveTop=0,this.StaveBottom=0};alphaTab_rendering_staves_Staff.__name__=!0,alphaTab_rendering_staves_Staff.prototype={get_StaveId:function(){return this._factory.get_StaffId()},get_IsInAccolade:function(){return this._factory.IsInAccolade},RegisterStaffTop:function(offset){this.StaveTop=offset},RegisterStaffBottom:function(offset){this.StaveBottom=offset},AddBarRenderer:function(renderer){renderer.Staff=this,renderer.Index=this.BarRenderers.length,renderer.ReLayout(),this.BarRenderers.push(renderer),this.StaveGroup.Layout.RegisterBarRenderer(this.get_StaveId(),renderer)},AddBar:function(bar,layoutingInfo){var renderer;(renderer=null==bar?new alphaTab_rendering_BarRendererBase(this.StaveGroup.Layout.Renderer,bar):this._factory.Create(this.StaveGroup.Layout.Renderer,bar,this.StaveGroup.Layout.Renderer.Settings.Staves)).Staff=this,renderer.Index=this.BarRenderers.length,renderer.LayoutingInfo=layoutingInfo,renderer.DoLayout(),renderer.RegisterLayoutingInfo(),this.BarRenderers.push(renderer),null!=bar&&this.StaveGroup.Layout.RegisterBarRenderer(this.get_StaveId(),renderer)},RevertLastBar:function(){var lastBar=this.BarRenderers[this.BarRenderers.length-1],index=this.BarRenderers.length-1;-1!=index&&this.BarRenderers.splice(index,1),this.StaveGroup.Layout.UnregisterBarRenderer(this.get_StaveId(),lastBar)},ScaleToWidth:function(width){for(var spacePerBar=(width-this.StaveGroup.Width)/this.BarRenderers.length,i=0,j=this.BarRenderers.length;i<j;)this.BarRenderers[i].ScaleToWidth(this.BarRenderers[i].Width+spacePerBar),++i},get_TopOverflow:function(){for(var m=0,i=0,j=this.BarRenderers.length;i<j;){var r=this.BarRenderers[i];r.TopOverflow>m&&(m=r.TopOverflow),++i}return m},get_BottomOverflow:function(){for(var m=0,i=0,j=this.BarRenderers.length;i<j;){var r=this.BarRenderers[i];r.BottomOverflow>m&&(m=r.BottomOverflow),++i}return m},FinalizeStave:function(){var x=0;this.Height=0;for(var topOverflow=this.get_TopOverflow(),bottomOverflow=this.get_BottomOverflow(),i=0;i<this.BarRenderers.length;)this.BarRenderers[i].X=x,this.BarRenderers[i].Y=this.TopSpacing+topOverflow,this.Height=Math.max(this.Height,this.BarRenderers[i].Height),this.BarRenderers[i].FinalizeRenderer(),x+=this.BarRenderers[i].Width,++i;this.Height>0&&(this.Height=this.Height+this.TopSpacing+topOverflow+bottomOverflow+this.BottomSpacing)},Paint:function(cx,cy,canvas,startIndex,count){if(0!=this.Height&&0!=count)for(var i=startIndex,j=Math.min(startIndex+count,this.BarRenderers.length);i<j;)this.BarRenderers[i].Paint(cx+this.X,cy+this.Y,canvas),++i},__class__:alphaTab_rendering_staves_Staff};var alphaTab_rendering_staves_StaveGroup=function(){this.MasterBarsRenderers=[];this.Staves=[];this._allStaves=[],this.Width=0,this.Index=0,this._accoladeSpacingCalculated=!1,this.AccoladeSpacing=0};alphaTab_rendering_staves_StaveGroup.__name__=!0,alphaTab_rendering_staves_StaveGroup.prototype={get_FirstBarIndex:function(){return this.MasterBarsRenderers[0].MasterBar.Index},get_LastBarIndex:function(){return this.MasterBarsRenderers[this.MasterBarsRenderers.length-1].MasterBar.Index},AddMasterBarRenderers:function(tracks,renderers){if(0==tracks.length)return null;this.MasterBarsRenderers.push(renderers),this.CalculateAccoladeSpacing(tracks),renderers.LayoutingInfo.PreBeatSize=0;for(var src=0,i=0,j=this.Staves.length;i<j;){for(var g=this.Staves[i],k=0,l=g.Staves.length;k<l;){var s=g.Staves[k],renderer=renderers.Renderers[src++];s.AddBarRenderer(renderer),++k}++i}return this.UpdateWidth(),renderers},AddBars:function(tracks,barIndex){if(0==tracks.length)return null;var result=new alphaTab_rendering_staves_MasterBarsRenderers;result.LayoutingInfo=new alphaTab_rendering_staves_BarLayoutingInfo,result.MasterBar=tracks[0].Score.MasterBars[barIndex],this.MasterBarsRenderers.push(result),this.CalculateAccoladeSpacing(tracks);for(var barLayoutingInfo=result.LayoutingInfo,g=$iterator(this.Staves)();g.hasNext();)for(var g1=g.next(),s=$iterator(g1.Staves)();s.hasNext();){var s1=s.next();s1.AddBar(g1.Track.Staves[s1.ModelStaff.Index].Bars[barIndex],barLayoutingInfo);var renderer=s1.BarRenderers[s1.BarRenderers.length-1];result.Renderers.push(renderer),renderer.IsLinkedToPrevious&&(result.IsLinkedToPrevious=!0)}return barLayoutingInfo.Finish(),result.Width=this.UpdateWidth(),result},RevertLastBar:function(){if(this.MasterBarsRenderers.length>1){var index=this.MasterBarsRenderers.length-1;-1!=index&&this.MasterBarsRenderers.splice(index,1);for(var w=0,i=0,j=this._allStaves.length;i<j;){var s=this._allStaves[i];w=Math.max(w,s.BarRenderers[s.BarRenderers.length-1].Width),s.RevertLastBar(),++i}this.Width=this.Width-w}},UpdateWidth:function(){for(var realWidth=0,i=0,j=this._allStaves.length;i<j;){var s=this._allStaves[i];s.BarRenderers[s.BarRenderers.length-1].ApplyLayoutingInfo(),s.BarRenderers[s.BarRenderers.length-1].Width>realWidth&&(realWidth=s.BarRenderers[s.BarRenderers.length-1].Width),++i}return this.Width=this.Width+realWidth,realWidth},CalculateAccoladeSpacing:function(tracks){if(!this._accoladeSpacingCalculated&&0==this.Index)if(this._accoladeSpacingCalculated=!0,this.Layout.Renderer.Settings.Layout.Get("hideTrackNames",!1))this.AccoladeSpacing=0;else{var canvas=this.Layout.Renderer.Canvas,res=this.Layout.Renderer.RenderingResources.EffectFont;canvas.set_Font(res);for(var i=0;i<tracks.length;)this.AccoladeSpacing=Math.max(this.AccoladeSpacing,canvas.MeasureText(tracks[i].ShortName)),++i;this.AccoladeSpacing=this.AccoladeSpacing+20,this.Width=this.Width+this.AccoladeSpacing}},GetStaveTrackGroup:function(track){for(var i=0,j=this.Staves.length;i<j;){var g=this.Staves[i];if(g.Track==track)return g;++i}return null},AddStaff:function(track,staff){var group=this.GetStaveTrackGroup(track);null==group&&(group=new alphaTab_rendering_staves_StaveTrackGroup(this,track),this.Staves.push(group)),staff.StaveTrackGroup=group,staff.StaveGroup=this,staff.Index=this._allStaves.length,this._allStaves.push(staff),group.Staves.push(staff),staff.get_IsInAccolade()&&(null==this._firstStaffInAccolade&&(this._firstStaffInAccolade=staff,staff.IsFirstInAccolade=!0),null==group.FirstStaffInAccolade&&(group.FirstStaffInAccolade=staff),null==this._lastStaffInAccolade&&(this._lastStaffInAccolade=staff,staff.IsLastInAccolade=!0),null!=this._lastStaffInAccolade&&(this._lastStaffInAccolade.IsLastInAccolade=!1),this._lastStaffInAccolade=staff,this._lastStaffInAccolade.IsLastInAccolade=!0,group.LastStaffInAccolade=staff)},get_Height:function(){return this._allStaves[this._allStaves.length-1].Y+this._allStaves[this._allStaves.length-1].Height},ScaleToWidth:function(width){for(var i=0,j=this._allStaves.length;i<j;)this._allStaves[i].ScaleToWidth(width),++i;this.Width=width},Paint:function(cx,cy,canvas){this.PaintPartial(cx+this.X,cy+this.Y,canvas,0,this.MasterBarsRenderers.length)},PaintPartial:function(cx,cy,canvas,startIndex,count){this.BuildBoundingsLookup(cx,cy);for(var i=0,j=this._allStaves.length;i<j;)this._allStaves[i].Paint(cx,cy,canvas,startIndex,count),++i;var res=this.Layout.Renderer.RenderingResources;if(this.Staves.length>0&&0==startIndex){if(null!=this._firstStaffInAccolade&&null!=this._lastStaffInAccolade){var firstStart=cy+this._firstStaffInAccolade.Y+this._firstStaffInAccolade.StaveTop+this._firstStaffInAccolade.TopSpacing+this._firstStaffInAccolade.get_TopOverflow(),lastEnd=cy+this._lastStaffInAccolade.Y+this._lastStaffInAccolade.TopSpacing+this._lastStaffInAccolade.get_TopOverflow()+this._lastStaffInAccolade.StaveBottom,acooladeX=cx+this._firstStaffInAccolade.X;canvas.set_Color(res.BarSeperatorColor),canvas.BeginPath(),canvas.MoveTo(acooladeX,firstStart),canvas.LineTo(acooladeX,lastEnd),canvas.Stroke()}canvas.set_Font(res.EffectFont);for(var i1=0,j1=this.Staves.length;i1<j1;){var g=this.Staves[i1];if(null!=g.FirstStaffInAccolade&&null!=g.LastStaffInAccolade){var firstStart1=cy+g.FirstStaffInAccolade.Y+g.FirstStaffInAccolade.StaveTop+g.FirstStaffInAccolade.TopSpacing+g.FirstStaffInAccolade.get_TopOverflow(),lastEnd1=cy+g.LastStaffInAccolade.Y+g.LastStaffInAccolade.TopSpacing+g.LastStaffInAccolade.get_TopOverflow()+g.LastStaffInAccolade.StaveBottom,acooladeX1=cx+g.FirstStaffInAccolade.X,barSize=3*this.Layout.Renderer.Settings.Scale,barOffset=barSize,accoladeStart=firstStart1-4*barSize,accoladeEnd=lastEnd1+4*barSize;0!=this.Index||this.Layout.Renderer.Settings.Layout.Get("hideTrackNames",!1)||canvas.FillText(g.Track.ShortName,cx+10*this.Layout.get_Scale(),firstStart1),canvas.FillRect(acooladeX1-barOffset-barSize,accoladeStart,barSize,accoladeEnd-accoladeStart);var spikeStartX=acooladeX1-barOffset-barSize,spikeEndX=acooladeX1+2*barSize;canvas.BeginPath(),canvas.MoveTo(spikeStartX,accoladeStart),canvas.BezierCurveTo(spikeStartX,accoladeStart,spikeStartX,accoladeStart,spikeEndX,accoladeStart-barSize),canvas.BezierCurveTo(acooladeX1,accoladeStart+barSize,spikeStartX,accoladeStart+barSize,spikeStartX,accoladeStart+barSize),canvas.ClosePath(),canvas.Fill(),canvas.BeginPath(),canvas.MoveTo(spikeStartX,accoladeEnd),canvas.BezierCurveTo(spikeStartX,accoladeEnd,acooladeX1,accoladeEnd,spikeEndX,accoladeEnd+barSize),canvas.BezierCurveTo(acooladeX1,accoladeEnd-barSize,spikeStartX,accoladeEnd-barSize,spikeStartX,accoladeEnd-barSize),canvas.ClosePath(),canvas.Fill()}++i1}}},FinalizeGroup:function(){for(var currentY=0,staff=$iterator(this._allStaves)();staff.hasNext();){var staff1=staff.next();staff1.X=this.AccoladeSpacing,staff1.Y=currentY,staff1.FinalizeStave(),currentY+=staff1.Height}},BuildBoundingsLookup:function(cx,cy){if(!this.Layout.Renderer.get_BoundsLookup().IsFinished&&null!=this._firstStaffInAccolade&&null!=this._lastStaffInAccolade){this.Y,this._firstStaffInAccolade.Y,this.Y,this._lastStaffInAccolade.Y,this._lastStaffInAccolade.Height;var realTop=cy+this.Y+this._allStaves[0].Y,x=(this.Y,this._allStaves[this._allStaves.length-1].Y,this._allStaves[this._allStaves.length-1].Height,this.X+this._firstStaffInAccolade.X),staveGroupBounds=new alphaTab_rendering_utils_StaveGroupBounds;staveGroupBounds.VisualBounds=new alphaTab_rendering_utils_Bounds,staveGroupBounds.RealBounds=new alphaTab_rendering_utils_Bounds,this.Layout.Renderer.get_BoundsLookup().AddStaveGroup(staveGroupBounds);for(var masterBarBoundsLookup=[],i=0;i<this.Staves.length;){for(var j=0,k=this.Staves[i].FirstStaffInAccolade.BarRenderers.length;j<k;){var renderer=this.Staves[i].FirstStaffInAccolade.BarRenderers[j];if(0==i){var masterBarBounds=new alphaTab_rendering_utils_MasterBarBounds;masterBarBounds.IsFirstOfLine=renderer.get_IsFirstOfLine(),masterBarBounds.RealBounds=new alphaTab_rendering_utils_Bounds,masterBarBounds.VisualBounds=new alphaTab_rendering_utils_Bounds,this.Layout.Renderer.get_BoundsLookup().AddMasterBar(masterBarBounds),masterBarBoundsLookup.push(masterBarBounds)}renderer.BuildBoundingsLookup(masterBarBoundsLookup[j],x,cy+this.Y+this._firstStaffInAccolade.Y),++j}++i}}},GetBarX:function(index){if(null==this._firstStaffInAccolade||0==this.Layout.Renderer.Tracks.length)return 0;var bar=this.Layout.Renderer.Tracks[0].Staves[0].Bars[index];return this.Layout.GetRendererForBar(this._firstStaffInAccolade.get_StaveId(),bar).X},__class__:alphaTab_rendering_staves_StaveGroup};var alphaTab_rendering_staves_StaveTrackGroup=function(staveGroup,track){this.StaveGroup=staveGroup,this.Track=track;this.Staves=[]};alphaTab_rendering_staves_StaveTrackGroup.__name__=!0,alphaTab_rendering_staves_StaveTrackGroup.prototype={__class__:alphaTab_rendering_staves_StaveTrackGroup};var alphaTab_rendering_utils_AccidentalHelper=function(){this._registeredAccidentals={};this._appliedScoreLines={}};alphaTab_rendering_utils_AccidentalHelper.__name__=!0,alphaTab_rendering_utils_AccidentalHelper.prototype={ApplyAccidental:function(note){var noteValue=note.get_RealValue(),ksi=note.Beat.Voice.Bar.get_MasterBar().KeySignature+7,index=noteValue%12,accidentalToSet=0,line=this.RegisterNoteLine(note);if(!note.Beat.Voice.Bar.Staff.Track.IsPercussion){var keySignatureAccidental=ksi<7?3:2,hasNoteAccidentalForKeySignature=alphaTab_rendering_utils_AccidentalHelper.KeySignatureLookup[ksi][index],isAccidentalNote=alphaTab_rendering_utils_AccidentalHelper.AccidentalNotes[index],isAccidentalRegistered=this._registeredAccidentals.hasOwnProperty(line);if(hasNoteAccidentalForKeySignature==isAccidentalNote||isAccidentalRegistered){if(hasNoteAccidentalForKeySignature==isAccidentalNote&&isAccidentalRegistered){delete this._registeredAccidentals[index],accidentalToSet=isAccidentalNote?keySignatureAccidental:1}}else this._registeredAccidentals[line]=!0,accidentalToSet=isAccidentalNote?keySignatureAccidental:1}return accidentalToSet},RegisterNoteLine:function(n){var track=n.Beat.Voice.Bar.Staff.Track,value=track.IsPercussion?alphaTab_rendering_utils_PercussionMapper.MapNoteForDisplay(n):n.get_RealValue()-track.DisplayTranspositionPitch,ks=n.Beat.Voice.Bar.get_MasterBar().KeySignature,clef=n.Beat.Voice.Bar.Clef,index=value%12,octave=(value/12|0)-1,steps=alphaTab_rendering_utils_AccidentalHelper.OctaveSteps[clef];steps-=7*octave;var stepList=alphaTab_model_ModelUtils.KeySignatureIsSharp(ks)||alphaTab_model_ModelUtils.KeySignatureIsNatural(ks)?alphaTab_rendering_utils_AccidentalHelper.SharpNoteSteps:alphaTab_rendering_utils_AccidentalHelper.FlatNoteSteps;n.AccidentalMode;return stepList[index],steps-=stepList[index],this._appliedScoreLines[n.Id]=steps,steps},GetNoteLine:function(n){return this._appliedScoreLines[n.Id]},__class__:alphaTab_rendering_utils_AccidentalHelper};var alphaTab_rendering_utils_BarBounds=function(){this.Beats=[]};alphaTab_rendering_utils_BarBounds.__name__=!0,alphaTab_rendering_utils_BarBounds.prototype={AddBeat:function(bounds){bounds.BarBounds=this,this.Beats.push(bounds),this.MasterBarBounds.AddBeat(bounds)},FindBeatAtPos:function(x){for(var beat=null,i=0;i<this.Beats.length;){if(null==beat||this.Beats[i].RealBounds.X<x)beat=this.Beats[i];else if(this.Beats[i].RealBounds.X>x)break;++i}return beat},__class__:alphaTab_rendering_utils_BarBounds};var alphaTab_rendering_utils_BarHelpers=function(bar){this.BeamHelpers=[];this.BeamHelperLookup=[];this.TupletHelpers=[];var currentBeamHelper=null,currentTupletHelper=null;if(null!=bar)for(var i=0,j=bar.Voices.length;i<j;){var v=bar.Voices[i];this.BeamHelpers.push([]);this.BeamHelperLookup.push({});this.TupletHelpers.push([]);for(var k=0,l=v.Beats.length;k<l;){var b=v.Beats[k],forceNewTupletHelper=!1;if(b.get_IsRest()||null!=currentBeamHelper&&currentBeamHelper.CheckBeat(b)||(null!=currentBeamHelper?(currentBeamHelper.Finish(),forceNewTupletHelper=currentBeamHelper.Beats.length>1):forceNewTupletHelper=!0,(currentBeamHelper=new alphaTab_rendering_utils_BeamingHelper(bar.Staff.Track)).CheckBeat(b),this.BeamHelpers[v.Index].push(currentBeamHelper)),b.get_HasTuplet()){var previousBeat=b.PreviousBeat;null!=previousBeat&&previousBeat.Voice!=b.Voice&&(previousBeat=null),forceNewTupletHelper&&null!=currentTupletHelper&&currentTupletHelper.Finish(),null!=previousBeat&&null!=currentTupletHelper&&currentTupletHelper.Check(b)||((currentTupletHelper=new alphaTab_rendering_utils_TupletHelper(v.Index)).Check(b),this.TupletHelpers[v.Index].push(currentTupletHelper))}this.BeamHelperLookup[v.Index][b.Index]=currentBeamHelper,++k}null!=currentBeamHelper&&currentBeamHelper.Finish(),null!=currentTupletHelper&&currentTupletHelper.Finish(),currentBeamHelper=null,currentTupletHelper=null,++i}};alphaTab_rendering_utils_BarHelpers.__name__=!0,alphaTab_rendering_utils_BarHelpers.prototype={__class__:alphaTab_rendering_utils_BarHelpers};var alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$={};alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.__name__=!0,alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.toString=function(this1){switch(this1){case 0:return"Up";case 1:return"Down"}return""};var alphaTab_rendering_utils_BeamingHelper=function(track){this._track=track;this.Beats=[];this._beatLineXPositions={},this.ShortestDuration=-4};alphaTab_rendering_utils_BeamingHelper.__name__=!0,alphaTab_rendering_utils_BeamingHelper.CanJoin=function(b1,b2){if(null==b1||null==b2||b1.get_IsRest()||b2.get_IsRest()||b1.GraceType!=b2.GraceType)return!1;var m1=b1.Voice.Bar;if(m1!=b1.Voice.Bar)return!1;var start1=b1.Start,start2=b2.Start;if(!alphaTab_rendering_utils_BeamingHelper.CanJoinDuration(b1.Duration)||!alphaTab_rendering_utils_BeamingHelper.CanJoinDuration(b2.Duration))return start1==start2;var divisionLength=960;8==m1.get_MasterBar().TimeSignatureDenominator&&m1.get_MasterBar().TimeSignatureNumerator%3==0&&(divisionLength+=480);return(0|(divisionLength+start1)/divisionLength)==(0|(divisionLength+start2)/divisionLength)},alphaTab_rendering_utils_BeamingHelper.CanJoinDuration=function(d){switch(d){case 1:case 2:case 4:return!1;default:return!0}},alphaTab_rendering_utils_BeamingHelper.IsFullBarJoin=function(a,b,barIndex){return alphaTab_model_ModelUtils.GetIndex(a.Duration)-2-barIndex>0&&alphaTab_model_ModelUtils.GetIndex(b.Duration)-2-barIndex>0},alphaTab_rendering_utils_BeamingHelper.prototype={GetValue:function(n){return this._track.IsPercussion?alphaTab_rendering_utils_PercussionMapper.MapNoteForDisplay(n):n.get_RealValue()-this._track.DisplayTranspositionPitch},GetBeatLineX:function(beat){return this.HasBeatLineX(beat)?0==this.Direction?this._beatLineXPositions[beat.Index].Up:this._beatLineXPositions[beat.Index].Down:0},HasBeatLineX:function(beat){return this._beatLineXPositions.hasOwnProperty(beat.Index)},RegisterBeatLineX:function(staffId,beat,up,down){this._beatLineXPositions[beat.Index]=new alphaTab_rendering_utils_BeatLinePositions(staffId,up,down)},Finish:function(){this.Direction=this.CalculateDirection()},CalculateDirection:function(){if(this.Voice.Index>0)return this.Invert(1);if(this.Voice.Bar.Voices.length>1)for(var v=1;v<this.Voice.Bar.Voices.length;){if(!this.Voice.Bar.Voices[v].IsEmpty)return this.Invert(0);++v}if(1==this.Beats.length&&(1==this.Beats[0].Duration||-2==this.Beats[0].Duration))return this.Invert(0);if(0!=this.Beats[0].GraceType)return this.Invert(0);var avg=(this.GetValue(this.MaxNote)+this.GetValue(this.MinNote))/2|0;return this.Invert(avg<alphaTab_rendering_utils_BeamingHelper.ScoreMiddleKeys[this._lastBeat.Voice.Bar.Clef]?0:1)},Invert:function(direction){if(!this.InvertBeamDirection)return direction;switch(direction){case 0:return 1;case 1:return 0}return 0},CheckBeat:function(beat){beat.InvertBeamDirection&&(this.InvertBeamDirection=!0),null==this.Voice&&(this.Voice=beat.Voice);var add=!1;if(0==this.Beats.length?add=!0:alphaTab_rendering_utils_BeamingHelper.CanJoin(this._lastBeat,beat)&&(add=!0),add){this._lastBeat=beat,this.Beats.push(beat),beat.get_HasTuplet()&&(this.HasTuplet=!0);for(var fingeringCount=0,n=0;n<beat.Notes.length;){var note=beat.Notes[n];-2==note.LeftHandFinger&&-2==note.RightHandFinger||++fingeringCount,++n}fingeringCount>this.FingeringCount&&(this.FingeringCount=fingeringCount),this.CheckNote(beat.get_MinNote()),this.CheckNote(beat.get_MaxNote()),this.ShortestDuration<beat.Duration&&(this.ShortestDuration=beat.Duration),beat.get_HasTuplet()&&(this.HasTuplet=!0)}return add},CheckNote:function(note){var value=this.GetValue(note);null==this.FirstMinNote||note.Beat.Start<this.FirstMinNote.Beat.Start?this.FirstMinNote=note:note.Beat.Start==this.FirstMinNote.Beat.Start&&value<this.GetValue(this.FirstMinNote)&&(this.FirstMinNote=note),null==this.FirstMaxNote||note.Beat.Start<this.FirstMaxNote.Beat.Start?this.FirstMaxNote=note:note.Beat.Start==this.FirstMaxNote.Beat.Start&&value>this.GetValue(this.FirstMaxNote)&&(this.FirstMaxNote=note),null==this.LastMinNote||note.Beat.Start>this.LastMinNote.Beat.Start?this.LastMinNote=note:note.Beat.Start==this.LastMinNote.Beat.Start&&value<this.GetValue(this.LastMinNote)&&(this.LastMinNote=note),null==this.LastMaxNote||note.Beat.Start>this.LastMaxNote.Beat.Start?this.LastMaxNote=note:note.Beat.Start==this.LastMaxNote.Beat.Start&&value>this.GetValue(this.LastMaxNote)&&(this.LastMaxNote=note),(null==this.MaxNote||value>this.GetValue(this.MaxNote))&&(this.MaxNote=note),(null==this.MinNote||value<this.GetValue(this.MinNote))&&(this.MinNote=note)},CalculateBeamY:function(stemSize,xCorrection,xPosition,scale,yPosition){return this.CalculateBeamYWithDirection(stemSize,xCorrection,xPosition,scale,yPosition,this.Direction)},CalculateBeamYWithDirection:function(stemSize,xCorrection,xPosition,scale,yPosition,direction){if(1==this.Beats.length)return 0==direction?yPosition.GetYPositionForNote(this.MaxNote)-stemSize:yPosition.GetYPositionForNote(this.MinNote)+stemSize;var maxDistance=10*scale;if(1==direction&&this.MinNote!=this.FirstMinNote&&this.MinNote!=this.LastMinNote)return yPosition.GetYPositionForNote(this.MinNote)+stemSize;if(0==direction&&this.MaxNote!=this.FirstMaxNote&&this.MaxNote!=this.LastMaxNote)return yPosition.GetYPositionForNote(this.MaxNote)-stemSize;var startX=this.GetBeatLineX(this.FirstMinNote.Beat)+xCorrection,startY=0==direction?yPosition.GetYPositionForNote(this.FirstMaxNote)-stemSize:yPosition.GetYPositionForNote(this.FirstMinNote)+stemSize,endX=this.GetBeatLineX(this.LastMaxNote.Beat)+xCorrection,endY=0==direction?yPosition.GetYPositionForNote(this.LastMaxNote)-stemSize:yPosition.GetYPositionForNote(this.LastMinNote)+stemSize;return 1==direction&&startY>endY&&startY-endY>maxDistance&&(endY=startY-maxDistance),1==direction&&endY>startY&&endY-startY>maxDistance&&(startY=endY-maxDistance),0==direction&&startY<endY&&endY-startY>maxDistance&&(endY=startY+maxDistance),0==direction&&endY<startY&&startY-endY>maxDistance&&(startY=endY+maxDistance),startX==endX?startY:(endY-startY)/(endX-startX)*(xPosition-startX)+startY},IsPositionFrom:function(staffId,beat){return!this._beatLineXPositions.hasOwnProperty(beat.Index)||this._beatLineXPositions[beat.Index].StaffId==staffId},__class__:alphaTab_rendering_utils_BeamingHelper};var alphaTab_rendering_utils_BeatBounds=function(){};alphaTab_rendering_utils_BeatBounds.__name__=!0,alphaTab_rendering_utils_BeatBounds.prototype={__class__:alphaTab_rendering_utils_BeatBounds};var alphaTab_rendering_utils_BeatLinePositions=function(staffId,up,down){this.StaffId=staffId,this.Up=up,this.Down=down};alphaTab_rendering_utils_BeatLinePositions.__name__=!0,alphaTab_rendering_utils_BeatLinePositions.prototype={__class__:alphaTab_rendering_utils_BeatLinePositions};var alphaTab_rendering_utils_Bounds=function(){};alphaTab_rendering_utils_Bounds.__name__=!0,alphaTab_rendering_utils_Bounds.prototype={__class__:alphaTab_rendering_utils_Bounds};var alphaTab_rendering_utils_BoundsLookup=function(){this.StaveGroups=[];this._beatLookup={}};alphaTab_rendering_utils_BoundsLookup.__name__=!0,alphaTab_rendering_utils_BoundsLookup.FromJson=function(json,score){for(var lookup=new alphaTab_rendering_utils_BoundsLookup,staveGroup=$iterator(json.StaveGroups)();staveGroup.hasNext();){var staveGroup1=staveGroup.next(),sg=new alphaTab_rendering_utils_StaveGroupBounds;sg.VisualBounds=staveGroup1.VisualBounds,sg.RealBounds=staveGroup1.RealBounds,lookup.AddStaveGroup(sg);for(var masterBar=$iterator(staveGroup1.Bars)();masterBar.hasNext();){var masterBar1=masterBar.next(),mb=new alphaTab_rendering_utils_MasterBarBounds;mb.IsFirstOfLine=masterBar1.IsFirstOfLine,mb.VisualBounds=masterBar1.VisualBounds,mb.RealBounds=masterBar1.RealBounds,sg.AddBar(mb);for(var bar=$iterator(masterBar1.Bars)();bar.hasNext();){var bar1=bar.next(),b=new alphaTab_rendering_utils_BarBounds;b.VisualBounds=bar1.VisualBounds,b.RealBounds=bar1.RealBounds,mb.AddBar(b);for(var beat=$iterator(bar1.Beats)();beat.hasNext();){var beat1=beat.next(),bb=new alphaTab_rendering_utils_BeatBounds;bb.VisualBounds=beat1.VisualBounds,bb.RealBounds=beat1.RealBounds,bb.Beat=score.Tracks[beat1.TrackIndex].Staves[beat1.StaffIndex].Bars[beat1.BarIndex].Voices[beat1.VoiceIndex].Beats[beat1.BeatIndex],b.AddBeat(bb)}}}}return lookup},alphaTab_rendering_utils_BoundsLookup.prototype={ToJson:function(){var json={},staveGroups=[];json.StaveGroups=staveGroups;for(var group=$iterator(this.StaveGroups)();group.hasNext();){var group1=group.next(),g={};g.VisualBounds=this.BoundsToJson(group1.VisualBounds),g.RealBounds=this.BoundsToJson(group1.RealBounds);g.Bars=[];for(var masterBar=$iterator(group1.Bars)();masterBar.hasNext();){var masterBar1=masterBar.next(),mb={};mb.VisualBounds=this.BoundsToJson(masterBar1.VisualBounds),mb.RealBounds=this.BoundsToJson(masterBar1.RealBounds);mb.Bars=[];for(var bar=$iterator(masterBar1.Bars)();bar.hasNext();){var bar1=bar.next(),b={};b.VisualBounds=this.BoundsToJson(bar1.VisualBounds),b.RealBounds=this.BoundsToJson(bar1.RealBounds);b.Beats=[];for(var beat=$iterator(bar1.Beats)();beat.hasNext();){var beat1=beat.next(),bb={};bb.VisualBounds=this.BoundsToJson(beat1.VisualBounds),bb.RealBounds=this.BoundsToJson(beat1.RealBounds),bb.BeatIndex=beat1.Beat.Index,bb.VoiceIndex=beat1.Beat.Voice.Index,bb.BarIndex=beat1.Beat.Voice.Bar.Index,bb.StaffIndex=beat1.Beat.Voice.Bar.Staff.Index,bb.TrackIndex=beat1.Beat.Voice.Bar.Staff.Track.Index,b.Beats.push(bb)}mb.Bars.push(b)}g.Bars.push(mb)}staveGroups.push(g)}return json},BoundsToJson:function(bounds){var json={};return json.X=bounds.X,json.Y=bounds.Y,json.W=bounds.W,json.H=bounds.H,json},Finish:function(){for(var i=0;i<this.StaveGroups.length;)this.StaveGroups[i].Finish(),++i;this.IsFinished=!0},AddStaveGroup:function(bounds){bounds.Index=this.StaveGroups.length,bounds.BoundsLookup=this,this.StaveGroups.push(bounds),this._currentStaveGroup=bounds},AddMasterBar:function(bounds){bounds.StaveGroupBounds=this._currentStaveGroup,this._currentStaveGroup.AddBar(bounds)},AddBeat:function(bounds){this._beatLookup[bounds.Beat.Id]=bounds},FindBeat:function(beat){var id=beat.Id;return this._beatLookup.hasOwnProperty(id)?this._beatLookup[id]:null},GetBeatAtPos:function(x,y){for(var bottom=0,top=this.StaveGroups.length-1,staveGroupIndex=-1;bottom<=top;){var middle=(top+bottom)/2|0,group=this.StaveGroups[middle];if(y>=group.RealBounds.Y&&y<=group.RealBounds.Y+group.RealBounds.H){staveGroupIndex=middle;break}y<group.RealBounds.Y?top=middle-1:bottom=middle+1}if(-1==staveGroupIndex)return null;var bar=this.StaveGroups[staveGroupIndex].FindBarAtPos(x);return null!=bar?bar.FindBeatAtPos(x,y):null},__class__:alphaTab_rendering_utils_BoundsLookup};var alphaTab_rendering_utils_MasterBarBounds=function(){this.Bars=[]};alphaTab_rendering_utils_MasterBarBounds.__name__=!0,alphaTab_rendering_utils_MasterBarBounds.prototype={AddBar:function(bounds){bounds.MasterBarBounds=this,this.Bars.push(bounds)},FindBeatAtPos:function(x,y){for(var beat=null,i=0;i<this.Bars.length;){var b=this.Bars[i].FindBeatAtPos(x);null!=b&&(null==beat||beat.RealBounds.X<b.RealBounds.X)&&(beat=b),++i}return null==beat?null:beat.Beat},Finish:function(){this.Bars.sort(function(a1,b1){return b=b1,(a=a1).RealBounds.Y<b.RealBounds.Y?-1:a.RealBounds.Y>b.RealBounds.Y?1:a.RealBounds.X<b.RealBounds.X?-1:a.RealBounds.X>b.RealBounds.X?1:0;var a,b})},AddBeat:function(bounds){this.StaveGroupBounds.BoundsLookup.AddBeat(bounds)},__class__:alphaTab_rendering_utils_MasterBarBounds};var alphaTab_rendering_utils_PercussionMapper=function(){};alphaTab_rendering_utils_PercussionMapper.__name__=!0,alphaTab_rendering_utils_PercussionMapper.MidiFromElementVariation=function(note){return alphaTab_rendering_utils_PercussionMapper.ElementVariationToMidi[note.Element][note.Variation]},alphaTab_rendering_utils_PercussionMapper.MapNoteForDisplay=function(note){var value=note.get_RealValue();return 61==value||66==value?50:60==value||65==value?52:value>=35&&value<=36||44==value?53:41==value||64==value?55:43==value||62==value?57:45==value||63==value?59:47==value||54==value?62:48==value||56==value?64:50==value?65:42==value||46==value||value>=49&&value<=53||57==value||59==value?67:60},alphaTab_rendering_utils_PercussionMapper.prototype={__class__:alphaTab_rendering_utils_PercussionMapper};var alphaTab_rendering_utils_StaveGroupBounds=function(){this.Bars=[],this.Index=0};alphaTab_rendering_utils_StaveGroupBounds.__name__=!0,alphaTab_rendering_utils_StaveGroupBounds.prototype={Finish:function(){for(var i=0;i<this.Bars.length;)this.Bars[i].Finish(),++i},AddBar:function(bounds){bounds.StaveGroupBounds=this,this.Bars.push(bounds)},FindBarAtPos:function(x){for(var b=null,i=0;i<this.Bars.length;){if(null==b||this.Bars[i].RealBounds.X<x)b=this.Bars[i];else if(x>this.Bars[i].RealBounds.X+this.Bars[i].RealBounds.W)break;++i}return b},__class__:alphaTab_rendering_utils_StaveGroupBounds};var alphaTab_rendering_utils_TupletHelper=function(voice){this.VoiceIndex=voice;this.Beats=[]};alphaTab_rendering_utils_TupletHelper.__name__=!0,alphaTab_rendering_utils_TupletHelper.prototype={get_IsFull:function(){return this.Beats.length==this.Tuplet},Finish:function(){this._isFinished=!0},Check:function(beat){if(0==this.Beats.length)this.Tuplet=beat.TupletNumerator;else if(beat.Voice.Index!=this.VoiceIndex||beat.TupletNumerator!=this.Tuplet||this.get_IsFull()||this._isFinished)return!1;return this.Beats.push(beat),!0},__class__:alphaTab_rendering_utils_TupletHelper};var alphaTab_util_Lazy=function(factory){this._factory=factory};alphaTab_util_Lazy.__name__=!0,alphaTab_util_Lazy.prototype={get_Value:function(){return this._created||(this._value=this._factory(),this._created=!0),this._value},__class__:alphaTab_util_Lazy};var alphaTab_util__$LogLevel_LogLevel_$Impl_$={};alphaTab_util__$LogLevel_LogLevel_$Impl_$.__name__=!0,alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_util__$LogLevel_LogLevel_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_util__$LogLevel_LogLevel_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Debug";case 2:return"Info";case 3:return"Warning";case 4:return"Error"}return""};var alphaTab_xml_XmlNode=function(){this.Attributes={};this.ChildNodes=[]};alphaTab_xml_XmlNode.__name__=!0,alphaTab_xml_XmlNode.prototype={AddChild:function(node){this.ChildNodes.push(node),this.FirstChild=node,1==node.NodeType&&(this.FirstElement=node)},GetAttribute:function(name){return this.Attributes.hasOwnProperty(name)?this.Attributes[name]:""},GetElementsByTagName:function(name){for(var tags=[],c=$iterator(this.ChildNodes)();c.hasNext();){var c1=c.next();null!=c1&&1==c1.NodeType&&c1.LocalName==name&&tags.push(c1)}return tags},FindChildElement:function(name){for(var c=$iterator(this.ChildNodes)();c.hasNext();){var c1=c.next();if(null!=c1&&1==c1.NodeType&&c1.LocalName==name)return c1}return null},get_InnerText:function(){if(1==this.NodeType||9==this.NodeType){for(var txt="",c=$iterator(this.ChildNodes)();c.hasNext();){var c1=c.next();txt+=Std.string(c1.get_InnerText())}return StringTools.trim(txt)}return this.Value},__class__:alphaTab_xml_XmlNode};var alphaTab_xml_XmlDocument=function(xml){alphaTab_xml_XmlNode.call(this),this.NodeType=9,alphaTab_xml_XmlParser.Parse(xml,0,this);for(var child=$iterator(this.ChildNodes)();child.hasNext();){var child1=child.next();if(1==child1.NodeType){this.DocumentElement=child1;break}}};alphaTab_xml_XmlDocument.__name__=!0,alphaTab_xml_XmlDocument.__super__=alphaTab_xml_XmlNode,alphaTab_xml_XmlDocument.prototype=$extend(alphaTab_xml_XmlNode.prototype,{__class__:alphaTab_xml_XmlDocument});var alphaTab_xml_XmlException=function(){alphaTab_AlphaTabException.call(this)};alphaTab_xml_XmlException.__name__=!0,alphaTab_xml_XmlException.__super__=alphaTab_AlphaTabException,alphaTab_xml_XmlException.prototype=$extend(alphaTab_AlphaTabException.prototype,{XmlException:function(message,xml,pos){return this.AlphaTabException(message),this.Xml=xml,this.Pos=pos,this},__class__:alphaTab_xml_XmlException});var alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$={};alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.__name__=!0,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.toString=function(this1){switch(this1){case 0:return"None";case 1:return"Element";case 2:return"Attribute";case 3:return"Text";case 4:return"CDATA";case 5:return"EntityReference";case 6:return"Entity";case 7:return"ProcessingInstruction";case 8:return"Comment";case 9:return"Document";case 10:return"DocumentType";case 11:return"DocumentFragment";case 12:return"Notation";case 13:return"Whitespace";case 14:return"SignificantWhitespace";case 15:return"EndElement";case 16:return"EndEntity";case 17:return"XmlDeclaration"}return""};var alphaTab_xml_XmlParser=function(){};alphaTab_xml_XmlParser.__name__=!0,alphaTab_xml_XmlParser.Parse=function(str,p,parent){for(var c=system_Convert.ToUInt16(HxOverrides.cca(str,p)),state=1,next=1,start=0,buf="",escapeNext=1,xml=null,aname=null,nbrackets=0,attrValQuote=0;p<str.length;){switch(c=system_Convert.ToUInt16(HxOverrides.cca(str,p)),state){case 0:switch(c){case 9:case 10:case 13:case 32:break;default:state=next;continue}break;case 1:if(60!=c){start=p,state=13;continue}state=0,next=2;break;case 2:switch(c){case 33:if(91==system_Convert.ToUInt16(HxOverrides.cca(str,p+1))){if(p+=2,"CDATA["!=HxOverrides.substr(str,p,6).toUpperCase())throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected <![CDATA[",str,p));state=17,start=(p+=5)+1}else{var tmp;if(68!=system_Convert.ToUInt16(HxOverrides.cca(str,p+1))){tmp=100==system_Convert.ToUInt16(HxOverrides.cca(str,p+1))}else tmp=!0;if(tmp){if("OCTYPE"!=HxOverrides.substr(str,p+2,6).toUpperCase())throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected <!DOCTYPE",str,p));state=16,start=(p+=8)+1}else{var tmp1;if(45==system_Convert.ToUInt16(HxOverrides.cca(str,p+1))){tmp1=45!=system_Convert.ToUInt16(HxOverrides.cca(str,p+2))}else tmp1=!0;if(tmp1)throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected \x3c!--",str,p));state=15,start=(p+=2)+1}}break;case 47:if(null==parent)throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected node name",str,p));start=p+1,state=0,next=10;break;case 63:state=14,start=p;break;default:state=3,start=p;continue}break;case 3:if(!alphaTab_xml_XmlParser.IsValidChar(c)){if(p==start)throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected node name",str,p));(xml=new alphaTab_xml_XmlNode).NodeType=1,xml.LocalName=HxOverrides.substr(str,start,p-start),parent.AddChild(xml),state=0,next=4;continue}break;case 4:switch(c){case 47:state=11;break;case 62:state=9;break;default:state=5,start=p;continue}break;case 5:if(!alphaTab_xml_XmlParser.IsValidChar(c)){if(start==p)throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected attribute name",str,p));if(aname=HxOverrides.substr(str,start,p-start),xml.Attributes.hasOwnProperty(aname))throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Duplicate attribute ["+aname+"]",str,p));state=0,next=6;continue}break;case 6:if(61!=c)throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected =",str,p));state=0,next=7;break;case 7:switch(c){case 34:case 39:buf="",state=8,start=p+1,attrValQuote=c}break;case 8:if(38==c)buf+=Std.string(HxOverrides.substr(str,start,p-start)),state=18,escapeNext=8,start=p+1;else if(c==attrValQuote){var val=buf+=Std.string(HxOverrides.substr(str,start,p-start));buf="",xml.Attributes[aname]=val,state=0,next=4}break;case 9:start=p=alphaTab_xml_XmlParser.Parse(str,p,xml),state=1;break;case 10:if(!alphaTab_xml_XmlParser.IsValidChar(c)){if(start==p)throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected node name",str,p));if(HxOverrides.substr(str,start,p-start)!=parent.LocalName){var tmp3="Expected </"+parent.LocalName+">";throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException(tmp3,str,p))}state=0,next=12;continue}break;case 11:if(62!=c)throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected >",str,p));state=1;break;case 12:if(62==c)return p;throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Expected >",str,p));case 13:if(60==c){buf+=Std.string(HxOverrides.substr(str,start,p-start));var child=new alphaTab_xml_XmlNode;child.NodeType=3,child.Value=buf;buf="",parent.AddChild(child),state=0,next=2}else 38==c&&(buf+=Std.string(HxOverrides.substr(str,start,p-start)),state=18,escapeNext=13,start=p+1);break;case 14:var tmp4;if(63==c){tmp4=62==system_Convert.ToUInt16(HxOverrides.cca(str,p+1))}else tmp4=!1;tmp4&&(++p,state=1);break;case 15:var tmp5,tmp6;if(45==c){tmp6=45==system_Convert.ToUInt16(HxOverrides.cca(str,p+1))}else tmp6=!1;if(tmp6){tmp5=62==system_Convert.ToUInt16(HxOverrides.cca(str,p+2))}else tmp5=!1;tmp5&&(p+=2,state=1);break;case 16:if(91==c)++nbrackets;else if(93==c)--nbrackets;else if(62==c&&0==nbrackets){var node=new alphaTab_xml_XmlNode;node.NodeType=10,node.Value=HxOverrides.substr(str,start,p-start),parent.AddChild(node),state=1}break;case 17:var tmp7,tmp8;if(93==c){tmp8=93==system_Convert.ToUInt16(HxOverrides.cca(str,p+1))}else tmp8=!1;if(tmp8){tmp7=62==system_Convert.ToUInt16(HxOverrides.cca(str,p+2))}else tmp7=!1;if(tmp7){var child1=new alphaTab_xml_XmlNode;child1.NodeType=4,child1.Value=HxOverrides.substr(str,start,p-start),parent.AddChild(child1),p+=2,state=1}break;case 18:if(c==system_Convert.ToUInt16(59)){var s=HxOverrides.substr(str,start,p-start);if(35==system_Convert.ToUInt16(HxOverrides.cca(s,0))){var code;code=120==system_Convert.ToUInt16(HxOverrides.cca(s,1))?alphaTab_platform_Platform.ParseInt("0"+HxOverrides.substr(s,1,s.length-1)):alphaTab_platform_Platform.ParseInt(HxOverrides.substr(s,1,s.length-1)),buf+=String.fromCharCode(code)}else alphaTab_xml_XmlParser.Escapes.hasOwnProperty(s)?buf+=Std.string(alphaTab_xml_XmlParser.Escapes[s]):buf+=Std.string("&"+s+";");start=p+1,state=escapeNext}else alphaTab_xml_XmlParser.IsValidChar(c)||35==c||(buf+=Std.string("&"),buf+=Std.string(HxOverrides.substr(str,start,p-start)),start=--p+1,state=escapeNext)}++p}if(1==state&&(start=p,state=13),13==state){if(p!=start){buf+=Std.string(HxOverrides.substr(str,start,p-start));var node1=new alphaTab_xml_XmlNode;node1.NodeType=3,node1.Value=buf,parent.AddChild(node1)}return p}if(18==state&&13==escapeNext){buf+=Std.string("&"),buf+=Std.string(HxOverrides.substr(str,start,p-start));var node2=new alphaTab_xml_XmlNode;return node2.NodeType=3,node2.Value=buf,parent.AddChild(node2),p}throw new js__$Boot_HaxeError((new alphaTab_xml_XmlException).XmlException("Unexpected end",str,p))},alphaTab_xml_XmlParser.IsValidChar=function(c){return c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=48||58==c||46==c||95==c||45==c},alphaTab_xml_XmlParser.prototype={__class__:alphaTab_xml_XmlParser};var alphaTab_xml_XmlParser_$XmlState=function(){};alphaTab_xml_XmlParser_$XmlState.__name__=!0,alphaTab_xml_XmlParser_$XmlState.prototype={__class__:alphaTab_xml_XmlParser_$XmlState};var js__$Boot_HaxeError=function(val){Error.call(this),this.val=val,this.message=String(val),Error.captureStackTrace&&Error.captureStackTrace(this,js__$Boot_HaxeError)};js__$Boot_HaxeError.__name__=!0,js__$Boot_HaxeError.wrap=function(val){return val instanceof Error?val:new js__$Boot_HaxeError(val)},js__$Boot_HaxeError.__super__=Error,js__$Boot_HaxeError.prototype=$extend(Error.prototype,{__class__:js__$Boot_HaxeError});var js_html_compat_ArrayBuffer=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{var len=a;this.a=[];for(var _g1=0,_g=len;_g1<_g;){var i=_g1++;this.a[i]=0}this.byteLength=len}};js_html_compat_ArrayBuffer.__name__=!0,js_html_compat_ArrayBuffer.sliceImpl=function(begin,end){var u=new Uint8Array(this,begin,null==end?null:end-begin),result=new ArrayBuffer(u.byteLength);return new Uint8Array(result).set(u),result},js_html_compat_ArrayBuffer.prototype={slice:function(begin,end){return new js_html_compat_ArrayBuffer(this.a.slice(begin,end))},__class__:js_html_compat_ArrayBuffer};var js_html_compat_Uint8Array=function(){};js_html_compat_Uint8Array.__name__=!0,js_html_compat_Uint8Array._new=function(arg1,offset,length){var arr;if("number"==typeof arg1){arr=[];for(var _g1=0,_g=arg1;_g1<_g;){arr[_g1++]=0}arr.byteLength=arr.length,arr.byteOffset=0,arr.buffer=new js_html_compat_ArrayBuffer(arr)}else if(js_Boot.__instanceof(arg1,js_html_compat_ArrayBuffer)){var buffer=arg1;null==offset&&(offset=0),null==length&&(length=buffer.byteLength-offset),(arr=0==offset?buffer.a:buffer.a.slice(offset,offset+length)).byteLength=arr.length,arr.byteOffset=offset,arr.buffer=buffer}else{if(!(arg1 instanceof Array&&null==arg1.__enum__))throw new js__$Boot_HaxeError("TODO "+Std.string(arg1));(arr=arg1.slice()).byteLength=arr.length,arr.byteOffset=0,arr.buffer=new js_html_compat_ArrayBuffer(arr)}return arr.subarray=js_html_compat_Uint8Array._subarray,arr.set=js_html_compat_Uint8Array._set,arr},js_html_compat_Uint8Array._set=function(arg,offset){if(js_Boot.__instanceof(arg.buffer,js_html_compat_ArrayBuffer)){var a=arg;if(arg.byteLength+offset>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var _g1=0,_g=arg.byteLength;_g1<_g;){var i=_g1++;this[i+offset]=a[i]}}else{if(!(arg instanceof Array&&null==arg.__enum__))throw new js__$Boot_HaxeError("TODO");var a1=arg;if(a1.length+offset>this.byteLength)throw new js__$Boot_HaxeError("set() outside of range");for(var _g11=0,_g2=a1.length;_g11<_g2;){var i1=_g11++;this[i1+offset]=a1[i1]}}},js_html_compat_Uint8Array._subarray=function(start,end){var a=js_html_compat_Uint8Array._new(this.slice(start,end));return a.byteOffset=start,a};var system__$Boolean_Boolean_$Impl_$={};system__$Boolean_Boolean_$Impl_$.__name__=!0,system__$Boolean_Boolean_$Impl_$._new=function(v){return v},system__$Boolean_Boolean_$Impl_$.ToHaxeBool=function(this1){return this1},system__$Boolean_Boolean_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$Boolean_Boolean_$Impl_$.not=function(this1){return!this1};var system__$Byte_Byte_$Impl_$={};system__$Byte_Byte_$Impl_$.__name__=!0,system__$Byte_Byte_$Impl_$._new=function(i){return system_Convert.ToUInt8(i)},system__$Byte_Byte_$Impl_$.ToHaxeInt=function(this1){return this1},system__$Byte_Byte_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$Byte_Byte_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$Byte_Byte_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},system__$Byte_Byte_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$Byte_Byte_$Impl_$.neg=function(this1){return-this1},system__$Byte_Byte_$Impl_$.not=function(this1){return~this1},system__$Byte_Byte_$Impl_$.postinc=function(this1){return this1++},system__$Byte_Byte_$Impl_$.preinc=function(this1){return++this1},system__$Byte_Byte_$Impl_$.postdec=function(this1){return this1--},system__$Byte_Byte_$Impl_$.predec=function(this1){return--this1},system__$Byte_Byte_$Impl_$.div0=function(lhs,rhs){return lhs/rhs|0},system__$Byte_Byte_$Impl_$.div1=function(lhs,rhs){return lhs/rhs|0},system__$Byte_Byte_$Impl_$.div2=function(lhs,rhs){return lhs/rhs|0},system__$Byte_Byte_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$Byte_Byte_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};var system__$Char_Char_$Impl_$={};system__$Char_Char_$Impl_$.__name__=!0,system__$Char_Char_$Impl_$._new=function(v){return system_Convert.ToUInt16(v)},system__$Char_Char_$Impl_$.fromCode=function(i){return system_Convert.ToUInt16(i)},system__$Char_Char_$Impl_$.ToHaxeInt=function(this1){return this1},system__$Char_Char_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$Char_Char_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){throw new js__$Boot_HaxeError(new system_InvalidCastException("cannot cast system.Char to system.Boolean"))},system__$Char_Char_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return this1},system__$Char_Char_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},system__$Char_Char_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},system__$Char_Char_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},system__$Char_Char_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return this1},system__$Char_Char_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},system__$Char_Char_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return this1},system__$Char_Char_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},system__$Char_Char_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return this1},system__$Char_Char_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return system_Convert.ToSingle_Char(this1)},system__$Char_Char_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return system_Convert.ToDouble_Char(this1)},system__$Char_Char_$Impl_$.neg=function(this1){return-this1},system__$Char_Char_$Impl_$.not=function(this1){return~this1},system__$Char_Char_$Impl_$.postinc=function(this1){return this1++},system__$Char_Char_$Impl_$.preinc=function(this1){return++this1},system__$Char_Char_$Impl_$.postdec=function(this1){return this1--},system__$Char_Char_$Impl_$.predec=function(this1){return--this1},system__$Char_Char_$Impl_$.div1=function(lhs,rhs){return lhs/rhs|0},system__$Char_Char_$Impl_$.div2=function(lhs,rhs){return lhs/rhs|0},system__$Char_Char_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$Char_Char_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};var system_CsMath=function(){};system_CsMath.__name__=!0,system_CsMath.Min_Int32_Int32=function(a,b){return Math.min(a,b)},system_CsMath.Max_Int32_Int32=function(a,b){return Math.max(a,b)},system_CsMath.Min_Int64_Int64=function(a,b){return a<b?a:b},system_CsMath.Max_Single_Single=function(a,b){return Math.max(a,b)},system_CsMath.Min_Single_Single=function(a,b){return Math.min(a,b)},system_CsMath.Abs_Single=function(a){return Math.abs(a)},system_CsMath.Abs_Int32=function(a){return Math.abs(a)},system_CsMath.Round_Double=function(a){return Math.round(a)},system_CsMath.Round_Single=function(a){return Math.round(a)},system_CsMath.Sin=function(a){return Math.sin(a)},system_CsMath.Pow=function(v,exp){return Math.pow(v,exp)},system_CsMath.Ceiling_Single=function(v){return Math.ceil(v)},system_CsMath.Ceiling_Double=function(v){return Math.ceil(v)},system_CsMath.Sqrt=function(v){return Math.sqrt(v)};var system__$CsString_CsString_$Impl_$={};system__$CsString_CsString_$Impl_$.__name__=!0,system__$CsString_CsString_$Impl_$._new=function(s){return s},system__$CsString_CsString_$Impl_$.ToHaxeString=function(this1){return this1},system__$CsString_CsString_$Impl_$.get_Length=function(this1){return this1.length},system__$CsString_CsString_$Impl_$.get_Chars=function(this1,i){return system_Convert.ToUInt16(HxOverrides.cca(this1,i))},system__$CsString_CsString_$Impl_$.Substring_Int32=function(this1,start){return HxOverrides.substr(this1,start,null)},system__$CsString_CsString_$Impl_$.Substring_Int32_Int32=function(this1,start,length){return HxOverrides.substr(this1,start,length)},system__$CsString_CsString_$Impl_$.Replace_CsString_CsString=function(this1,from,$with){return StringTools.replace(this1,from,$with)},system__$CsString_CsString_$Impl_$.IndexOf_Char=function(this1,ch){return this1.indexOf(Std.string(ch))},system__$CsString_CsString_$Impl_$.LastIndexOf_Char=function(this1,ch){return this1.lastIndexOf(Std.string(ch))},system__$CsString_CsString_$Impl_$.EndsWith_CsString=function(this1,end){return StringTools.endsWith(this1,end)},system__$CsString_CsString_$Impl_$.Contains=function(this1,s){return-1!=this1.indexOf(s)},system__$CsString_CsString_$Impl_$.Trim=function(this1){return StringTools.trim(this1)},system__$CsString_CsString_$Impl_$.Split_CharArray=function(this1,chars){for(var strings=[],startPos=0,_g1=0,_g=this1.length;_g1<_g;){var i=_g1++,cc=HxOverrides.cca(this1,i);if(chars.indexOf(cc)>=0){var endPos=i-1;endPos<startPos?strings.push(""):strings.push(this1.substring(startPos,endPos)),startPos=i+1}}return strings},system__$CsString_CsString_$Impl_$.IsNullOrEmpty=function(s){return null==s||0==s.length},system__$CsString_CsString_$Impl_$.IsNullOrWhiteSpace=function(s){return null==s||0==StringTools.trim(s).length},system__$CsString_CsString_$Impl_$.FromCharCode=function(s){return String.fromCharCode(s)},system__$CsString_CsString_$Impl_$.StartsWith_CsString=function(this1,s){return StringTools.startsWith(this1,s)},system__$CsString_CsString_$Impl_$.ToLower=function(this1){return this1.toLowerCase()},system__$CsString_CsString_$Impl_$.ToUpper=function(this1){return this1.toUpperCase()},system__$CsString_CsString_$Impl_$.add1=function(lhs,rhs){return lhs+rhs},system__$CsString_CsString_$Impl_$.add2=function(lhs,rhs){return lhs+rhs},system__$CsString_CsString_$Impl_$.add3=function(lhs,rhs){return lhs+(null==rhs?"null":""+rhs)},system__$CsString_CsString_$Impl_$.add4=function(lhs,rhs){return(null==lhs?"null":""+lhs)+rhs},system__$CsString_CsString_$Impl_$.add5=function(lhs,rhs){return lhs+(null==rhs?"null":""+rhs)},system__$CsString_CsString_$Impl_$.add6=function(lhs,rhs){return(null==lhs?"null":""+lhs)+rhs},system__$CsString_CsString_$Impl_$.add7=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add8=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add9=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add10=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add11=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add12=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add13=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add14=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add15=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add16=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add17=function(lhs,rhs){return lhs+Std.string(rhs)},system__$CsString_CsString_$Impl_$.add18=function(lhs,rhs){return lhs+rhs};var system__$Double_Double_$Impl_$={};system__$Double_Double_$Impl_$.__name__=!0,system__$Double_Double_$Impl_$._new=function(i){return i},system__$Double_Double_$Impl_$.FromInt=function(i){return i},system__$Double_Double_$Impl_$.FromSingle=function(i){return i},system__$Double_Double_$Impl_$.ToHaxeFloat=function(this1){return this1},system__$Double_Double_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$Double_Double_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$Double_Double_$Impl_$.ToChar_IFormatProvider=function(this1,provider){throw new js__$Boot_HaxeError(new system_InvalidCastException("cannot cast system.Double to system.Char"))},system__$Double_Double_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(system_Convert.ToInt32_Double(this1))},system__$Double_Double_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(system_Convert.ToInt32_Double(this1))},system__$Double_Double_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(system_Convert.ToInt32_Double(this1))},system__$Double_Double_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(system_Convert.ToInt32_Double(this1))},system__$Double_Double_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return system_Convert.ToInt32_Double(this1)},system__$Double_Double_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(system_Convert.ToInt32_Double(this1))},system__$Double_Double_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return 0|this1},system__$Double_Double_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToInt64(0|this1)},system__$Double_Double_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$Double_Double_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$Double_Double_$Impl_$.neg=function(this1){return-this1},system__$Double_Double_$Impl_$.postinc=function(this1){return this1++},system__$Double_Double_$Impl_$.preinc=function(this1){return++this1},system__$Double_Double_$Impl_$.postdec=function(this1){return this1--},system__$Double_Double_$Impl_$.predec=function(this1){return--this1};var system__$EventAction_EventAction_$Impl_$={};system__$EventAction_EventAction_$Impl_$.__name__=!0,system__$EventAction_EventAction_$Impl_$._new=function(v){return null==v?null:[v]},system__$EventAction_EventAction_$Impl_$.ToLambda=function(this1){var _e=this1;return function(){system__$EventAction_EventAction_$Impl_$.Invoke(_e)}},system__$EventAction_EventAction_$Impl_$.ToArray=function(this1){return this1},system__$EventAction_EventAction_$Impl_$.add=function(lhs,rhs){if(null==lhs){lhs=null==rhs?null:[rhs]}else lhs.push(rhs);return lhs},system__$EventAction_EventAction_$Impl_$.sub=function(lhs,rhs){var raw=lhs,index=raw.indexOf(rhs);return-1!=index&&(raw.splice(index,1),0==raw.length)?null:lhs},system__$EventAction_EventAction_$Impl_$.Invoke=function(this1){for(var _g=0;_g<this1.length;){var x=this1[_g];++_g,x()}};var system__$EventAction1_EventAction1_$Impl_$={};system__$EventAction1_EventAction1_$Impl_$.__name__=!0,system__$EventAction1_EventAction1_$Impl_$._new=function(v){return null==v?null:[v]},system__$EventAction1_EventAction1_$Impl_$.ToLambda=function(this1){var _e=this1;return function(p){system__$EventAction1_EventAction1_$Impl_$.Invoke(_e,p)}},system__$EventAction1_EventAction1_$Impl_$.ToArray=function(this1){return this1},system__$EventAction1_EventAction1_$Impl_$.add=function(lhs,rhs){if(null==lhs){lhs=null==rhs?null:[rhs]}else lhs.push(rhs);return lhs},system__$EventAction1_EventAction1_$Impl_$.sub=function(lhs,rhs){var raw=lhs,index=raw.indexOf(rhs);return-1!=index&&(raw.splice(index,1),0==raw.length)?null:lhs},system__$EventAction1_EventAction1_$Impl_$.Invoke=function(this1,p){for(var _g=0;_g<this1.length;){var x=this1[_g];++_g,x(p)}};var system__$EventAction2_EventAction2_$Impl_$={};system__$EventAction2_EventAction2_$Impl_$.__name__=!0,system__$EventAction2_EventAction2_$Impl_$._new=function(v){return null==v?null:[v]},system__$EventAction2_EventAction2_$Impl_$.ToLambda=function(this1){var _e=this1;return function(p1,p2){system__$EventAction2_EventAction2_$Impl_$.Invoke(_e,p1,p2)}},system__$EventAction2_EventAction2_$Impl_$.ToArray=function(this1){return this1},system__$EventAction2_EventAction2_$Impl_$.add=function(lhs,rhs){if(null==lhs){lhs=null==rhs?null:[rhs]}else lhs.push(rhs);return lhs},system__$EventAction2_EventAction2_$Impl_$.sub=function(lhs,rhs){var raw=lhs,index=raw.indexOf(rhs);return-1!=index&&(raw.splice(index,1),0==raw.length)?null:lhs},system__$EventAction2_EventAction2_$Impl_$.Invoke=function(this1,p1,p2){for(var _g=0;_g<this1.length;){var x=this1[_g];++_g,x(p1,p2)}};var system__$FixedArray_FixedArray_$Impl_$={};system__$FixedArray_FixedArray_$Impl_$.__name__=!0,system__$FixedArray_FixedArray_$Impl_$._new=function(length){return new Array(length)},system__$FixedArray_FixedArray_$Impl_$.fromArray=function(a){return a},system__$FixedArray_FixedArray_$Impl_$.get_Length=function(this1){return this1.length},system__$FixedArray_FixedArray_$Impl_$.get=function(this1,index){return this1[index]},system__$FixedArray_FixedArray_$Impl_$.set=function(this1,index,val){return this1[index]=val},system__$FixedArray_FixedArray_$Impl_$.iterator=function(this1){return HxOverrides.iter(this1)},system__$FixedArray_FixedArray_$Impl_$.empty=function(size){return system__$FixedArray_FixedArray_$Impl_$._new(size)};var system__$Int16_Int16_$Impl_$={};system__$Int16_Int16_$Impl_$.__name__=!0,system__$Int16_Int16_$Impl_$._new=function(i){return system_Convert.ToInt16(i)},system__$Int16_Int16_$Impl_$.ToHaxeInt=function(this1){return this1},system__$Int16_Int16_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$Int16_Int16_$Impl_$.FromByte=function(c){return system_Convert.ToInt16(c)},system__$Int16_Int16_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$Int16_Int16_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$Int16_Int16_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},system__$Int16_Int16_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},system__$Int16_Int16_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return this1},system__$Int16_Int16_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$Int16_Int16_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},system__$Int16_Int16_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},system__$Int16_Int16_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},system__$Int16_Int16_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},system__$Int16_Int16_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$Int16_Int16_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$Int16_Int16_$Impl_$.neg=function(this1){return-this1},system__$Int16_Int16_$Impl_$.not=function(this1){return~this1},system__$Int16_Int16_$Impl_$.postinc=function(this1){return this1++},system__$Int16_Int16_$Impl_$.preinc=function(this1){return++this1},system__$Int16_Int16_$Impl_$.postdec=function(this1){return this1--},system__$Int16_Int16_$Impl_$.predec=function(this1){return--this1},system__$Int16_Int16_$Impl_$.div0=function(lhs,rhs){return lhs/rhs|0},system__$Int16_Int16_$Impl_$.div1=function(lhs,rhs){return lhs/rhs|0},system__$Int16_Int16_$Impl_$.div2=function(lhs,rhs){return lhs/rhs|0},system__$Int16_Int16_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$Int16_Int16_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};var system__$Int32_Int32_$Impl_$={};system__$Int32_Int32_$Impl_$.__name__=!0,system__$Int32_Int32_$Impl_$._new=function(i){return i},system__$Int32_Int32_$Impl_$.ToHaxeInt=function(this1){return this1},system__$Int32_Int32_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$Int32_Int32_$Impl_$.FromChar=function(c){return c},system__$Int32_Int32_$Impl_$.FromByte=function(c){return c},system__$Int32_Int32_$Impl_$.FromSByte=function(c){return c},system__$Int32_Int32_$Impl_$.FromInt16=function(c){return c},system__$Int32_Int32_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$Int32_Int32_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$Int32_Int32_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},system__$Int32_Int32_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},system__$Int32_Int32_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},system__$Int32_Int32_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$Int32_Int32_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},system__$Int32_Int32_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},system__$Int32_Int32_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},system__$Int32_Int32_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},system__$Int32_Int32_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$Int32_Int32_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$Int32_Int32_$Impl_$.CompareTo_Int32=function(this1,other){return this1<other?-1:this1>other?1:0},system__$Int32_Int32_$Impl_$.neg=function(this1){return-this1},system__$Int32_Int32_$Impl_$.not=function(this1){return~this1},system__$Int32_Int32_$Impl_$.postinc=function(this1){return this1++},system__$Int32_Int32_$Impl_$.preinc=function(this1){return++this1},system__$Int32_Int32_$Impl_$.postdec=function(this1){return this1--},system__$Int32_Int32_$Impl_$.predec=function(this1){return--this1},system__$Int32_Int32_$Impl_$.div0=function(lhs,rhs){return lhs/rhs|0},system__$Int32_Int32_$Impl_$.div1=function(lhs,rhs){return lhs/rhs|0},system__$Int32_Int32_$Impl_$.div2=function(lhs,rhs){return lhs/rhs|0},system__$Int32_Int32_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$Int32_Int32_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};var system__$Int64_Int64_$Impl_$={};system__$Int64_Int64_$Impl_$.__name__=!0,system__$Int64_Int64_$Impl_$._new=function(i){return i},system__$Int64_Int64_$Impl_$.ToHaxeInt=function(this1){return this1},system__$Int64_Int64_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$Int64_Int64_$Impl_$.FromByte=function(c){return c},system__$Int64_Int64_$Impl_$.FromInt16=function(c){return c},system__$Int64_Int64_$Impl_$.FromInt32=function(c){return c},system__$Int64_Int64_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$Int64_Int64_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$Int64_Int64_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},system__$Int64_Int64_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},system__$Int64_Int64_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},system__$Int64_Int64_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$Int64_Int64_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return system_Convert.ToInt32(this1)},system__$Int64_Int64_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},system__$Int64_Int64_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},system__$Int64_Int64_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},system__$Int64_Int64_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$Int64_Int64_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$Int64_Int64_$Impl_$.neg=function(this1){return-this1},system__$Int64_Int64_$Impl_$.not=function(this1){return~this1},system__$Int64_Int64_$Impl_$.postinc=function(this1){return this1++},system__$Int64_Int64_$Impl_$.preinc=function(this1){return++this1},system__$Int64_Int64_$Impl_$.postdec=function(this1){return this1--},system__$Int64_Int64_$Impl_$.predec=function(this1){return--this1},system__$Int64_Int64_$Impl_$.div0=function(lhs,rhs){return lhs/rhs|0},system__$Int64_Int64_$Impl_$.div1=function(lhs,rhs){return lhs/rhs|0},system__$Int64_Int64_$Impl_$.div2=function(lhs,rhs){return lhs/rhs|0},system__$Int64_Int64_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$Int64_Int64_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};var system_InvalidCastException=function(message){null==message&&(message=""),system_Exception.call(this),this.Exception_CsString(message)};system_InvalidCastException.__name__=!0,system_InvalidCastException.__super__=system_Exception,system_InvalidCastException.prototype=$extend(system_Exception.prototype,{__class__:system_InvalidCastException});var system__$Nullable_Nullable_$Impl_$={};system__$Nullable_Nullable_$Impl_$.__name__=!0,system__$Nullable_Nullable_$Impl_$._new=function(t){return t},system__$Nullable_Nullable_$Impl_$.get_Value=function(this1){return this1};var system_ObjectExtensions=function(){};system_ObjectExtensions.__name__=!0,system_ObjectExtensions.ToString=function(v){return Std.string(v)};var system_OverflowException=function(message){null==message&&(message=""),system_Exception.call(this),this.Exception_CsString(message)};system_OverflowException.__name__=!0,system_OverflowException.__super__=system_Exception,system_OverflowException.prototype=$extend(system_Exception.prototype,{__class__:system_OverflowException});var system__$SByte_SByte_$Impl_$={};system__$SByte_SByte_$Impl_$.__name__=!0,system__$SByte_SByte_$Impl_$._new=function(i){return system_Convert.ToInt8(i)},system__$SByte_SByte_$Impl_$.ToHaxeInt=function(this1){return this1},system__$SByte_SByte_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$SByte_SByte_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$SByte_SByte_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$SByte_SByte_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return this1},system__$SByte_SByte_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},system__$SByte_SByte_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return this1},system__$SByte_SByte_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$SByte_SByte_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},system__$SByte_SByte_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},system__$SByte_SByte_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},system__$SByte_SByte_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},system__$SByte_SByte_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$SByte_SByte_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$SByte_SByte_$Impl_$.neg=function(this1){return-this1},system__$SByte_SByte_$Impl_$.not=function(this1){return~this1},system__$SByte_SByte_$Impl_$.postinc=function(this1){return this1++},system__$SByte_SByte_$Impl_$.preinc=function(this1){return++this1},system__$SByte_SByte_$Impl_$.postdec=function(this1){return this1--},system__$SByte_SByte_$Impl_$.predec=function(this1){return--this1},system__$SByte_SByte_$Impl_$.div0=function(lhs,rhs){return lhs/rhs|0},system__$SByte_SByte_$Impl_$.div1=function(lhs,rhs){return lhs/rhs|0},system__$SByte_SByte_$Impl_$.div2=function(lhs,rhs){return lhs/rhs|0},system__$SByte_SByte_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$SByte_SByte_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};var system__$Single_Single_$Impl_$={};system__$Single_Single_$Impl_$.__name__=!0,system__$Single_Single_$Impl_$._new=function(i){return i},system__$Single_Single_$Impl_$.FromInt32=function(i){return i},system__$Single_Single_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$Single_Single_$Impl_$.ToChar_IFormatProvider=function(this1,provider){throw new js__$Boot_HaxeError(new system_InvalidCastException("cannot cast system.Single to system.Char"))},system__$Single_Single_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(system_Convert.ToInt32_Single(this1))},system__$Single_Single_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(system_Convert.ToInt32_Single(this1))},system__$Single_Single_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(system_Convert.ToInt32_Single(this1))},system__$Single_Single_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(system_Convert.ToInt32_Single(this1))},system__$Single_Single_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return system_Convert.ToInt32_Single(this1)},system__$Single_Single_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(system_Convert.ToInt32_Single(this1))},system__$Single_Single_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return 0|this1},system__$Single_Single_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return system_Convert.ToInt64(0|this1)},system__$Single_Single_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$Single_Single_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$Single_Single_$Impl_$.ToHaxeFloat=function(this1){return this1},system__$Single_Single_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$Single_Single_$Impl_$.neg=function(this1){return-this1},system__$Single_Single_$Impl_$.postinc=function(this1){return this1++},system__$Single_Single_$Impl_$.preinc=function(this1){return++this1},system__$Single_Single_$Impl_$.postdec=function(this1){return this1--},system__$Single_Single_$Impl_$.predec=function(this1){return--this1},system__$Single_Single_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$Single_Single_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};var system__$UInt16_UInt16_$Impl_$={};system__$UInt16_UInt16_$Impl_$.__name__=!0,system__$UInt16_UInt16_$Impl_$._new=function(i){return system_Convert.ToUInt16(i)},system__$UInt16_UInt16_$Impl_$.ToHaxeInt=function(this1){return this1},system__$UInt16_UInt16_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$UInt16_UInt16_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$UInt16_UInt16_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return this1},system__$UInt16_UInt16_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},system__$UInt16_UInt16_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},system__$UInt16_UInt16_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},system__$UInt16_UInt16_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return this1},system__$UInt16_UInt16_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return this1},system__$UInt16_UInt16_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return this1},system__$UInt16_UInt16_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},system__$UInt16_UInt16_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return this1},system__$UInt16_UInt16_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$UInt16_UInt16_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$UInt16_UInt16_$Impl_$.neg=function(this1){return-this1},system__$UInt16_UInt16_$Impl_$.not=function(this1){return~this1},system__$UInt16_UInt16_$Impl_$.postinc=function(this1){return this1++},system__$UInt16_UInt16_$Impl_$.preinc=function(this1){return++this1},system__$UInt16_UInt16_$Impl_$.postdec=function(this1){return this1--},system__$UInt16_UInt16_$Impl_$.predec=function(this1){return--this1},system__$UInt16_UInt16_$Impl_$.div0=function(lhs,rhs){return lhs/rhs|0},system__$UInt16_UInt16_$Impl_$.div1=function(lhs,rhs){return lhs/rhs|0},system__$UInt16_UInt16_$Impl_$.div2=function(lhs,rhs){return lhs/rhs|0},system__$UInt16_UInt16_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$UInt16_UInt16_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};var system__$UInt32_UInt32_$Impl_$={};system__$UInt32_UInt32_$Impl_$.__name__=!0,system__$UInt32_UInt32_$Impl_$._new=function(i){return system_Convert.ToUInt32(i)},system__$UInt32_UInt32_$Impl_$.ToHaxeInt=function(this1){return this1},system__$UInt32_UInt32_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$UInt32_UInt32_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$UInt32_UInt32_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$UInt32_UInt32_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},system__$UInt32_UInt32_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},system__$UInt32_UInt32_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},system__$UInt32_UInt32_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$UInt32_UInt32_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return system_Convert.ToInt32(this1)},system__$UInt32_UInt32_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return this1},system__$UInt32_UInt32_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return this1},system__$UInt32_UInt32_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return this1},system__$UInt32_UInt32_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$UInt32_UInt32_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$UInt32_UInt32_$Impl_$.neg=function(this1){return-this1},system__$UInt32_UInt32_$Impl_$.not=function(this1){return~this1},system__$UInt32_UInt32_$Impl_$.postinc=function(this1){return this1++},system__$UInt32_UInt32_$Impl_$.preinc=function(this1){return++this1},system__$UInt32_UInt32_$Impl_$.postdec=function(this1){return this1--},system__$UInt32_UInt32_$Impl_$.predec=function(this1){return--this1},system__$UInt32_UInt32_$Impl_$.div0=function(lhs,rhs){return lhs/rhs|0},system__$UInt32_UInt32_$Impl_$.div1=function(lhs,rhs){return lhs/rhs|0},system__$UInt32_UInt32_$Impl_$.div2=function(lhs,rhs){return lhs/rhs|0},system__$UInt32_UInt32_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$UInt32_UInt32_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};var system__$UInt64_UInt64_$Impl_$={};system__$UInt64_UInt64_$Impl_$.__name__=!0,system__$UInt64_UInt64_$Impl_$._new=function(i){return system_Convert.ToUInt64(i)},system__$UInt64_UInt64_$Impl_$.ToHaxeInt=function(this1){return this1},system__$UInt64_UInt64_$Impl_$.ToString=function(this1){return null==this1?"null":""+this1},system__$UInt64_UInt64_$Impl_$.ToBoolean_IFormatProvider=function(this1,provider){return 0!=this1},system__$UInt64_UInt64_$Impl_$.ToChar_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$UInt64_UInt64_$Impl_$.ToSByte_IFormatProvider=function(this1,provider){return system_Convert.ToInt8(this1)},system__$UInt64_UInt64_$Impl_$.ToByte_IFormatProvider=function(this1,provider){return system_Convert.ToUInt8(this1)},system__$UInt64_UInt64_$Impl_$.ToInt16_IFormatProvider=function(this1,provider){return system_Convert.ToInt16(this1)},system__$UInt64_UInt64_$Impl_$.ToUInt16_IFormatProvider=function(this1,provider){return system_Convert.ToUInt16(this1)},system__$UInt64_UInt64_$Impl_$.ToInt32_IFormatProvider=function(this1,provider){return system_Convert.ToInt32(this1)},system__$UInt64_UInt64_$Impl_$.ToUInt32_IFormatProvider=function(this1,provider){return system_Convert.ToUInt32(this1)},system__$UInt64_UInt64_$Impl_$.ToInt64_IFormatProvider=function(this1,provider){return system_Convert.ToInt32(this1)},system__$UInt64_UInt64_$Impl_$.ToUInt64_IFormatProvider=function(this1,provider){return this1},system__$UInt64_UInt64_$Impl_$.ToSingle_IFormatProvider=function(this1,provider){return this1},system__$UInt64_UInt64_$Impl_$.ToDouble_IFormatProvider=function(this1,provider){return this1},system__$UInt64_UInt64_$Impl_$.not=function(this1){return~this1},system__$UInt64_UInt64_$Impl_$.postinc=function(this1){return this1++},system__$UInt64_UInt64_$Impl_$.preinc=function(this1){return++this1},system__$UInt64_UInt64_$Impl_$.postdec=function(this1){return this1--},system__$UInt64_UInt64_$Impl_$.predec=function(this1){return--this1},system__$UInt64_UInt64_$Impl_$.div0=function(lhs,rhs){return lhs/rhs|0},system__$UInt64_UInt64_$Impl_$.add16=function(lhs,rhs){return Std.string(lhs)+rhs},system__$UInt64_UInt64_$Impl_$.add17=function(lhs,rhs){return Std.string(lhs)+rhs};function $iterator(o){return o instanceof Array?function(){return HxOverrides.iter(o)}:"function"==typeof o.iterator?$bind(o,o.iterator):o.iterator}var $fid=0;function $bind(o,m){if(null==m)return null;null==m.__id__&&(m.__id__=$fid++);var f;return null==o.hx__closures__?o.hx__closures__={}:f=o.hx__closures__[m.__id__],null==f&&((f=function(){return f.method.apply(f.scope,arguments)}).scope=o,f.method=m,o.hx__closures__[m.__id__]=f),f}String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0;var Int={__name__:["Int"]},Dynamic={__name__:["Dynamic"]},Float=Number;Float.__name__=["Float"];var Bool=Boolean;Bool.__ename__=["Bool"];var Class={__name__:["Class"]},Enum={};alphaTab_util_Logger.LogLevel=2;var this1={};alphaTab_Environment.RenderEngines=this1;var this2={};alphaTab_Environment.LayoutEngines=this2;alphaTab_Environment.StaveProfiles={},alphaTab_Environment.PlatformInit(),alphaTab_Environment.LayoutEngines.default=function(r){return new alphaTab_rendering_layout_PageViewLayout(r)},alphaTab_Environment.LayoutEngines.page=function(r1){return new alphaTab_rendering_layout_PageViewLayout(r1)},alphaTab_Environment.LayoutEngines.horizontal=function(r2){return new alphaTab_rendering_layout_HorizontalScreenLayout(r2)},alphaTab_Environment.StaveProfiles.default=alphaTab_Environment.StaveProfiles["score-tab"]=[new alphaTab_rendering_EffectBarRendererFactory("score-effects",[new alphaTab_rendering_effects_TempoEffectInfo,new alphaTab_rendering_effects_TripletFeelEffectInfo,new alphaTab_rendering_effects_MarkerEffectInfo,new alphaTab_rendering_effects_TextEffectInfo,new alphaTab_rendering_effects_ChordsEffectInfo,new alphaTab_rendering_effects_TrillEffectInfo,new alphaTab_rendering_effects_BeatVibratoEffectInfo,new alphaTab_rendering_effects_NoteVibratoEffectInfo,new alphaTab_rendering_effects_AlternateEndingsEffectInfo]),new alphaTab_rendering_ScoreBarRendererFactory,new alphaTab_rendering_EffectBarRendererFactory("tab-effects",[new alphaTab_rendering_effects_CrescendoEffectInfo,new alphaTab_rendering_effects_DynamicsEffectInfo,new alphaTab_rendering_effects_LyricsEffectInfo,new alphaTab_rendering_effects_TrillEffectInfo,new alphaTab_rendering_effects_BeatVibratoEffectInfo,new alphaTab_rendering_effects_NoteVibratoEffectInfo,new alphaTab_rendering_effects_TapEffectInfo,new alphaTab_rendering_effects_FadeInEffectInfo,new alphaTab_rendering_effects_HarmonicsEffectInfo,new alphaTab_rendering_effects_LetRingEffectInfo,new alphaTab_rendering_effects_CapoEffectInfo,new alphaTab_rendering_effects_PalmMuteEffectInfo,new alphaTab_rendering_effects_PickStrokeEffectInfo]),new alphaTab_rendering_TabBarRendererFactory(!1,!1,!1)],alphaTab_Environment.StaveProfiles.score=[new alphaTab_rendering_EffectBarRendererFactory("score-effects",[new alphaTab_rendering_effects_TempoEffectInfo,new alphaTab_rendering_effects_TripletFeelEffectInfo,new alphaTab_rendering_effects_MarkerEffectInfo,new alphaTab_rendering_effects_TextEffectInfo,new alphaTab_rendering_effects_ChordsEffectInfo,new alphaTab_rendering_effects_TrillEffectInfo,new alphaTab_rendering_effects_BeatVibratoEffectInfo,new alphaTab_rendering_effects_NoteVibratoEffectInfo,new alphaTab_rendering_effects_FadeInEffectInfo,new alphaTab_rendering_effects_LetRingEffectInfo,new alphaTab_rendering_effects_PalmMuteEffectInfo,new alphaTab_rendering_effects_PickStrokeEffectInfo,new alphaTab_rendering_effects_AlternateEndingsEffectInfo]),new alphaTab_rendering_ScoreBarRendererFactory,new alphaTab_rendering_EffectBarRendererFactory("score-bottom-effects",[new alphaTab_rendering_effects_CrescendoEffectInfo,new alphaTab_rendering_effects_DynamicsEffectInfo,new alphaTab_rendering_effects_LyricsEffectInfo])],alphaTab_Environment.StaveProfiles.tab=[new alphaTab_rendering_EffectBarRendererFactory("tab-effects",[new alphaTab_rendering_effects_TempoEffectInfo,new alphaTab_rendering_effects_TripletFeelEffectInfo,new alphaTab_rendering_effects_MarkerEffectInfo,new alphaTab_rendering_effects_TextEffectInfo,new alphaTab_rendering_effects_ChordsEffectInfo,new alphaTab_rendering_effects_TripletFeelEffectInfo,new alphaTab_rendering_effects_TrillEffectInfo,new alphaTab_rendering_effects_BeatVibratoEffectInfo,new alphaTab_rendering_effects_NoteVibratoEffectInfo,new alphaTab_rendering_effects_TapEffectInfo,new alphaTab_rendering_effects_FadeInEffectInfo,new alphaTab_rendering_effects_HarmonicsEffectInfo,new alphaTab_rendering_effects_LetRingEffectInfo,new alphaTab_rendering_effects_CapoEffectInfo,new alphaTab_rendering_effects_PalmMuteEffectInfo,new alphaTab_rendering_effects_PickStrokeEffectInfo,new alphaTab_rendering_effects_AlternateEndingsEffectInfo]),new alphaTab_rendering_TabBarRendererFactory(!0,!0,!0),new alphaTab_rendering_EffectBarRendererFactory("tab-bottom-effects",[new alphaTab_rendering_effects_LyricsEffectInfo])],alphaTab_model_Tuning.Initialize();this1={};alphaTab_rendering_glyphs_ScoreBeatGlyph.NormalKeys=this1;for(var normalKeyNotes=[32,34,35,36,38,39,40,41,43,45,47,48,50,55,56,58,60,61],i=0;i<normalKeyNotes.length;)alphaTab_rendering_glyphs_ScoreBeatGlyph.NormalKeys[normalKeyNotes[i]]=!0,++i;this2={};alphaTab_rendering_glyphs_ScoreBeatGlyph.XKeys=this2;for(var xKeyNotes=[31,33,37,42,44,54,62,63,64,65,66],i1=0;i1<xKeyNotes.length;)alphaTab_rendering_glyphs_ScoreBeatGlyph.XKeys[xKeyNotes[i1]]=!0,++i1;this1={};alphaTab_xml_XmlParser.Escapes=this1,alphaTab_xml_XmlParser.Escapes.lt="<",alphaTab_xml_XmlParser.Escapes.gt=">",alphaTab_xml_XmlParser.Escapes.amp="&",alphaTab_xml_XmlParser.Escapes.quot='"',alphaTab_xml_XmlParser.Escapes.apos="'";var ArrayBuffer=$global.ArrayBuffer||js_html_compat_ArrayBuffer;null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=js_html_compat_ArrayBuffer.sliceImpl);var Uint8Array=$global.Uint8Array||js_html_compat_Uint8Array._new;alphaTab_platform_svg_SvgCanvas.BlurCorrection=.5,alphaTab_platform_model_Color.BlackRgb="#000000",system_Convert._conversionBuffer=new ArrayBuffer(8),system_Convert._int8Buffer=new Int8Array(system_Convert._conversionBuffer),system_Convert._uint8Buffer=new Uint8Array(system_Convert._conversionBuffer),system_Convert._int16Buffer=new Int16Array(system_Convert._conversionBuffer),system_Convert._uint16Buffer=new Uint16Array(system_Convert._conversionBuffer),system_Convert._int32Buffer=new Int32Array(system_Convert._conversionBuffer),system_Convert._uint32Buffer=new Uint32Array(system_Convert._conversionBuffer),js_Boot.__toStr={}.toString,alphaTab_rendering_layout_PageViewLayout.PagePadding=[40,40,40,40],alphaTab_rendering_layout_PageViewLayout.GroupSpacing=20,alphaTab_rendering_layout_HorizontalScreenLayout.PagePadding=[20,20,20,20],alphaTab_rendering_layout_HorizontalScreenLayout.GroupSpacing=20,alphaTab_Environment.StaveProfileScoreTab="score-tab",alphaTab_Environment.StaveProfileTab="tab",alphaTab_Environment.StaveProfileScore="score",alphaTab_audio_MidiUtils.QuarterTime=960,alphaTab_audio_MidiUtils.PercussionChannel=9,alphaTab_audio_MidiUtils.MinVelocity=15,alphaTab_audio_MidiUtils.VelocityIncrement=16,alphaTab_audio_generator_MidiFileGenerator.DefaultBend=64,alphaTab_audio_generator_MidiFileGenerator.DefaultBendSemitone=2.75,alphaTab_audio_generator_MidiFileHandler.DefaultMetronomeKey=37,alphaTab_audio_generator_MidiFileHandler.DefaultDurationDead=30,alphaTab_audio_generator_MidiFileHandler.DefaultDurationPalmMute=80,alphaTab_audio_generator_MidiFileHandler.RestMessage=0,alphaTab_audio_model__$MidiController_MidiController_$Impl_$.DataEntryCoarse=6,alphaTab_audio_model__$MidiController_MidiController_$Impl_$.VolumeCoarse=7,alphaTab_audio_model__$MidiController_MidiController_$Impl_$.PanCoarse=10,alphaTab_audio_model__$MidiController_MidiController_$Impl_$.ExpressionControllerCoarse=11,alphaTab_audio_model__$MidiController_MidiController_$Impl_$.DataEntryFine=38,alphaTab_audio_model__$MidiController_MidiController_$Impl_$.RegisteredParameterFine=100,alphaTab_audio_model__$MidiController_MidiController_$Impl_$.RegisteredParameterCourse=101,alphaTab_importer_AlphaTexImporter.Eof=0,alphaTab_importer_AlphaTexImporter.TrackChannels=[0,1],alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.No=0,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.Eof=1,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.Number=2,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.DoubleDot=3,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.Dot=4,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.String=5,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.Tuning=6,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.LParensis=7,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.RParensis=8,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.LBrace=9,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.RBrace=10,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.Pipe=11,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.MetaCommand=12,alphaTab_importer__$AlphaTexSymbols_AlphaTexSymbols_$Impl_$.Multiply=13,alphaTab_importer_Gp3To5Importer.VersionString="FICHIER GUITAR PRO ",alphaTab_importer_Gp3To5Importer.BendStep=25,alphaTab_importer_GpxFileSystem.HeaderBcFs="BCFS",alphaTab_importer_GpxFileSystem.HeaderBcFz="BCFZ",alphaTab_importer_GpxFileSystem.ScoreGpif="score.gpif",alphaTab_importer_GpxParser.InvalidId="-1",alphaTab_importer_GpxParser.BendPointPositionFactor=.6,alphaTab_importer_GpxParser.BendPointValueFactor=.04,alphaTab_io_BitReader.ByteSize=8,alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.None=0,alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.Normal=1,alphaTab_model__$AccentuationType_AccentuationType_$Impl_$.Heavy=2,alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.None=0,alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.Natural=1,alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.Sharp=2,alphaTab_model__$AccidentalType_AccidentalType_$Impl_$.Flat=3,alphaTab_model__$AutomationType_AutomationType_$Impl_$.Tempo=0,alphaTab_model__$AutomationType_AutomationType_$Impl_$.Volume=1,alphaTab_model__$AutomationType_AutomationType_$Impl_$.Instrument=2,alphaTab_model__$AutomationType_AutomationType_$Impl_$.Balance=3,alphaTab_model_Bar.GlobalBarId=0,alphaTab_model_Beat.WhammyBarMaxPosition=60,alphaTab_model_Beat.WhammyBarMaxValue=24,alphaTab_model_Beat.GlobalBeatId=0,alphaTab_model_BendPoint.MaxPosition=60,alphaTab_model_BendPoint.MaxValue=12,alphaTab_model__$BrushType_BrushType_$Impl_$.None=0,alphaTab_model__$BrushType_BrushType_$Impl_$.BrushUp=1,alphaTab_model__$BrushType_BrushType_$Impl_$.BrushDown=2,alphaTab_model__$BrushType_BrushType_$Impl_$.ArpeggioUp=3,alphaTab_model__$BrushType_BrushType_$Impl_$.ArpeggioDown=4,alphaTab_model__$Clef_Clef_$Impl_$.Neutral=0,alphaTab_model__$Clef_Clef_$Impl_$.C3=1,alphaTab_model__$Clef_Clef_$Impl_$.C4=2,alphaTab_model__$Clef_Clef_$Impl_$.F4=3,alphaTab_model__$Clef_Clef_$Impl_$.G2=4,alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$._15ma=0,alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$._8va=1,alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$.Regular=2,alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$._8vb=3,alphaTab_model__$ClefOttavia_ClefOttavia_$Impl_$._15mb=4,alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.None=0,alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.Crescendo=1,alphaTab_model__$CrescendoType_CrescendoType_$Impl_$.Decrescendo=2,alphaTab_model__$Duration_Duration_$Impl_$.QuadrupleWhole=-4,alphaTab_model__$Duration_Duration_$Impl_$.DoubleWhole=-2,alphaTab_model__$Duration_Duration_$Impl_$.Whole=1,alphaTab_model__$Duration_Duration_$Impl_$.Half=2,alphaTab_model__$Duration_Duration_$Impl_$.Quarter=4,alphaTab_model__$Duration_Duration_$Impl_$.Eighth=8,alphaTab_model__$Duration_Duration_$Impl_$.Sixteenth=16,alphaTab_model__$Duration_Duration_$Impl_$.ThirtySecond=32,alphaTab_model__$Duration_Duration_$Impl_$.SixtyFourth=64,alphaTab_model__$Duration_Duration_$Impl_$.OneHundredTwentyEighth=128,alphaTab_model__$Duration_Duration_$Impl_$.TwoHundredFiftySixth=256,alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.PPP=0,alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.PP=1,alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.P=2,alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.MP=3,alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.MF=4,alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.F=5,alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.FF=6,alphaTab_model__$DynamicValue_DynamicValue_$Impl_$.FFF=7,alphaTab_model__$Fingers_Fingers_$Impl_$.Unknown=-2,alphaTab_model__$Fingers_Fingers_$Impl_$.NoOrDead=-1,alphaTab_model__$Fingers_Fingers_$Impl_$.Thumb=0,alphaTab_model__$Fingers_Fingers_$Impl_$.IndexFinger=1,alphaTab_model__$Fingers_Fingers_$Impl_$.MiddleFinger=2,alphaTab_model__$Fingers_Fingers_$Impl_$.AnnularFinger=3,alphaTab_model__$Fingers_Fingers_$Impl_$.LittleFinger=4,alphaTab_model__$GraceType_GraceType_$Impl_$.None=0,alphaTab_model__$GraceType_GraceType_$Impl_$.OnBeat=1,alphaTab_model__$GraceType_GraceType_$Impl_$.BeforeBeat=2,alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.None=0,alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.Natural=1,alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.Artificial=2,alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.Pinch=3,alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.Tap=4,alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.Semi=5,alphaTab_model__$HarmonicType_HarmonicType_$Impl_$.Feedback=6,alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.Major=0,alphaTab_model__$KeySignatureType_KeySignatureType_$Impl_$.Minor=1,alphaTab_model_Lyrics.CharCodeLF=10,alphaTab_model_Lyrics.CharCodeTab=9,alphaTab_model_Lyrics.CharCodeCR=13,alphaTab_model_Lyrics.CharCodeSpace=32,alphaTab_model_Lyrics.CharCodeBrackedClose=93,alphaTab_model_Lyrics.CharCodeBrackedOpen=91,alphaTab_model_Lyrics.CharCodeDash=45,alphaTab_model_Lyrics_$LyricsState.IGNORE_SPACES=0,alphaTab_model_Lyrics_$LyricsState.BEGIN=1,alphaTab_model_Lyrics_$LyricsState.TEXT=2,alphaTab_model_Lyrics_$LyricsState.COMMENT=3,alphaTab_model_Lyrics_$LyricsState.DASH=4,alphaTab_model_MasterBar.MaxAlternateEndings=8,alphaTab_model_Note.GlobalNoteId=0,alphaTab_model_Note.MaxOffsetForSameLineSearch=3,alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.Default=0,alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.SwapAccidentals=1,alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ForceNatural=2,alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ForceSharp=3,alphaTab_model__$NoteAccidentalMode_NoteAccidentalMode_$Impl_$.ForceFlat=4,alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.None=0,alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.Up=1,alphaTab_model__$PickStrokeType_PickStrokeType_$Impl_$.Down=2,alphaTab_model__$SlideType_SlideType_$Impl_$.None=0,alphaTab_model__$SlideType_SlideType_$Impl_$.Shift=1,alphaTab_model__$SlideType_SlideType_$Impl_$.Legato=2,alphaTab_model__$SlideType_SlideType_$Impl_$.IntoFromBelow=3,alphaTab_model__$SlideType_SlideType_$Impl_$.IntoFromAbove=4,alphaTab_model__$SlideType_SlideType_$Impl_$.OutUp=5,alphaTab_model__$SlideType_SlideType_$Impl_$.OutDown=6,alphaTab_model_Track.ShortNameMaxLength=10,alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.NoTripletFeel=0,alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.Triplet16th=1,alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.Triplet8th=2,alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.Dotted16th=3,alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.Dotted8th=4,alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.Scottish16th=5,alphaTab_model__$TripletFeel_TripletFeel_$Impl_$.Scottish8th=6,alphaTab_model__$VibratoType_VibratoType_$Impl_$.None=0,alphaTab_model__$VibratoType_VibratoType_$Impl_$.Slight=1,alphaTab_model__$VibratoType_VibratoType_$Impl_$.Wide=2,alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.Plain=0,alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.Bold=1,alphaTab_platform_model__$FontStyle_FontStyle_$Impl_$.Italic=2,alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.Left=0,alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.Center=1,alphaTab_platform_model__$TextAlign_TextAlign_$Impl_$.Right=2,alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.Top=0,alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.Middle=1,alphaTab_platform_model__$TextBaseline_TextBaseline_$Impl_$.Bottom=2,alphaTab_platform_svg_FontSizes.TimesNewRoman=[3,4,5,6,6,9,9,2,4,4,6,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,5,10,8,7,7,8,7,6,7,8,4,4,8,7,10,8,8,7,8,7,5,8,8,7,11,8,8,7,4,3,4,5,6,4,5,5,5,5,5,4,5,6,3,3,6,3,9,6,6,6,5,4,4,4,5,6,7,6,6,5,5,2,5,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,6,6,6,6,2,5,4,8,4,6,6,0,8,6,4,6,3,3,4,5,5,4,4,3,3,6,8,8,8,5,8,8,8,8,8,8,11,7,7,7,7,7,4,4,4,4,8,8,8,8,8,8,8,6,8,8,8,8,8,8,6,5,5,5,5,5,5,5,8,5,5,5,5,5,3,3,3,3,6,6,6,6,6,6,6,6,6,5,5,5,5,6,6],alphaTab_platform_svg_FontSizes.Arial11Pt=[3,3,4,6,6,10,7,2,4,4,4,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,6,11,7,7,8,8,7,7,9,8,3,6,7,6,9,8,9,7,9,8,7,7,8,7,10,7,7,7,3,3,3,5,6,4,6,6,6,6,6,3,6,6,2,2,6,2,9,6,6,6,6,4,6,3,6,6,8,6,6,6,4,3,4,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,6,6,6,6,3,6,4,8,4,6,6,0,8,6,4,6,4,4,4,6,6,4,4,4,4,6,9,9,9,7,7,7,7,7,7,7,11,8,7,7,7,7,3,3,3,3,8,8,9,9,9,9,9,6,9,8,8,8,8,7,7,7,6,6,6,6,6,6,10,6,6,6,6,6,3,3,3,3,6,6,6,6,6,6,6,6,7,6,6,6,6,6,6],alphaTab_platform_svg_FontSizes.ControlChars=32,alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.TimesNewRoman=0,alphaTab_platform_svg__$SupportedFonts_SupportedFonts_$Impl_$.Arial=1,alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.PreNotes=0,alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.OnNotes=1,alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.PostNotes=2,alphaTab_rendering__$BeatXPosition_BeatXPosition_$Impl_$.EndBeat=3,alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.SinglePreBeat=0,alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.SingleOnBeat=1,alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.GroupedBeforeBeat=2,alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.GroupedOnBeat=3,alphaTab_rendering__$EffectBarGlyphSizing_EffectBarGlyphSizing_$Impl_$.FullBar=4,alphaTab_rendering_ScoreBarRenderer.StaffId="score",alphaTab_rendering_ScoreBarRenderer.SharpKsSteps=[1,4,0,3,6,2,5],alphaTab_rendering_ScoreBarRenderer.FlatKsSteps=[5,2,6,3,7,4,8],alphaTab_rendering_ScoreBarRenderer.LineSpacing=8,alphaTab_rendering_TabBarRenderer.StaffId="tab",alphaTab_rendering_TabBarRenderer.LineSpacing=10,alphaTab_rendering_glyphs_AccidentalGroupGlyph.NonReserved=-3e3,alphaTab_rendering_glyphs_AlternateEndingsGlyph.Padding=3,alphaTab_rendering_glyphs_LineRangedGlyph.LineSpacing=3,alphaTab_rendering_glyphs_LineRangedGlyph.LineTopPadding=8,alphaTab_rendering_glyphs_LineRangedGlyph.LineTopOffset=6,alphaTab_rendering_glyphs_LineRangedGlyph.LineSize=8,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.None=-1,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ClefG=57424,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ClefC=57436,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ClefF=57442,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ClefNeutral=57449,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ClefTab=57453,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.ClefTabSmall=57454,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestQuadrupleWhole=58593,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestDoubleWhole=58594,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestWhole=58595,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestHalf=58596,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestQuarter=58597,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestEighth=58598,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestSixteenth=58599,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestThirtySecond=58600,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestSixtyFourth=58601,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestOneHundredTwentyEighth=58602,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.RestTwoHundredFiftySixth=58603,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.GraceUp=57815,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.GraceDown=57816,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Trill=58726,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num0=57472,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num1=57473,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num2=57474,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num3=57475,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num4=57476,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num5=57477,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num6=57478,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num7=57479,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num8=57480,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Num9=57481,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.TimeSignatureCommon=57482,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.TimeSignatureCutCommon=57483,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteQuadrupleWhole=57505,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteDoubleWhole=57504,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteWhole=57506,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteHalf=57507,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteQuarter=57508,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteDead=57514,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteHarmonic=57564,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteRideCymbal=57566,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteHiHat=57523,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteSideStick=57513,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteHiHatHalf=57591,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteChineseCymbal=57593,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterUpEighth=57920,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterDownEighth=57921,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterUpSixteenth=57922,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterDownSixteenth=57923,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterUpThirtySecond=57924,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterDownThirtySecond=57925,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterUpSixtyFourth=57926,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterDownSixtyFourth=57927,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterUpOneHundredTwentyEighth=57928,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterDownOneHundredTwentyEighth=57929,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterUpTwoHundredFiftySixth=57930,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.FooterDownTwoHundredFiftySixth=57931,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.DynamicPPP=58666,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.DynamicPP=58667,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.DynamicP=58656,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.DynamicMP=58668,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.DynamicMF=58669,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.DynamicF=58658,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.DynamicFF=58671,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.DynamicFFF=58672,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Accentuation=58528,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.HeavyAccentuation=58540,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.WaveHorizontal=60068,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.PickStrokeDown=58896,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.PickStrokeUp=58898,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.TremoloPickingThirtySecond=57890,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.TremoloPickingSixteenth=57889,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.TremoloPickingEighth=57888,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.Tempo=57813,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.NoteEighth=57815,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.AccidentalFlat=57952,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.AccidentalNatural=57953,alphaTab_rendering_glyphs__$MusicFontSymbol_MusicFontSymbol_$Impl_$.AccidentalSharp=57954,alphaTab_rendering_glyphs_NoteHeadGlyph.GraceScale=.75,alphaTab_rendering_glyphs_NoteHeadGlyph.NoteHeadHeight=9,alphaTab_rendering_glyphs_TripletFeelGlyph.NoteScale=.4,alphaTab_rendering_glyphs_TripletFeelGlyph.NoteHeight=12,alphaTab_rendering_glyphs_TripletFeelGlyph.NoteSeparation=12,alphaTab_rendering_glyphs_TripletFeelGlyph.BarHeight=2,alphaTab_rendering_glyphs_TripletFeelGlyph.BarSeparation=3,alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.Full=0,alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.PartialLeft=1,alphaTab_rendering_glyphs__$TripletFeelGlyph_$BarType_TripletFeelGlyph_$BarType_$Impl_$.PartialRight=2,alphaTab_rendering_glyphs_VoiceContainerGlyph.KeySizeBeat="Beat",alphaTab_rendering_glyphs_WhammyBarGlyph.WhammyMaxOffset=60,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.None=0,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.Title=1,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.SubTitle=2,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.Artist=4,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.Album=8,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.Words=16,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.Music=32,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.WordsAndMusic=64,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.Copyright=128,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.PageNumber=256,alphaTab_rendering_layout__$HeaderFooterElements_HeaderFooterElements_$Impl_$.All=511,alphaTab_rendering_staves_BarLayoutingInfo.MinDuration=30,alphaTab_rendering_staves_BarLayoutingInfo.MinDurationWidth=10,alphaTab_rendering_staves_StaveGroup.AccoladeLabelSpacing=10,alphaTab_rendering_utils_AccidentalHelper.KeySignatureLookup=[[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]],alphaTab_rendering_utils_AccidentalHelper.AccidentalNotes=[!1,!0,!1,!0,!1,!1,!0,!1,!0,!1,!0,!1],alphaTab_rendering_utils_AccidentalHelper.StepsPerOctave=7,alphaTab_rendering_utils_AccidentalHelper.OctaveSteps=[40,34,32,28,40],alphaTab_rendering_utils_AccidentalHelper.SharpNoteSteps=[0,0,1,1,2,3,3,4,4,5,5,6],alphaTab_rendering_utils_AccidentalHelper.FlatNoteSteps=[0,1,1,2,2,3,4,4,5,5,6,6],alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.Up=0,alphaTab_rendering_utils__$BeamDirection_BeamDirection_$Impl_$.Down=1,alphaTab_rendering_utils_BeamingHelper.ScoreMiddleKeys=[60,60,57,50,71],alphaTab_rendering_utils_PercussionMapper.ElementVariationToMidi=[[35,35,35],[38,38,37],[56,56,56],[56,56,56],[56,56,56],[41,41,41],[43,43,43],[45,45,45],[47,47,47],[48,48,48],[42,46,46],[44,44,44],[49,49,49],[57,57,57],[55,55,55],[51,59,53],[52,52,52]],alphaTab_util__$LogLevel_LogLevel_$Impl_$.None=0,alphaTab_util__$LogLevel_LogLevel_$Impl_$.Debug=1,alphaTab_util__$LogLevel_LogLevel_$Impl_$.Info=2,alphaTab_util__$LogLevel_LogLevel_$Impl_$.Warning=3,alphaTab_util__$LogLevel_LogLevel_$Impl_$.Error=4,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.None=0,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.Element=1,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.Attribute=2,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.Text=3,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.CDATA=4,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.EntityReference=5,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.Entity=6,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.ProcessingInstruction=7,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.Comment=8,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.Document=9,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.DocumentType=10,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.DocumentFragment=11,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.Notation=12,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.Whitespace=13,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.SignificantWhitespace=14,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.EndElement=15,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.EndEntity=16,alphaTab_xml__$XmlNodeType_XmlNodeType_$Impl_$.XmlDeclaration=17,alphaTab_xml_XmlParser.CharCodeLF=10,alphaTab_xml_XmlParser.CharCodeTab=9,alphaTab_xml_XmlParser.CharCodeCR=13,alphaTab_xml_XmlParser.CharCodeSpace=32,alphaTab_xml_XmlParser.CharCodeLowerThan=60,alphaTab_xml_XmlParser.CharCodeAmp=38,alphaTab_xml_XmlParser.CharCodeBrackedClose=93,alphaTab_xml_XmlParser.CharCodeBrackedOpen=91,alphaTab_xml_XmlParser.CharCodeGreaterThan=62,alphaTab_xml_XmlParser.CharCodeExclamation=33,alphaTab_xml_XmlParser.CharCodeUpperD=68,alphaTab_xml_XmlParser.CharCodeLowerD=100,alphaTab_xml_XmlParser.CharCodeMinus=45,alphaTab_xml_XmlParser.CharCodeQuestion=63,alphaTab_xml_XmlParser.CharCodeSlash=47,alphaTab_xml_XmlParser.CharCodeEquals=61,alphaTab_xml_XmlParser.CharCodeDoubleQuote=34,alphaTab_xml_XmlParser.CharCodeSingleQuote=39,alphaTab_xml_XmlParser.CharCodeSharp=35,alphaTab_xml_XmlParser.CharCodeLowerX=120,alphaTab_xml_XmlParser.CharCodeLowerA=97,alphaTab_xml_XmlParser.CharCodeLowerZ=122,alphaTab_xml_XmlParser.CharCodeUpperA=65,alphaTab_xml_XmlParser.CharCodeUpperZ=90,alphaTab_xml_XmlParser.CharCode0=48,alphaTab_xml_XmlParser.CharCode9=48,alphaTab_xml_XmlParser.CharCodeColon=58,alphaTab_xml_XmlParser.CharCodeDot=46,alphaTab_xml_XmlParser.CharCodeUnderscore=95,alphaTab_xml_XmlParser_$XmlState.IGNORE_SPACES=0,alphaTab_xml_XmlParser_$XmlState.BEGIN=1,alphaTab_xml_XmlParser_$XmlState.BEGIN_NODE=2,alphaTab_xml_XmlParser_$XmlState.TAG_NAME=3,alphaTab_xml_XmlParser_$XmlState.BODY=4,alphaTab_xml_XmlParser_$XmlState.ATTRIB_NAME=5,alphaTab_xml_XmlParser_$XmlState.EQUALS=6,alphaTab_xml_XmlParser_$XmlState.ATTVAL_BEGIN=7,alphaTab_xml_XmlParser_$XmlState.ATTRIB_VAL=8,alphaTab_xml_XmlParser_$XmlState.CHILDS=9,alphaTab_xml_XmlParser_$XmlState.CLOSE=10,alphaTab_xml_XmlParser_$XmlState.WAIT_END=11,alphaTab_xml_XmlParser_$XmlState.WAIT_END_RET=12,alphaTab_xml_XmlParser_$XmlState.PCDATA=13,alphaTab_xml_XmlParser_$XmlState.HEADER=14,alphaTab_xml_XmlParser_$XmlState.COMMENT=15,alphaTab_xml_XmlParser_$XmlState.DOCTYPE=16,alphaTab_xml_XmlParser_$XmlState.CDATA=17,alphaTab_xml_XmlParser_$XmlState.ESCAPE=18,js_html_compat_Uint8Array.BYTES_PER_ELEMENT=1,alphaTab_Main.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);